{"ast":null,"code":"import React, { useRef, useCallback, useState, useEffect } from 'react';\nimport { faFileWord, faFileExcel, faFilePowerpoint, faFileArchive, faFileCode, faFilePdf, faFile, faFileAudio, faFileVideo, faFileImage, faFileAlt } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport BigFileIcon, { defaultStyles } from 'react-file-icon';\nimport Dropzone from 'react-dropzone';\nimport loadImage from 'blueimp-load-image';\n/**\n * An icon of a paperclip, which is used as the default icon for FileUploadButton\n */\n\nvar AttachmentIcon = function AttachmentIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"20\",\n    viewBox: \"0 0 24 24\"\n  }, React.createElement(\"path\", {\n    d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 0 1 5 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5a2.5 2.5 0 0 0 5 0V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n} // Partially based on:\n// https://stackoverflow.com/a/4212908/2570866\n\n\nvar wordMimeTypes = [// Microsoft Word\n// .doc .dot\n'application/msword', // .doc .dot\n'application/msword-template', // .docx\n'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // .dotx (no test)\n'application/vnd.openxmlformats-officedocument.wordprocessingml.template', // .docm\n'application/vnd.ms-word.document.macroEnabled.12', // .dotm (no test)\n'application/vnd.ms-word.template.macroEnabled.12', // LibreOffice/OpenOffice Writer\n// .odt\n'application/vnd.oasis.opendocument.text', // .ott\n'application/vnd.oasis.opendocument.text-template', // .fodt\n'application/vnd.oasis.opendocument.text-flat-xml' // .uot\n// NOTE: firefox doesn't know mimetype so maybe ignore\n];\nvar excelMimeTypes = [// .csv\n'text/csv', // TODO: maybe more data files\n// Microsoft Excel\n// .xls .xlt .xla (no test for .xla)\n'application/vnd.ms-excel', // .xlsx\n'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xltx (no test)\n'application/vnd.openxmlformats-officedocument.spreadsheetml.template', // .xlsm\n'application/vnd.ms-excel.sheet.macroEnabled.12', // .xltm (no test)\n'application/vnd.ms-excel.template.macroEnabled.12', // .xlam (no test)\n'application/vnd.ms-excel.addin.macroEnabled.12', // .xlsb (no test)\n'application/vnd.ms-excel.addin.macroEnabled.12', // LibreOffice/OpenOffice Calc\n// .ods\n'application/vnd.oasis.opendocument.spreadsheet', // .ots\n'application/vnd.oasis.opendocument.spreadsheet-template', // .fods\n'application/vnd.oasis.opendocument.spreadsheet-flat-xml' // .uos\n// NOTE: firefox doesn't know mimetype so maybe ignore\n];\nvar powerpointMimeTypes = [// Microsoft Word\n// .ppt .pot .pps .ppa (no test for .ppa)\n'application/vnd.ms-powerpoint', // .pptx\n'application/vnd.openxmlformats-officedocument.presentationml.presentation', // .potx (no test)\n'application/vnd.openxmlformats-officedocument.presentationml.template', // .ppsx\n'application/vnd.openxmlformats-officedocument.presentationml.slideshow', // .ppam\n'application/vnd.ms-powerpoint.addin.macroEnabled.12', // .pptm\n'application/vnd.ms-powerpoint.presentation.macroEnabled.12', // .potm\n'application/vnd.ms-powerpoint.template.macroEnabled.12', // .ppsm\n'application/vnd.ms-powerpoint.slideshow.macroEnabled.12', // LibreOffice/OpenOffice Writer\n// .odp\n'application/vnd.oasis.opendocument.presentation', // .otp\n'application/vnd.oasis.opendocument.presentation-template', // .fodp\n'application/vnd.oasis.opendocument.presentation-flat-xml' // .uop\n// NOTE: firefox doesn't know mimetype so maybe ignore\n];\nvar archiveFileTypes = [// .zip\n'application/zip', // .z7\n'application/x-7z-compressed', // .ar\n'application/x-archive', // .tar\n'application/x-tar', // .tar.gz\n'application/gzip', // .tar.Z\n'application/x-compress', // .tar.bz2\n'application/x-bzip', // .tar.lz\n'application/x-lzip', // .tar.lz4\n'application/x-lz4', // .tar.lzma\n'application/x-lzma', // .tar.lzo (no test)\n'application/x-lzop', // .tar.xz\n'application/x-xz', // .war\n'application/x-webarchive', // .rar\n'application/vnd.rar'];\nvar codeFileTypes = [// .html .htm\n'text/html', // .css\n'text/css', // .js\n'application/x-javascript', // .json\n'application/json', // .py\n'text/x-python', // .go\n'text/x-go', // .c\n'text/x-csrc', // .cpp\n'text/x-c++src', // .rb\n'application/x-ruby', // .rust\n'text/rust', // .java\n'text/x-java', // .php\n'application/x-php', // .cs\n'text/x-csharp', // .scala\n'text/x-scala', // .erl\n'text/x-erlang', // .sh\n'application/x-shellscript'];\nvar mimeTypeToIconMap = {\n  'application/pdf': faFilePdf\n};\nvar mimeTypeToFallBackStyle = {\n  'application/pdf': defaultStyles.pdf\n};\n\nfor (var _i = 0, wordMimeTypes_1 = wordMimeTypes; _i < wordMimeTypes_1.length; _i++) {\n  var type = wordMimeTypes_1[_i];\n  mimeTypeToIconMap[type] = faFileWord;\n  mimeTypeToFallBackStyle[type] = {\n    type: 'document'\n  };\n}\n\nfor (var _a = 0, excelMimeTypes_1 = excelMimeTypes; _a < excelMimeTypes_1.length; _a++) {\n  var type = excelMimeTypes_1[_a];\n  mimeTypeToIconMap[type] = faFileExcel;\n  mimeTypeToFallBackStyle[type] = {\n    type: 'spreadsheet'\n  };\n}\n\nfor (var _b = 0, powerpointMimeTypes_1 = powerpointMimeTypes; _b < powerpointMimeTypes_1.length; _b++) {\n  var type = powerpointMimeTypes_1[_b];\n  mimeTypeToIconMap[type] = faFilePowerpoint;\n  mimeTypeToFallBackStyle[type] = {\n    type: 'presentation'\n  };\n}\n\nfor (var _c = 0, archiveFileTypes_1 = archiveFileTypes; _c < archiveFileTypes_1.length; _c++) {\n  var type = archiveFileTypes_1[_c];\n  mimeTypeToIconMap[type] = faFileArchive;\n  mimeTypeToFallBackStyle[type] = {\n    type: 'compressed'\n  };\n}\n\nfor (var _d = 0, codeFileTypes_1 = codeFileTypes; _d < codeFileTypes_1.length; _d++) {\n  var type = codeFileTypes_1[_d];\n  mimeTypeToIconMap[type] = faFileCode;\n  mimeTypeToFallBackStyle[type] = {\n    type: 'code'\n  };\n}\n\nfunction mimeTypeToIcon(mimeType) {\n  if (mimeType == null) {\n    return faFile;\n  }\n\n  var icon = mimeTypeToIconMap[mimeType];\n\n  if (icon) {\n    return icon;\n  }\n\n  if (mimeType.startsWith('audio/')) {\n    return faFileAudio;\n  }\n\n  if (mimeType.startsWith('video/')) {\n    return faFileVideo;\n  }\n\n  if (mimeType.startsWith('image/')) {\n    return faFileImage;\n  }\n\n  if (mimeType.startsWith('text/')) {\n    return faFileAlt;\n  }\n\n  return faFile;\n}\n\nfunction mimeTypeToStyle(mimeType) {\n  if (mimeType == null) {\n    return {};\n  }\n\n  var style = mimeTypeToFallBackStyle[mimeType];\n\n  if (style) {\n    return style;\n  }\n\n  if (mimeType.startsWith('audio/')) {\n    return {\n      type: 'audio'\n    };\n  }\n\n  if (mimeType.startsWith('video/')) {\n    return {\n      type: 'video'\n    };\n  }\n\n  if (mimeType.startsWith('image/')) {\n    return {\n      type: 'image'\n    };\n  }\n\n  if (mimeType.startsWith('text/')) {\n    return {\n      type: 'document'\n    };\n  }\n\n  return {};\n}\n\nfunction fileExtension(filename) {\n  var _a, _b;\n\n  var defaultReturn = {\n    full: '',\n    end: ''\n  };\n\n  if (filename == null) {\n    return defaultReturn;\n  } // source: https://stackoverflow.com/a/1203361/2570866\n\n\n  var a = filename.split('.');\n\n  if (a.length === 1 || a[0] === '' && a.length === 2) {\n    return defaultReturn;\n  }\n\n  var lastExtension = (_a = a.pop()) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n\n  if (a.length === 1 || a[0] === '' && a.length === 2) {\n    return {\n      end: lastExtension,\n      full: lastExtension\n    };\n  }\n\n  var secondToLastExtension = (_b = a.pop()) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n\n  if (secondToLastExtension !== 'tar') {\n    return {\n      end: lastExtension,\n      full: lastExtension\n    };\n  }\n\n  return {\n    full: secondToLastExtension + '.' + lastExtension,\n    end: lastExtension\n  };\n}\n\nvar FileIcon = function FileIcon(_a) {\n  var _b = _a.big,\n      big = _b === void 0 ? false : _b,\n      _c = _a.size,\n      size = _c === void 0 ? 50 : _c,\n      filename = _a.filename,\n      mimeType = _a.mimeType;\n\n  if (big) {\n    var extension = fileExtension(filename);\n    var style = extension.end && defaultStyles[extension.end];\n\n    if (!style) {\n      style = mimeTypeToStyle(style);\n    } // @ts-expect-error types for file-icon are for newer version, which doesn't have a default export\n\n\n    return React.createElement(BigFileIcon, _assign({\n      extension: extension.full\n    }, style, {\n      size: size\n    }));\n  }\n\n  return React.createElement(FontAwesomeIcon, {\n    className: \"rfu-file-icon--small\",\n    icon: mimeTypeToIcon(mimeType)\n  });\n};\n\nvar LoadingIndicator = function LoadingIndicator(props) {\n  var _a = props.size,\n      size = _a === void 0 ? 20 : _a,\n      _b = props.width,\n      width = _b === void 0 ? 2 : _b,\n      backgroundColor = props.backgroundColor,\n      color = props.color;\n  return React.createElement(\"div\", {\n    className: \"rfu-loading-indicator__spinner\",\n    style: {\n      margin: '0 auto',\n      borderColor: backgroundColor ? backgroundColor : '',\n      borderTopColor: color ? color : '',\n      width: size ? size : '',\n      height: size ? size : '',\n      borderWidth: width ? width : ''\n    }\n  });\n};\n/**\n * Component that displays files which are being uploaded\n */\n\n\nvar FilePreviewer = function FilePreviewer(_a) {\n  var uploads = _a.uploads,\n      handleRemove = _a.handleRemove,\n      handleRetry = _a.handleRetry;\n  return React.createElement(\"div\", {\n    className: \"rfu-file-previewer\"\n  }, React.createElement(\"ol\", null, uploads && uploads.map(function (upload) {\n    return React.createElement(\"li\", {\n      key: upload.id,\n      className: \"rfu-file-previewer__file \" + (upload.state === 'uploading' ? 'rfu-file-previewer__file--uploading' : '') + \" \" + (upload.state === 'failed' ? 'rfu-file-previewer__file--failed' : '')\n    }, React.createElement(FileIcon, {\n      mimeType: upload.file.type,\n      filename: upload.file.name\n    }), React.createElement(\"a\", {\n      href: upload.url,\n      download: true\n    }, upload.file.name, upload.state === 'failed' && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"rfu-file-previewer__failed\",\n      onClick: handleRetry && function () {\n        return handleRetry(upload.id);\n      }\n    }, \"failed\"), React.createElement(\"div\", {\n      className: \"rfu-file-previewer__retry\",\n      onClick: handleRetry && function () {\n        return handleRetry(upload.id);\n      }\n    }, \"retry\"))), React.createElement(\"span\", {\n      className: \"rfu-file-previewer__close-button\",\n      onClick: handleRemove && function () {\n        return handleRemove(upload.id);\n      }\n    }, \"\\u2718\"), upload.state === 'uploading' && React.createElement(\"div\", {\n      className: \"rfu-file-previewer__loading-indicator\"\n    }, React.createElement(LoadingIndicator, null)));\n  })));\n};\n\nvar FileUploadButton = function FileUploadButton(_a) {\n  var _b = _a.disabled,\n      disabled = _b === void 0 ? false : _b,\n      _c = _a.multiple,\n      multiple = _c === void 0 ? false : _c,\n      _d = _a.children,\n      children = _d === void 0 ? React.createElement(AttachmentIcon, null) : _d,\n      handleFiles = _a.handleFiles,\n      accepts = _a.accepts;\n  var inputRef = useRef(null);\n  var className = 'rfu-file-upload-button';\n\n  if (disabled) {\n    className = className + \" rfu-file-upload-button--disabled\";\n  }\n\n  return React.createElement(\"div\", {\n    className: className\n  }, React.createElement(\"label\", null, React.createElement(\"input\", {\n    type: \"file\",\n    ref: inputRef,\n    className: \"rfu-file-input\",\n    onChange: function onChange(event) {\n      var files = event.currentTarget.files;\n\n      if (files) {\n        handleFiles(files);\n      }\n\n      if (inputRef.current !== null) {\n        inputRef.current.value = '';\n        inputRef.current.blur();\n      }\n    },\n    multiple: multiple,\n    disabled: disabled,\n    accept: Array.isArray(accepts) ? accepts.join(',') : accepts\n  }), children));\n};\n/**\n * This is simply a button wrapper, add's a div with `role=\"button\"` and a onClick\n */\n\n\nvar IconButton = function IconButton(_a) {\n  var onClick = _a.onClick,\n      children = _a.children;\n  return React.createElement(\"div\", {\n    className: \"rfu-icon-button\",\n    role: \"button\",\n    onClick: onClick\n  }, children);\n};\n\nvar ImageDropzone = function ImageDropzone(_a) {\n  var handleFiles = _a.handleFiles,\n      maxNumberOfFiles = _a.maxNumberOfFiles,\n      children = _a.children,\n      accept = _a.accept,\n      multiple = _a.multiple,\n      disabled = _a.disabled;\n  var handleDrop = useCallback(function (accepted) {\n    if (!handleFiles) {\n      return;\n    }\n\n    if (accepted && accepted.length) {\n      handleFiles(accepted);\n    }\n  }, [handleFiles]);\n  return React.createElement(Dropzone, {\n    onDrop: handleDrop,\n    maxFiles: maxNumberOfFiles,\n    accept: accept,\n    multiple: multiple,\n    disabled: disabled\n  }, function (_a) {\n    var getRootProps = _a.getRootProps,\n        isDragAccept = _a.isDragAccept,\n        isDragReject = _a.isDragReject;\n    return React.createElement(\"div\", _assign({}, getRootProps({\n      style: {\n        position: 'relative'\n      },\n      className: \"\\n          rfu-dropzone\\n          \" + (isDragAccept ? 'rfu-dropzone--accept' : '') + \"\\n          \" + (isDragReject ? 'rfu-dropzone--reject' : '') + \"\\n        \"\n    })), React.createElement(\"div\", {\n      className: \"rfu-dropzone__notifier\"\n    }, React.createElement(\"div\", {\n      className: \"rfu-dropzone__inner\"\n    }, React.createElement(\"svg\", {\n      width: \"41\",\n      height: \"41\",\n      viewBox: \"0 0 41 41\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, React.createElement(\"path\", {\n      d: \"M40.517 28.002V3.997c0-2.197-1.808-3.992-4.005-3.992H12.507a4.004 4.004 0 0 0-3.992 3.993v24.004a4.004 4.004 0 0 0 3.992 3.993h24.005c2.197 0 4.005-1.795 4.005-3.993zm-22.002-7.997l4.062 5.42 5.937-7.423 7.998 10H12.507l6.008-7.997zM.517 8.003V36c0 2.198 1.795 4.005 3.993 4.005h27.997V36H4.51V8.002H.517z\",\n      fill: \"#000\",\n      fillRule: \"nonzero\"\n    })), React.createElement(\"p\", null, \"Drag your files here to add to your post\"))), children);\n  });\n};\n\nvar placeholder = \"data:image/png;base64,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\";\nvar svg = '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n\nvar Thumbnail = function Thumbnail(props) {\n  var id = props.id,\n      image = props.image,\n      _a = props.size,\n      size = _a === void 0 ? 100 : _a,\n      handleClose = props.handleClose;\n\n  var _b = useState(null),\n      imgSrc = _b[0],\n      setImgSrc = _b[1];\n\n  useEffect(function () {\n    if (!imgSrc && image) {\n      /**\n      if the file is already uploaded we don't need to process the image\n      we check to see if it's base64 string or a url\n      */\n      if (!image.indexOf('data:')) {\n        return setImgSrc(image);\n      }\n\n      loadImage(image, function (img) {\n        if (!('toDataURL' in img)) return;\n        var base64data = img.toDataURL('image/jpeg');\n        setImgSrc(base64data);\n      }, {\n        orientation: true,\n        crossOrigin: 'anonymous',\n        meta: true\n      });\n    }\n  }, [imgSrc, image]);\n  var onClose = useCallback(function () {\n    if (handleClose) {\n      handleClose(id);\n    }\n  }, [id, handleClose]);\n  return React.createElement(\"div\", {\n    className: \"rfu-thumbnail__wrapper\",\n    style: {\n      width: size,\n      height: size\n    }\n  }, React.createElement(\"div\", {\n    className: \"rfu-thumbnail__overlay\"\n  }, handleClose ? React.createElement(IconButton, {\n    onClick: onClose\n  }, React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: svg\n    }\n  })) : null), React.createElement(\"img\", {\n    src: imgSrc || image || placeholder,\n    className: \"rfu-thumbnail__image\",\n    alt: \"\"\n  }));\n};\n/**\n * An icon of a picture, which is used as the default icon for ImageUploadButton\n */\n\n\nvar PictureIcon = function PictureIcon() {\n  return React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm3 2a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM2 16v2h16v-6l-3-3-6 6-3-3-4 4z\",\n    fillRule: \"nonzero\"\n  }));\n};\n\nvar ImageUploadButton = function ImageUploadButton(props) {\n  var _a = props.multiple,\n      multiple = _a === void 0 ? false : _a,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      handleFiles = props.handleFiles,\n      _c = props.children,\n      children = _c === void 0 ? React.createElement(PictureIcon, null) : _c;\n  return React.createElement(\"div\", {\n    className: \"rfu-image-upload-button\"\n  }, React.createElement(\"label\", null, React.createElement(\"input\", {\n    type: \"file\",\n    className: \"rfu-image-input\",\n    onChange: function onChange(event) {\n      var files = event.currentTarget.files;\n\n      if (files) {\n        handleFiles(Array.from(files));\n      }\n    },\n    accept: \"image/*\",\n    multiple: multiple,\n    disabled: disabled\n  }), children));\n};\n\nvar ThumbnailPlaceholder = function ThumbnailPlaceholder(props) {\n  var _a = props.multiple,\n      multiple = _a === void 0 ? false : _a,\n      handleFiles = props.handleFiles;\n  return React.createElement(ImageUploadButton, {\n    handleFiles: handleFiles,\n    multiple: multiple\n  }, React.createElement(\"div\", {\n    role: \"button\",\n    className: \"rfu-thumbnail-placeholder\"\n  }, React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"15\",\n    viewBox: \"0 0 14 15\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M14 8.998H8v6H6v-6H0v-2h6v-6h2v6h6z\",\n    fill: \"#A0B2B8\",\n    fillRule: \"nonzero\"\n  }))));\n};\n\nvar ImagePreviewer = function ImagePreviewer(props) {\n  var _a = props.multiple,\n      multiple = _a === void 0 ? true : _a,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      imageUploads = props.imageUploads,\n      handleRemove = props.handleRemove,\n      handleRetry = props.handleRetry,\n      handleFiles = props.handleFiles;\n  var onClose = useCallback(function (id) {\n    if (handleRemove) {\n      if (id == null) {\n        console.warn(\"id of closed image was undefined, this shouldn't happen\");\n        return;\n      }\n\n      handleRemove(id);\n    }\n  }, [handleRemove]);\n  return React.createElement(\"div\", {\n    className: \"rfu-image-previewer\"\n  }, imageUploads === null || imageUploads === void 0 ? void 0 : imageUploads.map(function (image) {\n    var url = image.url || image.previewUri;\n    return React.createElement(\"div\", {\n      key: image.id,\n      className: \"rfu-image-previewer__image\" + (image.state === 'finished' ? ' rfu-image-previewer__image--loaded' : '')\n    }, image.state === 'failed' && React.createElement(\"div\", {\n      className: \"rfu-image-previewer__retry\",\n      dangerouslySetInnerHTML: {\n        __html: '<svg width=\"22\" height=\"20\" viewBox=\"0 0 22 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 5.535V2a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h3.638l-2.975-2.653a8 8 0 1 0 1.884 8.32 1 1 0 1 1 1.886.666A10 10 0 1 1 5.175 1.245c3.901-2.15 8.754-1.462 11.88 1.667L20 5.535z\" fill=\"#FFF\" fill-rule=\"nonzero\"/></svg>'\n      },\n      onClick: handleRetry && function () {\n        return handleRetry(image.id);\n      }\n    }), url !== undefined && React.createElement(Thumbnail, {\n      handleClose: onClose,\n      image: url,\n      id: image.id\n    }), image.state === 'uploading' && React.createElement(LoadingIndicator, {\n      backgroundColor: \"rgba(255,255,255,0.1)\",\n      color: \"rgba(255,255,255,0.7)\"\n    }));\n  }), handleFiles && !disabled && React.createElement(ThumbnailPlaceholder, {\n    handleFiles: handleFiles,\n    multiple: multiple\n  }));\n};\n\nfunction dataTransferItemsHaveFiles(items) {\n  if (!items || !items.length) {\n    return false;\n  }\n\n  for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n    var item = items_1[_i];\n\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getFileLikes(items) {\n  var fileLikes = [];\n\n  for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n    var item = items_2[_i];\n\n    if (item.kind === 'file') {\n      var file = item.getAsFile();\n\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n\n  return fileLikes;\n}\n\nfunction getImageSource(fileLikes, src) {\n  return __awaiter(this, void 0, void 0, function () {\n    var res, e_1, contentType, buf, blob;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n\n          return [4\n          /*yield*/\n          , fetch(src)];\n\n        case 1:\n          res = _a.sent();\n          return [3\n          /*break*/\n          , 3];\n\n        case 2:\n          e_1 = _a.sent();\n          return [2\n          /*return*/\n          ];\n\n        case 3:\n          contentType = res.headers.get('Content-type') || 'application/octet-stream';\n          return [4\n          /*yield*/\n          , res.arrayBuffer()];\n\n        case 4:\n          buf = _a.sent();\n          blob = new Blob([buf], {\n            type: contentType\n          });\n          fileLikes.push(blob);\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\n\nvar extractImageSources = function extractImageSources(s) {\n  var imageTags = new DOMParser().parseFromString(s, 'text/html').getElementsByTagName('img');\n  return Array.from(imageTags, function (tag) {\n    return tag.src;\n  }).filter(function (tag) {\n    return tag;\n  });\n};\n\nfunction dataTransferItemsToFiles(items) {\n  return __awaiter(this, void 0, void 0, function () {\n    var fileLikes, blobPromises, _loop_1, _i, items_3, item;\n\n    var _this = this;\n\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (!items || !items.length) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          fileLikes = getFileLikes(items);\n\n          if (fileLikes.length) {\n            return [2\n            /*return*/\n            , fileLikes];\n          }\n\n          blobPromises = [];\n\n          _loop_1 = function _loop_1(item) {\n            if (item.type === 'text/html') {\n              blobPromises.push(new Promise(function (accept) {\n                item.getAsString(function (s) {\n                  return __awaiter(_this, void 0, void 0, function () {\n                    var imagePromises;\n                    return __generator(this, function (_a) {\n                      switch (_a.label) {\n                        case 0:\n                          imagePromises = extractImageSources(s).map(function (src) {\n                            return getImageSource(fileLikes, src);\n                          });\n                          return [4\n                          /*yield*/\n                          , Promise.all(imagePromises)];\n\n                        case 1:\n                          _a.sent();\n\n                          accept();\n                          return [2\n                          /*return*/\n                          ];\n                      }\n                    });\n                  });\n                });\n              }));\n            }\n          };\n\n          for (_i = 0, items_3 = items; _i < items_3.length; _i++) {\n            item = items_3[_i];\n\n            _loop_1(item);\n          }\n\n          return [4\n          /*yield*/\n          , Promise.all(blobPromises)];\n\n        case 1:\n          _a.sent();\n\n          return [2\n          /*return*/\n          , fileLikes];\n      }\n    });\n  });\n}\n\nexport { AttachmentIcon, FileIcon, FilePreviewer, FileUploadButton, IconButton, ImageDropzone, ImagePreviewer, ImageUploadButton, LoadingIndicator, PictureIcon, Thumbnail, ThumbnailPlaceholder, dataTransferItemsHaveFiles, dataTransferItemsToFiles };","map":{"version":3,"sources":["../src/components/AttachmentIcon.tsx","../node_modules/tslib/tslib.es6.js","../src/components/FileIcon.tsx","../src/components/LoadingIndicator.tsx","../src/components/FilePreviewer.tsx","../src/components/FileUploadButton.tsx","../src/components/IconButton.tsx","../src/components/ImageDropzone.tsx","../src/images/placeholder-generic.png","../src/components/Thumbnail.tsx","../src/components/PictureIcon.tsx","../src/components/ImageUploadButton.tsx","../src/components/ThumbnailPlaceholder.tsx","../src/components/ImagePreviewer.tsx","../src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\n/**\n * An icon of a paperclip, which is used as the default icon for FileUploadButton\n */\nexport const AttachmentIcon: React.FC = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"20\"\n    viewBox=\"0 0 24 24\"\n  >\n    <path d=\"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 0 1 5 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5a2.5 2.5 0 0 0 5 0V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\" />\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n  </svg>\n);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n  faFileWord,\n  faFileExcel,\n  faFilePowerpoint,\n  faFileArchive,\n  faFileCode,\n  faFileAudio,\n  faFileVideo,\n  faFileImage,\n  faFilePdf,\n  faFileAlt,\n  faFile,\n  IconDefinition,\n} from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React from 'react';\nimport {\n  default as BigFileIcon,\n  defaultStyles,\n  DefaultExtensionType,\n  FileIconProps as ReactFileIconProps,\n} from 'react-file-icon';\n\nexport type FileIconProps = {\n  filename?: string;\n  mimeType?: string;\n  big?: boolean;\n  // Size used for big icon\n  size?: number;\n};\n\n// Partially based on:\n// https://stackoverflow.com/a/4212908/2570866\n\nconst wordMimeTypes = [\n  // Microsoft Word\n  // .doc .dot\n  'application/msword',\n  // .doc .dot\n  'application/msword-template',\n  // .docx\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  // .dotx (no test)\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n  // .docm\n  'application/vnd.ms-word.document.macroEnabled.12',\n  // .dotm (no test)\n  'application/vnd.ms-word.template.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Writer\n  // .odt\n  'application/vnd.oasis.opendocument.text',\n  // .ott\n  'application/vnd.oasis.opendocument.text-template',\n  // .fodt\n  'application/vnd.oasis.opendocument.text-flat-xml',\n  // .uot\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst excelMimeTypes = [\n  // .csv\n  'text/csv',\n  // TODO: maybe more data files\n\n  // Microsoft Excel\n  // .xls .xlt .xla (no test for .xla)\n  'application/vnd.ms-excel',\n  // .xlsx\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  // .xltx (no test)\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n  // .xlsm\n  'application/vnd.ms-excel.sheet.macroEnabled.12',\n  // .xltm (no test)\n  'application/vnd.ms-excel.template.macroEnabled.12',\n  // .xlam (no test)\n  'application/vnd.ms-excel.addin.macroEnabled.12',\n  // .xlsb (no test)\n  'application/vnd.ms-excel.addin.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Calc\n  // .ods\n  'application/vnd.oasis.opendocument.spreadsheet',\n  // .ots\n  'application/vnd.oasis.opendocument.spreadsheet-template',\n  // .fods\n  'application/vnd.oasis.opendocument.spreadsheet-flat-xml',\n  // .uos\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst powerpointMimeTypes = [\n  // Microsoft Word\n  // .ppt .pot .pps .ppa (no test for .ppa)\n  'application/vnd.ms-powerpoint',\n  // .pptx\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  // .potx (no test)\n  'application/vnd.openxmlformats-officedocument.presentationml.template',\n  // .ppsx\n  'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n  // .ppam\n  'application/vnd.ms-powerpoint.addin.macroEnabled.12',\n  // .pptm\n  'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\n  // .potm\n  'application/vnd.ms-powerpoint.template.macroEnabled.12',\n  // .ppsm\n  'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Writer\n  // .odp\n  'application/vnd.oasis.opendocument.presentation',\n  // .otp\n  'application/vnd.oasis.opendocument.presentation-template',\n  // .fodp\n  'application/vnd.oasis.opendocument.presentation-flat-xml',\n  // .uop\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst archiveFileTypes = [\n  // .zip\n  'application/zip',\n  // .z7\n  'application/x-7z-compressed',\n  // .ar\n  'application/x-archive',\n  // .tar\n  'application/x-tar',\n  // .tar.gz\n  'application/gzip',\n  // .tar.Z\n  'application/x-compress',\n  // .tar.bz2\n  'application/x-bzip',\n  // .tar.lz\n  'application/x-lzip',\n  // .tar.lz4\n  'application/x-lz4',\n  // .tar.lzma\n  'application/x-lzma',\n  // .tar.lzo (no test)\n  'application/x-lzop',\n  // .tar.xz\n  'application/x-xz',\n  // .war\n  'application/x-webarchive',\n  // .rar\n  'application/vnd.rar',\n];\n\nconst codeFileTypes = [\n  // .html .htm\n  'text/html',\n  // .css\n  'text/css',\n  // .js\n  'application/x-javascript',\n  // .json\n  'application/json',\n  // .py\n  'text/x-python',\n  // .go\n  'text/x-go',\n  // .c\n  'text/x-csrc',\n  // .cpp\n  'text/x-c++src',\n  // .rb\n  'application/x-ruby',\n  // .rust\n  'text/rust',\n  // .java\n  'text/x-java',\n  // .php\n  'application/x-php',\n  // .cs\n  'text/x-csharp',\n  // .scala\n  'text/x-scala',\n  // .erl\n  'text/x-erlang',\n  // .sh\n  'application/x-shellscript',\n];\n\nconst mimeTypeToIconMap: { [key: string]: IconDefinition } = {\n  'application/pdf': faFilePdf,\n};\n\nconst mimeTypeToFallBackStyle: {\n  [key: string]: Partial<BigFileIcon.FileIconProps>;\n} = {\n  'application/pdf': defaultStyles.pdf,\n};\n\nfor (const type of wordMimeTypes) {\n  mimeTypeToIconMap[type] = faFileWord;\n  mimeTypeToFallBackStyle[type] = { type: 'document' };\n}\n\nfor (const type of excelMimeTypes) {\n  mimeTypeToIconMap[type] = faFileExcel;\n  mimeTypeToFallBackStyle[type] = { type: 'spreadsheet' };\n}\n\nfor (const type of powerpointMimeTypes) {\n  mimeTypeToIconMap[type] = faFilePowerpoint;\n  mimeTypeToFallBackStyle[type] = { type: 'presentation' };\n}\n\nfor (const type of archiveFileTypes) {\n  mimeTypeToIconMap[type] = faFileArchive;\n  mimeTypeToFallBackStyle[type] = { type: 'compressed' };\n}\n\nfor (const type of codeFileTypes) {\n  mimeTypeToIconMap[type] = faFileCode;\n  mimeTypeToFallBackStyle[type] = { type: 'code' };\n}\n\nfunction mimeTypeToIcon(mimeType?: string) {\n  if (mimeType == null) {\n    return faFile;\n  }\n\n  const icon = mimeTypeToIconMap[mimeType];\n  if (icon) {\n    return icon;\n  }\n  if (mimeType.startsWith('audio/')) {\n    return faFileAudio;\n  }\n  if (mimeType.startsWith('video/')) {\n    return faFileVideo;\n  }\n  if (mimeType.startsWith('image/')) {\n    return faFileImage;\n  }\n  if (mimeType.startsWith('text/')) {\n    return faFileAlt;\n  }\n  return faFile;\n}\n\nfunction mimeTypeToStyle(mimeType?: string): Partial<ReactFileIconProps> {\n  if (mimeType == null) {\n    return {};\n  }\n\n  const style = mimeTypeToFallBackStyle[mimeType];\n  if (style) {\n    return style;\n  }\n  if (mimeType.startsWith('audio/')) {\n    return { type: 'audio' };\n  }\n  if (mimeType.startsWith('video/')) {\n    return { type: 'video' };\n  }\n  if (mimeType.startsWith('image/')) {\n    return { type: 'image' };\n  }\n  if (mimeType.startsWith('text/')) {\n    return { type: 'document' };\n  }\n  return {};\n}\n\nfunction fileExtension(filename?: string) {\n  const defaultReturn = {\n    full: '',\n    end: '',\n  };\n  if (filename == null) {\n    return defaultReturn;\n  }\n\n  // source: https://stackoverflow.com/a/1203361/2570866\n  const a = filename.split('.');\n  if (a.length === 1 || (a[0] === '' && a.length === 2)) {\n    return defaultReturn;\n  }\n  const lastExtension = a.pop()?.toLowerCase();\n  if (a.length === 1 || (a[0] === '' && a.length === 2)) {\n    return { end: lastExtension, full: lastExtension };\n  }\n  const secondToLastExtension = a.pop()?.toLowerCase();\n  if (secondToLastExtension !== 'tar') {\n    return { end: lastExtension, full: lastExtension };\n  }\n  return {\n    full: secondToLastExtension + '.' + lastExtension,\n    end: lastExtension,\n  };\n}\n\nexport const FileIcon: React.FC<FileIconProps> = ({\n  big = false,\n  size = 50,\n  filename,\n  mimeType,\n}) => {\n  if (big) {\n    const extension = fileExtension(filename);\n    let style =\n      extension.end && defaultStyles[extension.end as DefaultExtensionType];\n    if (!style) {\n      style = mimeTypeToStyle(style);\n    }\n    // @ts-expect-error types for file-icon are for newer version, which doesn't have a default export\n    return <BigFileIcon extension={extension.full} {...style} size={size} />;\n  }\n  return (\n    <FontAwesomeIcon\n      className=\"rfu-file-icon--small\"\n      icon={mimeTypeToIcon(mimeType)}\n    />\n  );\n};\n","import React from 'react';\n\nexport type LoadingIndicatorProps = {\n  color?: string;\n  backgroundColor?: string;\n  size?: number;\n  width?: number;\n};\n\nexport const LoadingIndicator: React.FC<LoadingIndicatorProps> = (props) => {\n  const { size = 20, width = 2, backgroundColor, color } = props;\n\n  return (\n    <div\n      className=\"rfu-loading-indicator__spinner\"\n      style={{\n        margin: '0 auto',\n        borderColor: backgroundColor ? backgroundColor : '',\n        borderTopColor: color ? color : '',\n        width: size ? size : '',\n        height: size ? size : '',\n        borderWidth: width ? width : '',\n      }}\n    />\n  );\n};\n","import React from 'react';\n\nimport { FileIcon } from './FileIcon';\nimport { LoadingIndicator } from './LoadingIndicator';\n\nimport type { FileUpload } from '../types';\n\nexport type FilePreviewerProps = {\n  uploads?: FileUpload[];\n  handleRemove?: (id: string) => void;\n  handleRetry?: (id: string) => void;\n  handleFiles?: (files: FileList) => void;\n};\n\n/**\n * Component that displays files which are being uploaded\n */\nexport const FilePreviewer: React.FC<FilePreviewerProps> = ({\n  uploads,\n  handleRemove,\n  handleRetry,\n}) => (\n  <div className=\"rfu-file-previewer\">\n    <ol>\n      {uploads &&\n        uploads.map((upload) => (\n          <li\n            key={upload.id}\n            className={`rfu-file-previewer__file ${\n              upload.state === 'uploading'\n                ? 'rfu-file-previewer__file--uploading'\n                : ''\n            } ${\n              upload.state === 'failed'\n                ? 'rfu-file-previewer__file--failed'\n                : ''\n            }`}\n          >\n            <FileIcon mimeType={upload.file.type} filename={upload.file.name} />\n\n            <a href={upload.url} download>\n              {upload.file.name}\n              {upload.state === 'failed' && (\n                <React.Fragment>\n                  <div\n                    className=\"rfu-file-previewer__failed\"\n                    onClick={handleRetry && (() => handleRetry(upload.id))}\n                  >\n                    failed\n                  </div>\n                  <div\n                    className=\"rfu-file-previewer__retry\"\n                    onClick={handleRetry && (() => handleRetry(upload.id))}\n                  >\n                    retry\n                  </div>\n                </React.Fragment>\n              )}\n            </a>\n\n            <span\n              className=\"rfu-file-previewer__close-button\"\n              onClick={handleRemove && (() => handleRemove(upload.id))}\n            >\n              \n            </span>\n            {upload.state === 'uploading' && (\n              <div className=\"rfu-file-previewer__loading-indicator\">\n                <LoadingIndicator />\n              </div>\n            )}\n          </li>\n        ))}\n    </ol>\n  </div>\n);\n","import React, { useRef } from 'react';\n\nimport { AttachmentIcon } from './AttachmentIcon';\n\nexport type FileUploadButtonProps = {\n  handleFiles: (files: FileList | File[]) => void;\n  multiple?: boolean;\n  disabled?: boolean;\n  accepts?: string | string[];\n};\n\nexport const FileUploadButton: React.FC<FileUploadButtonProps> = ({\n  disabled = false,\n  multiple = false,\n  children = <AttachmentIcon />,\n  handleFiles,\n  accepts,\n}) => {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  let className = 'rfu-file-upload-button';\n  if (disabled) {\n    className = `${className} rfu-file-upload-button--disabled`;\n  }\n  return (\n    <div className={className}>\n      <label>\n        <input\n          type=\"file\"\n          ref={inputRef}\n          className=\"rfu-file-input\"\n          onChange={(event) => {\n            const files = event.currentTarget.files;\n            if (files) {\n              handleFiles(files);\n            }\n            if (inputRef.current !== null) {\n              inputRef.current.value = '';\n              inputRef.current.blur();\n            }\n          }}\n          multiple={multiple}\n          disabled={disabled}\n          accept={Array.isArray(accepts) ? accepts.join(',') : accepts}\n        />\n        {children}\n      </label>\n    </div>\n  );\n};\n","import React from 'react';\n\nexport type IconButtonProps = {\n  onClick?: (e: React.SyntheticEvent) => void;\n};\n\n/**\n * This is simply a button wrapper, add's a div with `role=\"button\"` and a onClick\n */\nexport const IconButton: React.FC<IconButtonProps> = ({\n  onClick,\n  children,\n}) => (\n  <div className=\"rfu-icon-button\" role=\"button\" onClick={onClick}>\n    {children}\n  </div>\n);\n","import React, { useCallback } from 'react';\nimport Dropzone from 'react-dropzone';\n\nexport type ImageDropzoneProps = {\n  handleFiles?: (files: FileList | File[]) => void;\n  /** Allow drag 'n' drop (or selection from the file dialog) of multiple files */\n  multiple?: boolean;\n  /** Enable/disable the dropzone */\n  disabled?: boolean;\n  /**\n   * Set accepted file types. See https://github.com/okonet/attr-accept for more information. Keep in mind that mime type determination is not reliable across platforms. CSV files, for example, are reported as text/plain under macOS but as application/vnd.ms-excel under Windows. In some cases there might not be a mime type set at all.\n   *\n   * One of type: `string, string[]`\n   */\n  accept?: string | string[];\n  maxNumberOfFiles?: number;\n};\n\nexport const ImageDropzone: React.FC<ImageDropzoneProps> = ({\n  handleFiles,\n  maxNumberOfFiles,\n  children,\n  accept,\n  multiple,\n  disabled,\n}) => {\n  const handleDrop = useCallback(\n    (accepted: File[]) => {\n      if (!handleFiles) {\n        return;\n      }\n\n      if (accepted && accepted.length) {\n        handleFiles(accepted);\n      }\n    },\n    [handleFiles],\n  );\n\n  return (\n    <Dropzone\n      onDrop={handleDrop}\n      maxFiles={maxNumberOfFiles}\n      accept={accept}\n      multiple={multiple}\n      disabled={disabled}\n    >\n      {({ getRootProps, isDragAccept, isDragReject }) => (\n        <div\n          {...getRootProps({\n            style: { position: 'relative' },\n            className: `\n          rfu-dropzone\n          ${isDragAccept ? 'rfu-dropzone--accept' : ''}\n          ${isDragReject ? 'rfu-dropzone--reject' : ''}\n        `,\n          })}\n        >\n          <div className=\"rfu-dropzone__notifier\">\n            <div className=\"rfu-dropzone__inner\">\n              <svg\n                width=\"41\"\n                height=\"41\"\n                viewBox=\"0 0 41 41\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M40.517 28.002V3.997c0-2.197-1.808-3.992-4.005-3.992H12.507a4.004 4.004 0 0 0-3.992 3.993v24.004a4.004 4.004 0 0 0 3.992 3.993h24.005c2.197 0 4.005-1.795 4.005-3.993zm-22.002-7.997l4.062 5.42 5.937-7.423 7.998 10H12.507l6.008-7.997zM.517 8.003V36c0 2.198 1.795 4.005 3.993 4.005h27.997V36H4.51V8.002H.517z\"\n                  fill=\"#000\"\n                  fillRule=\"nonzero\"\n                />\n              </svg>\n              <p>Drag your files here to add to your post</p>\n            </div>\n          </div>\n          {children}\n        </div>\n      )}\n    </Dropzone>\n  );\n};\n","export default \"data:image/png;base64,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\"","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { IconButton } from './IconButton';\nimport placeholder from '../images/placeholder-generic.png';\n\nimport loadImage from 'blueimp-load-image';\n\nexport type ThumbnailProps = {\n  handleClose?: (id?: string) => void;\n  size?: number;\n  image: string;\n  id?: string;\n};\n\nconst svg =\n  '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n\nexport const Thumbnail: React.FC<ThumbnailProps> = (props) => {\n  const { id, image, size = 100, handleClose } = props;\n\n  const [imgSrc, setImgSrc] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!imgSrc && image) {\n      /** \n      if the file is already uploaded we don't need to process the image\n      we check to see if it's base64 string or a url\n      */\n      if (!image.indexOf('data:')) {\n        return setImgSrc(image);\n      }\n\n      loadImage(\n        image,\n        (img) => {\n          if (!('toDataURL' in img)) return;\n          const base64data = img.toDataURL('image/jpeg');\n          setImgSrc(base64data);\n        },\n        { orientation: true, crossOrigin: 'anonymous', meta: true },\n      );\n    }\n  }, [imgSrc, image]);\n\n  const onClose = useCallback(() => {\n    if (handleClose) {\n      handleClose(id);\n    }\n  }, [id, handleClose]);\n\n  return (\n    <div\n      className=\"rfu-thumbnail__wrapper\"\n      style={{ width: size, height: size }}\n    >\n      <div className=\"rfu-thumbnail__overlay\">\n        {handleClose ? (\n          <IconButton onClick={onClose}>\n            <div dangerouslySetInnerHTML={{ __html: svg }} />\n          </IconButton>\n        ) : null}\n      </div>\n      <img\n        src={imgSrc || image || placeholder}\n        className=\"rfu-thumbnail__image\"\n        alt=\"\"\n      />\n    </div>\n  );\n};\n","import React from 'react';\n\n/**\n * An icon of a picture, which is used as the default icon for ImageUploadButton\n */\nexport const PictureIcon: React.FC = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm3 2a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM2 16v2h16v-6l-3-3-6 6-3-3-4 4z\"\n      fillRule=\"nonzero\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nimport { PictureIcon } from './PictureIcon';\n\nexport type ImageUploadButtonProps = {\n  handleFiles: (files: File[]) => void;\n  multiple?: boolean;\n  disabled?: boolean;\n};\n\nexport const ImageUploadButton: React.FC<ImageUploadButtonProps> = (props) => {\n  const {\n    multiple = false,\n    disabled = false,\n    handleFiles,\n    children = <PictureIcon />,\n  } = props;\n\n  return (\n    <div className=\"rfu-image-upload-button\">\n      <label>\n        <input\n          type=\"file\"\n          className=\"rfu-image-input\"\n          onChange={(event) => {\n            const files = event.currentTarget.files;\n            if (files) {\n              handleFiles(Array.from(files));\n            }\n          }}\n          accept=\"image/*\"\n          multiple={multiple}\n          disabled={disabled}\n        />\n        {children}\n      </label>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { ImageUploadButton } from './ImageUploadButton';\n\nexport type ThumbnailPlaceholderProps = {\n  handleFiles: (files: File[]) => void;\n  multiple: boolean;\n};\n\nexport const ThumbnailPlaceholder: React.FC<ThumbnailPlaceholderProps> = (\n  props,\n) => {\n  const { multiple = false, handleFiles } = props;\n\n  return (\n    <ImageUploadButton handleFiles={handleFiles} multiple={multiple}>\n      <div role=\"button\" className=\"rfu-thumbnail-placeholder\">\n        <svg\n          width=\"14\"\n          height=\"15\"\n          viewBox=\"0 0 14 15\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M14 8.998H8v6H6v-6H0v-2h6v-6h2v6h6z\"\n            fill=\"#A0B2B8\"\n            fillRule=\"nonzero\"\n          />\n        </svg>\n      </div>\n    </ImageUploadButton>\n  );\n};\n","import React, { useCallback } from 'react';\n\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { Thumbnail } from './Thumbnail';\nimport { ThumbnailPlaceholder } from './ThumbnailPlaceholder';\n\nimport type { ImageUpload } from '../types';\n\nexport type ImagePreviewerProps = {\n  /** The list of image uploads that should be displayed */\n  imageUploads?: ImageUpload[];\n  /** A callback to call when the remove icon is clicked */\n  handleRemove?: (id: string) => void;\n  /** A callback to call when the retry icon is clicked */\n  handleRetry?: (id: string) => void;\n  /** A callback to call with newly selected files. If this is not provided no\n   * `ThumbnailPlaceholder` will be displayed.\n   */\n  handleFiles?: (files: File[]) => void;\n  /** Allow drag 'n' drop (or selection from the file dialog) of multiple files */\n  multiple?: boolean;\n  disabled?: boolean;\n};\n\nexport const ImagePreviewer: React.FC<ImagePreviewerProps> = (props) => {\n  const {\n    multiple = true,\n    disabled = false,\n    imageUploads,\n    handleRemove,\n    handleRetry,\n    handleFiles,\n  } = props;\n\n  const onClose = useCallback(\n    (id?: string) => {\n      if (handleRemove) {\n        if (id == null) {\n          console.warn(\n            \"id of closed image was undefined, this shouldn't happen\",\n          );\n          return;\n        }\n        handleRemove(id);\n      }\n    },\n    [handleRemove],\n  );\n\n  return (\n    <div className=\"rfu-image-previewer\">\n      {imageUploads?.map((image) => {\n        const url = image.url || image.previewUri;\n        return (\n          <div\n            key={image.id}\n            className={`rfu-image-previewer__image${\n              image.state === 'finished'\n                ? ' rfu-image-previewer__image--loaded'\n                : ''\n            }`}\n          >\n            {image.state === 'failed' && (\n              <div\n                className=\"rfu-image-previewer__retry\"\n                dangerouslySetInnerHTML={{\n                  __html:\n                    '<svg width=\"22\" height=\"20\" viewBox=\"0 0 22 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 5.535V2a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h3.638l-2.975-2.653a8 8 0 1 0 1.884 8.32 1 1 0 1 1 1.886.666A10 10 0 1 1 5.175 1.245c3.901-2.15 8.754-1.462 11.88 1.667L20 5.535z\" fill=\"#FFF\" fill-rule=\"nonzero\"/></svg>',\n                }}\n                onClick={handleRetry && (() => handleRetry(image.id))}\n              />\n            )}\n\n            {url !== undefined && (\n              <Thumbnail handleClose={onClose} image={url} id={image.id} />\n            )}\n            {image.state === 'uploading' && (\n              <LoadingIndicator\n                backgroundColor=\"rgba(255,255,255,0.1)\"\n                color=\"rgba(255,255,255,0.7)\"\n              />\n            )}\n          </div>\n        );\n      })}\n      {handleFiles && !disabled && (\n        <ThumbnailPlaceholder handleFiles={handleFiles} multiple={multiple} />\n      )}\n    </div>\n  );\n};\n","import type { FileLike } from './types';\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport function dataTransferItemsHaveFiles(\n  items?: DataTransferItem[],\n): boolean {\n  if (!items || !items.length) {\n    return false;\n  }\n  for (const item of items) {\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getFileLikes(items: DataTransferItem[]) {\n  const fileLikes = [];\n  for (const item of items) {\n    if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n  return fileLikes;\n}\n\nasync function getImageSource(fileLikes: FileLike[], src: string) {\n  let res;\n  try {\n    res = await fetch(src);\n  } catch (e) {\n    return;\n  }\n  const contentType =\n    res.headers.get('Content-type') || 'application/octet-stream';\n  const buf = await res.arrayBuffer();\n  const blob = new Blob([buf], { type: contentType });\n  fileLikes.push(blob);\n}\n\nconst extractImageSources = (s: string) => {\n  const imageTags = new DOMParser()\n    .parseFromString(s, 'text/html')\n    .getElementsByTagName('img');\n  return Array.from(imageTags, (tag) => tag.src).filter((tag) => tag);\n};\n\nexport async function dataTransferItemsToFiles(\n  items?: DataTransferItem[],\n): Promise<FileLike[]> {\n  if (!items || !items.length) {\n    return [];\n  }\n\n  // If there are files inside the DataTransferItem prefer those\n  const fileLikes = getFileLikes(items);\n  if (fileLikes.length) {\n    return fileLikes;\n  }\n\n  // Otherwise extract images from html\n  const blobPromises = [];\n  for (const item of items) {\n    if (item.type === 'text/html') {\n      blobPromises.push(\n        new Promise<void>((accept) => {\n          item.getAsString(async (s) => {\n            const imagePromises = extractImageSources(s).map((src) =>\n              getImageSource(fileLikes, src),\n            );\n\n            await Promise.all(imagePromises);\n            accept();\n          });\n        }),\n      );\n    }\n  }\n  await Promise.all(blobPromises);\n  return fileLikes;\n}\n"]},"metadata":{},"sourceType":"module"}