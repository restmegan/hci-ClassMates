{"ast":null,"code":"import React, { useState, useRef, useCallback, useEffect, useContext, useMemo, useReducer, useLayoutEffect, PureComponent } from 'react';\nimport ReactPlayer from 'react-player';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport prettybytes from 'pretty-bytes';\nimport { FileIcon, dataTransferItemsHaveFiles, dataTransferItemsToFiles, ImagePreviewer, FilePreviewer, ImageDropzone, FileUploadButton, LoadingIndicator as LoadingIndicator$1 } from 'react-file-utils';\nimport Carousel, { ModalGateway, Modal as Modal$1 } from 'react-images';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\nimport DefaultEmoji from 'emoji-mart/dist/components/emoji/nimble-emoji.js';\nimport DefaultEmojiIndex from 'emoji-mart/dist/utils/emoji-index/nimble-emoji-index.js';\nimport DefaultEmojiPicker from 'emoji-mart/dist/components/picker/nimble-picker.js';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { v4 } from 'uuid';\nimport deepequal from 'react-fast-compare';\nimport { MML as MML$1 } from 'mml-react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\nimport findAndReplace from 'mdast-util-find-and-replace';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport uniqBy from 'lodash.uniqby';\nimport i18n from 'i18next';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/en';\nimport isEqual from 'lodash.isequal';\nimport { Virtuoso } from 'react-virtuoso';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n}\n\nvar UnMemoizedAttachmentActions = function UnMemoizedAttachmentActions(props) {\n  var actionHandler = props.actionHandler,\n      actions = props.actions,\n      id = props.id,\n      text = props.text;\n\n  var handleActionClick = function handleActionClick(event, name, value) {\n    if (actionHandler) {\n      actionHandler(event, name, value);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-actions'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-actions-form'\n  }, React.createElement(\"span\", {\n    key: 0\n  }, text), actions.map(function (action) {\n    return React.createElement(\"button\", {\n      className: \"str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--\" + action.style,\n      \"data-testid\": \"\" + action.name,\n      \"data-value\": action.value,\n      key: id + \"-\" + action.value,\n      onClick: function onClick(event) {\n        return handleActionClick(event, action.name, action.value);\n      }\n    }, action.text);\n  })));\n};\n/**\n * AttachmentActions - renders the attachment action, which are the actions you can take on an attachment.\n * @example ./AttachmentActions.md\n */\n\n\nvar AttachmentActions = React.memo(UnMemoizedAttachmentActions);\nvar progressUpdateInterval = 500;\n\nvar UnMemoizedAudio = function UnMemoizedAudio(props) {\n  var og = props.og;\n\n  var _a = useState(false),\n      isPlaying = _a[0],\n      setIsPlaying = _a[1];\n\n  var _b = useState(0),\n      progress = _b[0],\n      setProgress = _b[1];\n\n  var audioRef = useRef(null);\n  var updateProgress = useCallback(function () {\n    if (audioRef.current !== null) {\n      var position = audioRef.current.currentTime;\n      var duration = audioRef.current.duration;\n      var currentProgress = 100 / duration * position;\n      setProgress(currentProgress);\n\n      if (position === duration) {\n        setIsPlaying(false);\n      }\n    }\n  }, [audioRef]);\n  useEffect(function () {\n    if (audioRef.current !== null) {\n      if (isPlaying) {\n        audioRef.current.play();\n        var interval_1 = setInterval(updateProgress, progressUpdateInterval);\n        return function () {\n          return clearInterval(interval_1);\n        };\n      }\n\n      audioRef.current.pause();\n    }\n\n    return;\n  }, [isPlaying, updateProgress]);\n  var asset_url = og.asset_url,\n      description = og.description,\n      image_url = og.image_url,\n      text = og.text,\n      title = og.title;\n  return React.createElement(\"div\", {\n    className: 'str-chat__audio'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__audio__wrapper'\n  }, React.createElement(\"audio\", {\n    ref: audioRef\n  }, React.createElement(\"source\", {\n    \"data-testid\": 'audio-source',\n    src: asset_url,\n    type: 'audio/mp3'\n  })), React.createElement(\"div\", {\n    className: 'str-chat__audio__image'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__audio__image--overlay'\n  }, !isPlaying ? React.createElement(\"div\", {\n    className: 'str-chat__audio__image--button',\n    \"data-testid\": 'play-audio',\n    onClick: function onClick() {\n      return setIsPlaying(true);\n    }\n  }, React.createElement(\"svg\", {\n    height: '40',\n    viewBox: '0 0 64 64',\n    width: '40',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z',\n    fillRule: 'nonzero'\n  }))) : React.createElement(\"div\", {\n    className: 'str-chat__audio__image--button',\n    \"data-testid\": 'pause-audio',\n    onClick: function onClick() {\n      return setIsPlaying(false);\n    }\n  }, React.createElement(\"svg\", {\n    height: '40',\n    viewBox: '0 0 64 64',\n    width: '40',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z',\n    fillRule: 'nonzero'\n  })))), image_url && React.createElement(\"img\", {\n    alt: \"\" + description,\n    src: image_url\n  })), React.createElement(\"div\", {\n    className: 'str-chat__audio__content'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__audio__content--title'\n  }, React.createElement(\"strong\", null, title)), React.createElement(\"span\", {\n    className: 'str-chat__audio__content--subtitle'\n  }, text), React.createElement(\"div\", {\n    className: 'str-chat__audio__content--progress'\n  }, React.createElement(\"div\", {\n    \"data-testid\": 'audio-progress',\n    style: {\n      width: progress + \"%\"\n    }\n  })))));\n};\n\nvar Audio = React.memo(UnMemoizedAudio);\n\nvar UnMemoizedSafeAnchor = function UnMemoizedSafeAnchor(props) {\n  var children = props.children,\n      className = props.className,\n      download = props.download,\n      href = props.href,\n      rel = props.rel,\n      target = props.target;\n  if (!href) return null;\n  var sanitized = sanitizeUrl(href);\n  return React.createElement(\"a\", {\n    className: className,\n    download: download,\n    href: sanitized,\n    rel: rel,\n    target: target\n  }, children);\n};\n\nvar SafeAnchor = React.memo(UnMemoizedSafeAnchor);\nvar giphyLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\";\n\nvar getDisplayName = function getDisplayName(Component) {\n  return Component.displayName || Component.name || 'Component';\n};\n\nDayjs.extend(calendar);\nDayjs.extend(localizedFormat);\n\nvar isDayOrMoment = function isDayOrMoment(output) {\n  return output.isSame != null;\n};\n\nvar isDate = function isDate(output) {\n  return output.getMonth != null;\n};\n\nvar isNumberOrString = function isNumberOrString(output) {\n  return typeof output === 'string' || typeof output === 'number';\n};\n\nvar TranslationContext = React.createContext({\n  t: function t(key) {\n    return key;\n  },\n  tDateTimeParser: function tDateTimeParser(input) {\n    return Dayjs(input);\n  },\n  userLanguage: 'en'\n});\n\nvar TranslationProvider = function TranslationProvider(_a) {\n  var children = _a.children,\n      value = _a.value;\n  return React.createElement(TranslationContext.Provider, {\n    value: value\n  }, children);\n};\n\nvar useTranslationContext = function useTranslationContext() {\n  return useContext(TranslationContext);\n};\n\nvar withTranslationContext = function withTranslationContext(Component) {\n  var WithTranslationContextComponent = function WithTranslationContextComponent(props) {\n    var translationContext = useTranslationContext();\n    return React.createElement(Component, _assign({}, props, translationContext));\n  };\n\n  WithTranslationContextComponent.displayName = \"WithTranslationContext\" + getDisplayName(Component);\n  return WithTranslationContextComponent;\n};\n\nvar UnMemoizedCard = function UnMemoizedCard(props) {\n  var image_url = props.image_url,\n      og_scrape_url = props.og_scrape_url,\n      text = props.text,\n      thumb_url = props.thumb_url,\n      title = props.title,\n      title_link = props.title_link,\n      type = props.type;\n  var t = useTranslationContext().t;\n  var image = thumb_url || image_url;\n\n  var trimUrl = function trimUrl(url) {\n    if (url !== undefined && url !== null) {\n      var trimmedUrl = url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '').split('/')[0];\n      return trimmedUrl;\n    }\n\n    return null;\n  };\n\n  if (!title && !title_link && !image) {\n    return React.createElement(\"div\", {\n      className: \"str-chat__message-attachment-card str-chat__message-attachment-card--\" + type\n    }, React.createElement(\"div\", {\n      className: 'str-chat__message-attachment-card--content'\n    }, React.createElement(\"div\", {\n      className: 'str-chat__message-attachment-card--text'\n    }, t('this content could not be displayed'))));\n  }\n\n  if (!title_link && !og_scrape_url) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card str-chat__message-attachment-card--\" + type\n  }, image && React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-card--header'\n  }, React.createElement(\"img\", {\n    alt: image,\n    src: image\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-card--content'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-card--flex'\n  }, title && React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-card--title'\n  }, title), text && React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-card--text'\n  }, text), (title_link || og_scrape_url) && React.createElement(SafeAnchor, {\n    className: 'str-chat__message-attachment-card--url',\n    href: title_link || og_scrape_url,\n    rel: 'noopener noreferrer',\n    target: '_blank'\n  }, trimUrl(title_link || og_scrape_url))), type === 'giphy' && React.createElement(\"img\", {\n    alt: 'giphy logo',\n    className: 'str-chat__message-attachment-card__giphy-logo',\n    \"data-testid\": 'card-giphy',\n    src: giphyLogo\n  })));\n};\n/**\n * Card - Simple Card Layout for displaying links. For different message styles, we customized this component with css.\n * @example ./Card.md\n */\n\n\nvar Card = React.memo(UnMemoizedCard);\n\nvar UnMemoizedFileAttachment = function UnMemoizedFileAttachment(props) {\n  var attachment = props.attachment;\n  return React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-file--item',\n    \"data-testid\": 'attachment-file'\n  }, React.createElement(FileIcon, {\n    big: true,\n    filename: attachment.title,\n    mimeType: attachment.mime_type,\n    size: 30\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment-file--item-text'\n  }, React.createElement(SafeAnchor, {\n    download: true,\n    href: attachment.asset_url,\n    target: '_blank'\n  }, attachment.title), attachment.file_size && Number.isFinite(Number(attachment.file_size)) && React.createElement(\"span\", null, prettybytes(attachment.file_size))));\n};\n\nvar FileAttachment = React.memo(UnMemoizedFileAttachment);\nvar SUPPORTED_VIDEO_FORMATS = ['video/mp4', 'video/ogg', 'video/webm', 'video/quicktime'];\n\nvar isAudioAttachment = function isAudioAttachment(attachment) {\n  return attachment.type === 'audio';\n};\n\nvar isFileAttachment = function isFileAttachment(attachment) {\n  return attachment.type === 'file' || attachment.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) === -1 && attachment.type !== 'video';\n};\n\nvar isGalleryAttachment = function isGalleryAttachment(attachment) {\n  return attachment.type === 'gallery';\n};\n\nvar isImageAttachment = function isImageAttachment(attachment) {\n  return attachment.type === 'image' && !attachment.title_link && !attachment.og_scrape_url;\n};\n\nvar isMediaAttachment = function isMediaAttachment(attachment) {\n  return attachment.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) !== -1 || attachment.type === 'video';\n};\n\nvar renderAttachmentWithinContainer = function renderAttachmentWithinContainer(props) {\n  var attachment = props.attachment,\n      children = props.children,\n      componentType = props.componentType;\n  var extra = componentType === 'card' && !(attachment === null || attachment === void 0 ? void 0 : attachment.image_url) && !(attachment === null || attachment === void 0 ? void 0 : attachment.thumb_url) ? 'no-image' : attachment && attachment.actions && attachment.actions.length ? 'actions' : '';\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-attachment str-chat__message-attachment--\" + componentType + \" str-chat__message-attachment--\" + ((attachment === null || attachment === void 0 ? void 0 : attachment.type) || '') + \" str-chat__message-attachment--\" + componentType + \"--\" + extra,\n    key: (attachment === null || attachment === void 0 ? void 0 : attachment.id) + \"-\" + ((attachment === null || attachment === void 0 ? void 0 : attachment.type) || 'none') + \" \"\n  }, children);\n};\n\nvar renderAttachmentActions = function renderAttachmentActions(props) {\n  var _actionHandler = props.actionHandler,\n      attachment = props.attachment,\n      AttachmentActions = props.AttachmentActions;\n\n  if (!AttachmentActions || !attachment.actions || !attachment.actions.length) {\n    return null;\n  }\n\n  return React.createElement(AttachmentActions, _assign({}, attachment, {\n    actionHandler: function actionHandler(event, name, value) {\n      return _actionHandler === null || _actionHandler === void 0 ? void 0 : _actionHandler(name, value, event);\n    },\n    actions: attachment.actions || [],\n    id: attachment.id || '',\n    key: \"key-actions-\" + attachment.id,\n    text: attachment.text || ''\n  }));\n};\n\nvar renderGallery = function renderGallery(props) {\n  var attachment = props.attachment,\n      Gallery = props.Gallery;\n  if (!Gallery) return null;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Gallery, {\n      images: attachment.images || [],\n      key: 'gallery'\n    }),\n    componentType: 'gallery'\n  });\n};\n\nvar renderImage = function renderImage(props) {\n  var attachment = props.attachment,\n      Image = props.Image;\n  if (!Image) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment',\n        key: \"key-image-\" + attachment.id\n      }, React.createElement(Image, _assign({}, attachment)), renderAttachmentActions(props)),\n      componentType: 'image'\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Image, _assign({}, attachment, {\n      key: \"key-image-\" + attachment.id\n    })),\n    componentType: 'image'\n  });\n};\n\nvar renderCard = function renderCard(props) {\n  var attachment = props.attachment,\n      Card = props.Card;\n  if (!Card) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment',\n        key: \"key-image-\" + attachment.id\n      }, React.createElement(Card, _assign({}, attachment, {\n        key: \"key-card-\" + attachment.id\n      })), renderAttachmentActions(props)),\n      componentType: 'card'\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Card, _assign({}, attachment, {\n      key: \"key-card-\" + attachment.id\n    })),\n    componentType: 'card'\n  });\n};\n\nvar renderFile = function renderFile(props) {\n  var attachment = props.attachment,\n      File = props.File;\n  if (!File || !attachment.asset_url) return null;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(File, {\n      attachment: attachment,\n      key: \"key-file-\" + attachment.id\n    }),\n    componentType: 'file'\n  });\n};\n\nvar renderAudio = function renderAudio(props) {\n  var attachment = props.attachment,\n      Audio = props.Audio;\n  if (!Audio) return null;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(\"div\", {\n      className: 'str-chat__attachment',\n      key: \"key-video-\" + attachment.id\n    }, React.createElement(Audio, {\n      og: attachment\n    })),\n    componentType: 'audio'\n  });\n};\n\nvar renderMedia = function renderMedia(props) {\n  var attachment = props.attachment,\n      Media = props.Media;\n  if (!Media) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment str-chat__attachment-media',\n        key: \"key-video-\" + attachment.id\n      }, React.createElement(\"div\", {\n        className: 'str-chat__player-wrapper'\n      }, React.createElement(Media, {\n        className: 'react-player',\n        controls: true,\n        height: '100%',\n        url: attachment.asset_url,\n        width: '100%'\n      })), renderAttachmentActions(props)),\n      componentType: 'media'\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(\"div\", {\n      className: 'str-chat__player-wrapper',\n      key: \"key-video-\" + attachment.id\n    }, ' ', React.createElement(Media, {\n      className: 'react-player',\n      controls: true,\n      height: '100%',\n      url: attachment.asset_url,\n      width: '100%'\n    })),\n    componentType: 'media'\n  });\n};\n\nvar ModalImage = function ModalImage(props) {\n  var data = props.data;\n  return React.createElement(\"div\", {\n    className: 'str-chat__modal-image__wrapper',\n    \"data-testid\": 'modal-image'\n  }, React.createElement(\"img\", {\n    className: 'str-chat__modal-image__image',\n    src: data.source\n  }));\n};\n\nvar ModalComponent = function ModalComponent(props) {\n  var images = props.images,\n      index = props.index,\n      modalIsOpen = props.modalIsOpen,\n      toggleModal = props.toggleModal;\n  return React.createElement(ModalGateway, null, modalIsOpen ? React.createElement(Modal$1, {\n    onClose: toggleModal\n  }, React.createElement(Carousel, {\n    components: {\n      // @ts-expect-error\n      View: ModalImage\n    },\n    currentIndex: index,\n    views: images\n  })) : null);\n};\n\nvar UnMemoizedGallery = function UnMemoizedGallery(props) {\n  var images = props.images;\n\n  var _a = useState(0),\n      index = _a[0],\n      setIndex = _a[1];\n\n  var _b = useState(false),\n      modalOpen = _b[0],\n      setModalOpen = _b[1];\n\n  var t = useTranslationContext().t;\n\n  var toggleModal = function toggleModal(selectedIndex) {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n\n  var formattedArray = useMemo(function () {\n    return images.map(function (image) {\n      return {\n        source: image.image_url || image.thumb_url || ''\n      };\n    });\n  }, [images]);\n  var renderImages = images.slice(0, 3).map(function (image, i) {\n    return React.createElement(\"div\", {\n      className: 'str-chat__gallery-image',\n      \"data-testid\": 'gallery-image',\n      key: \"gallery-image-\" + i,\n      onClick: function onClick() {\n        return toggleModal(i);\n      }\n    }, React.createElement(\"img\", {\n      src: image.image_url || image.thumb_url\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: \"str-chat__gallery \" + (images.length > 3 ? 'str-chat__gallery--square' : '')\n  }, renderImages, images.length > 3 && React.createElement(\"div\", {\n    className: 'str-chat__gallery-placeholder',\n    onClick: function onClick() {\n      return toggleModal(3);\n    },\n    style: {\n      backgroundImage: \"url(\" + images[3].image_url + \")\"\n    }\n  }, React.createElement(\"p\", null, t('{{ imageCount }} more', {\n    imageCount: images.length - 3\n  }))), React.createElement(ModalComponent, {\n    images: formattedArray,\n    index: index,\n    modalIsOpen: modalOpen,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    }\n  }));\n};\n/**\n * Gallery - displays up to 4 images in a simple responsive grid with a lightbox to view the images.\n * @example ./Gallery.md\n */\n\n\nvar Gallery = React.memo(UnMemoizedGallery);\n/**\n * Image - a simple component that displays an image.\n * @example ./Image.md\n */\n\nvar ImageComponent = function ImageComponent(props) {\n  var _a = useState(false),\n      modalIsOpen = _a[0],\n      setModalIsOpen = _a[1];\n\n  var fallback = props.fallback,\n      image_url = props.image_url,\n      thumb_url = props.thumb_url;\n  var imageSrc = sanitizeUrl(image_url || thumb_url);\n  var formattedArray = [{\n    source: imageSrc\n  }];\n\n  var toggleModal = function toggleModal() {\n    return setModalIsOpen(!modalIsOpen);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"img\", {\n    alt: fallback,\n    className: 'str-chat__message-attachment--img',\n    \"data-testid\": 'image-test',\n    onClick: toggleModal,\n    src: imageSrc\n  }), React.createElement(ModalComponent, {\n    images: formattedArray,\n    index: 0,\n    modalIsOpen: modalIsOpen,\n    toggleModal: toggleModal\n  }));\n};\n/**\n * Attachment - The message Attachment. A message can contain multiple Attachments.\n * By default, the component supports:\n * - AttachmentActions\n * - Audio\n * - Card\n * - File\n * - Gallery\n * - Image\n * - Media (video)\n *\n * @example ./Attachment.md\n */\n\n\nvar Attachment = function Attachment(props) {\n  var _a;\n\n  var _b = props.AttachmentActions,\n      AttachmentActions$1 = _b === void 0 ? AttachmentActions : _b,\n      attachments = props.attachments,\n      _c = props.Audio,\n      Audio$1 = _c === void 0 ? Audio : _c,\n      _d = props.Card,\n      Card$1 = _d === void 0 ? Card : _d,\n      _e = props.File,\n      File = _e === void 0 ? FileAttachment : _e,\n      _f = props.Gallery,\n      Gallery$1 = _f === void 0 ? Gallery : _f,\n      _g = props.Image,\n      Image = _g === void 0 ? ImageComponent : _g,\n      _h = props.Media,\n      Media = _h === void 0 ? ReactPlayer : _h,\n      rest = __rest(props, [\"AttachmentActions\", \"attachments\", \"Audio\", \"Card\", \"File\", \"Gallery\", \"Image\", \"Media\"]);\n\n  var gallery = {\n    images: attachments === null || attachments === void 0 ? void 0 : attachments.filter(function (attachment) {\n      return attachment.type === 'image' && !(attachment.og_scrape_url || attachment.title_link);\n    }),\n    type: 'gallery'\n  };\n  var newAttachments;\n\n  if (((_a = gallery.images) === null || _a === void 0 ? void 0 : _a.length) >= 2) {\n    newAttachments = __spreadArrays(attachments.filter(function (attachment) {\n      return !(attachment.type === 'image' && !(attachment.og_scrape_url || attachment.title_link));\n    }), [gallery]);\n  } else {\n    newAttachments = attachments;\n  }\n\n  var propsWithDefault = _assign({\n    AttachmentActions: AttachmentActions$1,\n    Audio: Audio$1,\n    Card: Card$1,\n    File: File,\n    Gallery: Gallery$1,\n    Image: Image,\n    Media: Media\n  }, rest);\n\n  return React.createElement(React.Fragment, null, newAttachments === null || newAttachments === void 0 ? void 0 : newAttachments.map(function (attachment) {\n    if (isGalleryAttachment(attachment)) {\n      return renderGallery(_assign(_assign({}, propsWithDefault), {\n        attachment: attachment\n      }));\n    }\n\n    if (isImageAttachment(attachment)) {\n      return renderImage(_assign(_assign({}, propsWithDefault), {\n        attachment: attachment\n      }));\n    }\n\n    if (isFileAttachment(attachment)) {\n      return renderFile(_assign(_assign({}, propsWithDefault), {\n        attachment: attachment\n      }));\n    }\n\n    if (isAudioAttachment(attachment)) {\n      return renderAudio(_assign(_assign({}, propsWithDefault), {\n        attachment: attachment\n      }));\n    }\n\n    if (isMediaAttachment(attachment)) {\n      return renderMedia(_assign(_assign({}, propsWithDefault), {\n        attachment: attachment\n      }));\n    }\n\n    return renderCard(_assign(_assign({}, propsWithDefault), {\n      attachment: attachment\n    }));\n  }));\n};\n\nvar Item = /*#__PURE__*/React.forwardRef(function (props, innerRef) {\n  var className = props.className,\n      Component = props.component,\n      item = props.item,\n      onClickHandler = props.onClickHandler,\n      onSelectHandler = props.onSelectHandler,\n      selected = props.selected,\n      style = props.style;\n\n  var selectItem = function selectItem() {\n    return onSelectHandler(item);\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"rta__item \".concat(className || ''),\n    style: style\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rta__entity \".concat(selected ? 'rta__entity--selected' : ''),\n    onClick: onClickHandler,\n    onFocus: selectItem,\n    onMouseEnter: selectItem,\n    ref: innerRef,\n    role: \"button\",\n    tabIndex: 0\n  }, /*#__PURE__*/React.createElement(Component, {\n    entity: item,\n    selected: selected\n  })));\n});\n/* eslint-disable */\n\nvar KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32\n}; // This is self-made key shortcuts manager, used for caching key strokes\n\nvar Listener = function Listener() {\n  var _this = this;\n\n  _classCallCheck(this, Listener);\n\n  _defineProperty(this, \"startListen\", function () {\n    if (!_this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', _this.f);\n    }\n\n    _this.refCount++;\n  });\n\n  _defineProperty(this, \"stopListen\", function () {\n    _this.refCount--;\n\n    if (!_this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', _this.f);\n    }\n  });\n\n  _defineProperty(this, \"add\", function (keyCodes, fn) {\n    var keyCode = keyCodes;\n    if (_typeof(keyCode) !== 'object') keyCode = [keyCode];\n    _this.listeners[_this.index] = {\n      keyCode: keyCode,\n      fn: fn\n    };\n    _this.index += 1;\n    return _this.index;\n  });\n\n  _defineProperty(this, \"remove\", function (id) {\n    delete _this.listeners[id];\n  });\n\n  _defineProperty(this, \"removeAll\", function () {\n    _this.listeners = {};\n    _this.index = 0;\n  });\n\n  this.index = 0;\n  this.listeners = {};\n  this.refCount = 0;\n\n  this.f = function (e) {\n    var code = e.keyCode || e.which;\n    Object.values(_this.listeners).forEach(function (_ref) {\n      var keyCode = _ref.keyCode,\n          fn = _ref.fn;\n      if (keyCode.includes(code)) fn(e);\n    });\n  };\n};\n\nvar Listeners = new Listener();\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar List = function List(props) {\n  var className = props.className,\n      component = props.component,\n      dropdownScroll = props.dropdownScroll,\n      getSelectedItem = props.getSelectedItem,\n      getTextToReplace = props.getTextToReplace,\n      itemClassName = props.itemClassName,\n      itemStyle = props.itemStyle,\n      onSelect = props.onSelect,\n      style = props.style,\n      _props$SuggestionItem = props.SuggestionItem,\n      SuggestionItem = _props$SuggestionItem === void 0 ? Item : _props$SuggestionItem,\n      propValue = props.value,\n      values = props.values;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var _useState = useState(undefined),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedItem = _useState2[0],\n      setSelectedItem = _useState2[1];\n\n  var itemsRef = [];\n\n  var isSelected = function isSelected(item) {\n    return selectedItem === values.findIndex(function (value) {\n      return value.id === item.id;\n    });\n  };\n\n  var getId = function getId(item) {\n    var textToReplace = getTextToReplace(item);\n\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  var modifyText = function modifyText(value) {\n    if (!value) return;\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) getSelectedItem(value);\n  };\n\n  var handleClick = function handleClick(e) {\n    var _e$preventDefault;\n\n    if (e) (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    modifyText(values[selectedItem]);\n  };\n\n  var selectItem = function selectItem(item) {\n    setSelectedItem(values.findIndex(function (value) {\n      return value.id === item.id;\n    }));\n  };\n\n  var handleKeyDown = useCallback(function (event) {\n    if (event.which === KEY_CODES.UP) {\n      setSelectedItem(function (prevSelected) {\n        if (prevSelected === undefined) return 0;\n        var newID = prevSelected === 0 ? values.length - 1 : prevSelected - 1;\n        dropdownScroll(itemsRef[newID]);\n        return newID;\n      });\n    }\n\n    if (event.which === KEY_CODES.DOWN) {\n      setSelectedItem(function (prevSelected) {\n        if (prevSelected === undefined) return 0;\n        var newID = prevSelected === values.length - 1 ? 0 : prevSelected + 1;\n        dropdownScroll(itemsRef[newID]);\n        return newID;\n      });\n    }\n\n    if ((event.which === KEY_CODES.ENTER || event.which === KEY_CODES.TAB) && selectedItem !== undefined) {\n      handleClick(event);\n      return setSelectedItem(undefined);\n    }\n\n    return null;\n  }, [selectedItem, values] // eslint-disable-line\n  );\n  useEffect(function () {\n    document.addEventListener('keydown', handleKeyDown, false);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  useEffect(function () {\n    if (values !== null && values !== void 0 && values.length) selectItem(values[0]);\n  }, [values]); // eslint-disable-line\n\n  var renderHeader = function renderHeader(value) {\n    if (value[0] === '/') {\n      var html = \"<strong>\".concat(value.replace('/', ''), \"</strong>\");\n      return \"\".concat(t('Commands matching'), \" \").concat(html);\n    }\n\n    if (value[0] === ':') {\n      var _html = \"<strong>\".concat(value.replace(':', ''), \"</strong>\");\n\n      return \"\".concat(t('Emoji matching'), \" \").concat(_html);\n    }\n\n    if (value[0] === '@') {\n      var _html2 = \"<strong>\".concat(value.replace('@', ''), \"</strong>\");\n\n      return \"\".concat(t('People matching'), \" \").concat(_html2);\n    }\n\n    return null;\n  };\n\n  var restructureItem = function restructureItem(item) {\n    var matched = item.name || item.id;\n    var editedPropValue = propValue.slice(1);\n    var parts = matched.split(new RegExp(\"(\".concat(editedPropValue, \")\"), 'gi'));\n    var itemNameParts = {\n      match: editedPropValue,\n      parts: parts\n    };\n    return _objectSpread$1(_objectSpread$1({}, item), {}, {\n      itemNameParts: itemNameParts\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"rta__list \".concat(className || ''),\n    style: style\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"rta__list-header\",\n    dangerouslySetInnerHTML: {\n      __html: renderHeader(propValue)\n    }\n  }), values.map(function (item, i) {\n    return /*#__PURE__*/React.createElement(SuggestionItem, {\n      className: itemClassName,\n      component: component,\n      item: restructureItem(item),\n      key: getId(item),\n      onClickHandler: handleClick,\n      onSelectHandler: selectItem,\n      ref: function ref(_ref) {\n        itemsRef[i] = _ref;\n      },\n      selected: isSelected(item),\n      style: itemStyle\n    });\n  }));\n};\n\nvar DEFAULT_CARET_POSITION = 'next';\n\nfunction defaultScrollToItem(container, item) {\n  if (!item) return;\n  var itemHeight = parseInt(getComputedStyle(item).getPropertyValue('height'), 10);\n  var containerHight = parseInt(getComputedStyle(container).getPropertyValue('height'), 10) - itemHeight;\n  var actualScrollTop = container.scrollTop;\n  var itemOffsetTop = item.offsetTop;\n\n  if (itemOffsetTop < actualScrollTop + containerHight && actualScrollTop < itemOffsetTop) {\n    return;\n  } // eslint-disable-next-line\n\n\n  container.scrollTop = itemOffsetTop;\n}\n\nvar errorMessage = function errorMessage(message) {\n  return console.error(\"RTA: dataProvider fails: \".concat(message, \"\\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues\"));\n};\n\nvar triggerPropsCheck = function triggerPropsCheck(_ref) {\n  var trigger = _ref.trigger;\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n  var triggers = Object.entries(trigger);\n\n  for (var i = 0; i < triggers.length; i += 1) {\n    var _triggers$i = _slicedToArray(triggers[i], 2),\n        triggerChar = _triggers$i[0],\n        settings = _triggers$i[1];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error('Invalid prop trigger. Keys of the object has to be string / one character.');\n    } // $FlowFixMe\n\n\n    var triggerSetting = settings;\n    var callback = triggerSetting.callback,\n        component = triggerSetting.component,\n        dataProvider = triggerSetting.dataProvider,\n        output = triggerSetting.output;\n\n    if (!isValidElementType(component)) {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n  }\n\n  return null;\n};\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar ReactTextareaAutocomplete = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactTextareaAutocomplete, _React$Component);\n\n  var _super = _createSuper(ReactTextareaAutocomplete);\n\n  function ReactTextareaAutocomplete(_props) {\n    var _this;\n\n    _classCallCheck(this, ReactTextareaAutocomplete);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectionPosition\", function () {\n      if (!_this.textareaRef) return null;\n      return {\n        selectionEnd: _this.textareaRef.selectionEnd,\n        selectionStart: _this.textareaRef.selectionStart\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectedText\", function () {\n      if (!_this.textareaRef) return null;\n      var _this$textareaRef = _this.textareaRef,\n          selectionEnd = _this$textareaRef.selectionEnd,\n          selectionStart = _this$textareaRef.selectionStart;\n      if (selectionStart === selectionEnd) return null;\n      return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCaretPosition\", function () {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      if (!_this.textareaRef) return;\n\n      _this.textareaRef.focus();\n\n      _this.textareaRef.setSelectionRange(position, position);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCaretPosition\", function () {\n      if (!_this.textareaRef) return 0;\n      return _this.textareaRef.selectionEnd;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onEnter\", function (event) {\n      if (!_this.textareaRef) return;\n      var trigger = _this.state.currentTrigger;\n\n      var hasFocus = _this.textareaRef.matches(':focus'); // don't submit if the element has focus or the shift key is pressed\n\n\n      if (!hasFocus || event.shiftKey === true) return;\n\n      if (!trigger || !_this.state.data) {\n        // trigger a submit\n        _this._replaceWord();\n\n        if (_this.textareaRef) {\n          _this.textareaRef.selectionEnd = 0;\n        }\n\n        _this.props.handleSubmit(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onSpace\", function () {\n      if (!_this.props.replaceWord || !_this.textareaRef) return; // don't change characters if the element doesn't have focus\n\n      var hasFocus = _this.textareaRef.matches(':focus');\n\n      if (!hasFocus) return;\n\n      _this._replaceWord();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_replaceWord\", function () {\n      var value = _this.state.value;\n      var lastWordRegex = /([^\\s]+)(\\s*)$/;\n      var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n      var lastWord = match && match[1];\n      if (!lastWord) return;\n      var spaces = match[2];\n\n      var newWord = _this.props.replaceWord(lastWord);\n\n      if (newWord == null) return;\n      var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n      var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n      var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n\n      _this.setState({\n        value: newText\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (_this.props.onChange) _this.props.onChange(e);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onSelect\", function (newToken) {\n      var onChange = _this.props.onChange;\n      var _this$state = _this.state,\n          currentTrigger = _this$state.currentTrigger,\n          selectionEnd = _this$state.selectionEnd,\n          textareaValue = _this$state.value;\n      if (!currentTrigger) return;\n\n      var computeCaretPosition = function computeCaretPosition(position, token, startToken) {\n        switch (position) {\n          case 'start':\n            return startToken;\n\n          case 'next':\n          case 'end':\n            return startToken + token.length;\n\n          default:\n            if (!Number.isInteger(position)) {\n              throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n            }\n\n            return position;\n        }\n      };\n\n      var textToModify = textareaValue.slice(0, selectionEnd);\n      var startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(\"\\\\\".concat(currentTrigger, \"[^\\\\\".concat(currentTrigger, '\\\\s', \"]\"), \"*$\"))); // we add space after emoji is selected if a caret position is next\n\n      var newTokenString = newToken.caretPosition === 'next' ? \"\".concat(newToken.text, \" \") : newToken.text;\n      var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n      var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString; // set the new textarea value and after that set the caret back to its position\n\n      _this.setState({\n        dataLoading: false,\n        value: textareaValue.replace(textToModify, modifiedText)\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (onChange) onChange(e);\n\n        _this.setCaretPosition(newCaretPosition);\n      });\n\n      _this._closeAutocomplete();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getItemOnSelect\", function () {\n      var currentTrigger = _this.state.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return null;\n      var callback = triggerSettings.callback;\n      if (!callback) return null;\n      return function (item) {\n        if (typeof callback !== 'function') {\n          throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (callback) {\n          return callback(item, currentTrigger);\n        }\n\n        return null;\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getTextToReplace\", function () {\n      var _this$state2 = _this.state,\n          actualToken = _this$state2.actualToken,\n          currentTrigger = _this$state2.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return null;\n      var output = triggerSettings.output;\n      return function (item) {\n        if (_typeof(item) === 'object' && (!output || typeof output !== 'function')) {\n          throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (output) {\n          var textToReplace = output(item, currentTrigger);\n\n          if (!textToReplace || typeof textToReplace === 'number') {\n            throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\".concat(String(textToReplace), \"\\\". Check the implementation for trigger \\\"\").concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\"));\n          }\n\n          if (typeof textToReplace === 'string') {\n            return {\n              caretPosition: DEFAULT_CARET_POSITION,\n              text: textToReplace\n            };\n          }\n\n          if (!textToReplace.text) {\n            throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          if (!textToReplace.caretPosition) {\n            throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          return textToReplace;\n        }\n\n        if (typeof item !== 'string') {\n          throw new Error('Output item should be string\\n');\n        }\n\n        return {\n          caretPosition: DEFAULT_CARET_POSITION,\n          text: \"\".concat(currentTrigger).concat(item).concat(currentTrigger)\n        };\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getCurrentTriggerSettings\", function () {\n      var currentTrigger = _this.state.currentTrigger;\n      if (!currentTrigger) return null;\n      return _this.props.trigger[currentTrigger];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getValuesFromProvider\", function () {\n      var mutes = _this.props.mutes;\n      var _this$state3 = _this.state,\n          actualToken = _this$state3.actualToken,\n          currentTrigger = _this$state3.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return;\n      var component = triggerSettings.component,\n          dataProvider = triggerSettings.dataProvider;\n\n      if (typeof dataProvider !== 'function') {\n        throw new Error('Trigger provider has to be a function!');\n      }\n\n      _this.setState({\n        dataLoading: true\n      }); // Modified: send the full text to support / style commands\n\n\n      dataProvider(actualToken, _this.state.value, function (data, token) {\n        // Make sure that the result is still relevant for current query\n        if (token !== _this.state.actualToken) return;\n\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n\n        if (!isValidElementType(component)) {\n          throw new Error('Component should be defined!');\n        } // throw away if we resolved old trigger\n\n\n        if (currentTrigger !== _this.state.currentTrigger) return; // if we haven't resolved any data let's close the autocomplete\n\n        if (!data.length) {\n          _this._closeAutocomplete();\n\n          return;\n        }\n\n        if (currentTrigger === '@' && mutes.length) {\n          data = data.filter(function (suggestion) {\n            var mutedUser = mutes.some(function (mute) {\n              return mute.target.id === suggestion.id;\n            });\n            if (mutedUser) return false;\n            return true;\n          });\n        }\n\n        _this.setState({\n          component: component,\n          data: data,\n          dataLoading: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getSuggestions\", function () {\n      var _this$state4 = _this.state,\n          currentTrigger = _this$state4.currentTrigger,\n          data = _this$state4.data;\n      if (!currentTrigger || !data || data && !data.length) return null;\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_createRegExp\", function () {\n      var trigger = _this.props.trigger; // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n      // https://stackoverflow.com/a/8057827/2719917\n\n      _this.tokenRegExp = new RegExp(\"([\".concat(Object.keys(trigger).join(''), \"])(?:(?!\\\\1)[^\\\\s])*$\"));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_closeAutocomplete\", function () {\n      _this.setState({\n        currentTrigger: null,\n        data: null,\n        dataLoading: false,\n        left: null,\n        top: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_cleanUpProps\", function () {\n      var props = _objectSpread({}, _this.props);\n\n      var notSafe = ['additionalTextareaProps', 'className', 'closeOnClickOutside', 'containerClassName', 'containerStyle', 'disableMentions', 'dropdownClassName', 'dropdownStyle', 'grow', 'handleSubmit', 'innerRef', 'itemClassName', 'itemStyle', 'listClassName', 'listStyle', 'loaderClassName', 'loaderStyle', 'loadingComponent', 'minChar', 'movePopupAsYouType', 'onCaretPositionChange', 'onChange', 'ref', 'replaceWord', 'scrollToItem', 'SuggestionItem', 'SuggestionList', 'trigger', 'value']; // eslint-disable-next-line\n\n      for (var prop in props) {\n        if (notSafe.includes(prop)) delete props[prop];\n      }\n\n      return props;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_isCommand\", function (text) {\n      if (text[0] !== '/') return false;\n      var tokens = text.split(' ');\n      if (tokens.length > 1) return false;\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_changeHandler\", function (e) {\n      var _this$props = _this.props,\n          minChar = _this$props.minChar,\n          movePopupAsYouType = _this$props.movePopupAsYouType,\n          onCaretPositionChange = _this$props.onCaretPositionChange,\n          onChange = _this$props.onChange,\n          trigger = _this$props.trigger;\n      var _this$state5 = _this.state,\n          left = _this$state5.left,\n          top = _this$state5.top;\n      var textarea = e.target;\n      var selectionEnd = textarea.selectionEnd,\n          selectionStart = textarea.selectionStart,\n          value = textarea.value;\n\n      if (onChange) {\n        e.persist();\n        onChange(e);\n      }\n\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n\n      _this.setState({\n        value: value\n      });\n\n      var currentTrigger;\n      var lastToken;\n\n      if (_this._isCommand(value)) {\n        currentTrigger = '/';\n        lastToken = value;\n      } else {\n        var tokenMatch = value.slice(0, selectionEnd).match(/(?!^|\\W)?[:@][^\\s]*\\s?[^\\s]*$/g);\n        lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n        currentTrigger = lastToken && Object.keys(trigger).find(function (a) {\n          return a === lastToken[0];\n        }) || null;\n      }\n      /*\n       if we lost the trigger token or there is no following character we want to close\n       the autocomplete\n      */\n\n\n      if (!lastToken || lastToken.length <= minChar) {\n        _this._closeAutocomplete();\n\n        return;\n      }\n\n      var actualToken = lastToken.slice(1); // if trigger is not configured step out from the function, otherwise proceed\n\n      if (!currentTrigger) return;\n\n      if (movePopupAsYouType || top === null && left === null || // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1) {\n        var _getCaretCoordinates = getCaretCoordinates(textarea, selectionEnd),\n            newLeft = _getCaretCoordinates.left,\n            newTop = _getCaretCoordinates.top;\n\n        _this.setState({\n          // make position relative to textarea\n          left: newLeft,\n          top: newTop - _this.textareaRef.scrollTop || 0\n        });\n      }\n\n      _this.setState({\n        actualToken: actualToken,\n        currentTrigger: currentTrigger,\n        selectionEnd: selectionEnd,\n        selectionStart: selectionStart\n      }, function () {\n        try {\n          _this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_selectHandler\", function (e) {\n      var _this$props2 = _this.props,\n          onCaretPositionChange = _this$props2.onCaretPositionChange,\n          onSelect = _this$props2.onSelect;\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n\n      if (onSelect) {\n        e.persist();\n        onSelect(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClickAndBlurHandler\", function (e) {\n      var _this$props3 = _this.props,\n          closeOnClickOutside = _this$props3.closeOnClickOutside,\n          onBlur = _this$props3.onBlur; // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n      // that was actually clicked. If we clicked inside the auto-select dropdown, then\n      // that's not a blur, from the auto-select point of view, so then do nothing.\n\n      var el = e.relatedTarget;\n\n      if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n        return;\n      }\n\n      if (closeOnClickOutside) _this._closeAutocomplete();\n\n      if (onBlur) {\n        e.persist();\n        onBlur(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onScrollHandler\", function () {\n      return _this._closeAutocomplete();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_dropdownScroll\", function (item) {\n      var scrollToItem = _this.props.scrollToItem;\n      if (!scrollToItem) return;\n\n      if (scrollToItem === true) {\n        defaultScrollToItem(_this.dropdownRef, item);\n        return;\n      }\n\n      if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n        throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n      }\n\n      scrollToItem(_this.dropdownRef, item);\n    });\n\n    var _this$props4 = _this.props,\n        loadingComponent = _this$props4.loadingComponent,\n        _trigger = _this$props4.trigger,\n        _value = _this$props4.value; // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    _this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!_trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n\n    _this.state = {\n      actualToken: '',\n      component: null,\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      listenerIndex: 0,\n      selectionEnd: 0,\n      selectionStart: 0,\n      top: null,\n      value: _value || ''\n    };\n    return _this;\n  }\n\n  _createClass(ReactTextareaAutocomplete, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Listeners.add(KEY_CODES.ESC, function () {\n        return _this2._closeAutocomplete();\n      });\n      Listeners.add(KEY_CODES.SPACE, function () {\n        return _this2._onSpace();\n      });\n      var listenerIndex = Listeners.add(KEY_CODES.ENTER, function (e) {\n        return _this2._onEnter(e);\n      });\n      this.setState({\n        listenerIndex: listenerIndex\n      });\n      Listeners.startListen();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      this._update(nextProps);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Listeners.stopListen();\n      Listeners.remove(this.state.listenerIndex);\n    }\n  }, {\n    key: \"_update\",\n    value: // TODO: This is an anti pattern in react, should come up with a better way\n    function _update(_ref) {\n      var trigger = _ref.trigger,\n          value = _ref.value;\n      var oldValue = this.state.value;\n      var oldTrigger = this.props.trigger;\n      if (value !== oldValue || !oldValue) this.setState({\n        value: value\n      });\n      /**\n       * check if trigger chars are changed, if so, change the regexp accordingly\n       */\n\n      if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n        this._createRegExp();\n      }\n    }\n    /**\n     * Close autocomplete, also clean up trigger (to avoid slow promises)\n     */\n\n  }, {\n    key: \"renderSuggestionListContainer\",\n    value: function renderSuggestionListContainer() {\n      var _this3 = this;\n\n      var _this$props5 = this.props,\n          disableMentions = _this$props5.disableMentions,\n          dropdownClassName = _this$props5.dropdownClassName,\n          dropdownStyle = _this$props5.dropdownStyle,\n          itemClassName = _this$props5.itemClassName,\n          itemStyle = _this$props5.itemStyle,\n          listClassName = _this$props5.listClassName,\n          SuggestionItem = _this$props5.SuggestionItem,\n          _this$props5$Suggesti = _this$props5.SuggestionList,\n          SuggestionList = _this$props5$Suggesti === void 0 ? List : _this$props5$Suggesti;\n      var _this$state6 = this.state,\n          component = _this$state6.component,\n          currentTrigger = _this$state6.currentTrigger,\n          dataLoading = _this$state6.dataLoading,\n          value = _this$state6.value;\n\n      var selectedItem = this._getItemOnSelect();\n\n      var suggestionData = this._getSuggestions();\n\n      var textToReplace = this._getTextToReplace();\n\n      if ((dataLoading || suggestionData) && currentTrigger && !(disableMentions && currentTrigger === '@')) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"rta__autocomplete \".concat(dropdownClassName || ''),\n          ref: function ref(_ref2) {\n            _this3.dropdownRef = _ref2;\n          },\n          style: dropdownStyle\n        }, component && suggestionData && textToReplace && /*#__PURE__*/React.createElement(SuggestionList, {\n          className: listClassName,\n          component: component,\n          dropdownScroll: this._dropdownScroll,\n          getSelectedItem: selectedItem,\n          getTextToReplace: textToReplace,\n          itemClassName: itemClassName,\n          itemStyle: itemStyle,\n          onSelect: this._onSelect,\n          SuggestionItem: SuggestionItem,\n          value: value,\n          values: suggestionData\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props6 = this.props,\n          className = _this$props6.className,\n          containerClassName = _this$props6.containerClassName,\n          containerStyle = _this$props6.containerStyle,\n          style = _this$props6.style;\n      var maxRows = this.props.maxRows;\n      var _this$state7 = this.state,\n          dataLoading = _this$state7.dataLoading,\n          value = _this$state7.value;\n      if (!this.props.grow) maxRows = 1;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rta \".concat(dataLoading === true ? 'rta--loading' : '', \" \").concat(containerClassName || ''),\n        style: containerStyle\n      }, this.renderSuggestionListContainer(), /*#__PURE__*/React.createElement(Textarea, _extends({}, this._cleanUpProps(), {\n        className: \"rta__textarea \".concat(className || ''),\n        maxRows: maxRows,\n        onBlur: this._onClickAndBlurHandler,\n        onChange: this._changeHandler,\n        onClick: this._onClickAndBlurHandler,\n        onFocus: this.props.onFocus,\n        onScroll: this._onScrollHandler,\n        onSelect: this._selectHandler,\n        ref: function ref(_ref3) {\n          if (_this4.props.innerRef) _this4.props.innerRef(_ref3);\n          _this4.textareaRef = _ref3;\n        },\n        style: style,\n        value: value\n      }, this.props.additionalTextareaProps)));\n    }\n  }]);\n\n  return ReactTextareaAutocomplete;\n}(React.Component);\n\n_defineProperty(ReactTextareaAutocomplete, \"defaultProps\", {\n  closeOnClickOutside: true,\n  maxRows: 10,\n  minChar: 1,\n  movePopupAsYouType: false,\n  scrollToItem: true,\n  value: ''\n});\n\nReactTextareaAutocomplete.propTypes = {\n  className: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  containerClassName: PropTypes.string,\n  containerStyle: PropTypes.object,\n  disableMentions: PropTypes.bool,\n  dropdownClassName: PropTypes.string,\n  dropdownStyle: PropTypes.object,\n  itemClassName: PropTypes.string,\n  itemStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  listStyle: PropTypes.object,\n  loaderClassName: PropTypes.string,\n  loaderStyle: PropTypes.object,\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  style: PropTypes.object,\n  SuggestionList: PropTypes.elementType,\n  trigger: triggerPropsCheck,\n  value: PropTypes.string\n};\n/**\n * Avatar - A round avatar image with fallback to username's first letter.\n * @example ./Avatar.md\n */\n\nvar Avatar = function Avatar(props) {\n  var image = props.image,\n      name = props.name,\n      _a = props.onClick,\n      onClick = _a === void 0 ? function () {\n    return undefined;\n  } : _a,\n      _b = props.onMouseOver,\n      onMouseOver = _b === void 0 ? function () {\n    return undefined;\n  } : _b,\n      _c = props.shape,\n      shape = _c === void 0 ? 'circle' : _c,\n      _d = props.size,\n      size = _d === void 0 ? 32 : _d;\n\n  var _e = useState(false),\n      error = _e[0],\n      setError = _e[1];\n\n  var _f = useState(false),\n      loaded = _f[0],\n      setLoaded = _f[1];\n\n  useEffect(function () {\n    setError(false);\n    setLoaded(false);\n  }, [image]);\n  var initials = (name || '').charAt(0);\n  return React.createElement(\"div\", {\n    className: \"str-chat__avatar str-chat__avatar--\" + shape,\n    \"data-testid\": 'avatar',\n    onClick: onClick,\n    onMouseOver: onMouseOver,\n    style: {\n      flexBasis: size + \"px\",\n      fontSize: size / 2 + \"px\",\n      height: size + \"px\",\n      lineHeight: size + \"px\",\n      width: size + \"px\"\n    },\n    title: name\n  }, image && !error ? React.createElement(\"img\", {\n    alt: initials,\n    className: \"str-chat__avatar-image\" + (loaded ? ' str-chat__avatar-image--loaded' : ''),\n    \"data-testid\": 'avatar-img',\n    onError: function onError() {\n      return setError(true);\n    },\n    onLoad: function onLoad() {\n      return setLoaded(true);\n    },\n    src: image,\n    style: {\n      flexBasis: size + \"px\",\n      height: size + \"px\",\n      objectFit: 'cover',\n      width: size + \"px\"\n    }\n  }) : React.createElement(\"div\", {\n    className: 'str-chat__avatar-fallback',\n    \"data-testid\": 'avatar-fallback'\n  }, initials));\n};\n\nvar channelReducer = function channelReducer(state, action) {\n  var _a;\n\n  switch (action.type) {\n    case 'initStateFromChannel':\n      {\n        var channel = action.channel;\n        return _assign(_assign({}, state), {\n          loading: false,\n          members: _assign({}, channel.state.members),\n          messages: __spreadArrays(channel.state.messages),\n          pinnedMessages: __spreadArrays(channel.state.pinnedMessages),\n          read: _assign({}, channel.state.read),\n          watcherCount: channel.state.watcher_count,\n          watchers: _assign({}, channel.state.watchers)\n        });\n      }\n\n    case 'copyStateFromChannelOnEvent':\n      {\n        var channel = action.channel;\n        return _assign(_assign({}, state), {\n          members: _assign({}, channel.state.members),\n          messages: __spreadArrays(channel.state.messages),\n          pinnedMessages: __spreadArrays(channel.state.pinnedMessages),\n          read: _assign({}, channel.state.read),\n          typing: _assign({}, channel.state.typing),\n          watcherCount: channel.state.watcher_count,\n          watchers: _assign({}, channel.state.watchers)\n        });\n      }\n\n    case 'setThread':\n      {\n        var message = action.message;\n        return _assign(_assign({}, state), {\n          thread: message\n        });\n      }\n\n    case 'loadMoreFinished':\n      {\n        var hasMore = action.hasMore,\n            messages = action.messages;\n        return _assign(_assign({}, state), {\n          hasMore: hasMore,\n          loadingMore: false,\n          messages: messages\n        });\n      }\n\n    case 'setLoadingMore':\n      {\n        var loadingMore = action.loadingMore;\n        return _assign(_assign({}, state), {\n          loadingMore: loadingMore\n        });\n      }\n\n    case 'copyMessagesFromChannel':\n      {\n        var channel = action.channel,\n            parentId = action.parentId;\n        return _assign(_assign({}, state), {\n          messages: __spreadArrays(channel.state.messages),\n          pinnedMessages: __spreadArrays(channel.state.pinnedMessages),\n          threadMessages: parentId ? _assign({}, channel.state.threads)[parentId] || [] : state.threadMessages\n        });\n      }\n\n    case 'updateThreadOnEvent':\n      {\n        var channel = action.channel,\n            message = action.message;\n        if (!state.thread) return state;\n        return _assign(_assign({}, state), {\n          thread: (message === null || message === void 0 ? void 0 : message.id) === state.thread.id ? channel.state.formatMessage(message) : state.thread,\n          threadMessages: ((_a = state.thread) === null || _a === void 0 ? void 0 : _a.id) ? _assign({}, channel.state.threads)[state.thread.id] || [] : []\n        });\n      }\n\n    case 'openThread':\n      {\n        var channel = action.channel,\n            message = action.message;\n        return _assign(_assign({}, state), {\n          thread: message,\n          threadMessages: message.id ? _assign({}, channel.state.threads)[message.id] || [] : []\n        });\n      }\n\n    case 'startLoadingThread':\n      {\n        return _assign(_assign({}, state), {\n          threadLoadingMore: true\n        });\n      }\n\n    case 'loadMoreThreadFinished':\n      {\n        var threadHasMore = action.threadHasMore,\n            threadMessages = action.threadMessages;\n        return _assign(_assign({}, state), {\n          threadHasMore: threadHasMore,\n          threadLoadingMore: false,\n          threadMessages: threadMessages\n        });\n      }\n\n    case 'closeThread':\n      {\n        return _assign(_assign({}, state), {\n          thread: null,\n          threadLoadingMore: false,\n          threadMessages: []\n        });\n      }\n\n    case 'setError':\n      {\n        var error = action.error;\n        return _assign(_assign({}, state), {\n          error: error\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nvar initialState = {\n  error: null,\n  hasMore: true,\n  loading: true,\n  loadingMore: false,\n  members: {},\n  messages: [],\n  pinnedMessages: [],\n  read: {},\n  thread: null,\n  threadHasMore: true,\n  threadLoadingMore: false,\n  threadMessages: [],\n  typing: {},\n  watcherCount: 0,\n  watchers: {}\n};\nvar commonEmoji = {\n  custom: true,\n  emoticons: [],\n  short_names: []\n};\nvar emojiSetDef = {\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n  size: 20,\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png'\n};\nvar defaultMinimalEmojis = [_assign(_assign({\n  colons: ':+1:',\n  id: 'like',\n  name: 'like',\n  sheet_x: 0,\n  sheet_y: 0\n}, commonEmoji), emojiSetDef), _assign(_assign({\n  colons: ':heart:',\n  id: 'love',\n  name: 'love',\n  sheet_x: 1,\n  sheet_y: 2\n}, commonEmoji), emojiSetDef), _assign(_assign({\n  colons: ':joy:',\n  id: 'haha',\n  name: 'haha',\n  sheet_x: 1,\n  sheet_y: 0\n}, commonEmoji), emojiSetDef), _assign(_assign({\n  colons: ':astonished:',\n  id: 'wow',\n  name: 'wow',\n  sheet_x: 0,\n  sheet_y: 2\n}, commonEmoji), emojiSetDef), _assign(_assign({\n  colons: ':pensive:',\n  id: 'sad',\n  name: 'sad',\n  sheet_x: 0,\n  sheet_y: 1\n}, commonEmoji), emojiSetDef), _assign(_assign({\n  colons: ':angry:',\n  id: 'angry',\n  name: 'angry',\n  sheet_x: 1,\n  sheet_y: 1\n}, commonEmoji), emojiSetDef)]; // use this only for small lists like in ReactionSelector\n\nvar getStrippedEmojiData = function getStrippedEmojiData(data) {\n  return _assign(_assign({}, data), {\n    emojis: {}\n  });\n};\n\nvar ChatContext = React.createContext({});\n\nvar ChatProvider = function ChatProvider(_a) {\n  var children = _a.children,\n      value = _a.value;\n  return React.createElement(ChatContext.Provider, {\n    value: value\n  }, children);\n};\n\nvar useChatContext = function useChatContext() {\n  return useContext(ChatContext);\n};\n/**\n * Typescript currently does not support partial inference so if ChatContext\n * typing is desired while using the HOC withChatContext the Props for the\n * wrapped component must be provided as the first generic.\n */\n\n\nvar withChatContext = function withChatContext(Component) {\n  var WithChatContextComponent = function WithChatContextComponent(props) {\n    var chatContext = useChatContext();\n    return React.createElement(Component, _assign({}, props, chatContext));\n  };\n\n  WithChatContextComponent.displayName = \"WithChatContext\" + getDisplayName(Component);\n  return WithChatContextComponent;\n};\n\nvar useEditMessageHandler = function useEditMessageHandler(doUpdateMessageRequest) {\n  var _a = useChatContext(),\n      channel = _a.channel,\n      client = _a.client;\n\n  return function (updatedMessage) {\n    if (doUpdateMessageRequest && channel) {\n      return Promise.resolve(doUpdateMessageRequest(channel.cid, updatedMessage));\n    }\n\n    return client.updateMessage(updatedMessage);\n  };\n};\n\nvar useIsMounted = function useIsMounted() {\n  var isMounted = useRef(true);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nvar useMentionsHandlers = function useMentionsHandlers(onMentionsHover, onMentionsClick) {\n  return useCallback(function (event, mentioned_users) {\n    if (!onMentionsHover && !onMentionsClick || !(event.target instanceof HTMLElement)) {\n      return;\n    }\n\n    var target = event.target;\n    var tagName = target.tagName.toLowerCase();\n    var textContent = target.innerHTML.replace('*', '');\n\n    if (tagName === 'strong' && textContent[0] === '@') {\n      var userName_1 = textContent.replace('@', '');\n      var user = mentioned_users.find(function (_a) {\n        var id = _a.id,\n            name = _a.name;\n        return name === userName_1 || id === userName_1;\n      });\n\n      if (onMentionsHover && typeof onMentionsHover === 'function' && event.type === 'mouseover') {\n        onMentionsHover(event, user);\n      }\n\n      if (onMentionsClick && event.type === 'click' && typeof onMentionsClick === 'function') {\n        onMentionsClick(event, user);\n      }\n    }\n  }, [onMentionsClick, onMentionsHover]);\n};\n\nvar LoadingItems = function LoadingItems() {\n  return React.createElement(\"div\", {\n    className: 'str-chat__loading-channels-item'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__loading-channels-avatar'\n  }), React.createElement(\"div\", {\n    className: 'str-chat__loading-channels-meta'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__loading-channels-username'\n  }), React.createElement(\"div\", {\n    className: 'str-chat__loading-channels-status'\n  })));\n};\n\nvar UnMemoizedLoadingChannels = function UnMemoizedLoadingChannels() {\n  return React.createElement(\"div\", {\n    className: 'str-chat__loading-channels'\n  }, React.createElement(LoadingItems, null), React.createElement(LoadingItems, null), React.createElement(LoadingItems, null));\n};\n/**\n * LoadingChannels - Fancy loading indicator for the ChannelList.\n * @example ./LoadingChannels.md\n */\n\n\nvar LoadingChannels = React.memo(UnMemoizedLoadingChannels);\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ../../docs/LoadingErrorIndicator.md\n */\n\nvar UnMemoizedLoadingErrorIndicator = function UnMemoizedLoadingErrorIndicator(_a) {\n  var error = _a.error;\n  var t = useTranslationContext().t;\n  if (!error) return null;\n  return React.createElement(\"div\", null, t('Error: {{ errorMessage }}', {\n    errorMessage: error.message\n  }));\n};\n\nvar LoadingErrorIndicator = React.memo(UnMemoizedLoadingErrorIndicator, function (prevProps, nextProps) {\n  var _a, _b;\n\n  return ((_a = prevProps.error) === null || _a === void 0 ? void 0 : _a.message) === ((_b = nextProps.error) === null || _b === void 0 ? void 0 : _b.message);\n});\n\nvar UnMemoizedLoadingIndicator = function UnMemoizedLoadingIndicator(props) {\n  var _a = props.color,\n      color = _a === void 0 ? '#006CFF' : _a,\n      _b = props.size,\n      size = _b === void 0 ? 15 : _b;\n  return React.createElement(\"div\", {\n    className: \"str-chat__loading-indicator \" + color,\n    \"data-testid\": 'loading-indicator-wrapper',\n    style: {\n      height: size,\n      width: size\n    }\n  }, React.createElement(\"svg\", {\n    height: size,\n    viewBox: \"0 0 30 30\",\n    width: size,\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"defs\", null, React.createElement(\"linearGradient\", {\n    id: 'a',\n    x1: '50%',\n    x2: '50%',\n    y1: '0%',\n    y2: '100%'\n  }, React.createElement(\"stop\", {\n    offset: '0%',\n    stopColor: '#FFF',\n    stopOpacity: '0'\n  }), React.createElement(\"stop\", {\n    \"data-testid\": 'loading-indicator-circle',\n    offset: '100%',\n    stopColor: color,\n    stopOpacity: '1',\n    style: {\n      stopColor: color\n    }\n  }))), React.createElement(\"path\", {\n    d: 'M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z',\n    fill: 'url(#a)',\n    fillRule: 'evenodd'\n  })));\n};\n/**\n * LoadingIndicator - Just a simple loading spinner.\n * @example ./LoadingIndicator.md\n */\n\n\nvar LoadingIndicator = React.memo(UnMemoizedLoadingIndicator, function (prevProps, nextProps) {\n  return prevProps.color === nextProps.color && prevProps.size === nextProps.size;\n});\nvar ChannelContext = React.createContext({});\n\nvar ChannelProvider = function ChannelProvider(_a) {\n  var children = _a.children,\n      value = _a.value;\n  return React.createElement(ChannelContext.Provider, {\n    value: value\n  }, children);\n};\n\nvar useChannelContext = function useChannelContext() {\n  return useContext(ChannelContext);\n};\n/**\n * Typescript currently does not support partial inference, so if ChannelContext\n * typing is desired while using the HOC withChannelContext, the Props for the\n * wrapped component must be provided as the first generic.\n */\n\n\nvar withChannelContext = function withChannelContext(Component) {\n  var WithChannelContextComponent = function WithChannelContextComponent(props) {\n    var channelContext = useChannelContext();\n    return React.createElement(Component, _assign({}, props, channelContext));\n  };\n\n  WithChannelContextComponent.displayName = (Component.displayName || Component.name || 'Component').replace('Base', '');\n  return WithChannelContextComponent;\n};\n\nvar handleActionWarning = \"Action handler was called, but it is missing one of its required arguments.\\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.\";\n\nfunction useActionHandler(message) {\n  var _this = this;\n\n  var _a = useChannelContext(),\n      channel = _a.channel,\n      removeMessage = _a.removeMessage,\n      updateMessage = _a.updateMessage;\n\n  return function (dataOrName, value, event) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var messageID, formData, data;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (event) event.preventDefault();\n\n            if (!message || !updateMessage || !removeMessage || !channel) {\n              console.warn(handleActionWarning);\n              return [2\n              /*return*/\n              ];\n            }\n\n            messageID = message.id;\n            formData = {}; // deprecated: value&name should be removed in favor of data obj\n\n            if (typeof dataOrName === 'string') {\n              formData[dataOrName] = value;\n            } else {\n              formData = _assign({}, dataOrName);\n            }\n\n            if (!messageID) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , channel.sendAction(messageID, formData)];\n\n          case 1:\n            data = _a.sent();\n\n            if (data === null || data === void 0 ? void 0 : data.message) {\n              updateMessage(data.message);\n            } else {\n              removeMessage(message);\n            }\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n}\n\nvar getDeviceWidth = function getDeviceWidth(width) {\n  if (width < 768) return {\n    device: 'mobile',\n    width: width\n  };\n  if (width < 1024) return {\n    device: 'tablet',\n    width: width\n  };\n  return {\n    device: 'full',\n    width: width\n  };\n};\n\nvar useBreakpoint = function useBreakpoint() {\n  var _a = useState(getDeviceWidth(window.innerWidth)),\n      breakpoint = _a[0],\n      setBreakpoint = _a[1];\n\n  useEffect(function () {\n    var getInnerWidth = throttle(function () {\n      return setBreakpoint(getDeviceWidth(window.innerWidth));\n    }, 200);\n    window.addEventListener('resize', getInnerWidth);\n    return function () {\n      return window.removeEventListener('resize', getInnerWidth);\n    };\n  }, []);\n  return breakpoint;\n};\n\nvar useDeleteHandler = function useDeleteHandler(message) {\n  var _a = useChannelContext(),\n      client = _a.client,\n      updateMessage = _a.updateMessage;\n\n  return function (event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var data;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            event.preventDefault();\n\n            if (!(message === null || message === void 0 ? void 0 : message.id) || !client || !updateMessage) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [4\n            /*yield*/\n            , client.deleteMessage(message.id)];\n\n          case 1:\n            data = _a.sent();\n            updateMessage(data.message);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nvar useEditHandler = function useEditHandler(customInitialState, customSetEditing, customClearEditingHandler) {\n  if (customInitialState === void 0) {\n    customInitialState = false;\n  }\n\n  var _a = useState(customInitialState),\n      editing = _a[0],\n      setEditing = _a[1];\n\n  var setEdit = customSetEditing || function (event) {\n    if (event === null || event === void 0 ? void 0 : event.preventDefault) {\n      event.preventDefault();\n    }\n\n    setEditing(true);\n  };\n\n  var clearEdit = customClearEditingHandler || function (event) {\n    if (event === null || event === void 0 ? void 0 : event.preventDefault) {\n      event.preventDefault();\n    }\n\n    setEditing(false);\n  };\n\n  return {\n    clearEdit: clearEdit,\n    editing: editing,\n    setEdit: setEdit\n  };\n};\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n */\n\n\nvar validateAndGetMessage = function validateAndGetMessage(func, args) {\n  if (!func || typeof func !== 'function') return null; // below is due to tests passing a single argument\n  // rather than an array.\n\n  if (!(args instanceof Array)) {\n    // @ts-expect-error\n    args = [args];\n  }\n\n  var returnValue = func.apply(void 0, args);\n  if (typeof returnValue !== 'string') return null;\n  return returnValue;\n};\n/**\n * Tell if the owner of the current message is muted\n */\n\n\nvar isUserMuted = function isUserMuted(message, mutes) {\n  if (!mutes || !message) return false;\n  var userMuted = mutes.filter(function (el) {\n    var _a;\n\n    return el.target.id === ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id);\n  });\n  return !!userMuted.length;\n};\n\nvar MESSAGE_ACTIONS = {\n  delete: 'delete',\n  edit: 'edit',\n  flag: 'flag',\n  mute: 'mute',\n  pin: 'pin',\n  react: 'react',\n  reply: 'reply'\n};\nvar defaultPinPermissions = {\n  commerce: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false\n  },\n  gaming: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false\n  },\n  livestream: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: true,\n    user: false\n  },\n  messaging: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false\n  },\n  team: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false\n  }\n};\n\nvar getMessageActions = function getMessageActions(actions, _a) {\n  var canDelete = _a.canDelete,\n      canEdit = _a.canEdit,\n      canFlag = _a.canFlag,\n      canMute = _a.canMute,\n      canPin = _a.canPin,\n      canReact = _a.canReact,\n      canReply = _a.canReply;\n  var messageActionsAfterPermission = [];\n  var messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = __spreadArrays(actions);\n  } else {\n    return [];\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  if (canPin && messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.pin);\n  }\n\n  if (canReact && messageActions.indexOf(MESSAGE_ACTIONS.react) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.react);\n  }\n\n  if (canReply && messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.reply);\n  }\n\n  return messageActionsAfterPermission;\n};\n\nvar showMessageActionsBox = function showMessageActionsBox(actions) {\n  if (actions.length === 0) {\n    return false;\n  }\n\n  if (actions.length === 1 && (actions.includes('react') || actions.includes('reply'))) {\n    return false;\n  }\n\n  if (actions.length === 2 && actions.includes('react') && actions.includes('reply')) {\n    return false;\n  }\n\n  return true;\n};\n\nvar areMessagePropsEqual = function areMessagePropsEqual(prevProps, nextProps) {\n  var _a, _b, _c, _d;\n\n  var prevMessage = prevProps.message;\n  var nextMessage = nextProps.message;\n  var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at && ((_a = prevMessage.latest_reactions) === null || _a === void 0 ? void 0 : _a.length) === ((_b = nextMessage.latest_reactions) === null || _b === void 0 ? void 0 : _b.length) && ((_c = prevMessage.own_reactions) === null || _c === void 0 ? void 0 : _c.length) === ((_d = nextMessage.own_reactions) === null || _d === void 0 ? void 0 : _d.length) && prevMessage.pinned === nextMessage.pinned && prevMessage.reply_count === nextMessage.reply_count && prevMessage.status === nextMessage.status && prevMessage.text === nextMessage.text && prevMessage.type === nextMessage.type && prevMessage.updated_at === nextMessage.updated_at;\n  if (!messagesAreEqual) return false;\n  var deepEqualProps = deepequal(nextProps.readBy, prevProps.readBy) && deepequal(nextProps.groupStyles, prevProps.groupStyles) && // last 3 messages can have different group styles\n  deepequal(nextProps.mutes, prevProps.mutes) && deepequal(nextProps.lastReceivedId, prevProps.lastReceivedId);\n  if (!deepEqualProps) return false;\n  return prevProps.messageListRect === nextProps.messageListRect // MessageList wrapper layout changes\n  ;\n};\n\nvar areMessageUIPropsEqual = function areMessageUIPropsEqual(prevProps, nextProps) {\n  var _a, _b, _c, _d;\n\n  var prevLastReceivedId = prevProps.lastReceivedId,\n      prevMessage = prevProps.message;\n  var nextLastReceivedId = nextProps.lastReceivedId,\n      nextMessage = nextProps.message;\n  if (nextProps.editing !== prevProps.editing) return false;\n\n  if (nextProps.showDetailedReactions !== prevProps.showDetailedReactions) {\n    return false;\n  }\n\n  if ((prevMessage.id === prevLastReceivedId || prevMessage.id === nextLastReceivedId) && prevLastReceivedId !== nextLastReceivedId) {\n    return false;\n  }\n\n  var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at && ((_a = prevMessage.latest_reactions) === null || _a === void 0 ? void 0 : _a.length) === ((_b = nextMessage.latest_reactions) === null || _b === void 0 ? void 0 : _b.length) && ((_c = prevMessage.own_reactions) === null || _c === void 0 ? void 0 : _c.length) === ((_d = nextMessage.own_reactions) === null || _d === void 0 ? void 0 : _d.length) && prevMessage.pinned === nextMessage.pinned && prevMessage.reply_count === nextMessage.reply_count && prevMessage.status === nextMessage.status && prevMessage.text === nextMessage.text && prevMessage.type === nextMessage.type && prevMessage.updated_at === nextMessage.updated_at;\n  if (!messagesAreEqual) return false;\n  return true;\n};\n\nvar messageHasReactions = function messageHasReactions(message) {\n  return !!(message === null || message === void 0 ? void 0 : message.latest_reactions) && !!message.latest_reactions.length;\n};\n\nvar messageHasAttachments = function messageHasAttachments(message) {\n  return !!(message === null || message === void 0 ? void 0 : message.attachments) && !!message.attachments.length;\n};\n\nvar getImages = function getImages(message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(function (item) {\n    return item.type === 'image';\n  });\n};\n\nvar getNonImageAttachments = function getNonImageAttachments(message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(function (item) {\n    return item.type !== 'image';\n  });\n};\n\nvar getReadByTooltipText = function getReadByTooltipText(users, t, client) {\n  var outStr = '';\n\n  if (!t) {\n    throw new Error('`getReadByTooltipText was called, but translation function is not available`');\n  } // first filter out client user, so restLength won't count it\n\n\n  var otherUsers = users.filter(function (item) {\n    return item && (client === null || client === void 0 ? void 0 : client.user) && item.id !== client.user.id;\n  }).map(function (item) {\n    return item.name || item.id;\n  });\n  var slicedArr = otherUsers.slice(0, 5);\n  var restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = slicedArr[0] + \" \";\n  } else if (slicedArr.length === 2) {\n    // joins all with \"and\" but =no commas\n    // example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1]\n    });\n  } else if (slicedArr.length > 2) {\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      var lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser: lastUser\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength\n      });\n    }\n  }\n\n  return outStr;\n};\n\nvar missingUseFlagHandlerParameterWarning = 'useFlagHandler was called but it is missing one or more necessary parameters.';\n\nvar useFlagHandler = function useFlagHandler(message, notifications) {\n  if (notifications === void 0) {\n    notifications = {};\n  }\n\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n  return function (event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var getErrorNotification, getSuccessNotification, notify, successMessage, errorMessage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            event.preventDefault();\n            getErrorNotification = notifications.getErrorNotification, getSuccessNotification = notifications.getSuccessNotification, notify = notifications.notify;\n\n            if (!client || !t || !notify || !(message === null || message === void 0 ? void 0 : message.id)) {\n              console.warn(missingUseFlagHandlerParameterWarning);\n              return [2\n              /*return*/\n              ];\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , client.flagMessage(message.id)];\n\n          case 2:\n            _a.sent();\n\n            successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message]);\n            notify(successMessage || t('Message has been successfully flagged'), 'success');\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _a.sent();\n\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            notify(errorMessage || t('Error adding flag: Either the flag already exist or there is issue with network connection ...'), 'error');\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nfunction createEventHandler(fn, message) {\n  return function (event) {\n    if (typeof fn !== 'function' || !(message === null || message === void 0 ? void 0 : message.mentioned_users)) {\n      return;\n    }\n\n    fn(event, message.mentioned_users);\n  };\n}\n\nvar useMentionsHandler = function useMentionsHandler(message, customMentionHandler) {\n  var _a = useChannelContext(),\n      channelOnMentionsClick = _a.onMentionsClick,\n      channelOnMentionsHover = _a.onMentionsHover;\n\n  var onMentionsClick = (customMentionHandler === null || customMentionHandler === void 0 ? void 0 : customMentionHandler.onMentionsClick) || channelOnMentionsClick || function () {\n    return null;\n  };\n\n  var onMentionsHover = (customMentionHandler === null || customMentionHandler === void 0 ? void 0 : customMentionHandler.onMentionsHover) || channelOnMentionsHover || function () {\n    return null;\n  };\n\n  return {\n    onMentionsClick: createEventHandler(onMentionsClick, message),\n    onMentionsHover: createEventHandler(onMentionsHover, message)\n  };\n};\n\nvar useMentionsUIHandler = function useMentionsUIHandler(message, eventHandlers) {\n  var _a = useChannelContext(),\n      onMentionsClick = _a.onMentionsClick,\n      onMentionsHover = _a.onMentionsHover;\n\n  return {\n    onMentionsClick: (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onMentionsClick) || createEventHandler(onMentionsClick, message),\n    onMentionsHover: (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onMentionsHover) || createEventHandler(onMentionsHover, message)\n  };\n};\n\nvar useMobilePress = function useMobilePress() {\n  var _a = useState(null),\n      targetMessage = _a[0],\n      setTargetMessage = _a[1];\n\n  var breakpoint = useBreakpoint();\n\n  var handleMobilePress = function handleMobilePress(event) {\n    if (event.target instanceof HTMLElement && breakpoint.device === 'mobile') {\n      var closestMessage = event.target.closest('.str-chat__message-simple');\n      if (!closestMessage) return;\n      setTargetMessage(closestMessage);\n\n      if (closestMessage.classList.contains('mobile-press')) {\n        closestMessage.classList.remove('mobile-press');\n      } else {\n        closestMessage.classList.add('mobile-press');\n      }\n    }\n  };\n\n  useEffect(function () {\n    function handleClick(event) {\n      var isClickInside = targetMessage === null || targetMessage === void 0 ? void 0 : targetMessage.contains(event.target);\n\n      if (!isClickInside && targetMessage) {\n        targetMessage.classList.remove('mobile-press');\n      }\n    }\n\n    if (breakpoint.device === 'mobile') {\n      document.addEventListener('click', handleClick);\n    }\n\n    return function () {\n      return document.removeEventListener('click', handleClick);\n    };\n  }, [breakpoint, targetMessage]);\n  return {\n    handleMobilePress: handleMobilePress\n  };\n};\n\nvar missingUseMuteHandlerParamsWarning = 'useMuteHandler was called but it is missing one or more necessary parameter.';\n\nvar useMuteHandler = function useMuteHandler(message, notifications) {\n  if (notifications === void 0) {\n    notifications = {};\n  }\n\n  var mutes = useChannelContext().mutes;\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n  return function (event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var getErrorNotification, getSuccessNotification, notify, successMessage, errorMessage, fallbackMessage, successMessage, errorMessage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            event.preventDefault();\n            getErrorNotification = notifications.getErrorNotification, getSuccessNotification = notifications.getSuccessNotification, notify = notifications.notify;\n\n            if (!t || !(message === null || message === void 0 ? void 0 : message.user) || !notify || !client) {\n              console.warn(missingUseMuteHandlerParamsWarning);\n              return [2\n              /*return*/\n              ];\n            }\n\n            if (!!isUserMuted(message, mutes)) return [3\n            /*break*/\n            , 5];\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , client.muteUser(message.user.id)];\n\n          case 2:\n            _a.sent();\n\n            successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message.user]);\n            notify(successMessage || t(\"{{ user }} has been muted\", {\n              user: message.user.name || message.user.id\n            }), 'success');\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _a.sent();\n\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message.user]);\n            notify(errorMessage || t('Error muting a user ...'), 'error');\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [3\n            /*break*/\n            , 8];\n\n          case 5:\n            _a.trys.push([5, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , client.unmuteUser(message.user.id)];\n\n          case 6:\n            _a.sent();\n\n            fallbackMessage = t(\"{{ user }} has been unmuted\", {\n              user: message.user.name || message.user.id\n            });\n            successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message.user]) || fallbackMessage;\n\n            if (typeof successMessage === 'string') {\n              notify(successMessage, 'success');\n            }\n\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            _a.sent();\n\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message.user]) || t('Error unmuting a user ...');\n\n            if (typeof errorMessage === 'string') {\n              notify(errorMessage, 'error');\n            }\n\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nvar useOpenThreadHandler = function useOpenThreadHandler(message, customOpenThread) {\n  var channelOpenThread = useChannelContext().openThread;\n  var openThread = customOpenThread || channelOpenThread;\n  return function (event) {\n    if (!openThread || !message) {\n      console.warn('Open thread handler was called but it is missing one of its parameters');\n      return;\n    }\n\n    openThread(message, event);\n  };\n};\n\nvar usePinHandler = function usePinHandler(message, permissions, notifications) {\n  if (notifications === void 0) {\n    notifications = {};\n  }\n\n  var getErrorNotification = notifications.getErrorNotification,\n      notify = notifications.notify;\n\n  var _a = useChannelContext(),\n      channel = _a.channel,\n      client = _a.client;\n\n  var t = useTranslationContext().t;\n\n  var canPin = function canPin() {\n    var _a;\n\n    if (!(client === null || client === void 0 ? void 0 : client.userID) || !(channel === null || channel === void 0 ? void 0 : channel.state) || !permissions || !permissions[channel.type]) {\n      return false;\n    }\n\n    var currentChannelPermissions = permissions[channel.type];\n    var currentChannelMember = channel.state.members[client.userID];\n    var currentChannelWatcher = channel.state.watchers[client.userID];\n\n    if (currentChannelPermissions && typeof ((_a = client.user) === null || _a === void 0 ? void 0 : _a.role) === 'string' && currentChannelPermissions[client.user.role]) {\n      return true;\n    }\n\n    if (currentChannelMember && typeof currentChannelMember.role === 'string' && currentChannelPermissions && currentChannelPermissions[currentChannelMember.role]) {\n      return true;\n    }\n\n    if (currentChannelWatcher && typeof currentChannelWatcher.role === 'string' && currentChannelPermissions && currentChannelPermissions[currentChannelWatcher.role]) {\n      return true;\n    }\n\n    return false;\n  };\n\n  var handlePin = function handlePin(event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var errorMessage, errorMessage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            event.preventDefault();\n            if (!message) return [2\n            /*return*/\n            ];\n            if (!!message.pinned) return [3\n            /*break*/\n            , 5];\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , client.pinMessage(message)];\n\n          case 2:\n            _a.sent();\n\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _a.sent();\n\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            if (notify) notify(errorMessage || t('Error pinning message'), 'error');\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [3\n            /*break*/\n            , 8];\n\n          case 5:\n            _a.trys.push([5, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , client.unpinMessage(message)];\n\n          case 6:\n            _a.sent();\n\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            _a.sent();\n\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            if (notify) notify(errorMessage || t('Error removing message pin'), 'error');\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return {\n    canPin: canPin(),\n    handlePin: handlePin\n  };\n};\n\nvar reactionHandlerWarning = \"Reaction handler was called, but it is missing one of its required arguments.\\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.\";\n\nvar useReactionHandler = function useReactionHandler(message) {\n  var _a = useChannelContext(),\n      channel = _a.channel,\n      updateMessage = _a.updateMessage;\n\n  var client = useChatContext().client;\n  return function (reactionType, event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var userExistingReaction, currentUser, originalMessage, reactionChangePromise, messageID, reaction;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (event && event.preventDefault) {\n              event.preventDefault();\n            }\n\n            if (!updateMessage || !message || !channel || !client) {\n              console.warn(reactionHandlerWarning);\n              return [2\n              /*return*/\n              ];\n            }\n\n            userExistingReaction = null;\n            currentUser = client.userID;\n\n            if (message.own_reactions) {\n              message.own_reactions.forEach(function (reaction) {\n                // own user should only ever contain the current user id\n                // just in case we check to prevent bugs with message updates from breaking reactions\n                if (reaction.user && currentUser === reaction.user.id && reaction.type === reactionType) {\n                  userExistingReaction = reaction;\n                } else if (reaction.user && currentUser !== reaction.user.id) {\n                  console.warn(\"message.own_reactions contained reactions from a different user, this indicates a bug\");\n                }\n              });\n            }\n\n            originalMessage = message;\n            if (!message.id) return [3\n            /*break*/\n            , 4];\n\n            if (userExistingReaction) {\n              reactionChangePromise = channel.deleteReaction(message.id, userExistingReaction.type);\n            } else {\n              messageID = message.id;\n              reaction = {\n                type: reactionType\n              }; // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n\n              reactionChangePromise = channel.sendReaction(messageID, reaction);\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]); // only wait for the API call after the state is updated\n\n\n            return [4\n            /*yield*/\n            , reactionChangePromise];\n\n          case 2:\n            // only wait for the API call after the state is updated\n            _a.sent();\n\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _a.sent(); // revert to the original message if the API call fails\n\n\n            updateMessage(originalMessage);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nvar useReactionClick = function useReactionClick(message, reactionSelectorRef, messageWrapperRef) {\n  var _a, _b;\n\n  var channel = useChannelContext().channel;\n\n  var _c = useState(false),\n      showDetailedReactions = _c[0],\n      setShowDetailedReactions = _c[1];\n\n  var hasListener = useRef(false);\n  var isReactionEnabled = ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.reactions) !== false;\n  var messageDeleted = !!(message === null || message === void 0 ? void 0 : message.deleted_at);\n  var closeDetailedReactions = useCallback(function (event) {\n    var _a;\n\n    if (event.target instanceof HTMLElement && ((_a = reactionSelectorRef === null || reactionSelectorRef === void 0 ? void 0 : reactionSelectorRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n      return;\n    }\n\n    setShowDetailedReactions(false);\n  }, [setShowDetailedReactions, reactionSelectorRef]);\n  useEffect(function () {\n    var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n\n    if (showDetailedReactions && !hasListener.current) {\n      hasListener.current = true;\n      document.addEventListener('click', closeDetailedReactions);\n      document.addEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.addEventListener('mouseleave', closeDetailedReactions);\n      }\n    }\n\n    if (!showDetailedReactions && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n      }\n\n      hasListener.current = false;\n    }\n\n    return function () {\n      if (hasListener.current) {\n        document.removeEventListener('click', closeDetailedReactions);\n        document.removeEventListener('touchend', closeDetailedReactions);\n\n        if (messageWrapper) {\n          messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n        }\n\n        hasListener.current = false;\n      }\n    };\n  }, [showDetailedReactions, closeDetailedReactions, messageWrapperRef]);\n  useEffect(function () {\n    var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n\n    if (messageDeleted && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n      }\n\n      hasListener.current = false;\n    }\n  }, [messageDeleted, closeDetailedReactions, messageWrapperRef]);\n\n  var onReactionListClick = function onReactionListClick(event) {\n    if (event && event.stopPropagation) {\n      event.stopPropagation();\n    }\n\n    setShowDetailedReactions(true);\n  };\n\n  return {\n    isReactionEnabled: isReactionEnabled,\n    onReactionListClick: onReactionListClick,\n    showDetailedReactions: showDetailedReactions\n  };\n};\n\nvar useRetryHandler = function useRetryHandler(customRetrySendMessage) {\n  var contextRetrySendMessage = useChannelContext().retrySendMessage;\n  var retrySendMessage = customRetrySendMessage || contextRetrySendMessage;\n  return function (message) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!(retrySendMessage && message)) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , retrySendMessage(message)];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nvar useUserHandler = function useUserHandler(message, eventHandlers) {\n  return {\n    onUserClick: function onUserClick(event) {\n      if (typeof (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onUserClickHandler) !== 'function' || !(message === null || message === void 0 ? void 0 : message.user)) {\n        return;\n      }\n\n      eventHandlers.onUserClickHandler(event, message.user);\n    },\n    onUserHover: function onUserHover(event) {\n      if (typeof (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onUserHoverHandler) !== 'function' || !(message === null || message === void 0 ? void 0 : message.user)) {\n        return;\n      }\n\n      eventHandlers.onUserHoverHandler(event, message.user);\n    }\n  };\n};\n\nvar useUserRole = function useUserRole(message) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n  var _l = useChannelContext(),\n      channel = _l.channel,\n      client = _l.client; // TODO - fix breaking tests that result from pulling client from ChatContext\n\n\n  var isMyMessage = !!(message === null || message === void 0 ? void 0 : message.user) && !!(client === null || client === void 0 ? void 0 : client.user) && client.user.id === message.user.id;\n  var isAdmin = ((_a = client === null || client === void 0 ? void 0 : client.user) === null || _a === void 0 ? void 0 : _a.role) === 'admin' || ((_c = (_b = channel === null || channel === void 0 ? void 0 : channel.state) === null || _b === void 0 ? void 0 : _b.membership) === null || _c === void 0 ? void 0 : _c.role) === 'admin';\n  var isOwner = ((_e = (_d = channel === null || channel === void 0 ? void 0 : channel.state) === null || _d === void 0 ? void 0 : _d.membership) === null || _e === void 0 ? void 0 : _e.role) === 'owner';\n  var isModerator = ((_f = client === null || client === void 0 ? void 0 : client.user) === null || _f === void 0 ? void 0 : _f.role) === 'channel_moderator' || ((_h = (_g = channel === null || channel === void 0 ? void 0 : channel.state) === null || _g === void 0 ? void 0 : _g.membership) === null || _h === void 0 ? void 0 : _h.role) === 'channel_moderator' || ((_k = (_j = channel === null || channel === void 0 ? void 0 : channel.state) === null || _j === void 0 ? void 0 : _j.membership) === null || _k === void 0 ? void 0 : _k.role) === 'moderator';\n  var canEditMessage = isMyMessage || isModerator || isOwner || isAdmin;\n  var canDeleteMessage = canEditMessage;\n  return {\n    canDeleteMessage: canDeleteMessage,\n    canEditMessage: canEditMessage,\n    isAdmin: isAdmin,\n    isModerator: isModerator,\n    isMyMessage: isMyMessage,\n    isOwner: isOwner\n  };\n};\n\nvar defaultTimestampFormat = 'h:mmA';\nvar notValidDateWarning = 'MessageTimestamp was called without a message, or message has invalid created_at date.';\nvar noParsingFunctionWarning = 'MessageTimestamp was called but there is no datetime parsing function available';\n\nfunction getDateString(messageCreatedAt, formatDate, calendar, tDateTimeParser, format) {\n  if (!messageCreatedAt || !Date.parse(messageCreatedAt)) {\n    console.warn(notValidDateWarning);\n    return null;\n  }\n\n  if (typeof formatDate === 'function') {\n    return formatDate(new Date(messageCreatedAt));\n  }\n\n  if (!tDateTimeParser) {\n    console.warn(noParsingFunctionWarning);\n    return null;\n  }\n\n  var parsedTime = tDateTimeParser(messageCreatedAt);\n\n  if (isDayOrMoment(parsedTime)) {\n    /**\n     * parsedTime.calendar is guaranteed on the type but is only\n     * available when a user calls dayjs.extend(calendar)\n     */\n    return calendar && parsedTime.calendar ? parsedTime.calendar() : parsedTime.format(format);\n  }\n\n  if (isDate(parsedTime)) {\n    return parsedTime.toDateString();\n  }\n\n  if (isNumberOrString(parsedTime)) {\n    return parsedTime;\n  }\n\n  return null;\n}\n\nvar UnMemoizedMessageTimestamp = function UnMemoizedMessageTimestamp(props) {\n  var _a = props.calendar,\n      calendar = _a === void 0 ? false : _a,\n      _b = props.customClass,\n      customClass = _b === void 0 ? '' : _b,\n      _c = props.format,\n      format = _c === void 0 ? defaultTimestampFormat : _c,\n      formatDate = props.formatDate,\n      message = props.message;\n  var tDateTimeParser = useTranslationContext().tDateTimeParser;\n  var createdAt = message === null || message === void 0 ? void 0 : message.created_at;\n  var when = useMemo(function () {\n    return getDateString(createdAt, formatDate, calendar, tDateTimeParser, format);\n  }, [formatDate, calendar, tDateTimeParser, format, createdAt]);\n  if (!when) return null;\n  return React.createElement(\"time\", {\n    className: customClass,\n    dateTime: createdAt,\n    title: createdAt\n  }, when);\n};\n\nvar MessageTimestamp = React.memo(UnMemoizedMessageTimestamp);\n\nvar UnMemoizedMessageActionsBox = function UnMemoizedMessageActionsBox(props) {\n  var getMessageActions = props.getMessageActions,\n      handleDelete = props.handleDelete,\n      handleEdit = props.handleEdit,\n      handleFlag = props.handleFlag,\n      handleMute = props.handleMute,\n      handlePin = props.handlePin,\n      isUserMuted = props.isUserMuted,\n      message = props.message,\n      messageListRect = props.messageListRect,\n      mine = props.mine,\n      _a = props.open,\n      open = _a === void 0 ? false : _a;\n  var t = useTranslationContext().t;\n\n  var _b = useState(false),\n      reverse = _b[0],\n      setReverse = _b[1];\n\n  var messageActions = getMessageActions();\n  var checkIfReverse = useCallback(function (containerElement) {\n    if (!containerElement) {\n      setReverse(false);\n      return;\n    }\n\n    if (open) {\n      var containerRect = containerElement.getBoundingClientRect();\n\n      if (mine) {\n        setReverse(!!messageListRect && containerRect.left < messageListRect.left);\n      } else {\n        setReverse(!!messageListRect && containerRect.right + 5 > messageListRect.right);\n      }\n    }\n  }, [messageListRect, mine, open]);\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-actions-box\\n        \" + (open ? 'str-chat__message-actions-box--open' : '') + \"\\n        \" + (mine ? 'str-chat__message-actions-box--mine' : '') + \"\\n        \" + (reverse ? 'str-chat__message-actions-box--reverse' : '') + \"\\n      \",\n    \"data-testid\": 'message-actions-box',\n    ref: checkIfReverse\n  }, React.createElement(\"ul\", {\n    className: 'str-chat__message-actions-list'\n  }, messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1 && !(message === null || message === void 0 ? void 0 : message.parent_id) && React.createElement(\"button\", {\n    onClick: handlePin\n  }, React.createElement(\"li\", {\n    className: 'str-chat__message-actions-list-item'\n  }, !(message === null || message === void 0 ? void 0 : message.pinned) ? t('Pin') : t('Unpin'))), messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && React.createElement(\"button\", {\n    onClick: handleFlag\n  }, React.createElement(\"li\", {\n    className: 'str-chat__message-actions-list-item'\n  }, t('Flag'))), messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && React.createElement(\"button\", {\n    onClick: handleMute\n  }, React.createElement(\"li\", {\n    className: 'str-chat__message-actions-list-item'\n  }, isUserMuted && isUserMuted() ? t('Unmute') : t('Mute'))), messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && React.createElement(\"button\", {\n    onClick: handleEdit\n  }, React.createElement(\"li\", {\n    className: 'str-chat__message-actions-list-item'\n  }, t('Edit Message'))), messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && React.createElement(\"button\", {\n    onClick: handleDelete\n  }, React.createElement(\"li\", {\n    className: 'str-chat__message-actions-list-item'\n  }, t('Delete')))));\n};\n/**\n * MessageActionsBox - Allows a user to edit, flag or delete a message.\n * @example ./MessageActionsBox.md\n */\n\n\nvar MessageActionsBox = React.memo(UnMemoizedMessageActionsBox);\n\nvar MessageActions = function MessageActions(props) {\n  var addNotification = props.addNotification,\n      customWrapperClass = props.customWrapperClass,\n      getMessageActions = props.getMessageActions,\n      getFlagMessageErrorNotification = props.getFlagMessageErrorNotification,\n      getFlagMessageSuccessNotification = props.getFlagMessageSuccessNotification,\n      getMuteUserErrorNotification = props.getMuteUserErrorNotification,\n      getMuteUserSuccessNotification = props.getMuteUserSuccessNotification,\n      getPinMessageErrorNotification = props.getPinMessageErrorNotification,\n      propHandleDelete = props.handleDelete,\n      propHandleFlag = props.handleFlag,\n      propHandleMute = props.handleMute,\n      propHandlePin = props.handlePin,\n      inline = props.inline,\n      message = props.message,\n      messageListRect = props.messageListRect,\n      messageWrapperRef = props.messageWrapperRef,\n      _a = props.pinPermissions,\n      pinPermissions = _a === void 0 ? defaultPinPermissions : _a,\n      setEditingState = props.setEditingState;\n  var mutes = useChatContext().mutes;\n\n  var _b = useState(false),\n      actionsBoxOpen = _b[0],\n      setActionsBoxOpen = _b[1];\n\n  var isMyMessage = useUserRole(message).isMyMessage;\n  var handleDelete = useDeleteHandler(message);\n  var handleFlag = useFlagHandler(message, {\n    getErrorNotification: getFlagMessageSuccessNotification,\n    getSuccessNotification: getFlagMessageErrorNotification,\n    notify: addNotification\n  });\n  var handleMute = useMuteHandler(message, {\n    getErrorNotification: getMuteUserSuccessNotification,\n    getSuccessNotification: getMuteUserErrorNotification,\n    notify: addNotification\n  });\n  var handlePin = usePinHandler(message, pinPermissions, {\n    getErrorNotification: getPinMessageErrorNotification,\n    notify: addNotification\n  }).handlePin;\n  var isMuted = useCallback(function () {\n    return isUserMuted(message, mutes);\n  }, [message, mutes]);\n  var hideOptions = useCallback(function () {\n    return setActionsBoxOpen(false);\n  }, []);\n  var messageActions = getMessageActions();\n  var messageDeletedAt = !!(message === null || message === void 0 ? void 0 : message.deleted_at);\n  useEffect(function () {\n    if (messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current) {\n      messageWrapperRef.current.addEventListener('onMouseLeave', hideOptions);\n    }\n  }, [hideOptions, messageWrapperRef]);\n  useEffect(function () {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [hideOptions, messageDeletedAt]);\n  useEffect(function () {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return function () {\n      return document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n  if (messageActions.length === 0) return null;\n  return React.createElement(MessageActionsWrapper, {\n    customWrapperClass: customWrapperClass,\n    inline: inline,\n    setActionsBoxOpen: setActionsBoxOpen\n  }, React.createElement(MessageActionsBox, {\n    getMessageActions: getMessageActions,\n    handleDelete: propHandleDelete || handleDelete,\n    handleEdit: setEditingState,\n    handleFlag: propHandleFlag || handleFlag,\n    handleMute: propHandleMute || handleMute,\n    handlePin: propHandlePin || handlePin,\n    isUserMuted: isMuted,\n    message: message,\n    messageListRect: messageListRect,\n    mine: isMyMessage,\n    open: actionsBoxOpen\n  }), React.createElement(\"svg\", {\n    height: '4',\n    viewBox: '0 0 11 4',\n    width: '11',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z',\n    fillRule: 'nonzero'\n  })));\n};\n\nvar MessageActionsWrapper = function MessageActionsWrapper(props) {\n  var children = props.children,\n      customWrapperClass = props.customWrapperClass,\n      inline = props.inline,\n      setActionsBoxOpen = props.setActionsBoxOpen;\n  var defaultWrapperClass = 'str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options';\n  var wrapperClass = typeof customWrapperClass === 'string' ? customWrapperClass : defaultWrapperClass;\n\n  var onClickOptionsAction = function onClickOptionsAction(event) {\n    event.stopPropagation();\n    setActionsBoxOpen(true);\n  };\n\n  var wrapperProps = {\n    className: wrapperClass,\n    'data-testid': 'message-actions',\n    onClick: onClickOptionsAction\n  };\n  if (inline) return React.createElement(\"span\", _assign({}, wrapperProps), children);\n  return React.createElement(\"div\", _assign({}, wrapperProps), children);\n};\n/**\n * MML - A wrapper component around MML-React library\n */\n\n\nvar MML = function MML(props) {\n  var actionHandler = props.actionHandler,\n      _a = props.align,\n      align = _a === void 0 ? 'right' : _a,\n      source = props.source;\n  var theme = useChatContext().theme;\n  if (!source) return null;\n  return React.createElement(MML$1, {\n    className: \"mml-align-\" + align,\n    Loading: null,\n    onSubmit: actionHandler,\n    source: source,\n    Success: null,\n    theme: (theme || '').replace(' ', '-')\n  });\n};\n\nvar isOnlyEmojis = function isOnlyEmojis(text) {\n  if (!text) return false;\n  var noEmojis = text.replace(emojiRegex(), '');\n  var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\nvar allowedMarkups = ['html', // @ts-expect-error\n'root', 'text', 'break', 'paragraph', 'emphasis', 'strong', 'link', 'list', 'listItem', 'code', 'inlineCode', 'blockquote', 'delete'];\n\nvar matchMarkdownLinks = function matchMarkdownLinks(message) {\n  var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    var i = singleMatch.exec(match);\n    return i && [i[1], i[2]];\n  }) : [];\n  return links.flat();\n};\n\nvar messageCodeBlocks = function messageCodeBlocks(message) {\n  var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  var matches = message.match(codeRegex);\n  return matches || [];\n};\n\nvar truncate = function truncate(input, length, end) {\n  if (end === void 0) {\n    end = '...';\n  }\n\n  if (!input || !length) return '';\n\n  if (input.length > length) {\n    return \"\" + input.substring(0, length - end.length) + end;\n  }\n\n  return input;\n};\n\nvar markDownRenderers = {\n  // eslint-disable-next-line react/display-name\n  link: function link(props) {\n    var children = props.children,\n        href = props.href;\n    var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n    var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n\n    if (!href || !isEmail && !isUrl) {\n      return children;\n    }\n\n    return React.createElement(\"a\", {\n      className: \"\" + (isUrl ? 'str-chat__message-url-link' : ''),\n      href: href,\n      rel: 'nofollow noreferrer noopener',\n      target: '_blank'\n    }, children);\n  },\n  span: 'span'\n};\n\nvar emojiMarkdownPlugin = function emojiMarkdownPlugin() {\n  function replace(match) {\n    return {\n      children: [{\n        type: 'text',\n        value: match\n      }],\n      className: 'inline-text-emoji',\n      type: 'span'\n    };\n  }\n\n  var transform = function transform(markdownAST) {\n    findAndReplace(markdownAST, emojiRegex(), replace);\n    return markdownAST;\n  };\n\n  return transform;\n};\n\nvar mentionsMarkdownPlugin = function mentionsMarkdownPlugin(mentioned_users) {\n  return function () {\n    var mentioned_usernames = mentioned_users.map(function (user) {\n      return user.name || user.id;\n    }).filter(Boolean).map(escapeRegExp);\n\n    function replace(match) {\n      var usernameOrId = match.replace('@', '');\n      var user = mentioned_users.find(function (_a) {\n        var id = _a.id,\n            name = _a.name;\n        return name === usernameOrId || id === usernameOrId;\n      });\n      return {\n        children: [{\n          type: 'text',\n          value: match\n        }],\n        mentioned_user: user,\n        type: 'mention'\n      };\n    }\n\n    var transform = function transform(markdownAST) {\n      if (!mentioned_usernames.length) {\n        return markdownAST;\n      }\n\n      var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) {\n        return \"@\" + username;\n      }).join('|'), 'g');\n      findAndReplace(markdownAST, mentionedUsersRegex, replace);\n      return markdownAST;\n    };\n\n    return transform;\n  };\n};\n\nvar Mention = function Mention(props) {\n  return React.createElement(\"span\", {\n    className: 'str-chat__message-mention'\n  }, props.children);\n};\n\nvar renderText = function renderText(text, mentioned_users, options) {\n  if (options === void 0) {\n    options = {};\n  } // take the @ mentions and turn them into markdown?\n  // translate links\n\n\n  if (!text) return null;\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText);\n  var codeBlocks = messageCodeBlocks(newText);\n  var detectHttp = /(http(s?):\\/\\/)?(www\\.)?/; // extract all valid links/emails within text and replace it with proper markup\n\n  linkify.find(newText).forEach(function (_a) {\n    var href = _a.href,\n        type = _a.type,\n        value = _a.value;\n    var linkIsInBlock = codeBlocks.some(function (block) {\n      return block === null || block === void 0 ? void 0 : block.includes(value);\n    }); // check if message is already  markdown\n\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n      var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n      if (!strippedHref || !strippedText) return false;\n      return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n    });\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n    var displayLink = type === 'email' ? value : value.replace(detectHttp, '');\n    newText = newText.replace(value, \"[\" + displayLink + \"](\" + encodeURI(href) + \")\");\n  });\n  var plugins = [emojiMarkdownPlugin];\n\n  if (mentioned_users === null || mentioned_users === void 0 ? void 0 : mentioned_users.length) {\n    plugins.push(mentionsMarkdownPlugin(mentioned_users));\n  }\n\n  var renderers = _assign(_assign({\n    mention: Mention\n  }, markDownRenderers), options.customMarkDownRenderers);\n\n  return React.createElement(ReactMarkdown, {\n    allowedTypes: allowedMarkups,\n    escapeHtml: true,\n    plugins: plugins,\n    renderers: renderers,\n    source: newText,\n    transformLinkUri: function transformLinkUri(uri) {\n      return uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri);\n    },\n    unwrapDisallowed: true\n  });\n};\n\nfunction escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n\nfunction S4() {\n  return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n} // https://stackoverflow.com/a/6860916/2570866\n\n\nfunction generateRandomId() {\n  // prettier-ignore\n  return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n}\n\nvar smartRender = function smartRender(ElementOrComponentOrLiteral, props, fallback) {\n  if (ElementOrComponentOrLiteral === undefined && fallback) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    var element = ElementOrComponentOrLiteral;\n    return element;\n  } // Flow cast through any to remove React.Element after previous check\n\n\n  var ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (typeof ComponentOrLiteral === 'string' || typeof ComponentOrLiteral === 'number' || typeof ComponentOrLiteral === 'boolean' || ComponentOrLiteral == null) {\n    return ComponentOrLiteral;\n  }\n\n  return React.createElement(ComponentOrLiteral, _assign({}, props));\n};\n\nvar selectColor = function selectColor(number, dark) {\n  var hue = number * 137.508; // use golden angle approximation\n\n  return \"hsl(\" + hue + \",\" + (dark ? '50%' : '85%') + \", \" + (dark ? '75%' : '55%') + \")\";\n};\n\nvar hashUserId = function hashUserId(userId) {\n  var hash = userId.split('').reduce(function (acc, c) {\n    acc = (acc << 5) - acc + c.charCodeAt(0); // eslint-disable-line\n\n    return acc & acc; // eslint-disable-line no-bitwise\n  }, 0);\n  return Math.abs(hash) / Math.pow(10, Math.ceil(Math.log10(Math.abs(hash) + 1)));\n};\n\nvar getUserColor = function getUserColor(theme, userId) {\n  return selectColor(hashUserId(userId), theme.includes('dark'));\n};\n/**\n * FixedHeightMessage - This component renders a single message.\n * It uses fixed height elements to make sure it works well in VirtualizedMessageList\n */\n\n\nvar UnMemoizedFixedHeightMessage = function UnMemoizedFixedHeightMessage(props) {\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  var groupedByUser = props.groupedByUser,\n      message = props.message;\n  var theme = useChatContext().theme;\n  var userLanguage = useTranslationContext().userLanguage;\n  var handleAction = useActionHandler(message);\n  var role = useUserRole(message);\n  var messageTextToRender = ((_a = message === null || message === void 0 ? void 0 : message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || (message === null || message === void 0 ? void 0 : message.text);\n  var renderedText = useMemo(function () {\n    return renderText(messageTextToRender, message.mentioned_users);\n  }, [message.mentioned_users, messageTextToRender]);\n  var userId = ((_b = message.user) === null || _b === void 0 ? void 0 : _b.id) || '';\n  var userColor = useMemo(function () {\n    return getUserColor(theme, userId);\n  }, [userId, theme]);\n  var messageActionsHandler = useCallback(function () {\n    return getMessageActions(['delete'], {\n      canDelete: role.canDeleteMessage\n    });\n  }, [role]);\n  var images = (_c = message === null || message === void 0 ? void 0 : message.attachments) === null || _c === void 0 ? void 0 : _c.filter(function (_a) {\n    var type = _a.type;\n    return type === 'image';\n  });\n  return React.createElement(\"div\", {\n    className: \"str-chat__virtual-message__wrapper \" + (role.isMyMessage ? 'str-chat__virtual-message__wrapper--me' : '') + \" \" + (groupedByUser ? 'str-chat__virtual-message__wrapper--group' : ''),\n    key: message.id\n  }, React.createElement(Avatar, {\n    image: (_d = message.user) === null || _d === void 0 ? void 0 : _d.image,\n    name: ((_e = message.user) === null || _e === void 0 ? void 0 : _e.name) || ((_f = message.user) === null || _f === void 0 ? void 0 : _f.id),\n    shape: 'rounded',\n    size: 38\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__content'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__meta'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__author',\n    style: {\n      color: userColor\n    }\n  }, React.createElement(\"strong\", null, ((_g = message.user) === null || _g === void 0 ? void 0 : _g.name) || 'unknown'))), images && React.createElement(Gallery, {\n    images: images\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__text',\n    \"data-testid\": 'msg-text'\n  }, renderedText, message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: 'left',\n    source: message.mml\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__data'\n  }, React.createElement(MessageActions, {\n    customWrapperClass: 'str-chat__virtual-message__actions',\n    getMessageActions: messageActionsHandler,\n    message: message\n  }), React.createElement(\"span\", {\n    className: 'str-chat__virtual-message__date'\n  }, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-simple-timestamp',\n    message: message\n  }))))));\n};\n\nvar FixedHeightMessage = React.memo(UnMemoizedFixedHeightMessage);\n\nvar MessageDeleted = function MessageDeleted(props) {\n  var message = props.message;\n  var t = useTranslationContext().t;\n  var isMyMessage = useUserRole(message).isMyMessage;\n  var messageClasses = isMyMessage ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me' : 'str-chat__message str-chat__message-simple';\n  return React.createElement(\"div\", {\n    className: messageClasses + \" str-chat__message--deleted \" + message.type + \" \",\n    \"data-testid\": 'message-deleted-component',\n    key: message.id\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message--deleted-inner'\n  }, t('This message was deleted...')));\n};\n\nvar ReplyIcon = function ReplyIcon() {\n  return React.createElement(\"svg\", {\n    height: '15',\n    width: '18',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z',\n    fillRule: 'nonzero'\n  }));\n};\n\nvar DeliveredCheckIcon = function DeliveredCheckIcon() {\n  return React.createElement(\"svg\", {\n    height: '16',\n    width: '16',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z',\n    fill: '#006CFF',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar ReactionIcon = function ReactionIcon() {\n  return React.createElement(\"svg\", {\n    height: '12',\n    viewBox: '0 0 12 12',\n    width: '12',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"g\", {\n    clipRule: 'evenodd',\n    fillRule: 'evenodd'\n  }, React.createElement(\"path\", {\n    d: 'M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z'\n  }), React.createElement(\"path\", {\n    d: 'M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z'\n  })));\n};\n\nvar ThreadIcon = function ThreadIcon() {\n  return React.createElement(\"svg\", {\n    height: '10',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar ErrorIcon = function ErrorIcon() {\n  return React.createElement(\"svg\", {\n    height: '14',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z',\n    fill: '#EA152F',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar PinIcon = function PinIcon() {\n  return React.createElement(\"svg\", {\n    height: '13',\n    viewBox: '0 0 14 13',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M13.3518 6.686L6.75251 0.0866699L5.80984 1.02867L6.75318 1.972V1.97334L3.45318 5.272L3.45251 5.27334L2.50984 4.32934L1.56718 5.27267L4.39584 8.10067L0.624512 11.8713L1.56718 12.814L5.33851 9.04334L8.16718 11.8713L9.10984 10.9293L8.16718 9.986L11.4672 6.686L12.4098 7.62867L13.3518 6.686ZM7.22451 9.04267L7.22385 9.04334L4.39584 6.21467L7.69518 2.91467L10.5232 5.74267L7.22451 9.04267Z',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar PinIndicator = function PinIndicator(_a) {\n  var _b, _c;\n\n  var message = _a.message,\n      t = _a.t;\n  if (!message || !t) return null;\n  return React.createElement(\"div\", {\n    style: {\n      alignItems: 'center',\n      display: 'flex'\n    }\n  }, React.createElement(PinIcon, null), React.createElement(\"div\", {\n    style: {\n      fontSize: '14px',\n      marginBottom: '0',\n      marginLeft: '8px',\n      marginTop: '0'\n    }\n  }, message.pinned_by ? t('Pinned by') + \" \" + (((_b = message.pinned_by) === null || _b === void 0 ? void 0 : _b.name) || ((_c = message.pinned_by) === null || _c === void 0 ? void 0 : _c.id)) : t('Message pinned')));\n};\n\nvar UnMemoizedMessageOptions = function UnMemoizedMessageOptions(props) {\n  var _a;\n\n  var _b = props.displayActions,\n      displayActions = _b === void 0 ? true : _b,\n      _c = props.displayLeft,\n      displayLeft = _c === void 0 ? true : _c,\n      _d = props.displayReplies,\n      displayReplies = _d === void 0 ? true : _d,\n      getMessageActions = props.getMessageActions,\n      propHandleOpenThread = props.handleOpenThread,\n      initialMessage = props.initialMessage,\n      message = props.message,\n      messageWrapperRef = props.messageWrapperRef,\n      onReactionListClick = props.onReactionListClick,\n      _e = props.theme,\n      theme = _e === void 0 ? 'simple' : _e,\n      threadList = props.threadList;\n  var channel = useChannelContext().channel;\n  var handleOpenThread = useOpenThreadHandler(message);\n  var isMyMessage = useUserRole(message).isMyMessage;\n  var channelConfig = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel);\n  var messageActions = getMessageActions();\n  var shouldShowReactions = messageActions.indexOf(MESSAGE_ACTIONS.react) > -1 && channelConfig && channelConfig.reactions;\n  var shouldShowReplies = messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1 && displayReplies && !threadList && channelConfig && channelConfig.replies;\n\n  if (!message || message.type === 'error' || message.type === 'system' || message.type === 'ephemeral' || message.status === 'failed' || message.status === 'sending' || initialMessage) {\n    return null;\n  }\n\n  if (isMyMessage && displayLeft) {\n    return React.createElement(\"div\", {\n      className: \"str-chat__message-\" + theme + \"__actions\",\n      \"data-testid\": 'message-options-left'\n    }, displayActions && React.createElement(MessageActions, _assign({}, props, {\n      messageWrapperRef: messageWrapperRef\n    })), shouldShowReplies && React.createElement(\"div\", {\n      className: \"str-chat__message-\" + theme + \"__actions__action str-chat__message-\" + theme + \"__actions__action--thread\",\n      \"data-testid\": 'thread-action',\n      onClick: propHandleOpenThread || handleOpenThread\n    }, React.createElement(ThreadIcon, null)), shouldShowReactions && React.createElement(\"div\", {\n      className: \"str-chat__message-\" + theme + \"__actions__action str-chat__message-\" + theme + \"__actions__action--reactions\",\n      \"data-testid\": 'message-reaction-action',\n      onClick: onReactionListClick\n    }, React.createElement(ReactionIcon, null)));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-\" + theme + \"__actions\",\n    \"data-testid\": 'message-options'\n  }, shouldShowReactions && React.createElement(\"div\", {\n    className: \"str-chat__message-\" + theme + \"__actions__action str-chat__message-\" + theme + \"__actions__action--reactions\",\n    \"data-testid\": 'message-reaction-action',\n    onClick: onReactionListClick\n  }, React.createElement(ReactionIcon, null)), shouldShowReplies && React.createElement(\"div\", {\n    className: \"str-chat__message-\" + theme + \"__actions__action str-chat__message-\" + theme + \"__actions__action--thread\",\n    \"data-testid\": 'thread-action',\n    onClick: propHandleOpenThread || handleOpenThread\n  }, React.createElement(ThreadIcon, null)), displayActions && React.createElement(MessageActions, _assign({}, props, {\n    messageWrapperRef: messageWrapperRef\n  })));\n};\n\nvar MessageOptions = React.memo(UnMemoizedMessageOptions);\n\nvar UnMemoizedMessageRepliesCountButton = function UnMemoizedMessageRepliesCountButton(props) {\n  var labelPlural = props.labelPlural,\n      labelSingle = props.labelSingle,\n      onClick = props.onClick,\n      _a = props.reply_count,\n      reply_count = _a === void 0 ? 0 : _a;\n  var t = useTranslationContext().t;\n  var singleReplyText;\n  var pluralReplyText;\n\n  if (reply_count === 1) {\n    if (labelSingle) {\n      singleReplyText = \"1 \" + labelSingle;\n    } else {\n      singleReplyText = t('1 reply');\n    }\n  }\n\n  if (reply_count && reply_count > 1) {\n    if (labelPlural) {\n      pluralReplyText = reply_count + \" \" + labelPlural;\n    } else {\n      pluralReplyText = t('{{ replyCount }} replies', {\n        replyCount: reply_count\n      });\n    }\n  }\n\n  if (reply_count && reply_count !== 0) {\n    return React.createElement(\"button\", {\n      className: 'str-chat__message-replies-count-button',\n      \"data-testid\": 'replies-count-button',\n      onClick: onClick\n    }, React.createElement(ReplyIcon, null), reply_count === 1 ? singleReplyText : pluralReplyText);\n  }\n\n  return null;\n};\n\nvar MessageRepliesCountButton = React.memo(UnMemoizedMessageRepliesCountButton);\n\nvar isMutableRef = function isMutableRef(ref) {\n  if (ref) {\n    return ref.current !== undefined;\n  }\n\n  return false;\n};\n/**\n * Component that allows a user to select a reaction.\n */\n\n\nvar UnMemoizedReactionSelector = React.forwardRef(function (props, ref) {\n  var _a;\n\n  var _b = props.Avatar,\n      Avatar$1 = _b === void 0 ? Avatar : _b,\n      _c = props.detailedView,\n      detailedView = _c === void 0 ? true : _c,\n      handleReaction = props.handleReaction,\n      latest_reactions = props.latest_reactions,\n      reaction_counts = props.reaction_counts,\n      reactionOptionsProp = props.reactionOptions,\n      _d = props.reverse,\n      reverse = _d === void 0 ? false : _d;\n  var emojiConfig = useChannelContext().emojiConfig;\n\n  var _e = emojiConfig || {},\n      defaultMinimalEmojis = _e.defaultMinimalEmojis,\n      Emoji = _e.Emoji,\n      fullEmojiData = _e.emojiData,\n      emojiSetDef = _e.emojiSetDef;\n\n  var emojiData = getStrippedEmojiData(fullEmojiData);\n  var reactionOptions = reactionOptionsProp || defaultMinimalEmojis;\n\n  var _f = useState(null),\n      tooltipReactionType = _f[0],\n      setTooltipReactionType = _f[1];\n\n  var _g = useState(null),\n      tooltipPositions = _g[0],\n      setTooltipPositions = _g[1];\n\n  var targetRef = useRef(null);\n  var tooltipRef = useRef(null);\n  var showTooltip = useCallback(function (e, reactionType) {\n    targetRef.current = e.target;\n    setTooltipReactionType(reactionType);\n  }, []);\n  var hideTooltip = useCallback(function () {\n    setTooltipReactionType(null);\n    setTooltipPositions(null);\n  }, []);\n  useEffect(function () {\n    var _a, _b, _c;\n\n    if (tooltipReactionType) {\n      var tooltip = (_a = tooltipRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n      var target = (_b = targetRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n      var container = isMutableRef(ref) ? (_c = ref.current) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect() : null;\n      if (!tooltip || !target || !container) return;\n      var tooltipPosition = tooltip.width === container.width || tooltip.x < container.x ? 0 : target.left + target.width / 2 - container.left - tooltip.width / 2;\n      var arrowPosition = target.x - tooltip.x + target.width / 2 - tooltipPosition;\n      setTooltipPositions({\n        arrow: arrowPosition,\n        tooltip: tooltipPosition\n      });\n    }\n  }, [tooltipReactionType, ref]);\n\n  var getUsersPerReactionType = function getUsersPerReactionType(type) {\n    return latest_reactions === null || latest_reactions === void 0 ? void 0 : latest_reactions.map(function (reaction) {\n      var _a, _b;\n\n      if (reaction.type === type) {\n        return ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n      }\n\n      return null;\n    }).filter(Boolean);\n  };\n\n  var getLatestUserForReactionType = function getLatestUserForReactionType(type) {\n    var _a;\n\n    return ((_a = latest_reactions === null || latest_reactions === void 0 ? void 0 : latest_reactions.find(function (reaction) {\n      return reaction.type === type && !!reaction.user;\n    })) === null || _a === void 0 ? void 0 : _a.user) || undefined;\n  };\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__reaction-selector \" + (reverse ? 'str-chat__reaction-selector--reverse' : ''),\n    \"data-testid\": 'reaction-selector',\n    ref: ref\n  }, !!tooltipReactionType && detailedView && React.createElement(\"div\", {\n    className: 'str-chat__reaction-selector-tooltip',\n    ref: tooltipRef,\n    style: {\n      left: tooltipPositions === null || tooltipPositions === void 0 ? void 0 : tooltipPositions.tooltip,\n      visibility: tooltipPositions ? 'visible' : 'hidden'\n    }\n  }, React.createElement(\"div\", {\n    className: 'arrow',\n    style: {\n      left: tooltipPositions === null || tooltipPositions === void 0 ? void 0 : tooltipPositions.arrow\n    }\n  }), (_a = getUsersPerReactionType(tooltipReactionType)) === null || _a === void 0 ? void 0 : _a.map(function (user, i, users) {\n    return React.createElement(\"span\", {\n      className: 'latest-user-username',\n      key: \"key-\" + i + \"-\" + user\n    }, \"\" + user + (i < users.length - 1 ? ', ' : ''));\n  })), React.createElement(\"ul\", {\n    className: 'str-chat__message-reactions-list'\n  }, reactionOptions === null || reactionOptions === void 0 ? void 0 : reactionOptions.map(function (reactionOption) {\n    var latestUser = getLatestUserForReactionType(reactionOption.id);\n    var count = reaction_counts && reaction_counts[reactionOption.id];\n    return React.createElement(\"li\", {\n      className: 'str-chat__message-reactions-list-item',\n      \"data-text\": reactionOption.id,\n      key: \"item-\" + reactionOption.id,\n      onClick: function onClick(event) {\n        return handleReaction && handleReaction(reactionOption.id, event);\n      }\n    }, !!count && detailedView && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: 'latest-user',\n      onClick: hideTooltip,\n      onMouseEnter: function onMouseEnter(e) {\n        return showTooltip(e, reactionOption.id);\n      },\n      onMouseLeave: hideTooltip\n    }, latestUser ? React.createElement(Avatar$1, {\n      image: latestUser.image,\n      name: latestUser.name,\n      size: 20\n    }) : React.createElement(\"div\", {\n      className: 'latest-user-not-found'\n    }))), Emoji && React.createElement(Emoji // @ts-expect-error\n    , _assign({\n      // @ts-expect-error\n      emoji: reactionOption\n    }, emojiSetDef, {\n      // @ts-expect-error\n      data: emojiData\n    })), Boolean(count) && detailedView && React.createElement(\"span\", {\n      className: 'str-chat__message-reactions-list-item__count'\n    }, count || ''));\n  })));\n});\n/**\n * Component that allows you to select a reaction.\n */\n\nvar ReactionSelector = React.memo(UnMemoizedReactionSelector);\n\nvar UnMemoizedReactionsList = function UnMemoizedReactionsList(props) {\n  var onClick = props.onClick,\n      reaction_counts = props.reaction_counts,\n      reactionOptionsProp = props.reactionOptions,\n      reactions = props.reactions,\n      _a = props.reverse,\n      reverse = _a === void 0 ? false : _a;\n  var emojiConfig = useChannelContext().emojiConfig;\n\n  var _b = emojiConfig || {},\n      defaultMinimalEmojis = _b.defaultMinimalEmojis,\n      Emoji = _b.Emoji,\n      fullEmojiData = _b.emojiData,\n      emojiSetDef = _b.emojiSetDef;\n\n  var emojiData = useMemo(function () {\n    return getStrippedEmojiData(fullEmojiData);\n  }, [fullEmojiData]);\n  var reactionOptions = reactionOptionsProp || defaultMinimalEmojis || [];\n\n  var getTotalReactionCount = function getTotalReactionCount() {\n    return Object.values(reaction_counts || {}).reduce(function (total, count) {\n      return total + count;\n    }, 0);\n  };\n\n  var getOptionForType = function getOptionForType(type) {\n    return reactionOptions.find(function (option) {\n      return option.id === type;\n    });\n  };\n\n  var getReactionTypes = function getReactionTypes() {\n    if (!reactions) return [];\n    var allTypes = new Set(reactions.map(function (_a) {\n      var type = _a.type;\n      return type;\n    }));\n    return Array.from(allTypes);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__reaction-list \" + (reverse ? 'str-chat__reaction-list--reverse' : ''),\n    \"data-testid\": 'reaction-list',\n    onClick: onClick\n  }, React.createElement(\"ul\", null, getReactionTypes().map(function (reactionType) {\n    var emojiDefinition = getOptionForType(reactionType);\n    return emojiDefinition ? React.createElement(\"li\", {\n      key: emojiDefinition.id\n    }, Emoji && React.createElement(Emoji // @ts-expect-error\n    , _assign({\n      // @ts-expect-error\n      emoji: emojiDefinition\n    }, emojiSetDef, {\n      // @ts-expect-error\n      data: emojiData,\n      size: 16\n    })), \"\\xA0\") : null;\n  }), React.createElement(\"li\", null, React.createElement(\"span\", {\n    className: 'str-chat__reaction-list--counter'\n  }, getTotalReactionCount()))));\n};\n\nvar ReactionsList = React.memo(UnMemoizedReactionsList);\n\nvar UnMemoizedSimpleReactionsList = function UnMemoizedSimpleReactionsList(props) {\n  var handleReaction = props.handleReaction,\n      reaction_counts = props.reaction_counts,\n      reactionOptionsProp = props.reactionOptions,\n      reactions = props.reactions;\n  var emojiConfig = useChannelContext().emojiConfig;\n\n  var _a = emojiConfig || {},\n      defaultMinimalEmojis = _a.defaultMinimalEmojis,\n      Emoji = _a.Emoji,\n      defaultEmojiData = _a.emojiData,\n      emojiSetDef = _a.emojiSetDef;\n\n  var _b = useState(undefined),\n      tooltipReactionType = _b[0],\n      setTooltipReactionType = _b[1];\n\n  var emojiData = getStrippedEmojiData(defaultEmojiData);\n  var reactionOptions = reactionOptionsProp || defaultMinimalEmojis || [];\n\n  if (!reactions || reactions.length === 0) {\n    return null;\n  }\n\n  var getUsersPerReactionType = function getUsersPerReactionType(type) {\n    return reactions === null || reactions === void 0 ? void 0 : reactions.map(function (reaction) {\n      var _a, _b;\n\n      if (reaction.type === type) {\n        return ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n      }\n\n      return null;\n    }).filter(Boolean);\n  };\n\n  var getTotalReactionCount = function getTotalReactionCount() {\n    return Object.values(reaction_counts || {}).reduce(function (total, count) {\n      return total + count;\n    }, 0);\n  };\n\n  var getReactionTypes = function getReactionTypes() {\n    if (!reactions) return [];\n    var allTypes = new Set(reactions.map(function (_a) {\n      var type = _a.type;\n      return type;\n    }));\n    return Array.from(allTypes);\n  };\n\n  var getOptionForType = function getOptionForType(type) {\n    return reactionOptions.find(function (option) {\n      return option.id === type;\n    });\n  };\n\n  return React.createElement(\"ul\", {\n    className: 'str-chat__simple-reactions-list',\n    \"data-testid\": 'simple-reaction-list',\n    onMouseLeave: function onMouseLeave() {\n      return setTooltipReactionType(undefined);\n    }\n  }, getReactionTypes().map(function (reactionType, i) {\n    var _a, _b;\n\n    var emojiDefinition = getOptionForType(reactionType);\n    return emojiDefinition ? React.createElement(\"li\", {\n      className: 'str-chat__simple-reactions-list-item',\n      key: (emojiDefinition === null || emojiDefinition === void 0 ? void 0 : emojiDefinition.id) + \"-\" + i,\n      onClick: function onClick(event) {\n        return handleReaction(reactionType, event);\n      }\n    }, React.createElement(\"span\", {\n      onMouseEnter: function onMouseEnter() {\n        return setTooltipReactionType(reactionType);\n      }\n    }, Emoji && React.createElement(Emoji // @ts-expect-error\n    , _assign({\n      // @ts-expect-error\n      emoji: emojiDefinition\n    }, emojiSetDef, {\n      // @ts-expect-error\n      data: emojiData,\n      size: 13\n    })), \"\\xA0\"), tooltipReactionType === ((_a = getOptionForType(reactionType)) === null || _a === void 0 ? void 0 : _a.id) && React.createElement(\"div\", {\n      className: 'str-chat__simple-reactions-list-tooltip'\n    }, React.createElement(\"div\", {\n      className: 'arrow'\n    }), (_b = getUsersPerReactionType(tooltipReactionType)) === null || _b === void 0 ? void 0 : _b.join(', '))) : null;\n  }), (reactions === null || reactions === void 0 ? void 0 : reactions.length) !== 0 && React.createElement(\"li\", {\n    className: 'str-chat__simple-reactions-list-item--last-number'\n  }, getTotalReactionCount()));\n};\n\nvar SimpleReactionsList = React.memo(UnMemoizedSimpleReactionsList);\n\nvar UnMemoizedMessageTextComponent = function UnMemoizedMessageTextComponent(props) {\n  var _a;\n\n  var customInnerClass = props.customInnerClass,\n      customOptionProps = props.customOptionProps,\n      customWrapperClass = props.customWrapperClass,\n      message = props.message,\n      propOnMentionsClick = props.onMentionsClickMessage,\n      propOnMentionsHover = props.onMentionsHoverMessage,\n      _b = props.ReactionsList,\n      ReactionsList$1 = _b === void 0 ? ReactionsList : _b,\n      _c = props.ReactionSelector,\n      ReactionSelector$1 = _c === void 0 ? ReactionSelector : _c,\n      reactionSelectorRef = props.reactionSelectorRef,\n      _d = props.renderText,\n      renderText$1 = _d === void 0 ? renderText : _d,\n      _e = props.theme,\n      theme = _e === void 0 ? 'simple' : _e,\n      unsafeHTML = props.unsafeHTML;\n\n  var _f = useTranslationContext(),\n      t = _f.t,\n      userLanguage = _f.userLanguage;\n\n  var handleMobilePress = useMobilePress().handleMobilePress;\n\n  var _g = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _g.onMentionsClick,\n      onMentionsHover = _g.onMentionsHover;\n\n  var _h = useReactionClick(message, reactionSelectorRef),\n      isReactionEnabled = _h.isReactionEnabled,\n      onReactionListClick = _h.onReactionListClick,\n      showDetailedReactions = _h.showDetailedReactions;\n\n  var hasReactions = messageHasReactions(message);\n  var hasAttachment = messageHasAttachments(message);\n  var handleReaction = useReactionHandler(message);\n  var messageTextToRender = ((_a = message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || message.text;\n  var messageText = useMemo(function () {\n    return renderText$1(messageTextToRender, message.mentioned_users);\n  }, [message.mentioned_users, messageTextToRender]);\n  var wrapperClass = customWrapperClass || 'str-chat__message-text';\n  var innerClass = customInnerClass || \"str-chat__message-text-inner str-chat__message-\" + theme + \"-text-inner\";\n  if (!messageTextToRender) return null;\n  return React.createElement(\"div\", {\n    className: wrapperClass\n  }, React.createElement(\"div\", {\n    className: (\"\\n          \" + innerClass + \"\\n          \" + (hasAttachment ? \" str-chat__message-\" + theme + \"-text-inner--has-attachment\" : '') + \"\\n          \" + (isOnlyEmojis(message.text) ? \" str-chat__message-\" + theme + \"-text-inner--is-emoji\" : '') + \"\\n        \").trim(),\n    \"data-testid\": 'message-text-inner-wrapper',\n    onClick: onMentionsClick,\n    onMouseOver: onMentionsHover\n  }, message.type === 'error' && React.createElement(\"div\", {\n    className: \"str-chat__\" + theme + \"-message--error-message\"\n  }, t('Error · Unsent')), message.status === 'failed' && React.createElement(\"div\", {\n    className: \"str-chat__\" + theme + \"-message--error-message\"\n  }, message.errorStatusCode !== 403 ? t('Message Failed · Click to try again') : t('Message Failed · Unauthorized')), unsafeHTML && message.html ? React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }) : React.createElement(\"div\", {\n    onClick: handleMobilePress\n  }, messageText), hasReactions && !showDetailedReactions && isReactionEnabled && React.createElement(ReactionsList$1, {\n    onClick: onReactionListClick,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions,\n    reverse: true\n  }), showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector$1, {\n    detailedView: true,\n    handleReaction: handleReaction,\n    latest_reactions: message.latest_reactions,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    ref: reactionSelectorRef\n  })), React.createElement(MessageOptions, _assign({}, props, customOptionProps, {\n    onReactionListClick: onReactionListClick\n  })));\n};\n\nvar MessageText = React.memo(UnMemoizedMessageTextComponent);\n\nvar filterEmoji = function filterEmoji(emoji) {\n  if (emoji.name === 'White Smiling Face' || emoji.name === 'White Frowning Face') {\n    return false;\n  }\n\n  return true;\n};\n\nvar EmojiPicker = function EmojiPicker(props) {\n  var emojiPickerIsOpen = props.emojiPickerIsOpen,\n      emojiPickerRef = props.emojiPickerRef,\n      onSelectEmoji = props.onSelectEmoji,\n      small = props.small;\n  var emojiConfig = useChannelContext().emojiConfig;\n  var t = useTranslationContext().t;\n\n  var _a = emojiConfig || {},\n      emojiData = _a.emojiData,\n      Picker = _a.EmojiPicker;\n\n  if (emojiPickerIsOpen && emojiData) {\n    var className = small ? 'str-chat__small-message-input-emojipicker' : 'str-chat__input--emojipicker';\n    return React.createElement(\"div\", {\n      className: className,\n      ref: emojiPickerRef\n    }, Picker && React.createElement(Picker, {\n      color: '#006CFF',\n      data: emojiData,\n      emoji: 'point_up',\n      emojisToShowFilter: filterEmoji,\n      native: true,\n      onSelect: onSelectEmoji,\n      set: 'facebook',\n      showPreview: false,\n      showSkinTones: false,\n      title: t('Pick your emoji'),\n      useButton: true\n    }));\n  }\n\n  return null;\n};\n/**\n * Get attachment type from MIME type\n */\n\n\nvar getAttachmentTypeFromMime = function getAttachmentTypeFromMime(mime) {\n  if (mime.includes('video/')) return 'media';\n  if (mime.includes('audio/')) return 'audio';\n  return 'file';\n};\n\nvar apiMaxNumberOfFiles = 10;\nvar emptyFileUploads = {};\nvar emptyImageUploads = {};\n/**\n * Initializes the state. Empty if the message prop is falsy.\n */\n\nvar initState = function initState(message) {\n  var _a, _b, _c;\n\n  if (!message) {\n    return {\n      attachments: [],\n      emojiPickerIsOpen: false,\n      fileOrder: [],\n      fileUploads: _assign({}, emptyFileUploads),\n      imageOrder: [],\n      imageUploads: _assign({}, emptyImageUploads),\n      mentioned_users: [],\n      numberOfUploads: 0,\n      text: ''\n    };\n  } // if message prop is defined, get image uploads, file uploads, text, etc. from it\n\n\n  var imageUploads = ((_a = message.attachments) === null || _a === void 0 ? void 0 : _a.filter(function (_a) {\n    var type = _a.type;\n    return type === 'image';\n  }).reduce(function (acc, attachment) {\n    var id = generateRandomId();\n    acc[id] = {\n      file: {\n        name: attachment.fallback\n      },\n      id: id,\n      state: 'finished',\n      url: attachment.image_url\n    };\n    return acc;\n  }, {})) || {};\n  var imageOrder = Object.keys(imageUploads);\n  var fileUploads = ((_b = message.attachments) === null || _b === void 0 ? void 0 : _b.filter(function (_a) {\n    var type = _a.type;\n    return type === 'file';\n  }).reduce(function (acc, attachment) {\n    var id = generateRandomId();\n    acc[id] = {\n      file: {\n        name: attachment.title || '',\n        size: attachment.file_size,\n        type: attachment.mime_type\n      },\n      id: id,\n      state: 'finished',\n      url: attachment.asset_url\n    };\n    return acc;\n  }, {})) || {};\n  var fileOrder = Object.keys(fileUploads);\n  var numberOfUploads = fileOrder.length + imageOrder.length;\n  var attachments = ((_c = message.attachments) === null || _c === void 0 ? void 0 : _c.filter(function (_a) {\n    var type = _a.type;\n    return type !== 'file' && type !== 'image';\n  })) || [];\n  var mentioned_users = message.mentioned_users || [];\n  return {\n    attachments: attachments,\n    emojiPickerIsOpen: false,\n    fileOrder: fileOrder,\n    fileUploads: fileUploads,\n    imageOrder: imageOrder,\n    imageUploads: imageUploads,\n    mentioned_users: mentioned_users,\n    numberOfUploads: numberOfUploads,\n    text: message.text || ''\n  };\n};\n/**\n * MessageInput state reducer\n */\n\n\nvar messageInputReducer = function messageInputReducer(state, action) {\n  var _a, _b;\n\n  switch (action.type) {\n    case 'setEmojiPickerIsOpen':\n      return _assign(_assign({}, state), {\n        emojiPickerIsOpen: action.value\n      });\n\n    case 'setText':\n      return _assign(_assign({}, state), {\n        text: action.getNewText(state.text)\n      });\n\n    case 'clear':\n      return {\n        attachments: [],\n        emojiPickerIsOpen: false,\n        fileOrder: [],\n        fileUploads: _assign({}, emptyFileUploads),\n        imageOrder: [],\n        imageUploads: _assign({}, emptyImageUploads),\n        mentioned_users: [],\n        numberOfUploads: 0,\n        text: ''\n      };\n\n    case 'setImageUpload':\n      {\n        var imageAlreadyExists = state.imageUploads[action.id];\n        if (!imageAlreadyExists && !action.file) return state;\n        var imageOrder = imageAlreadyExists ? state.imageOrder : state.imageOrder.concat(action.id);\n\n        var newUploadFields = _assign({}, action);\n\n        delete newUploadFields.type;\n        return _assign(_assign({}, state), {\n          imageOrder: imageOrder,\n          imageUploads: _assign(_assign({}, state.imageUploads), (_a = {}, _a[action.id] = _assign(_assign({}, state.imageUploads[action.id]), newUploadFields), _a)),\n          numberOfUploads: imageAlreadyExists ? state.numberOfUploads : state.numberOfUploads + 1\n        });\n      }\n\n    case 'setFileUpload':\n      {\n        var fileAlreadyExists = state.fileUploads[action.id];\n        if (!fileAlreadyExists && !action.file) return state;\n        var fileOrder = fileAlreadyExists ? state.fileOrder : state.fileOrder.concat(action.id);\n\n        var newUploadFields = _assign({}, action);\n\n        delete newUploadFields.type;\n        return _assign(_assign({}, state), {\n          fileOrder: fileOrder,\n          fileUploads: _assign(_assign({}, state.fileUploads), (_b = {}, _b[action.id] = _assign(_assign({}, state.fileUploads[action.id]), newUploadFields), _b)),\n          numberOfUploads: fileAlreadyExists ? state.numberOfUploads : state.numberOfUploads + 1\n        });\n      }\n\n    case 'removeImageUpload':\n      {\n        if (!state.imageUploads[action.id]) return state; // cannot remove anything\n\n        var newImageUploads = _assign({}, state.imageUploads);\n\n        delete newImageUploads[action.id];\n        return _assign(_assign({}, state), {\n          imageOrder: state.imageOrder.filter(function (_id) {\n            return _id !== action.id;\n          }),\n          imageUploads: newImageUploads,\n          numberOfUploads: state.numberOfUploads - 1\n        });\n      }\n\n    case 'removeFileUpload':\n      {\n        if (!state.fileUploads[action.id]) return state; // cannot remove anything\n\n        var newFileUploads = _assign({}, state.fileUploads);\n\n        delete newFileUploads[action.id];\n        return _assign(_assign({}, state), {\n          fileOrder: state.fileOrder.filter(function (_id) {\n            return _id !== action.id;\n          }),\n          fileUploads: newFileUploads,\n          numberOfUploads: state.numberOfUploads - 1\n        });\n      }\n\n    case 'reduceNumberOfUploads':\n      // TODO: figure out if we can just use uploadOrder instead\n      return _assign(_assign({}, state), {\n        numberOfUploads: state.numberOfUploads - 1\n      });\n\n    case 'addMentionedUser':\n      return _assign(_assign({}, state), {\n        mentioned_users: state.mentioned_users.concat(action.user)\n      });\n\n    default:\n      return state;\n  }\n};\n/**\n * hook for MessageInput state\n */\n\n\nvar useMessageInput = function useMessageInput(props) {\n  var _a, _b;\n\n  var additionalTextareaProps = props.additionalTextareaProps,\n      clearEditingState = props.clearEditingState,\n      doFileUploadRequest = props.doFileUploadRequest,\n      doImageUploadRequest = props.doImageUploadRequest,\n      errorHandler = props.errorHandler,\n      focus = props.focus,\n      message = props.message,\n      noFiles = props.noFiles,\n      overrideSubmitHandler = props.overrideSubmitHandler,\n      parent = props.parent,\n      publishTypingEvent = props.publishTypingEvent;\n\n  var _c = useChannelContext(),\n      channel = _c.channel,\n      editMessage = _c.editMessage,\n      maxNumberOfFiles = _c.maxNumberOfFiles,\n      multipleUploads = _c.multipleUploads,\n      sendMessage = _c.sendMessage;\n\n  var _d = useReducer(messageInputReducer, message, initState),\n      state = _d[0],\n      dispatch = _d[1];\n\n  var attachments = state.attachments,\n      fileOrder = state.fileOrder,\n      fileUploads = state.fileUploads,\n      imageOrder = state.imageOrder,\n      imageUploads = state.imageUploads,\n      mentioned_users = state.mentioned_users,\n      numberOfUploads = state.numberOfUploads,\n      text = state.text;\n  var emojiPickerRef = useRef(null);\n  var textareaRef = useRef(); // Focus\n\n  useEffect(function () {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]); // Text + cursor position\n\n  var newCursorPosition = useRef();\n  var insertText = useCallback(function (textToInsert) {\n    var maxLength = (additionalTextareaProps || {}).maxLength;\n\n    if (!textareaRef.current) {\n      dispatch({\n        getNewText: function getNewText(text) {\n          var updatedText = text + textToInsert;\n\n          if (maxLength && updatedText.length > maxLength) {\n            return updatedText.slice(0, maxLength);\n          }\n\n          return updatedText;\n        },\n        type: 'setText'\n      });\n      return;\n    }\n\n    var _a = textareaRef.current,\n        selectionEnd = _a.selectionEnd,\n        selectionStart = _a.selectionStart;\n    newCursorPosition.current = selectionStart + textToInsert.length;\n    dispatch({\n      getNewText: function getNewText(prevText) {\n        var updatedText = prevText.slice(0, selectionStart) + textToInsert + prevText.slice(selectionEnd);\n\n        if (maxLength && updatedText.length > maxLength) {\n          return updatedText.slice(0, maxLength);\n        }\n\n        return updatedText;\n      },\n      type: 'setText'\n    });\n  }, [additionalTextareaProps, newCursorPosition, textareaRef]);\n  useEffect(function () {\n    var textareaElement = textareaRef.current;\n\n    if (textareaElement && newCursorPosition.current !== undefined) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = undefined;\n    }\n  }, [text, newCursorPosition]);\n  var handleChange = useCallback(function (event) {\n    event.preventDefault();\n\n    if (!event || !event.target) {\n      return;\n    }\n\n    var newText = event.target.value;\n    dispatch({\n      getNewText: function getNewText() {\n        return newText;\n      },\n      type: 'setText'\n    });\n\n    if (publishTypingEvent && newText && channel) {\n      logChatPromiseExecution(channel.keystroke(parent === null || parent === void 0 ? void 0 : parent.id), 'start typing event');\n    }\n  }, [channel, parent, publishTypingEvent]); // Emoji\n\n  var closeEmojiPicker = useCallback(function (event) {\n    if (emojiPickerRef.current && !emojiPickerRef.current.contains(event.target)) {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: false\n      });\n    }\n  }, [emojiPickerRef]);\n  var openEmojiPicker = useCallback(function (event) {\n    dispatch({\n      type: 'setEmojiPickerIsOpen',\n      value: true\n    }); // Prevent event from bubbling to document, so the close handler is never called for this event\n\n    event.stopPropagation();\n  }, []);\n\n  var handleEmojiKeyDown = function handleEmojiKeyDown(event) {\n    if (event.key === ' ' || event.key === 'Enter' || event.key === 'Spacebar') {\n      event.preventDefault();\n      /**\n       * TODO: fix the below at some point because this type casting is wrong\n       * and just forced to not have warnings currently with the unknown casting\n       */\n\n      openEmojiPicker(event);\n    }\n  };\n\n  var handleEmojiEscape = function handleEmojiEscape(event) {\n    if (event.key === 'Escape') {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: false\n      });\n    }\n  };\n\n  useEffect(function () {\n    if (state.emojiPickerIsOpen) {\n      document.addEventListener('click', closeEmojiPicker, false);\n      document.addEventListener('keydown', handleEmojiEscape);\n    }\n\n    return function () {\n      document.removeEventListener('click', closeEmojiPicker, false);\n      document.removeEventListener('keydown', handleEmojiEscape);\n    };\n  }, [closeEmojiPicker, state.emojiPickerIsOpen]);\n  var onSelectEmoji = useCallback(function (emoji) {\n    return insertText(emoji.native);\n  }, [insertText]); // Commands / mentions\n\n  var getCommands = useCallback(function () {\n    var _a, _b;\n\n    return (_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.commands;\n  }, [channel]);\n  var getUsers = useCallback(function () {\n    if (!channel) return [];\n    return __spreadArrays(Object.values(channel.state.members).map(function (_a) {\n      var user = _a.user;\n      return user;\n    }), Object.values(channel.state.watchers)).filter(function (_user, index, self) {\n      return self.findIndex(function (user) {\n        return (user === null || user === void 0 ? void 0 : user.id) === (_user === null || _user === void 0 ? void 0 : _user.id);\n      }) === index;\n    });\n  }, [channel]);\n  var onSelectItem = useCallback(function (item) {\n    dispatch({\n      type: 'addMentionedUser',\n      user: item\n    });\n  }, []); // Submitting\n\n  var getAttachmentsFromUploads = useCallback(function () {\n    var imageAttachments = imageOrder.map(function (id) {\n      return imageUploads[id];\n    }).filter(function (upload) {\n      return upload.state !== 'failed';\n    }).filter(function (_a, _, self) {\n      var id = _a.id,\n          url = _a.url;\n      return self.every(function (upload) {\n        return upload.id === id || upload.url !== url;\n      });\n    }).map(function (upload) {\n      return {\n        fallback: upload.file.name,\n        image_url: upload.url,\n        type: 'image'\n      };\n    });\n    var fileAttachments = fileOrder.map(function (id) {\n      return fileUploads[id];\n    }).filter(function (upload) {\n      return upload.state !== 'failed';\n    }).map(function (upload) {\n      return {\n        asset_url: upload.url,\n        file_size: upload.file.size,\n        mime_type: upload.file.type,\n        title: upload.file.name,\n        type: getAttachmentTypeFromMime(upload.file.type || '')\n      };\n    });\n    return __spreadArrays(attachments, imageAttachments, fileAttachments);\n  }, [imageOrder, imageUploads, fileOrder, fileUploads, attachments]);\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var trimmedMessage = text.trim();\n    var isEmptyMessage = trimmedMessage === '' || trimmedMessage === '>' || trimmedMessage === '``````' || trimmedMessage === '``' || trimmedMessage === '**' || trimmedMessage === '____' || trimmedMessage === '__' || trimmedMessage === '****';\n\n    if (isEmptyMessage && numberOfUploads === 0) {\n      return;\n    } // the channel component handles the actual sending of the message\n\n\n    var someAttachmentsUploading = Object.values(imageUploads).some(function (upload) {\n      return upload.state === 'uploading';\n    }) || Object.values(fileUploads).some(function (upload) {\n      return upload.state === 'uploading';\n    });\n\n    if (someAttachmentsUploading) {\n      // TODO: show error to user that they should wait until image is uploaded\n      return;\n    }\n\n    var newAttachments = getAttachmentsFromUploads(); // Instead of checking if a user is still mentioned every time the text changes,\n    // just filter out non-mentioned users before submit, which is cheaper\n    // and allows users to easily undo any accidental deletion\n\n    var actualMentionedUsers = Array.from(new Set(mentioned_users.filter(function (_a) {\n      var id = _a.id,\n          name = _a.name;\n      return text.includes(\"@\" + id) || text.includes(\"@\" + name);\n    })));\n    var updatedMessage = {\n      attachments: newAttachments,\n      mentioned_users: actualMentionedUsers,\n      text: text\n    };\n\n    if (!!message && editMessage) {\n      // TODO: Remove this line and show an error when submit fails\n      if (clearEditingState) {\n        clearEditingState();\n      }\n\n      var updateMessagePromise = editMessage(_assign(_assign({}, updatedMessage), {\n        id: message.id\n      })).then(clearEditingState);\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n      dispatch({\n        type: 'clear'\n      });\n    } else if (overrideSubmitHandler && channel) {\n      overrideSubmitHandler(_assign(_assign({}, updatedMessage), {\n        parent: parent\n      }), channel.cid);\n      dispatch({\n        type: 'clear'\n      });\n    } else if (sendMessage) {\n      var sendMessagePromise = sendMessage(_assign(_assign({}, updatedMessage), {\n        parent: parent\n      }));\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      dispatch({\n        type: 'clear'\n      });\n    }\n\n    if (channel && publishTypingEvent) logChatPromiseExecution(channel.stopTyping(), 'stop typing');\n  }; // Attachments\n  // Files\n\n\n  var uploadFile = useCallback(function (id) {\n    dispatch({\n      id: id,\n      state: 'uploading',\n      type: 'setFileUpload'\n    });\n  }, []);\n  var removeFile = useCallback(function (id) {\n    // TODO: cancel upload if still uploading\n    dispatch({\n      id: id,\n      type: 'removeFileUpload'\n    });\n  }, []);\n  useEffect(function () {\n    (function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var upload, file, id, response, error_1, alreadyRemoved;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!channel) return [2\n              /*return*/\n              ];\n              upload = Object.values(fileUploads).find(function (fileUpload) {\n                return fileUpload.state === 'uploading' && fileUpload.file;\n              });\n              if (!upload) return [2\n              /*return*/\n              ];\n              file = upload.file, id = upload.id;\n              _a.label = 1;\n\n            case 1:\n              _a.trys.push([1, 6,, 7]);\n\n              if (!doFileUploadRequest) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , doFileUploadRequest(file, channel)];\n\n            case 2:\n              response = _a.sent();\n              return [3\n              /*break*/\n              , 5];\n\n            case 3:\n              return [4\n              /*yield*/\n              , channel.sendFile(file)];\n\n            case 4:\n              response = _a.sent();\n              _a.label = 5;\n\n            case 5:\n              return [3\n              /*break*/\n              , 7];\n\n            case 6:\n              error_1 = _a.sent();\n              console.warn(error_1);\n              alreadyRemoved = false;\n              dispatch({\n                type: 'reduceNumberOfUploads'\n              });\n\n              if (!fileUploads[id]) {\n                alreadyRemoved = true;\n              } else {\n                dispatch({\n                  id: id,\n                  state: 'failed',\n                  type: 'setFileUpload'\n                });\n              }\n\n              if (!alreadyRemoved && errorHandler) {\n                // TODO: verify if the parameters passed to the error handler actually make sense\n                errorHandler(error_1, 'upload-file', file);\n              }\n\n              return [2\n              /*return*/\n              ];\n\n            case 7:\n              // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n              // This is for the case if someone wants to handle failure on app level.\n              if (!response) {\n                removeFile(id);\n                return [2\n                /*return*/\n                ];\n              }\n\n              dispatch({\n                id: id,\n                state: 'finished',\n                type: 'setFileUpload',\n                url: response.file\n              });\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    })();\n  }, [fileUploads, channel, doFileUploadRequest, errorHandler, removeFile]); // Images\n\n  var removeImage = useCallback(function (id) {\n    dispatch({\n      id: id,\n      type: 'removeImageUpload'\n    }); // TODO: cancel upload if still uploading\n  }, []);\n  var uploadImage = useCallback(function (id) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var img, file, response, error_2, alreadyRemoved;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            img = imageUploads[id];\n            if (!img || !channel) return [2\n            /*return*/\n            ];\n            file = img.file;\n\n            if (img.state !== 'uploading') {\n              dispatch({\n                id: id,\n                state: 'uploading',\n                type: 'setImageUpload'\n              });\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 6,, 7]);\n\n            if (!doImageUploadRequest) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , doImageUploadRequest(file, channel)];\n\n          case 2:\n            response = _a.sent();\n            return [3\n            /*break*/\n            , 5];\n\n          case 3:\n            return [4\n            /*yield*/\n            , channel.sendImage(file)];\n\n          case 4:\n            response = _a.sent();\n            _a.label = 5;\n\n          case 5:\n            return [3\n            /*break*/\n            , 7];\n\n          case 6:\n            error_2 = _a.sent();\n            console.warn(error_2);\n            alreadyRemoved = false;\n            dispatch({\n              type: 'reduceNumberOfUploads'\n            });\n\n            if (!imageUploads[id]) {\n              alreadyRemoved = true;\n            } else {\n              dispatch({\n                id: id,\n                state: 'failed',\n                type: 'setImageUpload'\n              });\n            }\n\n            if (!alreadyRemoved && errorHandler) {\n              // TODO: verify if the parameters passed to the error handler actually make sense\n              errorHandler(error_2, 'upload-image', _assign(_assign({}, file), {\n                id: id\n              }));\n            }\n\n            return [2\n            /*return*/\n            ];\n\n          case 7:\n            // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n            // This is for the case if someone wants to handle failure on app level.\n            if (!response) {\n              removeImage(id);\n              return [2\n              /*return*/\n              ];\n            }\n\n            dispatch({\n              id: id,\n              state: 'finished',\n              type: 'setImageUpload',\n              url: response.file\n            });\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [imageUploads, channel, doImageUploadRequest, errorHandler, removeImage]);\n  useEffect(function () {\n    if (FileReader) {\n      var upload = Object.values(imageUploads).find(function (imageUpload) {\n        return imageUpload.state === 'uploading' && !!imageUpload.file && !imageUpload.previewUri;\n      });\n\n      if (upload) {\n        var file = upload.file,\n            id_1 = upload.id; // TODO: Possibly use URL.createObjectURL instead. However, then we need\n        // to release the previews when not used anymore though.\n\n        var reader_1 = new FileReader();\n\n        reader_1.onload = function (event) {\n          var _a;\n\n          if (typeof ((_a = event.target) === null || _a === void 0 ? void 0 : _a.result) !== 'string') return;\n          dispatch({\n            id: id_1,\n            previewUri: event.target.result,\n            type: 'setImageUpload'\n          });\n        };\n\n        reader_1.readAsDataURL(file);\n        uploadImage(id_1);\n        return function () {\n          reader_1.onload = null;\n        };\n      }\n    }\n\n    return;\n  }, [imageUploads, uploadImage]); // Number of files that the user can still add. Should never be more than the amount allowed by the API.\n  // If multipleUploads is false, we only want to allow a single upload.\n\n  var maxFilesAllowed = useMemo(function () {\n    return !multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles;\n  }, [maxNumberOfFiles, multipleUploads]); // return !multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles;\n\n  var maxFilesLeft = maxFilesAllowed - numberOfUploads;\n  var uploadNewFiles = useCallback(function (files) {\n    Array.from(files).slice(0, maxFilesLeft).forEach(function (file) {\n      var id = generateRandomId();\n\n      if (file.type.startsWith('image/') && !file.type.endsWith('.photoshop') // photoshop files begin with 'image/'\n      ) {\n          dispatch({\n            file: file,\n            id: id,\n            state: 'uploading',\n            type: 'setImageUpload'\n          });\n        } else if (file instanceof File && !noFiles) {\n        dispatch({\n          file: file,\n          id: id,\n          state: 'uploading',\n          type: 'setFileUpload'\n        });\n      }\n    });\n  }, [maxFilesLeft, noFiles]);\n  var onPaste = useCallback(function (clipboardEvent) {\n    (function (event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var items, plainTextPromise, _loop_1, i, state_1, fileLikes, pastedText;\n\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              items = event.clipboardData.items;\n              if (!dataTransferItemsHaveFiles(Array.from(items))) return [2\n              /*return*/\n              ];\n              event.preventDefault();\n              plainTextPromise = undefined;\n\n              _loop_1 = function _loop_1(i) {\n                var item = items[i];\n\n                if (item.kind === 'string' && item.type === 'text/plain') {\n                  plainTextPromise = new Promise(function (resolve) {\n                    item.getAsString(function (string) {\n                      resolve(string);\n                    });\n                  });\n                  return \"break\";\n                }\n              };\n\n              for (i = 0; i < items.length; i++) {\n                state_1 = _loop_1(i);\n                if (state_1 === \"break\") break;\n              }\n\n              return [4\n              /*yield*/\n              , dataTransferItemsToFiles(Array.from(items))];\n\n            case 1:\n              fileLikes = _a.sent();\n\n              if (fileLikes.length) {\n                uploadNewFiles(fileLikes);\n                return [2\n                /*return*/\n                ];\n              }\n\n              if (!plainTextPromise) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , plainTextPromise];\n\n            case 2:\n              pastedText = _a.sent();\n              insertText(pastedText);\n              _a.label = 3;\n\n            case 3:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    })(clipboardEvent);\n  }, [insertText, uploadNewFiles]);\n  var isUploadEnabled = ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.uploads) !== false;\n  return _assign(_assign({}, state), {\n    /**\n     * TODO: fix the below at some point because this type casting is wrong\n     * and just forced to not have warnings currently with the unknown casting\n     */\n    closeEmojiPicker: closeEmojiPicker,\n    emojiPickerRef: emojiPickerRef,\n    getCommands: getCommands,\n    getUsers: getUsers,\n    handleChange: handleChange,\n    handleEmojiKeyDown: handleEmojiKeyDown,\n    handleSubmit: handleSubmit,\n    insertText: insertText,\n    isUploadEnabled: isUploadEnabled,\n    maxFilesLeft: maxFilesLeft,\n    onPaste: onPaste,\n    onSelectEmoji: onSelectEmoji,\n    onSelectItem: onSelectItem,\n    openEmojiPicker: openEmojiPicker,\n    removeFile: removeFile,\n    removeImage: removeImage,\n    textareaRef: textareaRef,\n    uploadFile: uploadFile,\n    uploadImage: uploadImage,\n    uploadNewFiles: uploadNewFiles\n  });\n};\n\nvar EmojiIconLarge = function EmojiIconLarge() {\n  var t = useTranslationContext().t;\n  return React.createElement(\"svg\", {\n    height: '28',\n    width: '28',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"title\", null, t('Open emoji picker')), React.createElement(\"path\", {\n    d: 'M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar EmojiIconSmall = function EmojiIconSmall() {\n  var t = useTranslationContext().t;\n  return React.createElement(\"svg\", {\n    height: '14',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"title\", null, t('Open emoji picker')), React.createElement(\"path\", {\n    d: 'M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z',\n    fillRule: 'evenodd'\n  }));\n};\n\nvar FileUploadIcon = function FileUploadIcon() {\n  var t = useTranslationContext().t;\n  return React.createElement(\"svg\", {\n    height: '14',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"title\", null, t('Attach files')), React.createElement(\"path\", {\n    d: 'M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z',\n    fillRule: 'nonzero'\n  }));\n};\n\nvar FileUploadIconFlat = function FileUploadIconFlat() {\n  var t = useTranslationContext().t;\n  return React.createElement(\"svg\", {\n    height: '14',\n    width: '14',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"title\", null, t('Attach files')), React.createElement(\"path\", {\n    d: 'M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z',\n    fillRule: 'nonzero'\n  }));\n};\n\nvar SendButton = function SendButton(_a) {\n  var sendMessage = _a.sendMessage;\n  var t = useTranslationContext().t;\n  return React.createElement(\"button\", {\n    className: 'str-chat__send-button',\n    onClick:\n    /**\n     * TODO: fix the below at some point because this type casting is wrong\n     * and just forced to not have warnings currently with the unknown casting\n     */\n    sendMessage\n  }, React.createElement(\"svg\", {\n    height: '17',\n    viewBox: '0 0 18 17',\n    width: '18',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"title\", null, t('Send')), React.createElement(\"path\", {\n    d: 'M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z',\n    fill: '#006cff',\n    fillRule: 'evenodd'\n  })));\n};\n\nvar UploadsPreview = function UploadsPreview(props) {\n  var fileOrder = props.fileOrder,\n      fileUploads = props.fileUploads,\n      imageOrder = props.imageOrder,\n      imageUploads = props.imageUploads,\n      numberOfUploads = props.numberOfUploads,\n      removeFile = props.removeFile,\n      removeImage = props.removeImage,\n      uploadFile = props.uploadFile,\n      uploadImage = props.uploadImage,\n      uploadNewFiles = props.uploadNewFiles;\n  var channelContext = useChannelContext();\n  var imagesToPreview = imageOrder.map(function (id) {\n    return imageUploads[id];\n  });\n  var filesToPreview = fileOrder.map(function (id) {\n    return fileUploads[id];\n  });\n  return React.createElement(React.Fragment, null, imageOrder.length > 0 && React.createElement(ImagePreviewer, {\n    disabled: channelContext.maxNumberOfFiles !== undefined && numberOfUploads >= channelContext.maxNumberOfFiles,\n    handleFiles: uploadNewFiles,\n    handleRemove: removeImage,\n    handleRetry: uploadImage,\n    imageUploads: imagesToPreview,\n    multiple: channelContext.multipleUploads\n  }), fileOrder.length > 0 && React.createElement(FilePreviewer, {\n    handleFiles: uploadNewFiles,\n    handleRemove: removeFile,\n    handleRetry: uploadFile,\n    uploads: filesToPreview\n  }));\n};\n\nvar UnMemoizedCommandItem = function UnMemoizedCommandItem(props) {\n  var entity = props.entity;\n  return React.createElement(\"div\", {\n    className: 'str-chat__slash-command'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__slash-command-header'\n  }, React.createElement(\"strong\", null, entity.name), \" \", entity.args), React.createElement(\"br\", null), React.createElement(\"span\", {\n    className: 'str-chat__slash-command-description'\n  }, entity.description));\n};\n\nvar CommandItem = React.memo(UnMemoizedCommandItem);\n\nvar UnMemoizedEmoticonItem = function UnMemoizedEmoticonItem(props) {\n  var entity = props.entity;\n  var hasEntity = Object.keys(entity).length;\n  var itemParts = entity === null || entity === void 0 ? void 0 : entity.itemNameParts;\n\n  var renderName = function renderName() {\n    if (!hasEntity) return null;\n    return hasEntity && itemParts.parts.map(function (part, i) {\n      return part.toLowerCase() === itemParts.match.toLowerCase() ? React.createElement(\"span\", {\n        className: 'str-chat__emoji-item--highlight',\n        key: \"part-\" + i\n      }, part) : React.createElement(\"span\", {\n        className: 'str-chat__emoji-item--part',\n        key: \"part-\" + i\n      }, part);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__emoji-item'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__emoji-item--entity'\n  }, entity.native), React.createElement(\"span\", {\n    className: 'str-chat__emoji-item--name'\n  }, renderName()));\n};\n\nvar EmoticonItem = React.memo(UnMemoizedEmoticonItem);\n/**\n * UserItem - Component rendered in commands menu\n */\n\nvar UnMemoizedUserItem = function UnMemoizedUserItem(props) {\n  var _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      entity = props.entity;\n  var hasEntity = Object.keys(entity).length;\n  var itemParts = entity === null || entity === void 0 ? void 0 : entity.itemNameParts;\n\n  var renderName = function renderName() {\n    if (!hasEntity) return null;\n    return hasEntity && itemParts.parts.map(function (part, i) {\n      return part.toLowerCase() === itemParts.match.toLowerCase() ? React.createElement(\"span\", {\n        className: 'str-chat__emoji-item--highlight',\n        key: \"part-\" + i\n      }, part) : React.createElement(\"span\", {\n        className: 'str-chat__emoji-item--part',\n        key: \"part-\" + i\n      }, part);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__user-item'\n  }, React.createElement(Avatar$1, {\n    image: entity.image,\n    size: 20\n  }), React.createElement(\"span\", {\n    className: 'str-chat__user-item--name',\n    \"data-testid\": 'user-item-name'\n  }, renderName()));\n};\n\nvar UserItem = React.memo(UnMemoizedUserItem);\n\nvar UnMemoizedChatAutoComplete = function UnMemoizedChatAutoComplete(props) {\n  var _a, _b;\n\n  var additionalTextareaProps = props.additionalTextareaProps,\n      commands = props.commands,\n      disabled = props.disabled,\n      disableMentions = props.disableMentions,\n      grow = props.grow,\n      handleSubmit = props.handleSubmit,\n      innerRef = props.innerRef,\n      maxRows = props.maxRows,\n      _c = props.mentionAllAppUsers,\n      mentionAllAppUsers = _c === void 0 ? false : _c,\n      _d = props.mentionQueryParams,\n      mentionQueryParams = _d === void 0 ? {} : _d,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      onPaste = props.onPaste,\n      onSelectItem = props.onSelectItem,\n      placeholder = props.placeholder,\n      _e = props.rows,\n      rows = _e === void 0 ? 3 : _e,\n      SuggestionItem = props.SuggestionItem,\n      SuggestionList = props.SuggestionList,\n      triggers = props.triggers,\n      value = props.value;\n\n  var _f = useChannelContext(),\n      channel = _f.channel,\n      emojiConfig = _f.emojiConfig;\n\n  var _g = useChatContext(),\n      client = _g.client,\n      mutes = _g.mutes;\n\n  var _h = useState(false),\n      searching = _h[0],\n      setSearching = _h[1];\n\n  var members = (_a = channel === null || channel === void 0 ? void 0 : channel.state) === null || _a === void 0 ? void 0 : _a.members;\n  var watchers = (_b = channel === null || channel === void 0 ? void 0 : channel.state) === null || _b === void 0 ? void 0 : _b.watchers;\n\n  var _j = emojiConfig || {},\n      emojiData = _j.emojiData,\n      EmojiIndex = _j.EmojiIndex;\n\n  var emojiIndex = useMemo(function () {\n    if (EmojiIndex) {\n      // @ts-expect-error type here isn't registering the constructor type\n      return new EmojiIndex(emojiData);\n    }\n\n    return null;\n  }, [emojiData, EmojiIndex]);\n\n  var emojiReplace = function emojiReplace(word) {\n    var found = (emojiIndex === null || emojiIndex === void 0 ? void 0 : emojiIndex.search(word)) || [];\n    var emoji = found.filter(Boolean).slice(0, 10).find(function (_a) {\n      var emoticons = _a.emoticons;\n      return !!(emoticons === null || emoticons === void 0 ? void 0 : emoticons.includes(word));\n    });\n    if (!emoji || !('native' in emoji)) return null;\n    return emoji.native;\n  };\n\n  var getMembersAndWatchers = useCallback(function () {\n    var memberUsers = members ? Object.values(members).map(function (_a) {\n      var user = _a.user;\n      return user;\n    }) : [];\n    var watcherUsers = watchers ? Object.values(watchers) : [];\n\n    var users = __spreadArrays(memberUsers, watcherUsers); // make sure we don't list users twice\n\n\n    var uniqueUsers = {};\n    users.forEach(function (user) {\n      if (user && !uniqueUsers[user.id]) {\n        uniqueUsers[user.id] = user;\n      }\n    });\n    return Object.values(uniqueUsers);\n  }, [members, watchers]);\n  var queryMembersDebounced = useCallback(debounce(function (query, onReady) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var response, users, error_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n\n            return [4\n            /*yield*/\n            , channel.queryMembers({\n              name: {\n                $autocomplete: query\n              }\n            })];\n\n          case 1:\n            response = _a.sent();\n            users = response.members.map(function (member) {\n              return member.user;\n            });\n\n            if (onReady && users.length) {\n              onReady(users);\n            } else {\n              onReady([]);\n            }\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 2:\n            error_1 = _a.sent();\n            console.log({\n              error: error_1\n            });\n            return [3\n            /*break*/\n            , 3];\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, 200), [channel]);\n\n  var queryUsers = function queryUsers(query, onReady) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var users, error_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!query || searching) return [2\n            /*return*/\n            ];\n            setSearching(true);\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , client.queryUsers(_assign({\n              $or: [{\n                id: {\n                  $autocomplete: query\n                }\n              }, {\n                name: {\n                  $autocomplete: query\n                }\n              }],\n              id: {\n                $ne: client.userID\n              }\n            }, mentionQueryParams.filters), _assign({\n              id: 1\n            }, mentionQueryParams.sort), _assign({\n              limit: 10\n            }, mentionQueryParams.options))];\n\n          case 2:\n            users = _a.sent().users;\n\n            if (onReady && users.length) {\n              onReady(users);\n            } else {\n              onReady([]);\n            }\n\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            error_2 = _a.sent();\n            console.log({\n              error: error_2\n            });\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            setSearching(false);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  var queryUsersDebounced = debounce(queryUsers, 200);\n  /**\n   * dataProvider accepts `onReady` function, which will executed once the data is ready.\n   * Another approach would have been to simply return the data from dataProvider and let the\n   * component await for it and then execute the required logic. We are going for callback instead\n   * of async-await since we have debounce function in dataProvider. Which will delay the execution\n   * of api call on trailing end of debounce (lets call it a1) but will return with result of\n   * previous call without waiting for a1. So in this case, we want to execute onReady, when trailing\n   * end of debounce executes.\n   */\n\n  var getTriggers = useCallback(function () {\n    return triggers || {\n      '/': {\n        component: CommandItem,\n        dataProvider: function dataProvider(query, text, onReady) {\n          if (text.indexOf('/') !== 0 || !commands) {\n            return [];\n          }\n\n          var selectedCommands = commands.filter(function (command) {\n            var _a;\n\n            return ((_a = command.name) === null || _a === void 0 ? void 0 : _a.indexOf(query)) !== -1;\n          }); // sort alphabetically unless the you're matching the first char\n\n          selectedCommands.sort(function (a, b) {\n            var _a, _b;\n\n            var nameA = (_a = a.name) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n            var nameB = (_b = b.name) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n\n            if ((nameA === null || nameA === void 0 ? void 0 : nameA.indexOf(query)) === 0) {\n              nameA = \"0\" + nameA;\n            }\n\n            if ((nameB === null || nameB === void 0 ? void 0 : nameB.indexOf(query)) === 0) {\n              nameB = \"0\" + nameB;\n            } // Should confirm possible null / undefined when TS is fully implemented\n\n\n            if (nameA != null && nameB != null) {\n              if (nameA < nameB) {\n                return -1;\n              }\n\n              if (nameA > nameB) {\n                return 1;\n              }\n            }\n\n            return 0;\n          });\n          var result = selectedCommands.slice(0, 10);\n          if (onReady) onReady(result, query);\n          return result;\n        },\n        output: function output(entity) {\n          return {\n            caretPosition: 'next',\n            key: entity.name,\n            text: \"/\" + entity.name\n          };\n        }\n      },\n      ':': {\n        component: EmoticonItem,\n        dataProvider: function dataProvider(query, _, onReady) {\n          if (query.length === 0 || query.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n            return [];\n          }\n\n          var emojis = (emojiIndex === null || emojiIndex === void 0 ? void 0 : emojiIndex.search(query)) || [];\n          var result = emojis.slice(0, 10);\n          if (onReady) onReady(result, query);\n          return result;\n        },\n        output: function output(entity) {\n          return {\n            caretPosition: 'next',\n            key: entity.id,\n            text: \"\" + ('native' in entity ? entity.native : '')\n          };\n        }\n      },\n      '@': {\n        callback: function callback(item) {\n          return onSelectItem && onSelectItem(item);\n        },\n        component: UserItem,\n        dataProvider: function dataProvider(query, _, onReady) {\n          if (mentionAllAppUsers) {\n            return queryUsersDebounced(query, function (data) {\n              if (onReady) onReady(data, query);\n            });\n          }\n          /**\n           * By default, we return maximum 100 members via queryChannels api call.\n           * Thus it is safe to assume, that if number of members in channel.state is < 100,\n           * then all the members are already available on client side and we don't need to\n           * make any api call to queryMembers endpoint.\n           */\n\n\n          if (!query || Object.values(members || {}).length < 100) {\n            var users = getMembersAndWatchers();\n            var matchingUsers = users.filter(function (user) {\n              if (user.id === client.userID) return false;\n              if (!query) return true;\n\n              if (user.name !== undefined && user.name.toLowerCase().includes(query.toLowerCase())) {\n                return true;\n              }\n\n              return user.id.toLowerCase().includes(query.toLowerCase());\n            });\n            var data = matchingUsers.slice(0, 10);\n            if (onReady) onReady(data, query);\n            return data;\n          }\n\n          return queryMembersDebounced(query, function (data) {\n            if (onReady) onReady(data, query);\n          });\n        },\n        output: function output(entity) {\n          return {\n            caretPosition: 'next',\n            key: entity.id,\n            text: \"@\" + (entity.name || entity.id)\n          };\n        }\n      }\n    };\n  }, [commands, getMembersAndWatchers, members, onSelectItem, queryMembersDebounced, triggers, emojiIndex]);\n  var updateInnerRef = useCallback(function (ref) {\n    if (innerRef) {\n      innerRef.current = ref;\n    }\n  }, [innerRef]);\n  return React.createElement(ReactTextareaAutocomplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    className: 'str-chat__textarea__textarea',\n    containerClassName: 'str-chat__textarea',\n    disabled: disabled,\n    disableMentions: disableMentions,\n    dropdownClassName: 'str-chat__emojisearch',\n    grow: grow,\n    handleSubmit: handleSubmit,\n    innerRef: updateInnerRef,\n    itemClassName: 'str-chat__emojisearch__item',\n    listClassName: 'str-chat__emojisearch__list',\n    loadingComponent: LoadingIndicator,\n    maxRows: maxRows,\n    minChar: 0,\n    mutes: mutes,\n    onChange: onChange,\n    onFocus: onFocus,\n    onPaste: onPaste,\n    placeholder: placeholder,\n    replaceWord: emojiReplace,\n    rows: rows,\n    SuggestionItem: SuggestionItem,\n    SuggestionList: SuggestionList,\n    trigger: getTriggers(),\n    value: value\n  });\n};\n\nvar ChatAutoComplete = React.memo(UnMemoizedChatAutoComplete);\n\nvar Tooltip = function Tooltip(props) {\n  var children = props.children,\n      rest = __rest(props, [\"children\"]);\n\n  return React.createElement(\"div\", _assign({\n    className: 'str-chat__tooltip'\n  }, rest), children);\n};\n\nvar EditMessageForm = function EditMessageForm(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      clearEditingState = props.clearEditingState,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      _c = props.EmojiIcon,\n      EmojiIcon = _c === void 0 ? EmojiIconSmall : _c,\n      _d = props.FileUploadIcon,\n      FileUploadIcon$1 = _d === void 0 ? FileUploadIcon : _d,\n      _e = props.focus,\n      focus = _e === void 0 ? false : _e,\n      _f = props.grow,\n      grow = _f === void 0 ? true : _f,\n      _g = props.maxRows,\n      maxRows = _g === void 0 ? 10 : _g,\n      mentionAllAppUsers = props.mentionAllAppUsers,\n      mentionQueryParams = props.mentionQueryParams,\n      _h = props.publishTypingEvent,\n      publishTypingEvent = _h === void 0 ? true : _h;\n  var channelContext = useChannelContext();\n  var t = useTranslationContext().t;\n  var messageInput = useMessageInput(_assign(_assign({}, props), {\n    additionalTextareaProps: additionalTextareaProps,\n    disabled: disabled,\n    focus: focus,\n    grow: grow,\n    maxRows: maxRows,\n    publishTypingEvent: publishTypingEvent\n  }));\n  useEffect(function () {\n    var onKeyDown = function onKeyDown(event) {\n      if (event.keyCode === KEY_CODES.ESC && clearEditingState) clearEditingState();\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [clearEditingState]);\n  return React.createElement(\"div\", {\n    className: 'str-chat__edit-message-form'\n  }, React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    disabled: !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    maxNumberOfFiles: messageInput.maxFilesLeft,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"form\", {\n    onSubmit: messageInput.handleSubmit\n  }, messageInput.isUploadEnabled && React.createElement(UploadsPreview, _assign({}, messageInput)), React.createElement(EmojiPicker, _assign({}, messageInput, {\n    small: true\n  })), React.createElement(ChatAutoComplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    commands: messageInput.getCommands(),\n    grow: grow,\n    handleSubmit: messageInput.handleSubmit,\n    innerRef: messageInput.textareaRef,\n    maxRows: maxRows,\n    mentionAllAppUsers: mentionAllAppUsers,\n    mentionQueryParams: mentionQueryParams,\n    onChange: messageInput.handleChange,\n    onPaste: messageInput.onPaste,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    rows: 1,\n    value: messageInput.text\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-team-form-footer'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__edit-message-form-options'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__input-emojiselect',\n    onClick: messageInput.openEmojiPicker\n  }, React.createElement(EmojiIcon, null)), messageInput.isUploadEnabled && React.createElement(\"div\", {\n    className: 'str-chat__fileupload-wrapper',\n    \"data-testid\": 'fileinput'\n  }, React.createElement(Tooltip, null, messageInput.maxFilesLeft ? t('Attach files') : t(\"You've reached the maximum number of files\")), React.createElement(FileUploadButton, {\n    accepts: channelContext.acceptedFiles,\n    disabled: messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"span\", {\n    className: 'str-chat__input-fileupload'\n  }, React.createElement(FileUploadIcon$1, null))))), React.createElement(\"div\", null, React.createElement(\"button\", {\n    onClick: function onClick() {\n      if (clearEditingState) {\n        clearEditingState();\n      }\n    }\n  }, t('Cancel')), React.createElement(\"button\", {\n    type: 'submit'\n  }, t('Send')))))));\n};\n\nvar MessageInputLarge = function MessageInputLarge(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      autocompleteTriggers = props.autocompleteTriggers,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      disableMentions = props.disableMentions,\n      _c = props.EmojiIcon,\n      EmojiIcon = _c === void 0 ? EmojiIconSmall : _c,\n      _d = props.FileUploadIcon,\n      FileUploadIcon$1 = _d === void 0 ? FileUploadIcon : _d,\n      _e = props.focus,\n      focus = _e === void 0 ? false : _e,\n      _f = props.grow,\n      grow = _f === void 0 ? true : _f,\n      _g = props.maxRows,\n      maxRows = _g === void 0 ? 10 : _g,\n      mentionAllAppUsers = props.mentionAllAppUsers,\n      mentionQueryParams = props.mentionQueryParams,\n      _h = props.publishTypingEvent,\n      publishTypingEvent = _h === void 0 ? true : _h,\n      _j = props.SendButton,\n      SendButton$1 = _j === void 0 ? SendButton : _j,\n      SuggestionItem = props.SuggestionItem,\n      SuggestionList = props.SuggestionList;\n\n  var _k = useChannelContext(),\n      acceptedFiles = _k.acceptedFiles,\n      client = _k.client,\n      multipleUploads = _k.multipleUploads,\n      typing = _k.typing,\n      watcher_count = _k.watcher_count;\n\n  var t = useTranslationContext().t;\n  var messageInput = useMessageInput(_assign(_assign({}, props), {\n    additionalTextareaProps: additionalTextareaProps,\n    focus: focus,\n    publishTypingEvent: publishTypingEvent\n  }));\n\n  var constructTypingString = function constructTypingString(typingUsers) {\n    var otherTypingUsers = Object.values(typingUsers).filter(function (_a) {\n      var _b;\n\n      var user = _a.user;\n      return ((_b = client.user) === null || _b === void 0 ? void 0 : _b.id) !== (user === null || user === void 0 ? void 0 : user.id);\n    }).map(function (_a) {\n      var user = _a.user;\n      return (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id);\n    });\n    if (otherTypingUsers.length === 0) return '';\n\n    if (otherTypingUsers.length === 1) {\n      return t('{{ user }} is typing...', {\n        user: otherTypingUsers[0]\n      });\n    }\n\n    if (otherTypingUsers.length === 2) {\n      // joins all with \"and\" but =no commas\n      // example: \"bob and sam\"\n      return t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: otherTypingUsers[0],\n        secondUser: otherTypingUsers[1]\n      });\n    } // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, and sam\"\n\n\n    return t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n      commaSeparatedUsers: otherTypingUsers.slice(0, -1).join(', '),\n      lastUser: otherTypingUsers[otherTypingUsers.length - 1]\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__input-large'\n  }, React.createElement(ImageDropzone, {\n    accept: acceptedFiles,\n    disabled: !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    maxNumberOfFiles: messageInput.maxFilesLeft,\n    multiple: multipleUploads\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input--textarea-wrapper'\n  }, messageInput.isUploadEnabled && React.createElement(UploadsPreview, _assign({}, messageInput)), React.createElement(ChatAutoComplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    commands: messageInput.getCommands(),\n    disabled: disabled,\n    disableMentions: disableMentions,\n    grow: grow,\n    handleSubmit: messageInput.handleSubmit,\n    innerRef: messageInput.textareaRef,\n    maxRows: maxRows,\n    mentionAllAppUsers: mentionAllAppUsers,\n    mentionQueryParams: mentionQueryParams,\n    onChange: messageInput.handleChange,\n    onPaste: messageInput.onPaste,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    rows: 1,\n    SuggestionItem: SuggestionItem,\n    SuggestionList: SuggestionList,\n    triggers: autocompleteTriggers,\n    value: messageInput.text\n  }), messageInput.isUploadEnabled && React.createElement(\"div\", {\n    className: 'str-chat__fileupload-wrapper',\n    \"data-testid\": 'fileinput'\n  }, React.createElement(Tooltip, null, messageInput.maxFilesLeft ? t('Attach files') : t(\"You've reached the maximum number of files\")), React.createElement(FileUploadButton, {\n    accepts: acceptedFiles,\n    disabled: messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    multiple: multipleUploads\n  }, React.createElement(\"span\", {\n    className: 'str-chat__input-fileupload'\n  }, React.createElement(FileUploadIcon$1, null)))), React.createElement(\"div\", {\n    className: 'str-chat__emojiselect-wrapper'\n  }, React.createElement(Tooltip, null, messageInput.emojiPickerIsOpen ? t('Close emoji picker') : t('Open emoji picker')), React.createElement(\"span\", {\n    className: 'str-chat__input-emojiselect',\n    onClick: messageInput.emojiPickerIsOpen ? messageInput.closeEmojiPicker : messageInput.openEmojiPicker,\n    onKeyDown: messageInput.handleEmojiKeyDown,\n    ref: messageInput.emojiPickerRef,\n    role: 'button',\n    tabIndex: 0\n  }, React.createElement(EmojiIcon, null))), React.createElement(EmojiPicker, _assign({}, messageInput))), React.createElement(SendButton$1, {\n    sendMessage: messageInput.handleSubmit\n  })), React.createElement(\"div\", null, React.createElement(\"div\", {\n    className: 'str-chat__input-footer'\n  }, React.createElement(\"span\", {\n    className: \"str-chat__input-footer--count \" + (!watcher_count ? 'str-chat__input-footer--count--hidden' : '')\n  }, t('{{ watcherCount }} online', {\n    watcherCount: watcher_count\n  })), React.createElement(\"span\", {\n    className: 'str-chat__input-footer--typing'\n  }, constructTypingString(typing || {}))))));\n};\n\nvar UnMemoizedMessageInput = function UnMemoizedMessageInput(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      _c = props.focus,\n      focus = _c === void 0 ? false : _c,\n      _d = props.grow,\n      grow = _d === void 0 ? true : _d,\n      _e = props.Input,\n      Input = _e === void 0 ? MessageInputLarge : _e,\n      _f = props.maxRows,\n      maxRows = _f === void 0 ? 10 : _f,\n      _g = props.publishTypingEvent,\n      publishTypingEvent = _g === void 0 ? true : _g;\n  return React.createElement(Input, _assign({}, props, {\n    additionalTextareaProps: additionalTextareaProps,\n    disabled: disabled,\n    focus: focus,\n    grow: grow,\n    maxRows: maxRows,\n    publishTypingEvent: publishTypingEvent\n  }));\n};\n/**\n * MessageInput - a high level component that has provides all functionality to the Input it renders.\n *\n * It exposes the [useMessageInput](https://getstream.github.io/stream-chat-react/#section-usemessageinput) hook, which accepts the MessageInput props and returns\n * all functions needed to customize and build your custom Input components.\n * @example ./MessageInput.md\n */\n\n\nvar MessageInput = React.memo(UnMemoizedMessageInput);\n\nvar MessageInputFlat = function MessageInputFlat(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      autocompleteTriggers = props.autocompleteTriggers,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      disableMentions = props.disableMentions,\n      _c = props.EmojiIcon,\n      EmojiIcon = _c === void 0 ? EmojiIconLarge : _c,\n      _d = props.FileUploadIcon,\n      FileUploadIcon = _d === void 0 ? FileUploadIconFlat : _d,\n      _e = props.focus,\n      focus = _e === void 0 ? false : _e,\n      _f = props.grow,\n      grow = _f === void 0 ? true : _f,\n      _g = props.maxRows,\n      maxRows = _g === void 0 ? 10 : _g,\n      mentionAllAppUsers = props.mentionAllAppUsers,\n      mentionQueryParams = props.mentionQueryParams,\n      _h = props.publishTypingEvent,\n      publishTypingEvent = _h === void 0 ? true : _h,\n      _j = props.SendButton,\n      SendButton$1 = _j === void 0 ? SendButton : _j,\n      SuggestionItem = props.SuggestionItem,\n      SuggestionList = props.SuggestionList;\n  var channelContext = useChannelContext();\n  var t = useTranslationContext().t;\n  var messageInput = useMessageInput(_assign(_assign({}, props), {\n    additionalTextareaProps: additionalTextareaProps,\n    disabled: disabled,\n    focus: focus,\n    grow: grow,\n    maxRows: maxRows,\n    publishTypingEvent: publishTypingEvent\n  }));\n  return React.createElement(\"div\", {\n    className: \"str-chat__input-flat \" + (SendButton$1 ? 'str-chat__input-flat--send-button-active' : null)\n  }, React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    disabled: !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    maxNumberOfFiles: messageInput.maxFilesLeft,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input-flat-wrapper'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input-flat--textarea-wrapper'\n  }, messageInput.isUploadEnabled && React.createElement(UploadsPreview, _assign({}, messageInput)), React.createElement(\"div\", {\n    className: 'str-chat__emojiselect-wrapper'\n  }, React.createElement(Tooltip, null, messageInput.emojiPickerIsOpen ? t('Close emoji picker') : t('Open emoji picker')), React.createElement(\"span\", {\n    className: 'str-chat__input-flat-emojiselect',\n    onClick: messageInput.emojiPickerIsOpen ? messageInput.closeEmojiPicker : messageInput.openEmojiPicker,\n    onKeyDown: messageInput.handleEmojiKeyDown,\n    role: 'button',\n    tabIndex: 0\n  }, React.createElement(EmojiIcon, null))), React.createElement(EmojiPicker, _assign({}, messageInput)), React.createElement(ChatAutoComplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    commands: messageInput.getCommands(),\n    disabled: disabled,\n    disableMentions: disableMentions,\n    grow: grow,\n    handleSubmit: messageInput.handleSubmit,\n    innerRef: messageInput.textareaRef,\n    maxRows: maxRows,\n    mentionAllAppUsers: mentionAllAppUsers,\n    mentionQueryParams: mentionQueryParams,\n    onChange: messageInput.handleChange,\n    onPaste: messageInput.onPaste,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    rows: 1,\n    SuggestionItem: SuggestionItem,\n    SuggestionList: SuggestionList,\n    triggers: autocompleteTriggers,\n    value: messageInput.text\n  }), messageInput.isUploadEnabled && React.createElement(\"div\", {\n    className: 'str-chat__fileupload-wrapper',\n    \"data-testid\": 'fileinput'\n  }, React.createElement(Tooltip, null, messageInput.maxFilesLeft ? t('Attach files') : t(\"You've reached the maximum number of files\")), React.createElement(FileUploadButton, {\n    accepts: channelContext.acceptedFiles,\n    disabled: messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"span\", {\n    className: 'str-chat__input-flat-fileupload'\n  }, React.createElement(FileUploadIcon, null))))), SendButton$1 && React.createElement(SendButton$1, {\n    sendMessage: messageInput.handleSubmit\n  }))));\n};\n\nvar MessageInputSimple = function MessageInputSimple(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      autocompleteTriggers = props.autocompleteTriggers,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      disableMentions = props.disableMentions,\n      _c = props.EmojiIcon,\n      EmojiIcon = _c === void 0 ? EmojiIconLarge : _c,\n      _d = props.focus,\n      focus = _d === void 0 ? false : _d,\n      _e = props.grow,\n      grow = _e === void 0 ? true : _e,\n      _f = props.maxRows,\n      maxRows = _f === void 0 ? 10 : _f,\n      mentionAllAppUsers = props.mentionAllAppUsers,\n      mentionQueryParams = props.mentionQueryParams,\n      _g = props.publishTypingEvent,\n      publishTypingEvent = _g === void 0 ? true : _g,\n      _h = props.SendButton,\n      SendButton$1 = _h === void 0 ? SendButton : _h,\n      SuggestionItem = props.SuggestionItem,\n      SuggestionList = props.SuggestionList;\n  var t = useTranslationContext().t;\n  var messageInput = useMessageInput(_assign(_assign({}, props), {\n    additionalTextareaProps: additionalTextareaProps,\n    disabled: disabled,\n    focus: focus,\n    grow: grow,\n    maxRows: maxRows,\n    publishTypingEvent: publishTypingEvent\n  }));\n  return React.createElement(\"div\", {\n    className: \"str-chat__input-flat \" + (SendButton$1 ? 'str-chat__input-flat--send-button-active' : null)\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input-flat-wrapper'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__input-flat--textarea-wrapper'\n  }, React.createElement(ChatAutoComplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    commands: messageInput.getCommands(),\n    disabled: disabled,\n    disableMentions: disableMentions,\n    grow: grow,\n    handleSubmit: messageInput.handleSubmit,\n    innerRef: messageInput.textareaRef,\n    maxRows: maxRows,\n    mentionAllAppUsers: mentionAllAppUsers,\n    mentionQueryParams: mentionQueryParams,\n    onChange: messageInput.handleChange,\n    onPaste: messageInput.onPaste,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    rows: 1,\n    SuggestionItem: SuggestionItem,\n    SuggestionList: SuggestionList,\n    triggers: autocompleteTriggers,\n    value: messageInput.text\n  }), React.createElement(\"div\", {\n    className: 'str-chat__emojiselect-wrapper'\n  }, React.createElement(Tooltip, null, messageInput.emojiPickerIsOpen ? t('Close emoji picker') : t('Open emoji picker')), React.createElement(\"span\", {\n    className: 'str-chat__input-flat-emojiselect',\n    onClick: messageInput.emojiPickerIsOpen ? messageInput.closeEmojiPicker : messageInput.openEmojiPicker,\n    onKeyDown: messageInput.handleEmojiKeyDown,\n    role: 'button',\n    tabIndex: 0\n  }, React.createElement(EmojiIcon, null))), React.createElement(EmojiPicker, _assign({}, messageInput))), SendButton$1 && React.createElement(SendButton$1, {\n    sendMessage: messageInput.handleSubmit\n  })));\n};\n\nvar MessageInputSmall = function MessageInputSmall(props) {\n  var _a = props.additionalTextareaProps,\n      additionalTextareaProps = _a === void 0 ? {} : _a,\n      autocompleteTriggers = props.autocompleteTriggers,\n      _b = props.disabled,\n      disabled = _b === void 0 ? false : _b,\n      disableMentions = props.disableMentions,\n      _c = props.EmojiIcon,\n      EmojiIcon = _c === void 0 ? EmojiIconSmall : _c,\n      _d = props.FileUploadIcon,\n      FileUploadIcon = _d === void 0 ? FileUploadIconFlat : _d,\n      _e = props.focus,\n      focus = _e === void 0 ? false : _e,\n      _f = props.grow,\n      grow = _f === void 0 ? true : _f,\n      _g = props.maxRows,\n      maxRows = _g === void 0 ? 10 : _g,\n      mentionAllAppUsers = props.mentionAllAppUsers,\n      mentionQueryParams = props.mentionQueryParams,\n      _h = props.publishTypingEvent,\n      publishTypingEvent = _h === void 0 ? true : _h,\n      _j = props.SendButton,\n      SendButton$1 = _j === void 0 ? SendButton : _j,\n      SuggestionItem = props.SuggestionItem,\n      SuggestionList = props.SuggestionList;\n  var channelContext = useChannelContext();\n  var t = useTranslationContext().t;\n  var messageInput = useMessageInput(_assign(_assign({}, props), {\n    additionalTextareaProps: additionalTextareaProps,\n    disabled: disabled,\n    focus: focus,\n    grow: grow,\n    maxRows: maxRows,\n    publishTypingEvent: publishTypingEvent\n  }));\n  return React.createElement(\"div\", {\n    className: 'str-chat__small-message-input__wrapper'\n  }, React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    disabled: !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    maxNumberOfFiles: messageInput.maxFilesLeft,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"div\", {\n    className: \"str-chat__small-message-input \" + (SendButton$1 ? 'str-chat__small-message-input--send-button-active' : null)\n  }, React.createElement(\"div\", {\n    className: 'str-chat__small-message-input--textarea-wrapper'\n  }, messageInput.isUploadEnabled && React.createElement(UploadsPreview, _assign({}, messageInput)), React.createElement(ChatAutoComplete, {\n    additionalTextareaProps: additionalTextareaProps,\n    commands: messageInput.getCommands(),\n    disabled: disabled,\n    disableMentions: disableMentions,\n    grow: grow,\n    handleSubmit: messageInput.handleSubmit,\n    innerRef: messageInput.textareaRef,\n    maxRows: maxRows,\n    mentionAllAppUsers: mentionAllAppUsers,\n    mentionQueryParams: mentionQueryParams,\n    onChange: messageInput.handleChange,\n    onPaste: messageInput.onPaste,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    rows: 1,\n    SuggestionItem: SuggestionItem,\n    SuggestionList: SuggestionList,\n    triggers: autocompleteTriggers,\n    value: messageInput.text\n  }), messageInput.isUploadEnabled && React.createElement(\"div\", {\n    className: 'str-chat__fileupload-wrapper',\n    \"data-testid\": 'fileinput'\n  }, React.createElement(Tooltip, null, messageInput.maxFilesLeft ? t('Attach files') : t(\"You've reached the maximum number of files\")), React.createElement(FileUploadButton, {\n    accepts: channelContext.acceptedFiles,\n    disabled: messageInput.maxFilesLeft === 0,\n    handleFiles: messageInput.uploadNewFiles,\n    multiple: channelContext.multipleUploads\n  }, React.createElement(\"span\", {\n    className: 'str-chat__small-message-input-fileupload'\n  }, React.createElement(FileUploadIcon, null)))), React.createElement(\"div\", {\n    className: 'str-chat__emojiselect-wrapper'\n  }, React.createElement(Tooltip, null, messageInput.emojiPickerIsOpen ? t('Close emoji picker') : t('Open emoji picker')), React.createElement(\"span\", {\n    className: 'str-chat__small-message-input-emojiselect',\n    onClick: messageInput.emojiPickerIsOpen ? messageInput.closeEmojiPicker : messageInput.openEmojiPicker,\n    onKeyDown: messageInput.handleEmojiKeyDown,\n    role: 'button',\n    tabIndex: 0\n  }, React.createElement(EmojiIcon, null))), React.createElement(EmojiPicker, _assign({}, messageInput, {\n    small: true\n  }))), SendButton$1 && React.createElement(SendButton$1, {\n    sendMessage: messageInput.handleSubmit\n  }))));\n};\n\nvar Modal = function Modal(props) {\n  var children = props.children,\n      onClose = props.onClose,\n      open = props.open;\n  var t = useTranslationContext().t;\n  var innerRef = useRef(null);\n\n  var handleClick = function handleClick(event) {\n    var _a;\n\n    if (event.target instanceof Node && !((_a = innerRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target)) && onClose) {\n      onClose();\n    }\n  };\n\n  useEffect(function () {\n    if (!open) return function () {\n      return null;\n    };\n\n    var handleEscKey = function handleEscKey(event) {\n      if (event instanceof KeyboardEvent && event.key === 'Escape' && onClose) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keyPress', handleEscKey);\n    return function () {\n      return document.removeEventListener('keyPress', handleEscKey);\n    };\n  }, [onClose, open]);\n  var openClasses = open ? 'str-chat__modal--open' : 'str-chat__modal--closed';\n  return React.createElement(\"div\", {\n    className: \"str-chat__modal \" + openClasses,\n    onClick: handleClick\n  }, React.createElement(\"div\", {\n    className: 'str-chat__modal__close-button'\n  }, t('Close'), React.createElement(\"svg\", {\n    height: '10',\n    width: '10',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z',\n    fillRule: 'evenodd'\n  }))), React.createElement(\"div\", {\n    className: 'str-chat__modal__inner',\n    ref: innerRef\n  }, children));\n};\n\nvar MessageSimpleWithContext = function MessageSimpleWithContext(props) {\n  var additionalMessageInputProps = props.additionalMessageInputProps,\n      Attachment = props.Attachment,\n      _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      clearEditingState = props.clearEditingState,\n      editing = props.editing,\n      _b = props.EditMessageInput,\n      EditMessageInput = _b === void 0 ? EditMessageForm : _b,\n      formatDate = props.formatDate,\n      getMessageActions = props.getMessageActions,\n      handleAction = props.handleAction,\n      handleOpenThread = props.handleOpenThread,\n      handleReaction = props.handleReaction,\n      handleRetry = props.handleRetry,\n      isMyMessage = props.isMyMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      message = props.message,\n      _c = props.MessageDeleted,\n      MessageDeleted$1 = _c === void 0 ? MessageDeleted : _c,\n      onReactionListClick = props.onReactionListClick,\n      onUserClick = props.onUserClick,\n      onUserHover = props.onUserHover,\n      _d = props.ReactionSelector,\n      ReactionSelector$1 = _d === void 0 ? ReactionSelector : _d,\n      reactionSelectorRef = props.reactionSelectorRef,\n      _e = props.ReactionsList,\n      ReactionsList$1 = _e === void 0 ? ReactionsList : _e,\n      showDetailedReactions = props.showDetailedReactions,\n      threadList = props.threadList;\n  var messageWrapperRef = useRef(null);\n  var hasAttachment = messageHasAttachments(message);\n  var hasReactions = messageHasReactions(message);\n  var messageClasses = isMyMessage() ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me' : 'str-chat__message str-chat__message-simple';\n  var showActionsBox = showMessageActionsBox(getMessageActions());\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted$1, {\n      message: message\n    });\n  }\n\n  return React.createElement(React.Fragment, null, editing && React.createElement(Modal, {\n    onClose: clearEditingState,\n    open: editing\n  }, React.createElement(MessageInput, _assign({\n    clearEditingState: clearEditingState,\n    Input: EditMessageInput,\n    message: message\n  }, additionalMessageInputProps))), message && React.createElement(\"div\", {\n    className: (\"\\n\\t\\t\\t\\t\\t\\t\" + messageClasses + \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message--\" + message.type + \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message--\" + message.status + \"\\n\\t\\t\\t\\t\\t\\t\" + (message.text ? 'str-chat__message--has-text' : 'has-no-text') + \"\\n\\t\\t\\t\\t\\t\\t\" + (hasAttachment ? 'str-chat__message--has-attachment' : '') + \"\\n            \" + (hasReactions && isReactionEnabled ? 'str-chat__message--with-reactions' : '') + \"\\n            \" + (message.pinned ? 'pinned-message' : '') + \"\\n\\t\\t\\t\\t\\t\").trim(),\n    key: message.id || '',\n    ref: messageWrapperRef\n  }, React.createElement(MessageSimpleStatus, _assign({}, props)), message.user && React.createElement(Avatar$1, {\n    image: message.user.image,\n    name: message.user.name || message.user.id,\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-inner',\n    \"data-testid\": 'message-inner',\n    onClick: message.status === 'failed' && message.errorStatusCode !== 403 ? function () {\n      return handleRetry(message);\n    } : undefined\n  }, !message.text && React.createElement(React.Fragment, null, React.createElement(MessageOptions, _assign({}, props, {\n    handleOpenThread: handleOpenThread,\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick\n  })), hasReactions && !showDetailedReactions && isReactionEnabled && React.createElement(ReactionsList$1, {\n    onClick: onReactionListClick,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions,\n    reverse: true\n  }), showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector$1, {\n    detailedView: true,\n    handleReaction: handleReaction,\n    latest_reactions: message.latest_reactions,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    ref: reactionSelectorRef\n  })), message.attachments && Attachment && React.createElement(Attachment, {\n    actionHandler: handleAction,\n    attachments: message.attachments\n  }), message.text && React.createElement(MessageText, _assign({}, props, {\n    customOptionProps: {\n      displayActions: showActionsBox,\n      handleOpenThread: handleOpenThread,\n      messageWrapperRef: messageWrapperRef\n    }\n  })), message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: isMyMessage() ? 'right' : 'left',\n    source: message.mml\n  }), !threadList && message.reply_count !== 0 && React.createElement(\"div\", {\n    className: 'str-chat__message-simple-reply-button'\n  }, React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  })), React.createElement(\"div\", {\n    className: \"str-chat__message-data str-chat__message-simple-data\"\n  }, !isMyMessage() && message.user ? React.createElement(\"span\", {\n    className: 'str-chat__message-simple-name'\n  }, message.user.name || message.user.id) : null, React.createElement(MessageTimestamp, {\n    calendar: true,\n    customClass: 'str-chat__message-simple-timestamp',\n    formatDate: formatDate,\n    message: message\n  })))));\n};\n\nvar MessageSimpleStatus = function MessageSimpleStatus(_a) {\n  var _b;\n\n  var _c = _a.Avatar,\n      Avatar$1 = _c === void 0 ? Avatar : _c,\n      isMyMessage = _a.isMyMessage,\n      readBy = _a.readBy,\n      message = _a.message,\n      threadList = _a.threadList,\n      lastReceivedId = _a.lastReceivedId;\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n\n  if (!isMyMessage() || message.type === 'error') {\n    return null;\n  }\n\n  var justReadByMe = readBy && readBy.length === 1 && readBy[0] && client && readBy[0].id === ((_b = client.user) === null || _b === void 0 ? void 0 : _b.id);\n\n  if (message && message.status === 'sending') {\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-simple-status',\n      \"data-testid\": 'message-status-sending'\n    }, React.createElement(Tooltip, null, t('Sending...')), React.createElement(LoadingIndicator, null));\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    var lastReadUser = readBy.filter(function (item) {\n      var _a;\n\n      return !!item && !!client && item.id !== ((_a = client.user) === null || _a === void 0 ? void 0 : _a.id);\n    })[0];\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-simple-status',\n      \"data-testid\": 'message-status-read-by'\n    }, React.createElement(Tooltip, null, readBy && getReadByTooltipText(readBy, t, client)), React.createElement(Avatar$1, {\n      image: lastReadUser === null || lastReadUser === void 0 ? void 0 : lastReadUser.image,\n      name: lastReadUser === null || lastReadUser === void 0 ? void 0 : lastReadUser.name,\n      size: 15\n    }), readBy.length > 2 && React.createElement(\"span\", {\n      className: 'str-chat__message-simple-status-number',\n      \"data-testid\": 'message-status-read-by-many'\n    }, readBy.length - 1));\n  }\n\n  if (message && message.status === 'received' && message.id === lastReceivedId && !threadList) {\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-simple-status',\n      \"data-testid\": 'message-status-received'\n    }, React.createElement(Tooltip, null, t('Delivered')), React.createElement(DeliveredCheckIcon, null));\n  }\n\n  return null;\n};\n\nvar MemoizedMessageSimple = React.memo(MessageSimpleWithContext, areMessageUIPropsEqual);\n/**\n * MessageSimple - UI component that renders a message and receives functionality and logic from the Message/MessageList components.\n * @example ./MessageSimple.md\n */\n\nvar MessageSimple = function MessageSimple(props) {\n  var PropAttachment = props.Attachment,\n      message = props.message;\n  var ContextAttachment = useChannelContext().Attachment;\n  var reactionSelectorRef = useRef(null);\n\n  var _a = useReactionClick(message, reactionSelectorRef),\n      isReactionEnabled = _a.isReactionEnabled,\n      onReactionListClick = _a.onReactionListClick,\n      showDetailedReactions = _a.showDetailedReactions;\n\n  var Attachment$1 = PropAttachment || ContextAttachment || Attachment;\n  return React.createElement(MemoizedMessageSimple, _assign({}, props, {\n    Attachment: Attachment$1,\n    isReactionEnabled: isReactionEnabled,\n    onReactionListClick: onReactionListClick,\n    reactionSelectorRef: reactionSelectorRef,\n    showDetailedReactions: showDetailedReactions\n  }));\n};\n\nvar MessageWithContext = function MessageWithContext(props) {\n  var canPin = props.canPin,\n      channel = props.channel,\n      formatDate = props.formatDate,\n      _a = props.groupStyles,\n      groupStyles = _a === void 0 ? [] : _a,\n      handleAction = props.handleAction,\n      handleDelete = props.handleDelete,\n      handleFlag = props.handleFlag,\n      handleMute = props.handleMute,\n      handleOpenThread = props.handleOpenThread,\n      handlePin = props.handlePin,\n      handleReaction = props.handleReaction,\n      handleRetry = props.handleRetry,\n      _b = props.Message,\n      MessageUIComponent = _b === void 0 ? MessageSimple : _b,\n      message = props.message,\n      _c = props.messageActions,\n      messageActions = _c === void 0 ? Object.keys(MESSAGE_ACTIONS) : _c,\n      onMentionsClickMessage = props.onMentionsClickMessage,\n      onMentionsHoverMessage = props.onMentionsHoverMessage,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      userRoles = props.userRoles;\n  var channelConfig = channel.getConfig && channel.getConfig();\n\n  var _d = useEditHandler(),\n      clearEdit = _d.clearEdit,\n      editing = _d.editing,\n      setEdit = _d.setEdit;\n\n  var _e = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _e.onUserClick,\n      onUserHover = _e.onUserHover;\n\n  var isAdmin = userRoles.isAdmin,\n      isModerator = userRoles.isModerator,\n      _isMyMessage = userRoles.isMyMessage,\n      isOwner = userRoles.isOwner;\n  var canEdit = _isMyMessage || isModerator || isOwner || isAdmin;\n  var canDelete = canEdit;\n  var canReact = true;\n  var canReply = true;\n  var messageActionsHandler = useCallback(function () {\n    if (!message || !messageActions) {\n      return [];\n    }\n\n    return getMessageActions(messageActions, {\n      canDelete: canDelete,\n      canEdit: canEdit,\n      canFlag: !_isMyMessage,\n      canMute: !_isMyMessage && !!(channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.mutes),\n      canPin: canPin,\n      canReact: canReact,\n      canReply: canReply\n    });\n  }, [canDelete, canEdit, canPin, canReply, canReact, channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.mutes, _isMyMessage, message, messageActions]);\n  var actionsEnabled = message && message.type === 'regular' && message.status === 'received';\n  return React.createElement(MessageUIComponent, _assign({}, props, {\n    actionsEnabled: actionsEnabled,\n    channelConfig: channelConfig,\n    clearEditingState: clearEdit,\n    editing: editing,\n    formatDate: formatDate,\n    getMessageActions: messageActionsHandler,\n    groupStyles: groupStyles,\n    handleAction: handleAction,\n    handleDelete: handleDelete,\n    handleEdit: setEdit,\n    handleFlag: handleFlag,\n    handleMute: handleMute,\n    handleOpenThread: handleOpenThread,\n    handlePin: handlePin,\n    handleReaction: handleReaction,\n    handleRetry: handleRetry,\n    isMyMessage: function isMyMessage() {\n      return _isMyMessage;\n    },\n    onMentionsClickMessage: onMentionsClickMessage,\n    onMentionsHoverMessage: onMentionsHoverMessage,\n    onUserClick: onUserClick,\n    onUserHover: onUserHover,\n    setEditingState: setEdit\n  }));\n};\n\nvar MemoizedMessage = React.memo(MessageWithContext, areMessagePropsEqual);\n/**\n * Message - A high level component which implements all the logic required for a Message.\n * The actual rendering of the Message is delegated via the \"Message\" property.\n * @example ./Message.md\n */\n\nvar Message = function Message(props) {\n  var addNotification = props.addNotification,\n      propChannel = props.channel,\n      getFlagMessageErrorNotification = props.getFlagMessageErrorNotification,\n      getFlagMessageSuccessNotification = props.getFlagMessageSuccessNotification,\n      getMuteUserErrorNotification = props.getMuteUserErrorNotification,\n      getMuteUserSuccessNotification = props.getMuteUserSuccessNotification,\n      getPinMessageErrorNotification = props.getPinMessageErrorNotification,\n      message = props.message,\n      propOnMentionsClick = props.onMentionsClick,\n      propOnMentionsHover = props.onMentionsHover,\n      propOpenThread = props.openThread,\n      _a = props.pinPermissions,\n      pinPermissions = _a === void 0 ? defaultPinPermissions : _a,\n      propRetrySendMessage = props.retrySendMessage;\n  var contextChannel = useChannelContext().channel;\n  var channel = propChannel || contextChannel;\n  var handleAction = useActionHandler(message);\n  var handleDelete = useDeleteHandler(message);\n  var handleOpenThread = useOpenThreadHandler(message, propOpenThread);\n  var handleReaction = useReactionHandler(message);\n  var handleRetry = useRetryHandler(propRetrySendMessage);\n  var userRoles = useUserRole(message);\n  var handleFlag = useFlagHandler(message, {\n    getErrorNotification: getFlagMessageErrorNotification,\n    getSuccessNotification: getFlagMessageSuccessNotification,\n    notify: addNotification\n  });\n  var handleMute = useMuteHandler(message, {\n    getErrorNotification: getMuteUserErrorNotification,\n    getSuccessNotification: getMuteUserSuccessNotification,\n    notify: addNotification\n  });\n\n  var _b = useMentionsHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _b.onMentionsClick,\n      onMentionsHover = _b.onMentionsHover;\n\n  var _c = usePinHandler(message, pinPermissions, {\n    getErrorNotification: getPinMessageErrorNotification,\n    notify: addNotification\n  }),\n      canPin = _c.canPin,\n      handlePin = _c.handlePin;\n\n  return React.createElement(MemoizedMessage, _assign({}, props, {\n    canPin: canPin,\n    channel: channel,\n    handleAction: handleAction,\n    handleDelete: handleDelete,\n    handleFlag: handleFlag,\n    handleMute: handleMute,\n    handleOpenThread: handleOpenThread,\n    handlePin: handlePin,\n    handleReaction: handleReaction,\n    handleRetry: handleRetry,\n    onMentionsClickMessage: onMentionsClick,\n    onMentionsHoverMessage: onMentionsHover,\n    userRoles: userRoles\n  }));\n};\n\nvar MessageCommerceWithContext = function MessageCommerceWithContext(props) {\n  var _a, _b, _c, _d, _e;\n\n  var _f = props.Attachment,\n      Attachment$1 = _f === void 0 ? Attachment : _f,\n      _g = props.Avatar,\n      Avatar$1 = _g === void 0 ? Avatar : _g,\n      formatDate = props.formatDate,\n      groupStyles = props.groupStyles,\n      handleAction = props.handleAction,\n      handleOpenThread = props.handleOpenThread,\n      handleReaction = props.handleReaction,\n      isMyMessage = props.isMyMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      message = props.message,\n      _h = props.MessageDeleted,\n      MessageDeleted$1 = _h === void 0 ? MessageDeleted : _h,\n      onReactionListClick = props.onReactionListClick,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      _j = props.ReactionSelector,\n      ReactionSelector$1 = _j === void 0 ? ReactionSelector : _j,\n      reactionSelectorRef = props.reactionSelectorRef,\n      _k = props.ReactionsList,\n      ReactionsList$1 = _k === void 0 ? ReactionsList : _k,\n      showDetailedReactions = props.showDetailedReactions,\n      threadList = props.threadList;\n\n  var _l = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _l.onUserClick,\n      onUserHover = _l.onUserHover;\n\n  var hasAttachment = messageHasAttachments(message);\n  var hasReactions = messageHasReactions(message);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n  var messageClasses = \"str-chat__message-commerce str-chat__message-commerce--\" + (isMyMessage() ? 'right' : 'left');\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted$1, {\n      message: message\n    });\n  }\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: (\"\\n\\t\\t\\t\\t\\t\\t\" + messageClasses + \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message-commerce--\" + message.type + \"\\n\\t\\t\\t\\t\\t\\t\" + (message.text ? 'str-chat__message-commerce--has-text' : 'str-chat__message-commerce--has-no-text') + \"\\n\\t\\t\\t\\t\\t\\t\" + (hasAttachment ? 'str-chat__message-commerce--has-attachment' : '') + \"\\n\\t\\t\\t\\t\\t\\t\" + (hasReactions && isReactionEnabled ? 'str-chat__message-commerce--with-reactions' : '') + \"\\n            \" + (\"str-chat__message-commerce--\" + firstGroupStyle) + \"\\n            \" + (message.pinned ? 'pinned-message' : '') + \"\\n\\t\\t\\t\\t\\t\").trim(),\n    \"data-testid\": 'message-commerce-wrapper',\n    key: message.id\n  }, (firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && React.createElement(Avatar$1, {\n    image: (_a = message.user) === null || _a === void 0 ? void 0 : _a.image,\n    name: ((_b = message.user) === null || _b === void 0 ? void 0 : _b.name) || ((_c = message.user) === null || _c === void 0 ? void 0 : _c.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover,\n    size: 32\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-inner'\n  }, message && !message.text && React.createElement(React.Fragment, null, React.createElement(MessageOptions, _assign({}, props, {\n    displayActions: false,\n    displayLeft: false,\n    displayReplies: false,\n    onReactionListClick: onReactionListClick,\n    theme: 'commerce'\n  })), hasReactions && !showDetailedReactions && isReactionEnabled && React.createElement(ReactionsList$1, {\n    onClick: onReactionListClick,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions\n  }), showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector$1, {\n    detailedView: true,\n    handleReaction: handleReaction,\n    latest_reactions: message.latest_reactions,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    ref: reactionSelectorRef,\n    reverse: false\n  })), message.attachments && React.createElement(Attachment$1, {\n    actionHandler: handleAction,\n    attachments: message.attachments\n  }), message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: isMyMessage() ? 'right' : 'left',\n    source: message.mml\n  }), message.text && React.createElement(MessageText, _assign({}, props, {\n    customInnerClass: 'str-chat__message-commerce-text-inner',\n    customOptionProps: {\n      displayActions: false,\n      displayLeft: false,\n      displayReplies: false,\n      theme: 'commerce'\n    },\n    customWrapperClass: 'str-chat__message-commerce-text',\n    theme: 'commerce'\n  })), !threadList && React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-reply-button'\n  }, React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-data'\n  }, !isMyMessage() ? React.createElement(\"span\", {\n    className: 'str-chat__message-commerce-name'\n  }, ((_d = message.user) === null || _d === void 0 ? void 0 : _d.name) || ((_e = message.user) === null || _e === void 0 ? void 0 : _e.id)) : null, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-commerce-timestamp',\n    format: 'LT',\n    formatDate: formatDate,\n    message: message\n  })))));\n};\n\nvar MemoizedMessageCommerce = React.memo(MessageCommerceWithContext, areMessageUIPropsEqual);\n/**\n * MessageCommerce - UI component that renders a message and receives functionality from the Message/MessageList components\n */\n\nvar MessageCommerce = function MessageCommerce(props) {\n  var message = props.message;\n  var reactionSelectorRef = useRef(null);\n\n  var _a = useReactionClick(message, reactionSelectorRef),\n      isReactionEnabled = _a.isReactionEnabled,\n      onReactionListClick = _a.onReactionListClick,\n      showDetailedReactions = _a.showDetailedReactions;\n\n  return React.createElement(MemoizedMessageCommerce, _assign({}, props, {\n    isReactionEnabled: isReactionEnabled,\n    onReactionListClick: onReactionListClick,\n    reactionSelectorRef: reactionSelectorRef,\n    showDetailedReactions: showDetailedReactions\n  }));\n};\n\nvar MessageLivestreamWithContext = function MessageLivestreamWithContext(props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n  var addNotification = props.addNotification,\n      _k = props.Attachment,\n      Attachment$1 = _k === void 0 ? Attachment : _k,\n      _l = props.Avatar,\n      Avatar$1 = _l === void 0 ? Avatar : _l,\n      channelConfig = props.channelConfig,\n      clearEditingState = props.clearEditingState,\n      _m = props.EditMessageInput,\n      EditMessageInput = _m === void 0 ? EditMessageForm : _m,\n      editing = props.editing,\n      formatDate = props.formatDate,\n      getMessageActions = props.getMessageActions,\n      groupStyles = props.groupStyles,\n      handleAction = props.handleAction,\n      handleOpenThread = props.handleOpenThread,\n      handleReaction = props.handleReaction,\n      handleRetry = props.handleRetry,\n      initialMessage = props.initialMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      message = props.message,\n      _o = props.MessageDeleted,\n      MessageDeleted$1 = _o === void 0 ? MessageDeleted : _o,\n      messageWrapperRef = props.messageWrapperRef,\n      onMentionsClickMessage = props.onMentionsClickMessage,\n      onMentionsHoverMessage = props.onMentionsHoverMessage,\n      onReactionListClick = props.onReactionListClick,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      _p = props.PinIndicator,\n      PinIndicator$1 = _p === void 0 ? PinIndicator : _p,\n      _q = props.ReactionsList,\n      ReactionsList = _q === void 0 ? SimpleReactionsList : _q,\n      _r = props.ReactionSelector,\n      ReactionSelector$1 = _r === void 0 ? ReactionSelector : _r,\n      reactionSelectorRef = props.reactionSelectorRef,\n      _s = props.renderText,\n      renderText$1 = _s === void 0 ? renderText : _s,\n      threadList = props.threadList,\n      setEditingState = props.setEditingState,\n      showDetailedReactions = props.showDetailedReactions,\n      unsafeHTML = props.unsafeHTML;\n\n  var _t = useTranslationContext(),\n      t = _t.t,\n      userLanguage = _t.userLanguage;\n\n  var _u = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _u.onUserClick,\n      onUserHover = _u.onUserHover;\n\n  var messageTextToRender = ((_a = message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || message.text;\n  var messageText = useMemo(function () {\n    return renderText$1(messageTextToRender, message.mentioned_users);\n  }, [message.mentioned_users, messageTextToRender]);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted$1, {\n      message: message\n    });\n  }\n\n  if (editing) {\n    return React.createElement(\"div\", {\n      className: \"str-chat__message-team str-chat__message-team--\" + firstGroupStyle + \" str-chat__message-team--editing\",\n      \"data-testid\": 'message-livestream-edit'\n    }, (firstGroupStyle === 'top' || firstGroupStyle === 'single') && React.createElement(\"div\", {\n      className: 'str-chat__message-team-meta'\n    }, React.createElement(Avatar$1, {\n      image: (_b = message.user) === null || _b === void 0 ? void 0 : _b.image,\n      name: ((_c = message.user) === null || _c === void 0 ? void 0 : _c.name) || ((_d = message.user) === null || _d === void 0 ? void 0 : _d.id),\n      onClick: onUserClick,\n      onMouseOver: onUserHover,\n      size: 40\n    })), React.createElement(MessageInput, {\n      clearEditingState: clearEditingState,\n      Input: EditMessageInput,\n      message: message\n    }));\n  }\n\n  return React.createElement(React.Fragment, null, message.pinned && React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-pin-indicator'\n  }, React.createElement(PinIndicator$1, {\n    message: message,\n    t: t\n  })), React.createElement(\"div\", {\n    className: \"str-chat__message-livestream str-chat__message-livestream--\" + firstGroupStyle + \" str-chat__message-livestream--\" + message.type + \" str-chat__message-livestream--\" + message.status + \" \" + (initialMessage ? 'str-chat__message-livestream--initial-message' : '') + \" \" + (message.pinned ? 'pinned-message' : ''),\n    \"data-testid\": 'message-livestream',\n    ref: messageWrapperRef\n  }, showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector$1, {\n    detailedView: true,\n    handleReaction: handleReaction,\n    latest_reactions: message.latest_reactions,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    ref: reactionSelectorRef,\n    reverse: false\n  }), React.createElement(MessageLivestreamActions, {\n    addNotification: addNotification,\n    channelConfig: channelConfig,\n    formatDate: formatDate,\n    getMessageActions: getMessageActions,\n    handleOpenThread: handleOpenThread,\n    initialMessage: initialMessage,\n    message: message,\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick,\n    setEditingState: setEditingState,\n    threadList: threadList\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-left'\n  }, React.createElement(Avatar$1, {\n    image: (_e = message.user) === null || _e === void 0 ? void 0 : _e.image,\n    name: ((_f = message.user) === null || _f === void 0 ? void 0 : _f.name) || ((_g = message.user) === null || _g === void 0 ? void 0 : _g.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover,\n    size: 30\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-right'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-content'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-author'\n  }, React.createElement(\"strong\", null, ((_h = message.user) === null || _h === void 0 ? void 0 : _h.name) || ((_j = message.user) === null || _j === void 0 ? void 0 : _j.id)), message.type === 'error' && React.createElement(\"div\", {\n    className: 'str-chat__message-team-error-header'\n  }, t('Only visible to you'))), React.createElement(\"div\", {\n    className: isOnlyEmojis(message.text) ? 'str-chat__message-livestream-text--is-emoji' : '',\n    \"data-testid\": 'message-livestream-text',\n    onClick: onMentionsClickMessage,\n    onMouseOver: onMentionsHoverMessage\n  }, message.type !== 'error' && message.status !== 'failed' && !unsafeHTML && messageText, message.type !== 'error' && message.status !== 'failed' && unsafeHTML && !!message.html && React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }), message.type === 'error' && !message.command && React.createElement(\"p\", {\n    \"data-testid\": 'message-livestream-error'\n  }, React.createElement(ErrorIcon, null), message.text), message.type === 'error' && message.command && React.createElement(\"p\", {\n    \"data-testid\": 'message-livestream-command-error'\n  }, React.createElement(ErrorIcon, null), React.createElement(\"strong\", null, \"/\", message.command), \" is not a valid command\"), message.status === 'failed' && React.createElement(\"p\", {\n    onClick: message.errorStatusCode !== 403 ? function () {\n      return handleRetry(message);\n    } : undefined\n  }, React.createElement(ErrorIcon, null), message.errorStatusCode !== 403 ? t('Message Failed · Click to try again') : t('Message Failed · Unauthorized'))), message.attachments && Attachment$1 && React.createElement(Attachment$1, {\n    actionHandler: handleAction,\n    attachments: message.attachments\n  }), isReactionEnabled && React.createElement(ReactionsList, {\n    handleReaction: handleReaction,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions\n  }), !initialMessage && React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  })))));\n};\n\nvar MessageLivestreamActions = function MessageLivestreamActions(props) {\n  var channelConfig = props.channelConfig,\n      formatDate = props.formatDate,\n      getMessageActions = props.getMessageActions,\n      handleOpenThread = props.handleOpenThread,\n      initialMessage = props.initialMessage,\n      message = props.message,\n      messageWrapperRef = props.messageWrapperRef,\n      onReactionListClick = props.onReactionListClick,\n      threadList = props.threadList;\n\n  var _a = useState(false),\n      actionsBoxOpen = _a[0],\n      setActionsBoxOpen = _a[1];\n\n  var hideOptions = useCallback(function () {\n    return setActionsBoxOpen(false);\n  }, []);\n  var messageDeletedAt = !!message.deleted_at;\n  var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n  var showActionsBox = showMessageActionsBox(getMessageActions());\n  useEffect(function () {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return function () {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n  useEffect(function () {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n  useEffect(function () {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return function () {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (initialMessage || !message || message.type === 'error' || message.type === 'system' || message.type === 'ephemeral' || message.status === 'failed' || message.status === 'sending') {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-actions\",\n    \"data-testid\": 'message-livestream-actions'\n  }, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-livestream-time',\n    formatDate: formatDate,\n    message: message\n  }), (channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.reactions) && React.createElement(\"span\", {\n    \"data-testid\": 'message-livestream-reactions-action',\n    onClick: onReactionListClick\n  }, React.createElement(\"span\", null, React.createElement(ReactionIcon, null))), !threadList && (channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.replies) && React.createElement(\"span\", {\n    \"data-testid\": 'message-livestream-thread-action',\n    onClick: handleOpenThread\n  }, React.createElement(ThreadIcon, null)), showActionsBox && React.createElement(MessageActions, _assign({}, props, {\n    customWrapperClass: '',\n    getMessageActions: getMessageActions,\n    inline: true\n  })));\n};\n\nvar MemoizedMessageLivestream = React.memo(MessageLivestreamWithContext, areMessageUIPropsEqual);\n/**\n * MessageLivestream - handles the rendering of a message and depends on the Message component for all the logic.\n * Implements the look and feel for a livestream use case.\n * @example ./MessageLivestream.md\n */\n\nvar MessageLivestream = function MessageLivestream(props) {\n  var message = props.message,\n      propOnMentionsClick = props.onMentionsClickMessage,\n      propOnMentionsHover = props.onMentionsHoverMessage;\n  var messageWrapperRef = useRef(null);\n  var reactionSelectorRef = useRef(null);\n\n  var _a = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _a.onMentionsClick,\n      onMentionsHover = _a.onMentionsHover;\n\n  var _b = useReactionClick(message, reactionSelectorRef, messageWrapperRef),\n      isReactionEnabled = _b.isReactionEnabled,\n      onReactionListClick = _b.onReactionListClick,\n      showDetailedReactions = _b.showDetailedReactions;\n\n  return React.createElement(MemoizedMessageLivestream, _assign({}, props, {\n    isReactionEnabled: isReactionEnabled,\n    messageWrapperRef: messageWrapperRef,\n    onMentionsClickMessage: onMentionsClick,\n    onMentionsHoverMessage: onMentionsHover,\n    onReactionListClick: onReactionListClick,\n    reactionSelectorRef: reactionSelectorRef,\n    showDetailedReactions: showDetailedReactions\n  }));\n};\n\nvar MessageTeamWithContext = function MessageTeamWithContext(props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n  var addNotification = props.addNotification,\n      _l = props.Avatar,\n      Avatar$1 = _l === void 0 ? Avatar : _l,\n      Attachment = props.Attachment,\n      channel = props.channel,\n      propChannelConfig = props.channelConfig,\n      clearEditingState = props.clearEditingState,\n      editing = props.editing,\n      _m = props.EditMessageInput,\n      EditMessageInput = _m === void 0 ? EditMessageForm : _m,\n      formatDate = props.formatDate,\n      getFlagMessageErrorNotification = props.getFlagMessageErrorNotification,\n      getFlagMessageSuccessNotification = props.getFlagMessageSuccessNotification,\n      getMessageActions = props.getMessageActions,\n      getMuteUserErrorNotification = props.getMuteUserErrorNotification,\n      getMuteUserSuccessNotification = props.getMuteUserSuccessNotification,\n      _o = props.groupStyles,\n      groupStyles = _o === void 0 ? ['single'] : _o,\n      handleAction = props.handleAction,\n      handleEdit = props.handleEdit,\n      handleFlag = props.handleFlag,\n      handleDelete = props.handleDelete,\n      handleOpenThread = props.handleOpenThread,\n      handleMute = props.handleMute,\n      handlePin = props.handlePin,\n      handleReaction = props.handleReaction,\n      handleRetry = props.handleRetry,\n      initialMessage = props.initialMessage,\n      isMyMessage = props.isMyMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      lastReceivedId = props.lastReceivedId,\n      message = props.message,\n      _p = props.MessageDeleted,\n      MessageDeleted$1 = _p === void 0 ? MessageDeleted : _p,\n      messageListRect = props.messageListRect,\n      messageWrapperRef = props.messageWrapperRef,\n      onMentionsClickMessage = props.onMentionsClickMessage,\n      onMentionsHoverMessage = props.onMentionsHoverMessage,\n      onReactionListClick = props.onReactionListClick,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      _q = props.PinIndicator,\n      PinIndicator$1 = _q === void 0 ? PinIndicator : _q,\n      _r = props.ReactionsList,\n      ReactionsList = _r === void 0 ? SimpleReactionsList : _r,\n      _s = props.ReactionSelector,\n      ReactionSelector$1 = _s === void 0 ? ReactionSelector : _s,\n      reactionSelectorRef = props.reactionSelectorRef,\n      readBy = props.readBy,\n      _t = props.renderText,\n      renderText$1 = _t === void 0 ? renderText : _t,\n      showDetailedReactions = props.showDetailedReactions,\n      setEditingState = props.setEditingState,\n      threadList = props.threadList,\n      unsafeHTML = props.unsafeHTML;\n\n  var _u = useTranslationContext(),\n      t = _u.t,\n      userLanguage = _u.userLanguage;\n\n  var channelConfig = propChannelConfig || (channel === null || channel === void 0 ? void 0 : channel.getConfig());\n  var showActionsBox = showMessageActionsBox(getMessageActions());\n  var messageTextToRender = ((_a = message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || message.text;\n  var messageMentionedUsersItem = message.mentioned_users;\n\n  var _v = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _v.onUserClick,\n      onUserHover = _v.onUserHover;\n\n  var messageText = useMemo(function () {\n    return renderText$1(messageTextToRender, messageMentionedUsersItem);\n  }, [messageMentionedUsersItem, messageTextToRender]);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message.type === 'message.read') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted$1, {\n      message: message\n    });\n  }\n\n  if (editing) {\n    return React.createElement(\"div\", {\n      className: \"str-chat__message-team str-chat__message-team--\" + firstGroupStyle + \" str-chat__message-team--editing\",\n      \"data-testid\": 'message-team-edit'\n    }, (firstGroupStyle === 'top' || firstGroupStyle === 'single') && React.createElement(\"div\", {\n      className: 'str-chat__message-team-meta'\n    }, React.createElement(Avatar$1, {\n      image: (_b = message.user) === null || _b === void 0 ? void 0 : _b.image,\n      name: ((_c = message.user) === null || _c === void 0 ? void 0 : _c.name) || ((_d = message.user) === null || _d === void 0 ? void 0 : _d.id),\n      onClick: onUserClick,\n      onMouseOver: onUserHover,\n      size: 40\n    })), React.createElement(MessageInput, {\n      clearEditingState: clearEditingState,\n      Input: EditMessageInput,\n      message: message\n    }));\n  }\n\n  return React.createElement(React.Fragment, null, message.pinned && React.createElement(\"div\", {\n    className: 'str-chat__message-team-pin-indicator'\n  }, React.createElement(PinIndicator$1, {\n    message: message,\n    t: t\n  })), React.createElement(\"div\", {\n    className: \"str-chat__message-team str-chat__message-team--\" + firstGroupStyle + \" str-chat__message-team--\" + message.type + \" \" + (threadList ? 'thread-list' : '') + \" str-chat__message-team--\" + message.status + \" \" + (message.pinned ? 'pinned-message' : ''),\n    \"data-testid\": 'message-team',\n    ref: messageWrapperRef\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-team-meta'\n  }, firstGroupStyle === 'top' || firstGroupStyle === 'single' || initialMessage ? React.createElement(Avatar$1, {\n    image: (_e = message.user) === null || _e === void 0 ? void 0 : _e.image,\n    name: ((_f = message.user) === null || _f === void 0 ? void 0 : _f.name) || ((_g = message.user) === null || _g === void 0 ? void 0 : _g.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover,\n    size: 40\n  }) : React.createElement(\"div\", {\n    \"data-testid\": 'team-meta-spacer',\n    style: {\n      marginRight: 0,\n      width: 40\n    }\n  }), React.createElement(MessageTimestamp, {\n    formatDate: formatDate,\n    message: message\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-team-group'\n  }, message && (firstGroupStyle === 'top' || firstGroupStyle === 'single' || initialMessage) && React.createElement(\"div\", {\n    className: 'str-chat__message-team-author',\n    \"data-testid\": 'message-team-author',\n    onClick: onUserClick\n  }, React.createElement(\"strong\", null, ((_h = message.user) === null || _h === void 0 ? void 0 : _h.name) || ((_j = message.user) === null || _j === void 0 ? void 0 : _j.id)), message.type === 'error' && React.createElement(\"div\", {\n    className: 'str-chat__message-team-error-header'\n  }, t('Only visible to you'))), React.createElement(\"div\", {\n    className: \"str-chat__message-team-content str-chat__message-team-content--\" + firstGroupStyle + \" str-chat__message-team-content--\" + (message.text === '' ? 'image' : 'text'),\n    \"data-testid\": 'message-team-content'\n  }, !initialMessage && message && message.status !== 'sending' && message.status !== 'failed' && message.type !== 'system' && message.type !== 'ephemeral' && message.type !== 'error' && React.createElement(\"div\", {\n    className: \"str-chat__message-team-actions\",\n    \"data-testid\": 'message-team-actions'\n  }, message && showDetailedReactions && React.createElement(ReactionSelector$1, {\n    detailedView: true,\n    handleReaction: handleReaction,\n    latest_reactions: message.latest_reactions,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    ref: reactionSelectorRef\n  }), isReactionEnabled && React.createElement(\"span\", {\n    \"data-testid\": 'message-team-reaction-icon',\n    onClick: onReactionListClick,\n    title: 'Reactions'\n  }, React.createElement(ReactionIcon, null)), !threadList && (channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.replies) !== false && React.createElement(\"span\", {\n    \"data-testid\": 'message-team-thread-icon',\n    onClick: handleOpenThread,\n    title: 'Start a thread'\n  }, React.createElement(ThreadIcon, null)), showActionsBox && React.createElement(MessageActions, {\n    addNotification: addNotification,\n    customWrapperClass: '',\n    getFlagMessageErrorNotification: getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification: getFlagMessageSuccessNotification,\n    getMessageActions: getMessageActions,\n    getMuteUserErrorNotification: getMuteUserErrorNotification,\n    getMuteUserSuccessNotification: getMuteUserSuccessNotification,\n    handleDelete: handleDelete,\n    handleEdit: handleEdit,\n    handleFlag: handleFlag,\n    handleMute: handleMute,\n    handlePin: handlePin,\n    inline: true,\n    message: message,\n    messageListRect: messageListRect,\n    messageWrapperRef: messageWrapperRef,\n    setEditingState: setEditingState\n  })), message && React.createElement(\"span\", {\n    className: isOnlyEmojis(message.text) ? 'str-chat__message-team-text--is-emoji' : '',\n    \"data-testid\": 'message-team-message',\n    onClick: onMentionsClickMessage,\n    onMouseOver: onMentionsHoverMessage\n  }, unsafeHTML && message.html ? React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }) : messageText), message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: 'left',\n    source: message.mml\n  }), message.text === '' && React.createElement(MessageTeamAttachments, {\n    Attachment: Attachment,\n    handleAction: handleAction,\n    message: message\n  }), ((_k = message.latest_reactions) === null || _k === void 0 ? void 0 : _k.length) !== 0 && message.text !== '' && isReactionEnabled && React.createElement(ReactionsList, {\n    handleReaction: handleReaction,\n    onClick: onReactionListClick,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions\n  }), message.status === 'failed' && React.createElement(\"button\", {\n    className: 'str-chat__message-team-failed',\n    \"data-testid\": 'message-team-failed',\n    onClick: message.errorStatusCode !== 403 ? function () {\n      return handleRetry(message);\n    } : undefined\n  }, React.createElement(ErrorIcon, null), message.errorStatusCode !== 403 ? t('Message Failed · Click to try again') : t('Message Failed · Unauthorized'))), React.createElement(MessageTeamStatus, {\n    Avatar: Avatar$1,\n    isMyMessage: isMyMessage,\n    lastReceivedId: lastReceivedId,\n    message: message,\n    readBy: readBy,\n    threadList: threadList\n  }), message.text !== '' && message.attachments && React.createElement(MessageTeamAttachments, {\n    Attachment: Attachment,\n    handleAction: handleAction,\n    message: message\n  }), message.latest_reactions && message.latest_reactions.length !== 0 && message.text === '' && isReactionEnabled && React.createElement(ReactionsList, {\n    handleReaction: handleReaction,\n    onClick: onReactionListClick,\n    own_reactions: message.own_reactions,\n    reaction_counts: message.reaction_counts || undefined,\n    reactions: message.latest_reactions\n  }), !threadList && React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  }))));\n};\n\nvar MessageTeamStatus = function MessageTeamStatus(props) {\n  var _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      isMyMessage = props.isMyMessage,\n      lastReceivedId = props.lastReceivedId,\n      message = props.message,\n      readBy = props.readBy,\n      threadList = props.threadList;\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n\n  if (!isMyMessage() || message.type === 'error') {\n    return null;\n  }\n\n  var justReadByMe = readBy && (client === null || client === void 0 ? void 0 : client.user) && readBy.length === 1 && readBy[0] && readBy[0].id === client.user.id;\n\n  if (message && message.status === 'sending') {\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-team-status',\n      \"data-testid\": 'message-team-sending'\n    }, React.createElement(Tooltip, null, t('Sending...')), React.createElement(LoadingIndicator, null));\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    var lastReadUser = readBy.filter(function (item) {\n      return item && (client === null || client === void 0 ? void 0 : client.user) && item.id !== client.user.id;\n    })[0];\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-team-status'\n    }, React.createElement(Tooltip, null, getReadByTooltipText(readBy, t, client)), React.createElement(Avatar$1, {\n      image: lastReadUser === null || lastReadUser === void 0 ? void 0 : lastReadUser.image,\n      name: lastReadUser === null || lastReadUser === void 0 ? void 0 : lastReadUser.name,\n      size: 15\n    }), readBy.length - 1 > 1 && React.createElement(\"span\", {\n      className: 'str-chat__message-team-status-number',\n      \"data-testid\": 'message-team-read-by-count'\n    }, readBy.length - 1));\n  }\n\n  if (message && message.status === 'received' && message.id === lastReceivedId && !threadList) {\n    return React.createElement(\"span\", {\n      className: 'str-chat__message-team-status',\n      \"data-testid\": 'message-team-received'\n    }, React.createElement(Tooltip, null, t('Delivered')), React.createElement(DeliveredCheckIcon, null));\n  }\n\n  return null;\n};\n\nvar MessageTeamAttachments = function MessageTeamAttachments(props) {\n  var _a = props.Attachment,\n      Attachment$1 = _a === void 0 ? Attachment : _a,\n      handleAction = props.handleAction,\n      message = props.message;\n\n  if (message.attachments) {\n    return React.createElement(Attachment$1, {\n      actionHandler: handleAction,\n      attachments: message.attachments\n    });\n  }\n\n  return null;\n};\n\nvar MemoizedMessageTeam = React.memo(MessageTeamWithContext, areMessageUIPropsEqual);\n/**\n * MessageTeam - handles the rendering of a Message and depends on the Message component for all the logic.\n * Implements the look and feel for a team style collaboration environment.\n * @example ./MessageTeam.md\n */\n\nvar MessageTeam = function MessageTeam(props) {\n  var message = props.message;\n  var channel = useChannelContext().channel;\n  var reactionSelectorRef = useRef(null);\n  var messageWrapperRef = useRef(null);\n\n  var _a = useReactionClick(message, reactionSelectorRef, messageWrapperRef),\n      isReactionEnabled = _a.isReactionEnabled,\n      onReactionListClick = _a.onReactionListClick,\n      showDetailedReactions = _a.showDetailedReactions;\n\n  return React.createElement(MemoizedMessageTeam, _assign({}, props, {\n    channel: channel,\n    isReactionEnabled: isReactionEnabled,\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick,\n    reactionSelectorRef: reactionSelectorRef,\n    showDetailedReactions: showDetailedReactions\n  }));\n};\n\nvar compressed = true;\nvar categories = [{\n  id: \"people\",\n  name: \"Smileys & People\",\n  emojis: [\"grinning\", \"smiley\", \"smile\", \"grin\", \"laughing\", \"sweat_smile\", \"rolling_on_the_floor_laughing\", \"joy\", \"slightly_smiling_face\", \"upside_down_face\", \"wink\", \"blush\", \"innocent\", \"smiling_face_with_3_hearts\", \"heart_eyes\", \"star-struck\", \"kissing_heart\", \"kissing\", \"relaxed\", \"kissing_closed_eyes\", \"kissing_smiling_eyes\", \"yum\", \"stuck_out_tongue\", \"stuck_out_tongue_winking_eye\", \"zany_face\", \"stuck_out_tongue_closed_eyes\", \"money_mouth_face\", \"hugging_face\", \"face_with_hand_over_mouth\", \"shushing_face\", \"thinking_face\", \"zipper_mouth_face\", \"face_with_raised_eyebrow\", \"neutral_face\", \"expressionless\", \"no_mouth\", \"smirk\", \"unamused\", \"face_with_rolling_eyes\", \"grimacing\", \"lying_face\", \"relieved\", \"pensive\", \"sleepy\", \"drooling_face\", \"sleeping\", \"mask\", \"face_with_thermometer\", \"face_with_head_bandage\", \"nauseated_face\", \"face_vomiting\", \"sneezing_face\", \"hot_face\", \"cold_face\", \"woozy_face\", \"dizzy_face\", \"exploding_head\", \"face_with_cowboy_hat\", \"partying_face\", \"sunglasses\", \"nerd_face\", \"face_with_monocle\", \"confused\", \"worried\", \"slightly_frowning_face\", \"white_frowning_face\", \"open_mouth\", \"hushed\", \"astonished\", \"flushed\", \"pleading_face\", \"frowning\", \"anguished\", \"fearful\", \"cold_sweat\", \"disappointed_relieved\", \"cry\", \"sob\", \"scream\", \"confounded\", \"persevere\", \"disappointed\", \"sweat\", \"weary\", \"tired_face\", \"yawning_face\", \"triumph\", \"rage\", \"angry\", \"face_with_symbols_on_mouth\", \"smiling_imp\", \"imp\", \"skull\", \"skull_and_crossbones\", \"hankey\", \"clown_face\", \"japanese_ogre\", \"japanese_goblin\", \"ghost\", \"alien\", \"space_invader\", \"robot_face\", \"smiley_cat\", \"smile_cat\", \"joy_cat\", \"heart_eyes_cat\", \"smirk_cat\", \"kissing_cat\", \"scream_cat\", \"crying_cat_face\", \"pouting_cat\", \"see_no_evil\", \"hear_no_evil\", \"speak_no_evil\", \"wave\", \"raised_back_of_hand\", \"raised_hand_with_fingers_splayed\", \"hand\", \"spock-hand\", \"ok_hand\", \"pinching_hand\", \"v\", \"crossed_fingers\", \"i_love_you_hand_sign\", \"the_horns\", \"call_me_hand\", \"point_left\", \"point_right\", \"point_up_2\", \"middle_finger\", \"point_down\", \"point_up\", \"+1\", \"-1\", \"fist\", \"facepunch\", \"left-facing_fist\", \"right-facing_fist\", \"clap\", \"raised_hands\", \"open_hands\", \"palms_up_together\", \"handshake\", \"pray\", \"writing_hand\", \"nail_care\", \"selfie\", \"muscle\", \"mechanical_arm\", \"mechanical_leg\", \"leg\", \"foot\", \"ear\", \"ear_with_hearing_aid\", \"nose\", \"brain\", \"tooth\", \"bone\", \"eyes\", \"eye\", \"tongue\", \"lips\", \"baby\", \"child\", \"boy\", \"girl\", \"adult\", \"man\", \"bearded_person\", \"red_haired_man\", \"curly_haired_man\", \"white_haired_man\", \"bald_man\", \"woman\", \"red_haired_woman\", \"curly_haired_woman\", \"white_haired_woman\", \"bald_woman\", \"blond-haired-woman\", \"blond-haired-man\", \"older_adult\", \"older_man\", \"older_woman\", \"man-frowning\", \"woman-frowning\", \"man-pouting\", \"woman-pouting\", \"man-gesturing-no\", \"woman-gesturing-no\", \"man-gesturing-ok\", \"woman-gesturing-ok\", \"man-tipping-hand\", \"woman-tipping-hand\", \"man-raising-hand\", \"woman-raising-hand\", \"deaf_person\", \"deaf_man\", \"deaf_woman\", \"man-bowing\", \"woman-bowing\", \"man-facepalming\", \"woman-facepalming\", \"man-shrugging\", \"woman-shrugging\", \"male-doctor\", \"female-doctor\", \"male-student\", \"female-student\", \"male-teacher\", \"female-teacher\", \"male-judge\", \"female-judge\", \"male-farmer\", \"female-farmer\", \"male-cook\", \"female-cook\", \"male-mechanic\", \"female-mechanic\", \"male-factory-worker\", \"female-factory-worker\", \"male-office-worker\", \"female-office-worker\", \"male-scientist\", \"female-scientist\", \"male-technologist\", \"female-technologist\", \"male-singer\", \"female-singer\", \"male-artist\", \"female-artist\", \"male-pilot\", \"female-pilot\", \"male-astronaut\", \"female-astronaut\", \"male-firefighter\", \"female-firefighter\", \"male-police-officer\", \"female-police-officer\", \"male-guard\", \"female-guard\", \"male-construction-worker\", \"female-construction-worker\", \"prince\", \"princess\", \"man-wearing-turban\", \"woman-wearing-turban\", \"man_with_gua_pi_mao\", \"person_with_headscarf\", \"man_in_tuxedo\", \"bride_with_veil\", \"pregnant_woman\", \"breast-feeding\", \"angel\", \"santa\", \"mrs_claus\", \"superhero\", \"male_superhero\", \"female_superhero\", \"supervillain\", \"male_supervillain\", \"female_supervillain\", \"mage\", \"male_mage\", \"female_mage\", \"fairy\", \"male_fairy\", \"female_fairy\", \"vampire\", \"male_vampire\", \"female_vampire\", \"merperson\", \"merman\", \"mermaid\", \"elf\", \"male_elf\", \"female_elf\", \"genie\", \"male_genie\", \"female_genie\", \"zombie\", \"male_zombie\", \"female_zombie\", \"man-getting-massage\", \"woman-getting-massage\", \"man-getting-haircut\", \"woman-getting-haircut\", \"man-walking\", \"woman-walking\", \"standing_person\", \"man_standing\", \"woman_standing\", \"kneeling_person\", \"man_kneeling\", \"woman_kneeling\", \"man_with_probing_cane\", \"woman_with_probing_cane\", \"man_in_motorized_wheelchair\", \"woman_in_motorized_wheelchair\", \"man_in_manual_wheelchair\", \"woman_in_manual_wheelchair\", \"man-running\", \"woman-running\", \"dancer\", \"man_dancing\", \"man_in_business_suit_levitating\", \"dancers\", \"man-with-bunny-ears-partying\", \"woman-with-bunny-ears-partying\", \"person_in_steamy_room\", \"man_in_steamy_room\", \"woman_in_steamy_room\", \"person_climbing\", \"man_climbing\", \"woman_climbing\", \"fencer\", \"horse_racing\", \"skier\", \"snowboarder\", \"man-surfing\", \"woman-surfing\", \"man-rowing-boat\", \"woman-rowing-boat\", \"man-swimming\", \"woman-swimming\", \"man-biking\", \"woman-biking\", \"man-mountain-biking\", \"woman-mountain-biking\", \"man-cartwheeling\", \"woman-cartwheeling\", \"wrestlers\", \"man-wrestling\", \"woman-wrestling\", \"man-playing-water-polo\", \"woman-playing-water-polo\", \"man-playing-handball\", \"woman-playing-handball\", \"juggling\", \"man-juggling\", \"woman-juggling\", \"person_in_lotus_position\", \"man_in_lotus_position\", \"woman_in_lotus_position\", \"bath\", \"sleeping_accommodation\", \"people_holding_hands\", \"two_women_holding_hands\", \"couple\", \"two_men_holding_hands\", \"couplekiss\", \"woman-kiss-man\", \"man-kiss-man\", \"woman-kiss-woman\", \"couple_with_heart\", \"woman-heart-man\", \"man-heart-man\", \"woman-heart-woman\", \"family\", \"man-woman-boy\", \"man-woman-girl\", \"man-woman-girl-boy\", \"man-woman-boy-boy\", \"man-woman-girl-girl\", \"man-man-boy\", \"man-man-girl\", \"man-man-girl-boy\", \"man-man-boy-boy\", \"man-man-girl-girl\", \"woman-woman-boy\", \"woman-woman-girl\", \"woman-woman-girl-boy\", \"woman-woman-boy-boy\", \"woman-woman-girl-girl\", \"man-boy\", \"man-boy-boy\", \"man-girl\", \"man-girl-boy\", \"man-girl-girl\", \"woman-boy\", \"woman-boy-boy\", \"woman-girl\", \"woman-girl-boy\", \"woman-girl-girl\", \"speaking_head_in_silhouette\", \"bust_in_silhouette\", \"busts_in_silhouette\", \"footprints\", \"kiss\", \"love_letter\", \"cupid\", \"gift_heart\", \"sparkling_heart\", \"heartpulse\", \"heartbeat\", \"revolving_hearts\", \"two_hearts\", \"heart_decoration\", \"heavy_heart_exclamation_mark_ornament\", \"broken_heart\", \"heart\", \"orange_heart\", \"yellow_heart\", \"green_heart\", \"blue_heart\", \"purple_heart\", \"brown_heart\", \"black_heart\", \"white_heart\", \"100\", \"anger\", \"boom\", \"dizzy\", \"sweat_drops\", \"dash\", \"hole\", \"bomb\", \"speech_balloon\", \"left_speech_bubble\", \"right_anger_bubble\", \"thought_balloon\", \"zzz\"]\n}, {\n  id: \"nature\",\n  name: \"Animals & Nature\",\n  emojis: [\"monkey_face\", \"monkey\", \"gorilla\", \"orangutan\", \"dog\", \"dog2\", \"guide_dog\", \"service_dog\", \"poodle\", \"wolf\", \"fox_face\", \"raccoon\", \"cat\", \"cat2\", \"lion_face\", \"tiger\", \"tiger2\", \"leopard\", \"horse\", \"racehorse\", \"unicorn_face\", \"zebra_face\", \"deer\", \"cow\", \"ox\", \"water_buffalo\", \"cow2\", \"pig\", \"pig2\", \"boar\", \"pig_nose\", \"ram\", \"sheep\", \"goat\", \"dromedary_camel\", \"camel\", \"llama\", \"giraffe_face\", \"elephant\", \"rhinoceros\", \"hippopotamus\", \"mouse\", \"mouse2\", \"rat\", \"hamster\", \"rabbit\", \"rabbit2\", \"chipmunk\", \"hedgehog\", \"bat\", \"bear\", \"koala\", \"panda_face\", \"sloth\", \"otter\", \"skunk\", \"kangaroo\", \"badger\", \"feet\", \"turkey\", \"chicken\", \"rooster\", \"hatching_chick\", \"baby_chick\", \"hatched_chick\", \"bird\", \"penguin\", \"dove_of_peace\", \"eagle\", \"duck\", \"swan\", \"owl\", \"flamingo\", \"peacock\", \"parrot\", \"frog\", \"crocodile\", \"turtle\", \"lizard\", \"snake\", \"dragon_face\", \"dragon\", \"sauropod\", \"t-rex\", \"whale\", \"whale2\", \"dolphin\", \"fish\", \"tropical_fish\", \"blowfish\", \"shark\", \"octopus\", \"shell\", \"snail\", \"butterfly\", \"bug\", \"ant\", \"bee\", \"beetle\", \"cricket\", \"spider\", \"spider_web\", \"scorpion\", \"mosquito\", \"microbe\", \"bouquet\", \"cherry_blossom\", \"white_flower\", \"rosette\", \"rose\", \"wilted_flower\", \"hibiscus\", \"sunflower\", \"blossom\", \"tulip\", \"seedling\", \"evergreen_tree\", \"deciduous_tree\", \"palm_tree\", \"cactus\", \"ear_of_rice\", \"herb\", \"shamrock\", \"four_leaf_clover\", \"maple_leaf\", \"fallen_leaf\", \"leaves\"]\n}, {\n  id: \"foods\",\n  name: \"Food & Drink\",\n  emojis: [\"grapes\", \"melon\", \"watermelon\", \"tangerine\", \"lemon\", \"banana\", \"pineapple\", \"mango\", \"apple\", \"green_apple\", \"pear\", \"peach\", \"cherries\", \"strawberry\", \"kiwifruit\", \"tomato\", \"coconut\", \"avocado\", \"eggplant\", \"potato\", \"carrot\", \"corn\", \"hot_pepper\", \"cucumber\", \"leafy_green\", \"broccoli\", \"garlic\", \"onion\", \"mushroom\", \"peanuts\", \"chestnut\", \"bread\", \"croissant\", \"baguette_bread\", \"pretzel\", \"bagel\", \"pancakes\", \"waffle\", \"cheese_wedge\", \"meat_on_bone\", \"poultry_leg\", \"cut_of_meat\", \"bacon\", \"hamburger\", \"fries\", \"pizza\", \"hotdog\", \"sandwich\", \"taco\", \"burrito\", \"stuffed_flatbread\", \"falafel\", \"egg\", \"fried_egg\", \"shallow_pan_of_food\", \"stew\", \"bowl_with_spoon\", \"green_salad\", \"popcorn\", \"butter\", \"salt\", \"canned_food\", \"bento\", \"rice_cracker\", \"rice_ball\", \"rice\", \"curry\", \"ramen\", \"spaghetti\", \"sweet_potato\", \"oden\", \"sushi\", \"fried_shrimp\", \"fish_cake\", \"moon_cake\", \"dango\", \"dumpling\", \"fortune_cookie\", \"takeout_box\", \"crab\", \"lobster\", \"shrimp\", \"squid\", \"oyster\", \"icecream\", \"shaved_ice\", \"ice_cream\", \"doughnut\", \"cookie\", \"birthday\", \"cake\", \"cupcake\", \"pie\", \"chocolate_bar\", \"candy\", \"lollipop\", \"custard\", \"honey_pot\", \"baby_bottle\", \"glass_of_milk\", \"coffee\", \"tea\", \"sake\", \"champagne\", \"wine_glass\", \"cocktail\", \"tropical_drink\", \"beer\", \"beers\", \"clinking_glasses\", \"tumbler_glass\", \"cup_with_straw\", \"beverage_box\", \"mate_drink\", \"ice_cube\", \"chopsticks\", \"knife_fork_plate\", \"fork_and_knife\", \"spoon\", \"hocho\", \"amphora\"]\n}, {\n  id: \"activity\",\n  name: \"Activities\",\n  emojis: [\"jack_o_lantern\", \"christmas_tree\", \"fireworks\", \"sparkler\", \"firecracker\", \"sparkles\", \"balloon\", \"tada\", \"confetti_ball\", \"tanabata_tree\", \"bamboo\", \"dolls\", \"flags\", \"wind_chime\", \"rice_scene\", \"red_envelope\", \"ribbon\", \"gift\", \"reminder_ribbon\", \"admission_tickets\", \"ticket\", \"medal\", \"trophy\", \"sports_medal\", \"first_place_medal\", \"second_place_medal\", \"third_place_medal\", \"soccer\", \"baseball\", \"softball\", \"basketball\", \"volleyball\", \"football\", \"rugby_football\", \"tennis\", \"flying_disc\", \"bowling\", \"cricket_bat_and_ball\", \"field_hockey_stick_and_ball\", \"ice_hockey_stick_and_puck\", \"lacrosse\", \"table_tennis_paddle_and_ball\", \"badminton_racquet_and_shuttlecock\", \"boxing_glove\", \"martial_arts_uniform\", \"goal_net\", \"golf\", \"ice_skate\", \"fishing_pole_and_fish\", \"diving_mask\", \"running_shirt_with_sash\", \"ski\", \"sled\", \"curling_stone\", \"dart\", \"yo-yo\", \"kite\", \"8ball\", \"crystal_ball\", \"nazar_amulet\", \"video_game\", \"joystick\", \"slot_machine\", \"game_die\", \"jigsaw\", \"teddy_bear\", \"spades\", \"hearts\", \"diamonds\", \"clubs\", \"chess_pawn\", \"black_joker\", \"mahjong\", \"flower_playing_cards\", \"performing_arts\", \"frame_with_picture\", \"art\", \"thread\", \"yarn\"]\n}, {\n  id: \"places\",\n  name: \"Travel & Places\",\n  emojis: [\"earth_africa\", \"earth_americas\", \"earth_asia\", \"globe_with_meridians\", \"world_map\", \"japan\", \"compass\", \"snow_capped_mountain\", \"mountain\", \"volcano\", \"mount_fuji\", \"camping\", \"beach_with_umbrella\", \"desert\", \"desert_island\", \"national_park\", \"stadium\", \"classical_building\", \"building_construction\", \"bricks\", \"house_buildings\", \"derelict_house_building\", \"house\", \"house_with_garden\", \"office\", \"post_office\", \"european_post_office\", \"hospital\", \"bank\", \"hotel\", \"love_hotel\", \"convenience_store\", \"school\", \"department_store\", \"factory\", \"japanese_castle\", \"european_castle\", \"wedding\", \"tokyo_tower\", \"statue_of_liberty\", \"church\", \"mosque\", \"hindu_temple\", \"synagogue\", \"shinto_shrine\", \"kaaba\", \"fountain\", \"tent\", \"foggy\", \"night_with_stars\", \"cityscape\", \"sunrise_over_mountains\", \"sunrise\", \"city_sunset\", \"city_sunrise\", \"bridge_at_night\", \"hotsprings\", \"carousel_horse\", \"ferris_wheel\", \"roller_coaster\", \"barber\", \"circus_tent\", \"steam_locomotive\", \"railway_car\", \"bullettrain_side\", \"bullettrain_front\", \"train2\", \"metro\", \"light_rail\", \"station\", \"tram\", \"monorail\", \"mountain_railway\", \"train\", \"bus\", \"oncoming_bus\", \"trolleybus\", \"minibus\", \"ambulance\", \"fire_engine\", \"police_car\", \"oncoming_police_car\", \"taxi\", \"oncoming_taxi\", \"car\", \"oncoming_automobile\", \"blue_car\", \"truck\", \"articulated_lorry\", \"tractor\", \"racing_car\", \"racing_motorcycle\", \"motor_scooter\", \"manual_wheelchair\", \"motorized_wheelchair\", \"auto_rickshaw\", \"bike\", \"scooter\", \"skateboard\", \"busstop\", \"motorway\", \"railway_track\", \"oil_drum\", \"fuelpump\", \"rotating_light\", \"traffic_light\", \"vertical_traffic_light\", \"octagonal_sign\", \"construction\", \"anchor\", \"boat\", \"canoe\", \"speedboat\", \"passenger_ship\", \"ferry\", \"motor_boat\", \"ship\", \"airplane\", \"small_airplane\", \"airplane_departure\", \"airplane_arriving\", \"parachute\", \"seat\", \"helicopter\", \"suspension_railway\", \"mountain_cableway\", \"aerial_tramway\", \"satellite\", \"rocket\", \"flying_saucer\", \"bellhop_bell\", \"luggage\", \"hourglass\", \"hourglass_flowing_sand\", \"watch\", \"alarm_clock\", \"stopwatch\", \"timer_clock\", \"mantelpiece_clock\", \"clock12\", \"clock1230\", \"clock1\", \"clock130\", \"clock2\", \"clock230\", \"clock3\", \"clock330\", \"clock4\", \"clock430\", \"clock5\", \"clock530\", \"clock6\", \"clock630\", \"clock7\", \"clock730\", \"clock8\", \"clock830\", \"clock9\", \"clock930\", \"clock10\", \"clock1030\", \"clock11\", \"clock1130\", \"new_moon\", \"waxing_crescent_moon\", \"first_quarter_moon\", \"moon\", \"full_moon\", \"waning_gibbous_moon\", \"last_quarter_moon\", \"waning_crescent_moon\", \"crescent_moon\", \"new_moon_with_face\", \"first_quarter_moon_with_face\", \"last_quarter_moon_with_face\", \"thermometer\", \"sunny\", \"full_moon_with_face\", \"sun_with_face\", \"ringed_planet\", \"star\", \"star2\", \"stars\", \"milky_way\", \"cloud\", \"partly_sunny\", \"thunder_cloud_and_rain\", \"mostly_sunny\", \"barely_sunny\", \"partly_sunny_rain\", \"rain_cloud\", \"snow_cloud\", \"lightning\", \"tornado\", \"fog\", \"wind_blowing_face\", \"cyclone\", \"rainbow\", \"closed_umbrella\", \"umbrella\", \"umbrella_with_rain_drops\", \"umbrella_on_ground\", \"zap\", \"snowflake\", \"snowman\", \"snowman_without_snow\", \"comet\", \"fire\", \"droplet\", \"ocean\"]\n}, {\n  id: \"objects\",\n  name: \"Objects\",\n  emojis: [\"eyeglasses\", \"dark_sunglasses\", \"goggles\", \"lab_coat\", \"safety_vest\", \"necktie\", \"shirt\", \"jeans\", \"scarf\", \"gloves\", \"coat\", \"socks\", \"dress\", \"kimono\", \"sari\", \"one-piece_swimsuit\", \"briefs\", \"shorts\", \"bikini\", \"womans_clothes\", \"purse\", \"handbag\", \"pouch\", \"shopping_bags\", \"school_satchel\", \"mans_shoe\", \"athletic_shoe\", \"hiking_boot\", \"womans_flat_shoe\", \"high_heel\", \"sandal\", \"ballet_shoes\", \"boot\", \"crown\", \"womans_hat\", \"tophat\", \"mortar_board\", \"billed_cap\", \"helmet_with_white_cross\", \"prayer_beads\", \"lipstick\", \"ring\", \"gem\", \"mute\", \"speaker\", \"sound\", \"loud_sound\", \"loudspeaker\", \"mega\", \"postal_horn\", \"bell\", \"no_bell\", \"musical_score\", \"musical_note\", \"notes\", \"studio_microphone\", \"level_slider\", \"control_knobs\", \"microphone\", \"headphones\", \"radio\", \"saxophone\", \"guitar\", \"musical_keyboard\", \"trumpet\", \"violin\", \"banjo\", \"drum_with_drumsticks\", \"iphone\", \"calling\", \"phone\", \"telephone_receiver\", \"pager\", \"fax\", \"battery\", \"electric_plug\", \"computer\", \"desktop_computer\", \"printer\", \"keyboard\", \"three_button_mouse\", \"trackball\", \"minidisc\", \"floppy_disk\", \"cd\", \"dvd\", \"abacus\", \"movie_camera\", \"film_frames\", \"film_projector\", \"clapper\", \"tv\", \"camera\", \"camera_with_flash\", \"video_camera\", \"vhs\", \"mag\", \"mag_right\", \"candle\", \"bulb\", \"flashlight\", \"izakaya_lantern\", \"diya_lamp\", \"notebook_with_decorative_cover\", \"closed_book\", \"book\", \"green_book\", \"blue_book\", \"orange_book\", \"books\", \"notebook\", \"ledger\", \"page_with_curl\", \"scroll\", \"page_facing_up\", \"newspaper\", \"rolled_up_newspaper\", \"bookmark_tabs\", \"bookmark\", \"label\", \"moneybag\", \"yen\", \"dollar\", \"euro\", \"pound\", \"money_with_wings\", \"credit_card\", \"receipt\", \"chart\", \"currency_exchange\", \"heavy_dollar_sign\", \"email\", \"e-mail\", \"incoming_envelope\", \"envelope_with_arrow\", \"outbox_tray\", \"inbox_tray\", \"package\", \"mailbox\", \"mailbox_closed\", \"mailbox_with_mail\", \"mailbox_with_no_mail\", \"postbox\", \"ballot_box_with_ballot\", \"pencil2\", \"black_nib\", \"lower_left_fountain_pen\", \"lower_left_ballpoint_pen\", \"lower_left_paintbrush\", \"lower_left_crayon\", \"memo\", \"briefcase\", \"file_folder\", \"open_file_folder\", \"card_index_dividers\", \"date\", \"calendar\", \"spiral_note_pad\", \"spiral_calendar_pad\", \"card_index\", \"chart_with_upwards_trend\", \"chart_with_downwards_trend\", \"bar_chart\", \"clipboard\", \"pushpin\", \"round_pushpin\", \"paperclip\", \"linked_paperclips\", \"straight_ruler\", \"triangular_ruler\", \"scissors\", \"card_file_box\", \"file_cabinet\", \"wastebasket\", \"lock\", \"unlock\", \"lock_with_ink_pen\", \"closed_lock_with_key\", \"key\", \"old_key\", \"hammer\", \"axe\", \"pick\", \"hammer_and_pick\", \"hammer_and_wrench\", \"dagger_knife\", \"crossed_swords\", \"gun\", \"bow_and_arrow\", \"shield\", \"wrench\", \"nut_and_bolt\", \"gear\", \"compression\", \"scales\", \"probing_cane\", \"link\", \"chains\", \"toolbox\", \"magnet\", \"alembic\", \"test_tube\", \"petri_dish\", \"dna\", \"microscope\", \"telescope\", \"satellite_antenna\", \"syringe\", \"drop_of_blood\", \"pill\", \"adhesive_bandage\", \"stethoscope\", \"door\", \"bed\", \"couch_and_lamp\", \"chair\", \"toilet\", \"shower\", \"bathtub\", \"razor\", \"lotion_bottle\", \"safety_pin\", \"broom\", \"basket\", \"roll_of_paper\", \"soap\", \"sponge\", \"fire_extinguisher\", \"shopping_trolley\", \"smoking\", \"coffin\", \"funeral_urn\", \"moyai\"]\n}, {\n  id: \"symbols\",\n  name: \"Symbols\",\n  emojis: [\"atm\", \"put_litter_in_its_place\", \"potable_water\", \"wheelchair\", \"mens\", \"womens\", \"restroom\", \"baby_symbol\", \"wc\", \"passport_control\", \"customs\", \"baggage_claim\", \"left_luggage\", \"warning\", \"children_crossing\", \"no_entry\", \"no_entry_sign\", \"no_bicycles\", \"no_smoking\", \"do_not_litter\", \"non-potable_water\", \"no_pedestrians\", \"no_mobile_phones\", \"underage\", \"radioactive_sign\", \"biohazard_sign\", \"arrow_up\", \"arrow_upper_right\", \"arrow_right\", \"arrow_lower_right\", \"arrow_down\", \"arrow_lower_left\", \"arrow_left\", \"arrow_upper_left\", \"arrow_up_down\", \"left_right_arrow\", \"leftwards_arrow_with_hook\", \"arrow_right_hook\", \"arrow_heading_up\", \"arrow_heading_down\", \"arrows_clockwise\", \"arrows_counterclockwise\", \"back\", \"end\", \"on\", \"soon\", \"top\", \"place_of_worship\", \"atom_symbol\", \"om_symbol\", \"star_of_david\", \"wheel_of_dharma\", \"yin_yang\", \"latin_cross\", \"orthodox_cross\", \"star_and_crescent\", \"peace_symbol\", \"menorah_with_nine_branches\", \"six_pointed_star\", \"aries\", \"taurus\", \"gemini\", \"cancer\", \"leo\", \"virgo\", \"libra\", \"scorpius\", \"sagittarius\", \"capricorn\", \"aquarius\", \"pisces\", \"ophiuchus\", \"twisted_rightwards_arrows\", \"repeat\", \"repeat_one\", \"arrow_forward\", \"fast_forward\", \"black_right_pointing_double_triangle_with_vertical_bar\", \"black_right_pointing_triangle_with_double_vertical_bar\", \"arrow_backward\", \"rewind\", \"black_left_pointing_double_triangle_with_vertical_bar\", \"arrow_up_small\", \"arrow_double_up\", \"arrow_down_small\", \"arrow_double_down\", \"double_vertical_bar\", \"black_square_for_stop\", \"black_circle_for_record\", \"eject\", \"cinema\", \"low_brightness\", \"high_brightness\", \"signal_strength\", \"vibration_mode\", \"mobile_phone_off\", \"female_sign\", \"male_sign\", \"medical_symbol\", \"infinity\", \"recycle\", \"fleur_de_lis\", \"trident\", \"name_badge\", \"beginner\", \"o\", \"white_check_mark\", \"ballot_box_with_check\", \"heavy_check_mark\", \"heavy_multiplication_x\", \"x\", \"negative_squared_cross_mark\", \"heavy_plus_sign\", \"heavy_minus_sign\", \"heavy_division_sign\", \"curly_loop\", \"loop\", \"part_alternation_mark\", \"eight_spoked_asterisk\", \"eight_pointed_black_star\", \"sparkle\", \"bangbang\", \"interrobang\", \"question\", \"grey_question\", \"grey_exclamation\", \"exclamation\", \"wavy_dash\", \"tm\", \"keycap_ten\", \"capital_abcd\", \"abcd\", \"1234\", \"symbols\", \"abc\", \"a\", \"ab\", \"b\", \"cl\", \"cool\", \"free\", \"information_source\", \"id\", \"m\", \"new\", \"ng\", \"o2\", \"ok\", \"parking\", \"sos\", \"up\", \"vs\", \"koko\", \"sa\", \"u6708\", \"u6709\", \"u6307\", \"ideograph_advantage\", \"u5272\", \"u7121\", \"u7981\", \"accept\", \"u7533\", \"u5408\", \"u7a7a\", \"congratulations\", \"secret\", \"u55b6\", \"u6e80\", \"red_circle\", \"large_orange_circle\", \"large_yellow_circle\", \"large_green_circle\", \"large_blue_circle\", \"large_purple_circle\", \"large_brown_circle\", \"black_circle\", \"white_circle\", \"large_red_square\", \"large_orange_square\", \"large_yellow_square\", \"large_green_square\", \"large_blue_square\", \"large_purple_square\", \"large_brown_square\", \"black_large_square\", \"white_large_square\", \"black_medium_square\", \"white_medium_square\", \"black_medium_small_square\", \"white_medium_small_square\", \"black_small_square\", \"white_small_square\", \"large_orange_diamond\", \"large_blue_diamond\", \"small_orange_diamond\", \"small_blue_diamond\", \"small_red_triangle\", \"small_red_triangle_down\", \"diamond_shape_with_a_dot_inside\", \"radio_button\", \"white_square_button\", \"black_square_button\"]\n}, {\n  id: \"flags\",\n  name: \"Flags\",\n  emojis: [\"checkered_flag\", \"cn\", \"crossed_flags\", \"de\", \"es\", \"flag-ac\", \"flag-ad\", \"flag-ae\", \"flag-af\", \"flag-ag\", \"flag-ai\", \"flag-al\", \"flag-am\", \"flag-ao\", \"flag-aq\", \"flag-ar\", \"flag-as\", \"flag-at\", \"flag-au\", \"flag-aw\", \"flag-ax\", \"flag-az\", \"flag-ba\", \"flag-bb\", \"flag-bd\", \"flag-be\", \"flag-bf\", \"flag-bg\", \"flag-bh\", \"flag-bi\", \"flag-bj\", \"flag-bl\", \"flag-bm\", \"flag-bn\", \"flag-bo\", \"flag-bq\", \"flag-br\", \"flag-bs\", \"flag-bt\", \"flag-bv\", \"flag-bw\", \"flag-by\", \"flag-bz\", \"flag-ca\", \"flag-cc\", \"flag-cd\", \"flag-cf\", \"flag-cg\", \"flag-ch\", \"flag-ci\", \"flag-ck\", \"flag-cl\", \"flag-cm\", \"flag-co\", \"flag-cp\", \"flag-cr\", \"flag-cu\", \"flag-cv\", \"flag-cw\", \"flag-cx\", \"flag-cy\", \"flag-cz\", \"flag-dg\", \"flag-dj\", \"flag-dk\", \"flag-dm\", \"flag-do\", \"flag-dz\", \"flag-ea\", \"flag-ec\", \"flag-ee\", \"flag-eg\", \"flag-eh\", \"flag-england\", \"flag-er\", \"flag-et\", \"flag-eu\", \"flag-fi\", \"flag-fj\", \"flag-fk\", \"flag-fm\", \"flag-fo\", \"flag-ga\", \"flag-gd\", \"flag-ge\", \"flag-gf\", \"flag-gg\", \"flag-gh\", \"flag-gi\", \"flag-gl\", \"flag-gm\", \"flag-gn\", \"flag-gp\", \"flag-gq\", \"flag-gr\", \"flag-gs\", \"flag-gt\", \"flag-gu\", \"flag-gw\", \"flag-gy\", \"flag-hk\", \"flag-hm\", \"flag-hn\", \"flag-hr\", \"flag-ht\", \"flag-hu\", \"flag-ic\", \"flag-id\", \"flag-ie\", \"flag-il\", \"flag-im\", \"flag-in\", \"flag-io\", \"flag-iq\", \"flag-ir\", \"flag-is\", \"flag-je\", \"flag-jm\", \"flag-jo\", \"flag-ke\", \"flag-kg\", \"flag-kh\", \"flag-ki\", \"flag-km\", \"flag-kn\", \"flag-kp\", \"flag-kw\", \"flag-ky\", \"flag-kz\", \"flag-la\", \"flag-lb\", \"flag-lc\", \"flag-li\", \"flag-lk\", \"flag-lr\", \"flag-ls\", \"flag-lt\", \"flag-lu\", \"flag-lv\", \"flag-ly\", \"flag-ma\", \"flag-mc\", \"flag-md\", \"flag-me\", \"flag-mf\", \"flag-mg\", \"flag-mh\", \"flag-mk\", \"flag-ml\", \"flag-mm\", \"flag-mn\", \"flag-mo\", \"flag-mp\", \"flag-mq\", \"flag-mr\", \"flag-ms\", \"flag-mt\", \"flag-mu\", \"flag-mv\", \"flag-mw\", \"flag-mx\", \"flag-my\", \"flag-mz\", \"flag-na\", \"flag-nc\", \"flag-ne\", \"flag-nf\", \"flag-ng\", \"flag-ni\", \"flag-nl\", \"flag-no\", \"flag-np\", \"flag-nr\", \"flag-nu\", \"flag-nz\", \"flag-om\", \"flag-pa\", \"flag-pe\", \"flag-pf\", \"flag-pg\", \"flag-ph\", \"flag-pk\", \"flag-pl\", \"flag-pm\", \"flag-pn\", \"flag-pr\", \"flag-ps\", \"flag-pt\", \"flag-pw\", \"flag-py\", \"flag-qa\", \"flag-re\", \"flag-ro\", \"flag-rs\", \"flag-rw\", \"flag-sa\", \"flag-sb\", \"flag-sc\", \"flag-scotland\", \"flag-sd\", \"flag-se\", \"flag-sg\", \"flag-sh\", \"flag-si\", \"flag-sj\", \"flag-sk\", \"flag-sl\", \"flag-sm\", \"flag-sn\", \"flag-so\", \"flag-sr\", \"flag-ss\", \"flag-st\", \"flag-sv\", \"flag-sx\", \"flag-sy\", \"flag-sz\", \"flag-ta\", \"flag-tc\", \"flag-td\", \"flag-tf\", \"flag-tg\", \"flag-th\", \"flag-tj\", \"flag-tk\", \"flag-tl\", \"flag-tm\", \"flag-tn\", \"flag-to\", \"flag-tr\", \"flag-tt\", \"flag-tv\", \"flag-tw\", \"flag-tz\", \"flag-ua\", \"flag-ug\", \"flag-um\", \"flag-uy\", \"flag-uz\", \"flag-va\", \"flag-vc\", \"flag-ve\", \"flag-vg\", \"flag-vi\", \"flag-vn\", \"flag-vu\", \"flag-wales\", \"flag-wf\", \"flag-ws\", \"flag-xk\", \"flag-ye\", \"flag-yt\", \"flag-za\", \"flag-zm\", \"flag-zw\", \"fr\", \"gb\", \"it\", \"jp\", \"kr\", \"pirate_flag\", \"rainbow-flag\", \"ru\", \"triangular_flag_on_post\", \"us\", \"waving_black_flag\", \"waving_white_flag\"]\n}];\nvar emojis = {\n  \"100\": {\n    a: \"Hundred Points Symbol\",\n    b: \"1F4AF\",\n    j: [\"score\", \"perfect\", \"numbers\", \"century\", \"exam\", \"quiz\", \"test\", \"pass\", \"hundred\"],\n    k: [26, 5],\n    o: 2\n  },\n  \"1234\": {\n    a: \"Input Symbol for Numbers\",\n    b: \"1F522\",\n    j: [\"numbers\", \"blue-square\"],\n    k: [28, 5],\n    o: 2\n  },\n  grinning: {\n    a: \"Grinning Face\",\n    b: \"1F600\",\n    j: [\"face\", \"smile\", \"happy\", \"joy\", \":D\", \"grin\"],\n    k: [30, 35],\n    m: \":D\",\n    o: 2\n  },\n  monkey_face: {\n    a: \"Monkey Face\",\n    b: \"1F435\",\n    j: [\"animal\", \"nature\", \"circus\"],\n    k: [12, 25],\n    l: [\":o)\"],\n    o: 2\n  },\n  grapes: {\n    a: \"Grapes\",\n    b: \"1F347\",\n    j: [\"fruit\", \"food\", \"wine\"],\n    k: [6, 31],\n    o: 2\n  },\n  eyeglasses: {\n    a: \"Eyeglasses\",\n    b: \"1F453\",\n    j: [\"fashion\", \"accessories\", \"eyesight\", \"nerdy\", \"dork\", \"geek\"],\n    k: [14, 7],\n    o: 2\n  },\n  checkered_flag: {\n    a: \"Chequered Flag\",\n    b: \"1F3C1\",\n    j: [\"contest\", \"finishline\", \"race\", \"gokart\"],\n    k: [8, 39],\n    o: 2\n  },\n  jack_o_lantern: {\n    a: \"Jack-O-Lantern\",\n    b: \"1F383\",\n    j: [\"halloween\", \"light\", \"pumpkin\", \"creepy\", \"fall\"],\n    k: [7, 34],\n    o: 2\n  },\n  wave: {\n    a: \"Waving Hand Sign\",\n    b: \"1F44B\",\n    j: [\"hands\", \"gesture\", \"goodbye\", \"solong\", \"farewell\", \"hello\", \"hi\", \"palm\"],\n    k: [13, 26],\n    o: 2\n  },\n  earth_africa: {\n    a: \"Earth Globe Europe-Africa\",\n    b: \"1F30D\",\n    j: [\"globe\", \"world\", \"international\"],\n    k: [5, 32],\n    o: 2\n  },\n  atm: {\n    a: \"Automated Teller Machine\",\n    b: \"1F3E7\",\n    j: [\"money\", \"sales\", \"cash\", \"blue-square\", \"payment\", \"bank\"],\n    k: [11, 1],\n    o: 2\n  },\n  melon: {\n    a: \"Melon\",\n    b: \"1F348\",\n    j: [\"fruit\", \"nature\", \"food\"],\n    k: [6, 32],\n    o: 2\n  },\n  triangular_flag_on_post: {\n    a: \"Triangular Flag on Post\",\n    b: \"1F6A9\",\n    j: [\"mark\", \"milestone\", \"place\"],\n    k: [35, 0],\n    o: 2\n  },\n  put_litter_in_its_place: {\n    a: \"Put Litter in Its Place Symbol\",\n    b: \"1F6AE\",\n    j: [\"blue-square\", \"sign\", \"human\", \"info\"],\n    k: [35, 5],\n    o: 2\n  },\n  christmas_tree: {\n    a: \"Christmas Tree\",\n    b: \"1F384\",\n    j: [\"festival\", \"vacation\", \"december\", \"xmas\", \"celebration\"],\n    k: [7, 35],\n    o: 2\n  },\n  monkey: {\n    a: \"Monkey\",\n    b: \"1F412\",\n    j: [\"animal\", \"nature\", \"banana\", \"circus\"],\n    k: [11, 46],\n    o: 2\n  },\n  earth_americas: {\n    a: \"Earth Globe Americas\",\n    b: \"1F30E\",\n    j: [\"globe\", \"world\", \"USA\", \"international\"],\n    k: [5, 33],\n    o: 2\n  },\n  dark_sunglasses: {\n    a: \"Dark Sunglasses\",\n    b: \"1F576-FE0F\",\n    c: \"1F576\",\n    j: [\"face\", \"cool\", \"accessories\"],\n    k: [29, 33],\n    o: 2\n  },\n  raised_back_of_hand: {\n    a: \"Raised Back of Hand\",\n    b: \"1F91A\",\n    j: [\"fingers\", \"raised\", \"backhand\"],\n    k: [37, 43],\n    o: 4\n  },\n  smiley: {\n    a: \"Smiling Face with Open Mouth\",\n    b: \"1F603\",\n    j: [\"face\", \"happy\", \"joy\", \"haha\", \":D\", \":)\", \"smile\", \"funny\"],\n    k: [30, 38],\n    l: [\"=)\", \"=-)\"],\n    m: \":)\",\n    o: 2\n  },\n  earth_asia: {\n    a: \"Earth Globe Asia-Australia\",\n    b: \"1F30F\",\n    j: [\"globe\", \"world\", \"east\", \"international\"],\n    k: [5, 34],\n    o: 2\n  },\n  crossed_flags: {\n    a: \"Crossed Flags\",\n    b: \"1F38C\",\n    j: [\"japanese\", \"nation\", \"country\", \"border\"],\n    k: [7, 48],\n    o: 2\n  },\n  watermelon: {\n    a: \"Watermelon\",\n    b: \"1F349\",\n    j: [\"fruit\", \"food\", \"picnic\", \"summer\"],\n    k: [6, 33],\n    o: 2\n  },\n  goggles: {\n    a: \"Goggles\",\n    b: \"1F97D\",\n    k: [42, 15],\n    o: 11\n  },\n  raised_hand_with_fingers_splayed: {\n    a: \"Raised Hand with Fingers Splayed\",\n    b: \"1F590-FE0F\",\n    c: \"1F590\",\n    j: [\"hand\", \"fingers\", \"palm\"],\n    k: [29, 48],\n    o: 2\n  },\n  smile: {\n    a: \"Smiling Face with Open Mouth and Smiling Eyes\",\n    b: \"1F604\",\n    j: [\"face\", \"happy\", \"joy\", \"funny\", \"haha\", \"laugh\", \"like\", \":D\", \":)\"],\n    k: [30, 39],\n    l: [\"C:\", \"c:\", \":D\", \":-D\"],\n    m: \":)\",\n    o: 2\n  },\n  potable_water: {\n    a: \"Potable Water Symbol\",\n    b: \"1F6B0\",\n    j: [\"blue-square\", \"liquid\", \"restroom\", \"cleaning\", \"faucet\"],\n    k: [35, 7],\n    o: 2\n  },\n  fireworks: {\n    a: \"Fireworks\",\n    b: \"1F386\",\n    j: [\"photo\", \"festival\", \"carnival\", \"congratulations\"],\n    k: [7, 42],\n    o: 2\n  },\n  gorilla: {\n    a: \"Gorilla\",\n    b: \"1F98D\",\n    j: [\"animal\", \"nature\", \"circus\"],\n    k: [42, 31],\n    o: 4\n  },\n  lab_coat: {\n    a: \"Lab Coat\",\n    b: \"1F97C\",\n    k: [42, 14],\n    o: 11\n  },\n  tangerine: {\n    a: \"Tangerine\",\n    b: \"1F34A\",\n    j: [\"food\", \"fruit\", \"nature\", \"orange\"],\n    k: [6, 34],\n    o: 2\n  },\n  wheelchair: {\n    a: \"Wheelchair Symbol\",\n    b: \"267F\",\n    j: [\"blue-square\", \"disabled\", \"a11y\", \"accessibility\"],\n    k: [53, 40],\n    o: 2\n  },\n  waving_black_flag: {\n    a: \"Waving Black Flag\",\n    b: \"1F3F4\",\n    k: [11, 17],\n    o: 2\n  },\n  orangutan: {\n    a: \"Orangutan\",\n    b: \"1F9A7\",\n    k: [42, 55],\n    o: 12\n  },\n  sparkler: {\n    a: \"Firework Sparkler\",\n    b: \"1F387\",\n    j: [\"stars\", \"night\", \"shine\"],\n    k: [7, 43],\n    o: 2\n  },\n  globe_with_meridians: {\n    a: \"Globe with Meridians\",\n    b: \"1F310\",\n    j: [\"earth\", \"international\", \"world\", \"internet\", \"interweb\", \"i18n\"],\n    k: [5, 35],\n    o: 2\n  },\n  grin: {\n    a: \"Grinning Face with Smiling Eyes\",\n    b: \"1F601\",\n    j: [\"face\", \"happy\", \"smile\", \"joy\", \"kawaii\"],\n    k: [30, 36],\n    o: 2\n  },\n  hand: {\n    a: \"Raised Hand\",\n    b: \"270B\",\n    k: [54, 49],\n    n: [\"raised_hand\"],\n    o: 2\n  },\n  firecracker: {\n    a: \"Firecracker\",\n    b: \"1F9E8\",\n    k: [51, 27],\n    o: 11\n  },\n  lemon: {\n    a: \"Lemon\",\n    b: \"1F34B\",\n    j: [\"fruit\", \"nature\"],\n    k: [6, 35],\n    o: 2\n  },\n  dog: {\n    a: \"Dog Face\",\n    b: \"1F436\",\n    j: [\"animal\", \"friend\", \"nature\", \"woof\", \"puppy\", \"pet\", \"faithful\"],\n    k: [12, 26],\n    o: 2\n  },\n  mens: {\n    a: \"Mens Symbol\",\n    b: \"1F6B9\",\n    j: [\"toilet\", \"restroom\", \"wc\", \"blue-square\", \"gender\", \"male\"],\n    k: [36, 10],\n    o: 2\n  },\n  \"spock-hand\": {\n    a: \"Raised Hand with Part Between Middle and Ring Fingers\",\n    b: \"1F596\",\n    k: [30, 3],\n    o: 2\n  },\n  world_map: {\n    a: \"World Map\",\n    b: \"1F5FA-FE0F\",\n    c: \"1F5FA\",\n    j: [\"location\", \"direction\"],\n    k: [30, 29],\n    o: 2\n  },\n  laughing: {\n    a: \"Smiling Face with Open Mouth and Tightly-Closed Eyes\",\n    b: \"1F606\",\n    j: [\"happy\", \"joy\", \"lol\", \"satisfied\", \"haha\", \"face\", \"glad\", \"XD\", \"laugh\"],\n    k: [30, 41],\n    l: [\":>\", \":->\"],\n    n: [\"satisfied\"],\n    o: 2\n  },\n  waving_white_flag: {\n    a: \"Waving White Flag\",\n    b: \"1F3F3-FE0F\",\n    c: \"1F3F3\",\n    k: [11, 12],\n    o: 2\n  },\n  safety_vest: {\n    a: \"Safety Vest\",\n    b: \"1F9BA\",\n    k: [43, 54],\n    o: 12\n  },\n  sweat_smile: {\n    a: \"Smiling Face with Open Mouth and Cold Sweat\",\n    b: \"1F605\",\n    j: [\"face\", \"hot\", \"happy\", \"laugh\", \"sweat\", \"smile\", \"relief\"],\n    k: [30, 40],\n    o: 2\n  },\n  sparkles: {\n    a: \"Sparkles\",\n    b: \"2728\",\n    j: [\"stars\", \"shine\", \"shiny\", \"cool\", \"awesome\", \"good\", \"magic\"],\n    k: [55, 16],\n    o: 2\n  },\n  banana: {\n    a: \"Banana\",\n    b: \"1F34C\",\n    j: [\"fruit\", \"food\", \"monkey\"],\n    k: [6, 36],\n    o: 2\n  },\n  \"rainbow-flag\": {\n    a: \"Rainbow Flag\",\n    b: \"1F3F3-FE0F-200D-1F308\",\n    c: \"1F3F3-200D-1F308\",\n    k: [11, 11],\n    o: 4\n  },\n  ok_hand: {\n    a: \"Ok Hand Sign\",\n    b: \"1F44C\",\n    j: [\"fingers\", \"limbs\", \"perfect\", \"ok\", \"okay\"],\n    k: [13, 32],\n    o: 2\n  },\n  japan: {\n    a: \"Silhouette of Japan\",\n    b: \"1F5FE\",\n    j: [\"nation\", \"country\", \"japanese\", \"asia\"],\n    k: [30, 33],\n    o: 2\n  },\n  dog2: {\n    a: \"Dog\",\n    b: \"1F415\",\n    j: [\"animal\", \"nature\", \"friend\", \"doge\", \"pet\", \"faithful\"],\n    k: [11, 50],\n    o: 2\n  },\n  womens: {\n    a: \"Womens Symbol\",\n    b: \"1F6BA\",\n    j: [\"purple-square\", \"woman\", \"female\", \"toilet\", \"loo\", \"restroom\", \"gender\"],\n    k: [36, 11],\n    o: 2\n  },\n  necktie: {\n    a: \"Necktie\",\n    b: \"1F454\",\n    j: [\"shirt\", \"suitup\", \"formal\", \"fashion\", \"cloth\", \"business\"],\n    k: [14, 8],\n    o: 2\n  },\n  pirate_flag: {\n    a: \"Pirate Flag\",\n    b: \"1F3F4-200D-2620-FE0F\",\n    c: \"1F3F4-200D-2620\",\n    k: [11, 13],\n    o: 11\n  },\n  guide_dog: {\n    a: \"Guide Dog\",\n    b: \"1F9AE\",\n    k: [43, 2],\n    o: 12\n  },\n  restroom: {\n    a: \"Restroom\",\n    b: \"1F6BB\",\n    j: [\"blue-square\", \"toilet\", \"refresh\", \"wc\", \"gender\"],\n    k: [36, 12],\n    o: 2\n  },\n  compass: {\n    a: \"Compass\",\n    b: \"1F9ED\",\n    k: [51, 32],\n    o: 11\n  },\n  rolling_on_the_floor_laughing: {\n    a: \"Rolling on the Floor Laughing\",\n    b: \"1F923\",\n    k: [38, 20],\n    o: 4\n  },\n  balloon: {\n    a: \"Balloon\",\n    b: \"1F388\",\n    j: [\"party\", \"celebration\", \"birthday\", \"circus\"],\n    k: [7, 44],\n    o: 2\n  },\n  pinching_hand: {\n    a: \"Pinching Hand\",\n    b: \"1F90F\",\n    k: [37, 17],\n    o: 12\n  },\n  pineapple: {\n    a: \"Pineapple\",\n    b: \"1F34D\",\n    j: [\"fruit\", \"nature\", \"food\"],\n    k: [6, 37],\n    o: 2\n  },\n  shirt: {\n    a: \"T-Shirt\",\n    b: \"1F455\",\n    k: [14, 9],\n    n: [\"tshirt\"],\n    o: 2\n  },\n  service_dog: {\n    a: \"Service Dog\",\n    b: \"1F415-200D-1F9BA\",\n    k: [11, 49],\n    o: 12\n  },\n  baby_symbol: {\n    a: \"Baby Symbol\",\n    b: \"1F6BC\",\n    j: [\"orange-square\", \"child\"],\n    k: [36, 13],\n    o: 2\n  },\n  joy: {\n    a: \"Face with Tears of Joy\",\n    b: \"1F602\",\n    j: [\"face\", \"cry\", \"tears\", \"weep\", \"happy\", \"happytears\", \"haha\"],\n    k: [30, 37],\n    o: 2\n  },\n  tada: {\n    a: \"Party Popper\",\n    b: \"1F389\",\n    j: [\"party\", \"congratulations\", \"birthday\", \"magic\", \"circus\", \"celebration\"],\n    k: [7, 45],\n    o: 2\n  },\n  mango: {\n    a: \"Mango\",\n    b: \"1F96D\",\n    k: [42, 3],\n    o: 11\n  },\n  v: {\n    a: \"Victory Hand\",\n    b: \"270C-FE0F\",\n    c: \"270C\",\n    j: [\"fingers\", \"ohyeah\", \"hand\", \"peace\", \"victory\", \"two\"],\n    k: [54, 55],\n    o: 2\n  },\n  snow_capped_mountain: {\n    a: \"Snow Capped Mountain\",\n    b: \"1F3D4-FE0F\",\n    c: \"1F3D4\",\n    k: [10, 39],\n    o: 2\n  },\n  \"flag-ac\": {\n    a: \"Ascension Island Flag\",\n    b: \"1F1E6-1F1E8\",\n    k: [0, 31],\n    o: 2\n  },\n  jeans: {\n    a: \"Jeans\",\n    b: \"1F456\",\n    j: [\"fashion\", \"shopping\"],\n    k: [14, 10],\n    o: 2\n  },\n  poodle: {\n    a: \"Poodle\",\n    b: \"1F429\",\n    j: [\"dog\", \"animal\", \"101\", \"nature\", \"pet\"],\n    k: [12, 13],\n    o: 2\n  },\n  crossed_fingers: {\n    a: \"Hand with Index and Middle Fingers Crossed\",\n    b: \"1F91E\",\n    j: [\"good\", \"lucky\"],\n    k: [38, 5],\n    n: [\"hand_with_index_and_middle_fingers_crossed\"],\n    o: 4\n  },\n  \"flag-ad\": {\n    a: \"Andorra Flag\",\n    b: \"1F1E6-1F1E9\",\n    k: [0, 32],\n    o: 2\n  },\n  slightly_smiling_face: {\n    a: \"Slightly Smiling Face\",\n    b: \"1F642\",\n    j: [\"face\", \"smile\"],\n    k: [31, 44],\n    l: [\":)\", \"(:\", \":-)\"],\n    o: 2\n  },\n  apple: {\n    a: \"Red Apple\",\n    b: \"1F34E\",\n    j: [\"fruit\", \"mac\", \"school\"],\n    k: [6, 38],\n    o: 2\n  },\n  wc: {\n    a: \"Water Closet\",\n    b: \"1F6BE\",\n    j: [\"toilet\", \"restroom\", \"blue-square\"],\n    k: [36, 15],\n    o: 2\n  },\n  scarf: {\n    a: \"Scarf\",\n    b: \"1F9E3\",\n    k: [51, 22],\n    o: 5\n  },\n  mountain: {\n    a: \"Mountain\",\n    b: \"26F0-FE0F\",\n    c: \"26F0\",\n    j: [\"photo\", \"nature\", \"environment\"],\n    k: [54, 11],\n    o: 2\n  },\n  confetti_ball: {\n    a: \"Confetti Ball\",\n    b: \"1F38A\",\n    j: [\"festival\", \"party\", \"birthday\", \"circus\"],\n    k: [7, 46],\n    o: 2\n  },\n  i_love_you_hand_sign: {\n    a: \"I Love You Hand Sign\",\n    b: \"1F91F\",\n    k: [38, 11],\n    o: 5\n  },\n  wolf: {\n    a: \"Wolf Face\",\n    b: \"1F43A\",\n    j: [\"animal\", \"nature\", \"wild\"],\n    k: [12, 30],\n    o: 2\n  },\n  gloves: {\n    a: \"Gloves\",\n    b: \"1F9E4\",\n    k: [51, 23],\n    o: 5\n  },\n  \"flag-ae\": {\n    a: \"United Arab Emirates Flag\",\n    b: \"1F1E6-1F1EA\",\n    k: [0, 33],\n    o: 2\n  },\n  upside_down_face: {\n    a: \"Upside-Down Face\",\n    b: \"1F643\",\n    j: [\"face\", \"flipped\", \"silly\", \"smile\"],\n    k: [31, 45],\n    o: 2\n  },\n  green_apple: {\n    a: \"Green Apple\",\n    b: \"1F34F\",\n    j: [\"fruit\", \"nature\"],\n    k: [6, 39],\n    o: 2\n  },\n  passport_control: {\n    a: \"Passport Control\",\n    b: \"1F6C2\",\n    j: [\"custom\", \"blue-square\"],\n    k: [36, 24],\n    o: 2\n  },\n  volcano: {\n    a: \"Volcano\",\n    b: \"1F30B\",\n    j: [\"photo\", \"nature\", \"disaster\"],\n    k: [5, 30],\n    o: 2\n  },\n  tanabata_tree: {\n    a: \"Tanabata Tree\",\n    b: \"1F38B\",\n    j: [\"plant\", \"nature\", \"branch\", \"summer\"],\n    k: [7, 47],\n    o: 2\n  },\n  customs: {\n    a: \"Customs\",\n    b: \"1F6C3\",\n    j: [\"passport\", \"border\", \"blue-square\"],\n    k: [36, 25],\n    o: 2\n  },\n  coat: {\n    a: \"Coat\",\n    b: \"1F9E5\",\n    k: [51, 24],\n    o: 5\n  },\n  wink: {\n    a: \"Winking Face\",\n    b: \"1F609\",\n    j: [\"face\", \"happy\", \"mischievous\", \"secret\", \";)\", \"smile\", \"eye\"],\n    k: [30, 44],\n    l: [\";)\", \";-)\"],\n    m: \";)\",\n    o: 2\n  },\n  bamboo: {\n    a: \"Pine Decoration\",\n    b: \"1F38D\",\n    j: [\"plant\", \"nature\", \"vegetable\", \"panda\", \"pine_decoration\"],\n    k: [7, 49],\n    o: 2\n  },\n  \"flag-af\": {\n    a: \"Afghanistan Flag\",\n    b: \"1F1E6-1F1EB\",\n    k: [0, 34],\n    o: 2\n  },\n  fox_face: {\n    a: \"Fox Face\",\n    b: \"1F98A\",\n    j: [\"animal\", \"nature\", \"face\"],\n    k: [42, 28],\n    o: 4\n  },\n  pear: {\n    a: \"Pear\",\n    b: \"1F350\",\n    j: [\"fruit\", \"nature\", \"food\"],\n    k: [6, 40],\n    o: 2\n  },\n  mount_fuji: {\n    a: \"Mount Fuji\",\n    b: \"1F5FB\",\n    j: [\"photo\", \"mountain\", \"nature\", \"japanese\"],\n    k: [30, 30],\n    o: 2\n  },\n  the_horns: {\n    a: \"Sign of the Horns\",\n    b: \"1F918\",\n    k: [37, 31],\n    n: [\"sign_of_the_horns\"],\n    o: 2\n  },\n  call_me_hand: {\n    a: \"Call Me Hand\",\n    b: \"1F919\",\n    j: [\"hands\", \"gesture\"],\n    k: [37, 37],\n    o: 4\n  },\n  \"flag-ag\": {\n    a: \"Antigua & Barbuda Flag\",\n    b: \"1F1E6-1F1EC\",\n    k: [0, 35],\n    o: 2\n  },\n  raccoon: {\n    a: \"Raccoon\",\n    b: \"1F99D\",\n    k: [42, 47],\n    o: 11\n  },\n  dolls: {\n    a: \"Japanese Dolls\",\n    b: \"1F38E\",\n    j: [\"japanese\", \"toy\", \"kimono\"],\n    k: [7, 50],\n    o: 2\n  },\n  blush: {\n    a: \"Smiling Face with Smiling Eyes\",\n    b: \"1F60A\",\n    j: [\"face\", \"smile\", \"happy\", \"flushed\", \"crush\", \"embarrassed\", \"shy\", \"joy\"],\n    k: [30, 45],\n    m: \":)\",\n    o: 2\n  },\n  peach: {\n    a: \"Peach\",\n    b: \"1F351\",\n    j: [\"fruit\", \"nature\", \"food\"],\n    k: [6, 41],\n    o: 2\n  },\n  baggage_claim: {\n    a: \"Baggage Claim\",\n    b: \"1F6C4\",\n    j: [\"blue-square\", \"airport\", \"transport\"],\n    k: [36, 26],\n    o: 2\n  },\n  socks: {\n    a: \"Socks\",\n    b: \"1F9E6\",\n    k: [51, 25],\n    o: 5\n  },\n  camping: {\n    a: \"Camping\",\n    b: \"1F3D5-FE0F\",\n    c: \"1F3D5\",\n    j: [\"photo\", \"outdoors\", \"tent\"],\n    k: [10, 40],\n    o: 2\n  },\n  dress: {\n    a: \"Dress\",\n    b: \"1F457\",\n    j: [\"clothes\", \"fashion\", \"shopping\"],\n    k: [14, 11],\n    o: 2\n  },\n  beach_with_umbrella: {\n    a: \"Beach with Umbrella\",\n    b: \"1F3D6-FE0F\",\n    c: \"1F3D6\",\n    k: [10, 41],\n    o: 2\n  },\n  cherries: {\n    a: \"Cherries\",\n    b: \"1F352\",\n    j: [\"food\", \"fruit\"],\n    k: [6, 42],\n    o: 2\n  },\n  cat: {\n    a: \"Cat Face\",\n    b: \"1F431\",\n    j: [\"animal\", \"meow\", \"nature\", \"pet\", \"kitten\"],\n    k: [12, 21],\n    o: 2\n  },\n  point_left: {\n    a: \"White Left Pointing Backhand Index\",\n    b: \"1F448\",\n    j: [\"direction\", \"fingers\", \"hand\", \"left\"],\n    k: [13, 8],\n    o: 2\n  },\n  left_luggage: {\n    a: \"Left Luggage\",\n    b: \"1F6C5\",\n    j: [\"blue-square\", \"travel\"],\n    k: [36, 27],\n    o: 2\n  },\n  \"flag-ai\": {\n    a: \"Anguilla Flag\",\n    b: \"1F1E6-1F1EE\",\n    k: [0, 36],\n    o: 2\n  },\n  innocent: {\n    a: \"Smiling Face with Halo\",\n    b: \"1F607\",\n    j: [\"face\", \"angel\", \"heaven\", \"halo\"],\n    k: [30, 42],\n    o: 2\n  },\n  flags: {\n    a: \"Carp Streamer\",\n    b: \"1F38F\",\n    j: [\"fish\", \"japanese\", \"koinobori\", \"carp\", \"banner\"],\n    k: [7, 51],\n    o: 2\n  },\n  warning: {\n    a: \"Warning Sign\",\n    b: \"26A0-FE0F\",\n    c: \"26A0\",\n    j: [\"exclamation\", \"wip\", \"alert\", \"error\", \"problem\", \"issue\"],\n    k: [53, 50],\n    o: 2\n  },\n  strawberry: {\n    a: \"Strawberry\",\n    b: \"1F353\",\n    j: [\"fruit\", \"food\", \"nature\"],\n    k: [6, 43],\n    o: 2\n  },\n  point_right: {\n    a: \"White Right Pointing Backhand Index\",\n    b: \"1F449\",\n    j: [\"fingers\", \"hand\", \"direction\", \"right\"],\n    k: [13, 14],\n    o: 2\n  },\n  desert: {\n    a: \"Desert\",\n    b: \"1F3DC-FE0F\",\n    c: \"1F3DC\",\n    j: [\"photo\", \"warm\", \"saharah\"],\n    k: [10, 47],\n    o: 2\n  },\n  kimono: {\n    a: \"Kimono\",\n    b: \"1F458\",\n    j: [\"dress\", \"fashion\", \"women\", \"female\", \"japanese\"],\n    k: [14, 12],\n    o: 2\n  },\n  \"flag-al\": {\n    a: \"Albania Flag\",\n    b: \"1F1E6-1F1F1\",\n    k: [0, 37],\n    o: 2\n  },\n  wind_chime: {\n    a: \"Wind Chime\",\n    b: \"1F390\",\n    j: [\"nature\", \"ding\", \"spring\", \"bell\"],\n    k: [7, 52],\n    o: 2\n  },\n  smiling_face_with_3_hearts: {\n    a: \"Smiling Face with Smiling Eyes and Three Hearts\",\n    b: \"1F970\",\n    k: [42, 6],\n    o: 11\n  },\n  cat2: {\n    a: \"Cat\",\n    b: \"1F408\",\n    j: [\"animal\", \"meow\", \"pet\", \"cats\"],\n    k: [11, 36],\n    o: 2\n  },\n  rice_scene: {\n    a: \"Moon Viewing Ceremony\",\n    b: \"1F391\",\n    j: [\"photo\", \"japan\", \"asia\", \"tsukimi\"],\n    k: [7, 53],\n    o: 2\n  },\n  heart_eyes: {\n    a: \"Smiling Face with Heart-Shaped Eyes\",\n    b: \"1F60D\",\n    j: [\"face\", \"love\", \"like\", \"affection\", \"valentines\", \"infatuation\", \"crush\", \"heart\"],\n    k: [30, 48],\n    o: 2\n  },\n  sari: {\n    a: \"Sari\",\n    b: \"1F97B\",\n    k: [42, 13],\n    o: 12\n  },\n  \"flag-am\": {\n    a: \"Armenia Flag\",\n    b: \"1F1E6-1F1F2\",\n    k: [0, 38],\n    o: 2\n  },\n  lion_face: {\n    a: \"Lion Face\",\n    b: \"1F981\",\n    k: [42, 19],\n    o: 2\n  },\n  desert_island: {\n    a: \"Desert Island\",\n    b: \"1F3DD-FE0F\",\n    c: \"1F3DD\",\n    j: [\"photo\", \"tropical\", \"mojito\"],\n    k: [10, 48],\n    o: 2\n  },\n  point_up_2: {\n    a: \"White Up Pointing Backhand Index\",\n    b: \"1F446\",\n    j: [\"fingers\", \"hand\", \"direction\", \"up\"],\n    k: [12, 53],\n    o: 2\n  },\n  kiwifruit: {\n    a: \"Kiwifruit\",\n    b: \"1F95D\",\n    k: [41, 44],\n    o: 4\n  },\n  children_crossing: {\n    a: \"Children Crossing\",\n    b: \"1F6B8\",\n    j: [\"school\", \"warning\", \"danger\", \"sign\", \"driving\", \"yellow-diamond\"],\n    k: [36, 9],\n    o: 2\n  },\n  national_park: {\n    a: \"National Park\",\n    b: \"1F3DE-FE0F\",\n    c: \"1F3DE\",\n    j: [\"photo\", \"environment\", \"nature\"],\n    k: [10, 49],\n    o: 2\n  },\n  no_entry: {\n    a: \"No Entry\",\n    b: \"26D4\",\n    j: [\"limit\", \"security\", \"privacy\", \"bad\", \"denied\", \"stop\", \"circle\"],\n    k: [54, 8],\n    o: 2\n  },\n  \"one-piece_swimsuit\": {\n    a: \"One-Piece Swimsuit\",\n    b: \"1FA71\",\n    k: [51, 52],\n    o: 12\n  },\n  tiger: {\n    a: \"Tiger Face\",\n    b: \"1F42F\",\n    j: [\"animal\", \"cat\", \"danger\", \"wild\", \"nature\", \"roar\"],\n    k: [12, 19],\n    o: 2\n  },\n  red_envelope: {\n    a: \"Red Gift Envelope\",\n    b: \"1F9E7\",\n    k: [51, 26],\n    o: 11\n  },\n  \"star-struck\": {\n    a: \"Grinning Face with Star Eyes\",\n    b: \"1F929\",\n    k: [38, 43],\n    n: [\"grinning_face_with_star_eyes\"],\n    o: 5\n  },\n  middle_finger: {\n    a: \"Reversed Hand with Middle Finger Extended\",\n    b: \"1F595\",\n    k: [29, 54],\n    n: [\"reversed_hand_with_middle_finger_extended\"],\n    o: 2\n  },\n  \"flag-ao\": {\n    a: \"Angola Flag\",\n    b: \"1F1E6-1F1F4\",\n    k: [0, 39],\n    o: 2\n  },\n  tomato: {\n    a: \"Tomato\",\n    b: \"1F345\",\n    j: [\"fruit\", \"vegetable\", \"nature\", \"food\"],\n    k: [6, 29],\n    o: 2\n  },\n  coconut: {\n    a: \"Coconut\",\n    b: \"1F965\",\n    k: [41, 52],\n    o: 5\n  },\n  ribbon: {\n    a: \"Ribbon\",\n    b: \"1F380\",\n    j: [\"decoration\", \"pink\", \"girl\", \"bowtie\"],\n    k: [7, 31],\n    o: 2\n  },\n  no_entry_sign: {\n    a: \"No Entry Sign\",\n    b: \"1F6AB\",\n    j: [\"forbid\", \"stop\", \"limit\", \"denied\", \"disallow\", \"circle\"],\n    k: [35, 2],\n    o: 2\n  },\n  point_down: {\n    a: \"White Down Pointing Backhand Index\",\n    b: \"1F447\",\n    j: [\"fingers\", \"hand\", \"direction\", \"down\"],\n    k: [13, 2],\n    o: 2\n  },\n  \"flag-aq\": {\n    a: \"Antarctica Flag\",\n    b: \"1F1E6-1F1F6\",\n    k: [0, 40],\n    o: 2\n  },\n  briefs: {\n    a: \"Briefs\",\n    b: \"1FA72\",\n    k: [51, 53],\n    o: 12\n  },\n  kissing_heart: {\n    a: \"Face Throwing a Kiss\",\n    b: \"1F618\",\n    j: [\"face\", \"love\", \"like\", \"affection\", \"valentines\", \"infatuation\", \"kiss\"],\n    k: [31, 2],\n    l: [\":*\", \":-*\"],\n    o: 2\n  },\n  tiger2: {\n    a: \"Tiger\",\n    b: \"1F405\",\n    j: [\"animal\", \"nature\", \"roar\"],\n    k: [11, 33],\n    o: 2\n  },\n  stadium: {\n    a: \"Stadium\",\n    b: \"1F3DF-FE0F\",\n    c: \"1F3DF\",\n    j: [\"photo\", \"place\", \"sports\", \"concert\", \"venue\"],\n    k: [10, 50],\n    o: 2\n  },\n  leopard: {\n    a: \"Leopard\",\n    b: \"1F406\",\n    j: [\"animal\", \"nature\"],\n    k: [11, 34],\n    o: 2\n  },\n  no_bicycles: {\n    a: \"No Bicycles\",\n    b: \"1F6B3\",\n    j: [\"cyclist\", \"prohibited\", \"circle\"],\n    k: [35, 10],\n    o: 2\n  },\n  kissing: {\n    a: \"Kissing Face\",\n    b: \"1F617\",\n    j: [\"love\", \"like\", \"face\", \"3\", \"valentines\", \"infatuation\", \"kiss\"],\n    k: [31, 1],\n    o: 2\n  },\n  \"flag-ar\": {\n    a: \"Argentina Flag\",\n    b: \"1F1E6-1F1F7\",\n    k: [0, 41],\n    o: 2\n  },\n  avocado: {\n    a: \"Avocado\",\n    b: \"1F951\",\n    j: [\"fruit\", \"food\"],\n    k: [41, 32],\n    o: 4\n  },\n  point_up: {\n    a: \"White Up Pointing Index\",\n    b: \"261D-FE0F\",\n    c: \"261D\",\n    j: [\"hand\", \"fingers\", \"direction\", \"up\"],\n    k: [53, 2],\n    o: 2\n  },\n  gift: {\n    a: \"Wrapped Present\",\n    b: \"1F381\",\n    j: [\"present\", \"birthday\", \"christmas\", \"xmas\"],\n    k: [7, 32],\n    o: 2\n  },\n  classical_building: {\n    a: \"Classical Building\",\n    b: \"1F3DB-FE0F\",\n    c: \"1F3DB\",\n    j: [\"art\", \"culture\", \"history\"],\n    k: [10, 46],\n    o: 2\n  },\n  shorts: {\n    a: \"Shorts\",\n    b: \"1FA73\",\n    k: [51, 54],\n    o: 12\n  },\n  \"+1\": {\n    a: \"Thumbs Up Sign\",\n    b: \"1F44D\",\n    j: [\"thumbsup\", \"yes\", \"awesome\", \"good\", \"agree\", \"accept\", \"cool\", \"hand\", \"like\"],\n    k: [13, 38],\n    n: [\"thumbsup\"],\n    o: 2\n  },\n  horse: {\n    a: \"Horse Face\",\n    b: \"1F434\",\n    j: [\"animal\", \"brown\", \"nature\"],\n    k: [12, 24],\n    o: 2\n  },\n  bikini: {\n    a: \"Bikini\",\n    b: \"1F459\",\n    j: [\"swimming\", \"female\", \"woman\", \"girl\", \"fashion\", \"beach\", \"summer\"],\n    k: [14, 13],\n    o: 2\n  },\n  no_smoking: {\n    a: \"No Smoking Symbol\",\n    b: \"1F6AD\",\n    j: [\"cigarette\", \"blue-square\", \"smell\", \"smoke\"],\n    k: [35, 4],\n    o: 2\n  },\n  eggplant: {\n    a: \"Aubergine\",\n    b: \"1F346\",\n    j: [\"vegetable\", \"nature\", \"food\", \"aubergine\"],\n    k: [6, 30],\n    o: 2\n  },\n  \"flag-as\": {\n    a: \"American Samoa Flag\",\n    b: \"1F1E6-1F1F8\",\n    k: [0, 42],\n    o: 2\n  },\n  reminder_ribbon: {\n    a: \"Reminder Ribbon\",\n    b: \"1F397-FE0F\",\n    c: \"1F397\",\n    j: [\"sports\", \"cause\", \"support\", \"awareness\"],\n    k: [8, 0],\n    o: 2\n  },\n  building_construction: {\n    a: \"Building Construction\",\n    b: \"1F3D7-FE0F\",\n    c: \"1F3D7\",\n    j: [\"wip\", \"working\", \"progress\"],\n    k: [10, 42],\n    o: 2\n  },\n  relaxed: {\n    a: \"White Smiling Face\",\n    b: \"263A-FE0F\",\n    c: \"263A\",\n    j: [\"face\", \"blush\", \"massage\", \"happiness\"],\n    k: [53, 17],\n    o: 2\n  },\n  kissing_closed_eyes: {\n    a: \"Kissing Face with Closed Eyes\",\n    b: \"1F61A\",\n    j: [\"face\", \"love\", \"like\", \"affection\", \"valentines\", \"infatuation\", \"kiss\"],\n    k: [31, 4],\n    o: 2\n  },\n  \"-1\": {\n    a: \"Thumbs Down Sign\",\n    b: \"1F44E\",\n    j: [\"thumbsdown\", \"no\", \"dislike\", \"hand\"],\n    k: [13, 44],\n    n: [\"thumbsdown\"],\n    o: 2\n  },\n  admission_tickets: {\n    a: \"Admission Tickets\",\n    b: \"1F39F-FE0F\",\n    c: \"1F39F\",\n    k: [8, 5],\n    o: 2\n  },\n  \"flag-at\": {\n    a: \"Austria Flag\",\n    b: \"1F1E6-1F1F9\",\n    k: [0, 43],\n    o: 2\n  },\n  womans_clothes: {\n    a: \"Womans Clothes\",\n    b: \"1F45A\",\n    j: [\"fashion\", \"shopping_bags\", \"female\"],\n    k: [14, 14],\n    o: 2\n  },\n  do_not_litter: {\n    a: \"Do Not Litter Symbol\",\n    b: \"1F6AF\",\n    j: [\"trash\", \"bin\", \"garbage\", \"circle\"],\n    k: [35, 6],\n    o: 2\n  },\n  potato: {\n    a: \"Potato\",\n    b: \"1F954\",\n    j: [\"food\", \"tuber\", \"vegatable\", \"starch\"],\n    k: [41, 35],\n    o: 4\n  },\n  racehorse: {\n    a: \"Horse\",\n    b: \"1F40E\",\n    j: [\"animal\", \"gamble\", \"luck\"],\n    k: [11, 42],\n    o: 2\n  },\n  bricks: {\n    a: \"Brick\",\n    b: \"1F9F1\",\n    k: [51, 36],\n    o: 11\n  },\n  fist: {\n    a: \"Raised Fist\",\n    b: \"270A\",\n    j: [\"fingers\", \"hand\", \"grasp\"],\n    k: [54, 43],\n    o: 2\n  },\n  house_buildings: {\n    a: \"House Buildings\",\n    b: \"1F3D8-FE0F\",\n    c: \"1F3D8\",\n    k: [10, 43],\n    o: 2\n  },\n  carrot: {\n    a: \"Carrot\",\n    b: \"1F955\",\n    j: [\"vegetable\", \"food\", \"orange\"],\n    k: [41, 36],\n    o: 4\n  },\n  ticket: {\n    a: \"Ticket\",\n    b: \"1F3AB\",\n    j: [\"event\", \"concert\", \"pass\"],\n    k: [8, 17],\n    o: 2\n  },\n  \"flag-au\": {\n    a: \"Australia Flag\",\n    b: \"1F1E6-1F1FA\",\n    k: [0, 44],\n    o: 2\n  },\n  \"non-potable_water\": {\n    a: \"Non-Potable Water Symbol\",\n    b: \"1F6B1\",\n    j: [\"drink\", \"faucet\", \"tap\", \"circle\"],\n    k: [35, 8],\n    o: 2\n  },\n  purse: {\n    a: \"Purse\",\n    b: \"1F45B\",\n    j: [\"fashion\", \"accessories\", \"money\", \"sales\", \"shopping\"],\n    k: [14, 15],\n    o: 2\n  },\n  unicorn_face: {\n    a: \"Unicorn Face\",\n    b: \"1F984\",\n    k: [42, 22],\n    o: 2\n  },\n  kissing_smiling_eyes: {\n    a: \"Kissing Face with Smiling Eyes\",\n    b: \"1F619\",\n    j: [\"face\", \"affection\", \"valentines\", \"infatuation\", \"kiss\"],\n    k: [31, 3],\n    o: 2\n  },\n  facepunch: {\n    a: \"Fisted Hand Sign\",\n    b: \"1F44A\",\n    j: [\"angry\", \"violence\", \"fist\", \"hit\", \"attack\", \"hand\"],\n    k: [13, 20],\n    n: [\"punch\"],\n    o: 2\n  },\n  medal: {\n    a: \"Medal\",\n    b: \"1F396-FE0F\",\n    c: \"1F396\",\n    k: [7, 56],\n    o: 2\n  },\n  zebra_face: {\n    a: \"Zebra Face\",\n    b: \"1F993\",\n    k: [42, 37],\n    o: 5\n  },\n  handbag: {\n    a: \"Handbag\",\n    b: \"1F45C\",\n    j: [\"fashion\", \"accessory\", \"accessories\", \"shopping\"],\n    k: [14, 16],\n    o: 2\n  },\n  derelict_house_building: {\n    a: \"Derelict House Building\",\n    b: \"1F3DA-FE0F\",\n    c: \"1F3DA\",\n    k: [10, 45],\n    o: 2\n  },\n  yum: {\n    a: \"Face Savouring Delicious Food\",\n    b: \"1F60B\",\n    j: [\"happy\", \"joy\", \"tongue\", \"smile\", \"face\", \"silly\", \"yummy\", \"nom\", \"delicious\", \"savouring\"],\n    k: [30, 46],\n    o: 2\n  },\n  corn: {\n    a: \"Ear of Maize\",\n    b: \"1F33D\",\n    j: [\"food\", \"vegetable\", \"plant\"],\n    k: [6, 21],\n    o: 2\n  },\n  \"flag-aw\": {\n    a: \"Aruba Flag\",\n    b: \"1F1E6-1F1FC\",\n    k: [0, 45],\n    o: 2\n  },\n  no_pedestrians: {\n    a: \"No Pedestrians\",\n    b: \"1F6B7\",\n    j: [\"rules\", \"crossing\", \"walking\", \"circle\"],\n    k: [36, 8],\n    o: 2\n  },\n  house: {\n    a: \"House Building\",\n    b: \"1F3E0\",\n    j: [\"building\", \"home\"],\n    k: [10, 51],\n    o: 2\n  },\n  hot_pepper: {\n    a: \"Hot Pepper\",\n    b: \"1F336-FE0F\",\n    c: \"1F336\",\n    j: [\"food\", \"spicy\", \"chilli\", \"chili\"],\n    k: [6, 14],\n    o: 2\n  },\n  \"flag-ax\": {\n    a: \"Åland Islands Flag\",\n    b: \"1F1E6-1F1FD\",\n    k: [0, 46],\n    o: 2\n  },\n  trophy: {\n    a: \"Trophy\",\n    b: \"1F3C6\",\n    j: [\"win\", \"award\", \"contest\", \"place\", \"ftw\", \"ceremony\"],\n    k: [9, 26],\n    o: 2\n  },\n  deer: {\n    a: \"Deer\",\n    b: \"1F98C\",\n    j: [\"animal\", \"nature\", \"horns\", \"venison\"],\n    k: [42, 30],\n    o: 4\n  },\n  \"left-facing_fist\": {\n    a: \"Left-Facing Fist\",\n    b: \"1F91B\",\n    k: [37, 49],\n    o: 4\n  },\n  stuck_out_tongue: {\n    a: \"Face with Stuck-out Tongue\",\n    b: \"1F61B\",\n    j: [\"face\", \"prank\", \"childish\", \"playful\", \"mischievous\", \"smile\", \"tongue\"],\n    k: [31, 5],\n    l: [\":p\", \":-p\", \":P\", \":-P\", \":b\", \":-b\"],\n    m: \":p\",\n    o: 2\n  },\n  pouch: {\n    a: \"Pouch\",\n    b: \"1F45D\",\n    j: [\"bag\", \"accessories\", \"shopping\"],\n    k: [14, 17],\n    o: 2\n  },\n  no_mobile_phones: {\n    a: \"No Mobile Phones\",\n    b: \"1F4F5\",\n    j: [\"iphone\", \"mute\", \"circle\"],\n    k: [27, 18],\n    o: 2\n  },\n  stuck_out_tongue_winking_eye: {\n    a: \"Face with Stuck-out Tongue and Winking Eye\",\n    b: \"1F61C\",\n    j: [\"face\", \"prank\", \"childish\", \"playful\", \"mischievous\", \"smile\", \"wink\", \"tongue\"],\n    k: [31, 6],\n    l: [\";p\", \";-p\", \";b\", \";-b\", \";P\", \";-P\"],\n    m: \";p\",\n    o: 2\n  },\n  sports_medal: {\n    a: \"Sports Medal\",\n    b: \"1F3C5\",\n    k: [9, 25],\n    o: 2\n  },\n  cucumber: {\n    a: \"Cucumber\",\n    b: \"1F952\",\n    j: [\"fruit\", \"food\", \"pickle\"],\n    k: [41, 33],\n    o: 4\n  },\n  cow: {\n    a: \"Cow Face\",\n    b: \"1F42E\",\n    j: [\"beef\", \"ox\", \"animal\", \"nature\", \"moo\", \"milk\"],\n    k: [12, 18],\n    o: 2\n  },\n  underage: {\n    a: \"No One Under Eighteen Symbol\",\n    b: \"1F51E\",\n    j: [\"18\", \"drink\", \"pub\", \"night\", \"minor\", \"circle\"],\n    k: [28, 1],\n    o: 2\n  },\n  \"flag-az\": {\n    a: \"Azerbaijan Flag\",\n    b: \"1F1E6-1F1FF\",\n    k: [0, 47],\n    o: 2\n  },\n  shopping_bags: {\n    a: \"Shopping Bags\",\n    b: \"1F6CD-FE0F\",\n    c: \"1F6CD\",\n    k: [36, 35],\n    o: 2\n  },\n  \"right-facing_fist\": {\n    a: \"Right-Facing Fist\",\n    b: \"1F91C\",\n    k: [37, 55],\n    o: 4\n  },\n  house_with_garden: {\n    a: \"House with Garden\",\n    b: \"1F3E1\",\n    j: [\"home\", \"plant\", \"nature\"],\n    k: [10, 52],\n    o: 2\n  },\n  clap: {\n    a: \"Clapping Hands Sign\",\n    b: \"1F44F\",\n    j: [\"hands\", \"praise\", \"applause\", \"congrats\", \"yay\"],\n    k: [13, 50],\n    o: 2\n  },\n  leafy_green: {\n    a: \"Leafy Green\",\n    b: \"1F96C\",\n    k: [42, 2],\n    o: 11\n  },\n  office: {\n    a: \"Office Building\",\n    b: \"1F3E2\",\n    j: [\"building\", \"bureau\", \"work\"],\n    k: [10, 53],\n    o: 2\n  },\n  \"flag-ba\": {\n    a: \"Bosnia & Herzegovina Flag\",\n    b: \"1F1E7-1F1E6\",\n    k: [0, 48],\n    o: 2\n  },\n  zany_face: {\n    a: \"Grinning Face with One Large and One Small Eye\",\n    b: \"1F92A\",\n    k: [38, 44],\n    n: [\"grinning_face_with_one_large_and_one_small_eye\"],\n    o: 5\n  },\n  first_place_medal: {\n    a: \"First Place Medal\",\n    b: \"1F947\",\n    k: [41, 22],\n    o: 4\n  },\n  ox: {\n    a: \"Ox\",\n    b: \"1F402\",\n    j: [\"animal\", \"cow\", \"beef\"],\n    k: [11, 30],\n    o: 2\n  },\n  school_satchel: {\n    a: \"School Satchel\",\n    b: \"1F392\",\n    j: [\"student\", \"education\", \"bag\", \"backpack\"],\n    k: [7, 54],\n    o: 2\n  },\n  radioactive_sign: {\n    a: \"Radioactive Sign\",\n    b: \"2622-FE0F\",\n    c: \"2622\",\n    k: [53, 9],\n    o: 2\n  },\n  second_place_medal: {\n    a: \"Second Place Medal\",\n    b: \"1F948\",\n    k: [41, 23],\n    o: 4\n  },\n  stuck_out_tongue_closed_eyes: {\n    a: \"Face with Stuck-out Tongue and Tightly-Closed Eyes\",\n    b: \"1F61D\",\n    j: [\"face\", \"prank\", \"playful\", \"mischievous\", \"smile\", \"tongue\"],\n    k: [31, 7],\n    o: 2\n  },\n  broccoli: {\n    a: \"Broccoli\",\n    b: \"1F966\",\n    k: [41, 53],\n    o: 5\n  },\n  biohazard_sign: {\n    a: \"Biohazard Sign\",\n    b: \"2623-FE0F\",\n    c: \"2623\",\n    k: [53, 10],\n    o: 2\n  },\n  mans_shoe: {\n    a: \"Mans Shoe\",\n    b: \"1F45E\",\n    j: [\"fashion\", \"male\"],\n    k: [14, 18],\n    n: [\"shoe\"],\n    o: 2\n  },\n  raised_hands: {\n    a: \"Person Raising Both Hands in Celebration\",\n    b: \"1F64C\",\n    j: [\"gesture\", \"hooray\", \"yea\", \"celebration\", \"hands\"],\n    k: [33, 8],\n    o: 2\n  },\n  post_office: {\n    a: \"Japanese Post Office\",\n    b: \"1F3E3\",\n    j: [\"building\", \"envelope\", \"communication\"],\n    k: [10, 54],\n    o: 2\n  },\n  \"flag-bb\": {\n    a: \"Barbados Flag\",\n    b: \"1F1E7-1F1E7\",\n    k: [0, 49],\n    o: 2\n  },\n  water_buffalo: {\n    a: \"Water Buffalo\",\n    b: \"1F403\",\n    j: [\"animal\", \"nature\", \"ox\", \"cow\"],\n    k: [11, 31],\n    o: 2\n  },\n  third_place_medal: {\n    a: \"Third Place Medal\",\n    b: \"1F949\",\n    k: [41, 24],\n    o: 4\n  },\n  european_post_office: {\n    a: \"European Post Office\",\n    b: \"1F3E4\",\n    j: [\"building\", \"email\"],\n    k: [10, 55],\n    o: 2\n  },\n  athletic_shoe: {\n    a: \"Athletic Shoe\",\n    b: \"1F45F\",\n    j: [\"shoes\", \"sports\", \"sneakers\"],\n    k: [14, 19],\n    o: 2\n  },\n  arrow_up: {\n    a: \"Upwards Black Arrow\",\n    b: \"2B06-FE0F\",\n    c: \"2B06\",\n    j: [\"blue-square\", \"continue\", \"top\", \"direction\"],\n    k: [55, 38],\n    o: 2\n  },\n  cow2: {\n    a: \"Cow\",\n    b: \"1F404\",\n    j: [\"beef\", \"ox\", \"animal\", \"nature\", \"moo\", \"milk\"],\n    k: [11, 32],\n    o: 2\n  },\n  open_hands: {\n    a: \"Open Hands Sign\",\n    b: \"1F450\",\n    j: [\"fingers\", \"butterfly\", \"hands\", \"open\"],\n    k: [13, 56],\n    o: 2\n  },\n  garlic: {\n    a: \"Garlic\",\n    b: \"1F9C4\",\n    k: [44, 12],\n    o: 12\n  },\n  money_mouth_face: {\n    a: \"Money-Mouth Face\",\n    b: \"1F911\",\n    j: [\"face\", \"rich\", \"dollar\", \"money\"],\n    k: [37, 24],\n    o: 2\n  },\n  \"flag-bd\": {\n    a: \"Bangladesh Flag\",\n    b: \"1F1E7-1F1E9\",\n    k: [0, 50],\n    o: 2\n  },\n  soccer: {\n    a: \"Soccer Ball\",\n    b: \"26BD\",\n    j: [\"sports\", \"football\"],\n    k: [53, 56],\n    o: 2\n  },\n  hugging_face: {\n    a: \"Hugging Face\",\n    b: \"1F917\",\n    k: [37, 30],\n    o: 2\n  },\n  onion: {\n    a: \"Onion\",\n    b: \"1F9C5\",\n    k: [44, 13],\n    o: 12\n  },\n  arrow_upper_right: {\n    a: \"North East Arrow\",\n    b: \"2197-FE0F\",\n    c: \"2197\",\n    j: [\"blue-square\", \"point\", \"direction\", \"diagonal\", \"northeast\"],\n    k: [52, 17],\n    o: 2\n  },\n  palms_up_together: {\n    a: \"Palms Up Together\",\n    b: \"1F932\",\n    k: [39, 5],\n    o: 5\n  },\n  pig: {\n    a: \"Pig Face\",\n    b: \"1F437\",\n    j: [\"animal\", \"oink\", \"nature\"],\n    k: [12, 27],\n    o: 2\n  },\n  hospital: {\n    a: \"Hospital\",\n    b: \"1F3E5\",\n    j: [\"building\", \"health\", \"surgery\", \"doctor\"],\n    k: [10, 56],\n    o: 2\n  },\n  hiking_boot: {\n    a: \"Hiking Boot\",\n    b: \"1F97E\",\n    k: [42, 16],\n    o: 11\n  },\n  \"flag-be\": {\n    a: \"Belgium Flag\",\n    b: \"1F1E7-1F1EA\",\n    k: [0, 51],\n    o: 2\n  },\n  \"flag-bf\": {\n    a: \"Burkina Faso Flag\",\n    b: \"1F1E7-1F1EB\",\n    k: [0, 52],\n    o: 2\n  },\n  mushroom: {\n    a: \"Mushroom\",\n    b: \"1F344\",\n    j: [\"plant\", \"vegetable\"],\n    k: [6, 28],\n    o: 2\n  },\n  pig2: {\n    a: \"Pig\",\n    b: \"1F416\",\n    j: [\"animal\", \"nature\"],\n    k: [11, 51],\n    o: 2\n  },\n  baseball: {\n    a: \"Baseball\",\n    b: \"26BE\",\n    j: [\"sports\", \"balls\"],\n    k: [54, 0],\n    o: 2\n  },\n  face_with_hand_over_mouth: {\n    a: \"Smiling Face with Smiling Eyes and Hand Covering Mouth\",\n    b: \"1F92D\",\n    k: [38, 47],\n    n: [\"smiling_face_with_smiling_eyes_and_hand_covering_mouth\"],\n    o: 5\n  },\n  handshake: {\n    a: \"Handshake\",\n    b: \"1F91D\",\n    j: [\"agreement\", \"shake\"],\n    k: [38, 4],\n    o: 4\n  },\n  womans_flat_shoe: {\n    a: \"Flat Shoe\",\n    b: \"1F97F\",\n    k: [42, 17],\n    o: 11\n  },\n  bank: {\n    a: \"Bank\",\n    b: \"1F3E6\",\n    j: [\"building\", \"money\", \"sales\", \"cash\", \"business\", \"enterprise\"],\n    k: [11, 0],\n    o: 2\n  },\n  arrow_right: {\n    a: \"Black Rightwards Arrow\",\n    b: \"27A1-FE0F\",\n    c: \"27A1\",\n    j: [\"blue-square\", \"next\"],\n    k: [55, 32],\n    o: 2\n  },\n  peanuts: {\n    a: \"Peanuts\",\n    b: \"1F95C\",\n    j: [\"food\", \"nut\"],\n    k: [41, 43],\n    o: 4\n  },\n  shushing_face: {\n    a: \"Face with Finger Covering Closed Lips\",\n    b: \"1F92B\",\n    k: [38, 45],\n    n: [\"face_with_finger_covering_closed_lips\"],\n    o: 5\n  },\n  pray: {\n    a: \"Person with Folded Hands\",\n    b: \"1F64F\",\n    j: [\"please\", \"hope\", \"wish\", \"namaste\", \"highfive\"],\n    k: [33, 50],\n    o: 2\n  },\n  softball: {\n    a: \"Softball\",\n    b: \"1F94E\",\n    k: [41, 29],\n    o: 11\n  },\n  high_heel: {\n    a: \"High-Heeled Shoe\",\n    b: \"1F460\",\n    j: [\"fashion\", \"shoes\", \"female\", \"pumps\", \"stiletto\"],\n    k: [14, 20],\n    o: 2\n  },\n  \"flag-bg\": {\n    a: \"Bulgaria Flag\",\n    b: \"1F1E7-1F1EC\",\n    k: [0, 53],\n    o: 2\n  },\n  arrow_lower_right: {\n    a: \"South East Arrow\",\n    b: \"2198-FE0F\",\n    c: \"2198\",\n    j: [\"blue-square\", \"direction\", \"diagonal\", \"southeast\"],\n    k: [52, 18],\n    o: 2\n  },\n  hotel: {\n    a: \"Hotel\",\n    b: \"1F3E8\",\n    j: [\"building\", \"accomodation\", \"checkin\"],\n    k: [11, 2],\n    o: 2\n  },\n  boar: {\n    a: \"Boar\",\n    b: \"1F417\",\n    j: [\"animal\", \"nature\"],\n    k: [11, 52],\n    o: 2\n  },\n  sandal: {\n    a: \"Womans Sandal\",\n    b: \"1F461\",\n    j: [\"shoes\", \"fashion\", \"flip flops\"],\n    k: [14, 21],\n    o: 2\n  },\n  \"flag-bh\": {\n    a: \"Bahrain Flag\",\n    b: \"1F1E7-1F1ED\",\n    k: [0, 54],\n    o: 2\n  },\n  arrow_down: {\n    a: \"Downwards Black Arrow\",\n    b: \"2B07-FE0F\",\n    c: \"2B07\",\n    j: [\"blue-square\", \"direction\", \"bottom\"],\n    k: [55, 39],\n    o: 2\n  },\n  thinking_face: {\n    a: \"Thinking Face\",\n    b: \"1F914\",\n    k: [37, 27],\n    o: 2\n  },\n  writing_hand: {\n    a: \"Writing Hand\",\n    b: \"270D-FE0F\",\n    c: \"270D\",\n    j: [\"lower_left_ballpoint_pen\", \"stationery\", \"write\", \"compose\"],\n    k: [55, 4],\n    o: 2\n  },\n  chestnut: {\n    a: \"Chestnut\",\n    b: \"1F330\",\n    j: [\"food\", \"squirrel\"],\n    k: [6, 8],\n    o: 2\n  },\n  basketball: {\n    a: \"Basketball and Hoop\",\n    b: \"1F3C0\",\n    j: [\"sports\", \"balls\", \"NBA\"],\n    k: [8, 38],\n    o: 2\n  },\n  pig_nose: {\n    a: \"Pig Nose\",\n    b: \"1F43D\",\n    j: [\"animal\", \"oink\"],\n    k: [12, 33],\n    o: 2\n  },\n  love_hotel: {\n    a: \"Love Hotel\",\n    b: \"1F3E9\",\n    j: [\"like\", \"affection\", \"dating\"],\n    k: [11, 3],\n    o: 2\n  },\n  nail_care: {\n    a: \"Nail Polish\",\n    b: \"1F485\",\n    j: [\"beauty\", \"manicure\", \"finger\", \"fashion\", \"nail\"],\n    k: [24, 33],\n    o: 2\n  },\n  volleyball: {\n    a: \"Volleyball\",\n    b: \"1F3D0\",\n    j: [\"sports\", \"balls\"],\n    k: [10, 35],\n    o: 2\n  },\n  \"flag-bi\": {\n    a: \"Burundi Flag\",\n    b: \"1F1E7-1F1EE\",\n    k: [0, 55],\n    o: 2\n  },\n  arrow_lower_left: {\n    a: \"South West Arrow\",\n    b: \"2199-FE0F\",\n    c: \"2199\",\n    j: [\"blue-square\", \"direction\", \"diagonal\", \"southwest\"],\n    k: [52, 19],\n    o: 2\n  },\n  ram: {\n    a: \"Ram\",\n    b: \"1F40F\",\n    j: [\"animal\", \"sheep\", \"nature\"],\n    k: [11, 43],\n    o: 2\n  },\n  ballet_shoes: {\n    a: \"Ballet Shoes\",\n    b: \"1FA70\",\n    k: [51, 51],\n    o: 12\n  },\n  zipper_mouth_face: {\n    a: \"Zipper-Mouth Face\",\n    b: \"1F910\",\n    j: [\"face\", \"sealed\", \"zipper\", \"secret\"],\n    k: [37, 23],\n    o: 2\n  },\n  bread: {\n    a: \"Bread\",\n    b: \"1F35E\",\n    j: [\"food\", \"wheat\", \"breakfast\", \"toast\"],\n    k: [6, 54],\n    o: 2\n  },\n  convenience_store: {\n    a: \"Convenience Store\",\n    b: \"1F3EA\",\n    j: [\"building\", \"shopping\", \"groceries\"],\n    k: [11, 4],\n    o: 2\n  },\n  boot: {\n    a: \"Womans Boots\",\n    b: \"1F462\",\n    j: [\"shoes\", \"fashion\"],\n    k: [14, 22],\n    o: 2\n  },\n  sheep: {\n    a: \"Sheep\",\n    b: \"1F411\",\n    j: [\"animal\", \"nature\", \"wool\", \"shipit\"],\n    k: [11, 45],\n    o: 2\n  },\n  face_with_raised_eyebrow: {\n    a: \"Face with One Eyebrow Raised\",\n    b: \"1F928\",\n    k: [38, 42],\n    n: [\"face_with_one_eyebrow_raised\"],\n    o: 5\n  },\n  \"flag-bj\": {\n    a: \"Benin Flag\",\n    b: \"1F1E7-1F1EF\",\n    k: [0, 56],\n    o: 2\n  },\n  arrow_left: {\n    a: \"Leftwards Black Arrow\",\n    b: \"2B05-FE0F\",\n    c: \"2B05\",\n    j: [\"blue-square\", \"previous\", \"back\"],\n    k: [55, 37],\n    o: 2\n  },\n  selfie: {\n    a: \"Selfie\",\n    b: \"1F933\",\n    j: [\"camera\", \"phone\"],\n    k: [39, 11],\n    o: 4\n  },\n  croissant: {\n    a: \"Croissant\",\n    b: \"1F950\",\n    j: [\"food\", \"bread\", \"french\"],\n    k: [41, 31],\n    o: 4\n  },\n  school: {\n    a: \"School\",\n    b: \"1F3EB\",\n    j: [\"building\", \"student\", \"education\", \"learn\", \"teach\"],\n    k: [11, 5],\n    o: 2\n  },\n  football: {\n    a: \"American Football\",\n    b: \"1F3C8\",\n    j: [\"sports\", \"balls\", \"NFL\"],\n    k: [9, 33],\n    o: 2\n  },\n  goat: {\n    a: \"Goat\",\n    b: \"1F410\",\n    j: [\"animal\", \"nature\"],\n    k: [11, 44],\n    o: 2\n  },\n  department_store: {\n    a: \"Department Store\",\n    b: \"1F3EC\",\n    j: [\"building\", \"shopping\", \"mall\"],\n    k: [11, 6],\n    o: 2\n  },\n  \"flag-bl\": {\n    a: \"St. Barthélemy Flag\",\n    b: \"1F1E7-1F1F1\",\n    k: [1, 0],\n    o: 2\n  },\n  crown: {\n    a: \"Crown\",\n    b: \"1F451\",\n    j: [\"king\", \"kod\", \"leader\", \"royalty\", \"lord\"],\n    k: [14, 5],\n    o: 2\n  },\n  arrow_upper_left: {\n    a: \"North West Arrow\",\n    b: \"2196-FE0F\",\n    c: \"2196\",\n    j: [\"blue-square\", \"point\", \"direction\", \"diagonal\", \"northwest\"],\n    k: [52, 16],\n    o: 2\n  },\n  neutral_face: {\n    a: \"Neutral Face\",\n    b: \"1F610\",\n    j: [\"indifference\", \"meh\", \":|\", \"neutral\"],\n    k: [30, 51],\n    l: [\":|\", \":-|\"],\n    o: 2\n  },\n  rugby_football: {\n    a: \"Rugby Football\",\n    b: \"1F3C9\",\n    j: [\"sports\", \"team\"],\n    k: [9, 34],\n    o: 2\n  },\n  muscle: {\n    a: \"Flexed Biceps\",\n    b: \"1F4AA\",\n    j: [\"arm\", \"flex\", \"hand\", \"summer\", \"strong\", \"biceps\"],\n    k: [25, 52],\n    o: 2\n  },\n  baguette_bread: {\n    a: \"Baguette Bread\",\n    b: \"1F956\",\n    j: [\"food\", \"bread\", \"french\"],\n    k: [41, 37],\n    o: 4\n  },\n  expressionless: {\n    a: \"Expressionless Face\",\n    b: \"1F611\",\n    j: [\"face\", \"indifferent\", \"-_-\", \"meh\", \"deadpan\"],\n    k: [30, 52],\n    o: 2\n  },\n  womans_hat: {\n    a: \"Womans Hat\",\n    b: \"1F452\",\n    j: [\"fashion\", \"accessories\", \"female\", \"lady\", \"spring\"],\n    k: [14, 6],\n    o: 2\n  },\n  pretzel: {\n    a: \"Pretzel\",\n    b: \"1F968\",\n    k: [41, 55],\n    o: 5\n  },\n  mechanical_arm: {\n    a: \"Mechanical Arm\",\n    b: \"1F9BE\",\n    k: [44, 6],\n    o: 12\n  },\n  arrow_up_down: {\n    a: \"Up Down Arrow\",\n    b: \"2195-FE0F\",\n    c: \"2195\",\n    j: [\"blue-square\", \"direction\", \"way\", \"vertical\"],\n    k: [52, 15],\n    o: 2\n  },\n  dromedary_camel: {\n    a: \"Dromedary Camel\",\n    b: \"1F42A\",\n    j: [\"animal\", \"hot\", \"desert\", \"hump\"],\n    k: [12, 14],\n    o: 2\n  },\n  tennis: {\n    a: \"Tennis Racquet and Ball\",\n    b: \"1F3BE\",\n    j: [\"sports\", \"balls\", \"green\"],\n    k: [8, 36],\n    o: 2\n  },\n  \"flag-bm\": {\n    a: \"Bermuda Flag\",\n    b: \"1F1E7-1F1F2\",\n    k: [1, 1],\n    o: 2\n  },\n  factory: {\n    a: \"Factory\",\n    b: \"1F3ED\",\n    j: [\"building\", \"industry\", \"pollution\", \"smoke\"],\n    k: [11, 7],\n    o: 2\n  },\n  japanese_castle: {\n    a: \"Japanese Castle\",\n    b: \"1F3EF\",\n    j: [\"photo\", \"building\"],\n    k: [11, 9],\n    o: 2\n  },\n  no_mouth: {\n    a: \"Face Without Mouth\",\n    b: \"1F636\",\n    j: [\"face\", \"hellokitty\"],\n    k: [31, 32],\n    o: 2\n  },\n  mechanical_leg: {\n    a: \"Mechanical Leg\",\n    b: \"1F9BF\",\n    k: [44, 7],\n    o: 12\n  },\n  bagel: {\n    a: \"Bagel\",\n    b: \"1F96F\",\n    k: [42, 5],\n    o: 11\n  },\n  camel: {\n    a: \"Bactrian Camel\",\n    b: \"1F42B\",\n    j: [\"animal\", \"nature\", \"hot\", \"desert\", \"hump\"],\n    k: [12, 15],\n    o: 2\n  },\n  tophat: {\n    a: \"Top Hat\",\n    b: \"1F3A9\",\n    j: [\"magic\", \"gentleman\", \"classy\", \"circus\"],\n    k: [8, 15],\n    o: 2\n  },\n  left_right_arrow: {\n    a: \"Left Right Arrow\",\n    b: \"2194-FE0F\",\n    c: \"2194\",\n    j: [\"shape\", \"direction\", \"horizontal\", \"sideways\"],\n    k: [52, 14],\n    o: 2\n  },\n  \"flag-bn\": {\n    a: \"Brunei Flag\",\n    b: \"1F1E7-1F1F3\",\n    k: [1, 2],\n    o: 2\n  },\n  flying_disc: {\n    a: \"Flying Disc\",\n    b: \"1F94F\",\n    k: [41, 30],\n    o: 11\n  },\n  smirk: {\n    a: \"Smirking Face\",\n    b: \"1F60F\",\n    j: [\"face\", \"smile\", \"mean\", \"prank\", \"smug\", \"sarcasm\"],\n    k: [30, 50],\n    o: 2\n  },\n  mortar_board: {\n    a: \"Graduation Cap\",\n    b: \"1F393\",\n    j: [\"school\", \"college\", \"degree\", \"university\", \"graduation\", \"cap\", \"hat\", \"legal\", \"learn\", \"education\"],\n    k: [7, 55],\n    o: 2\n  },\n  european_castle: {\n    a: \"European Castle\",\n    b: \"1F3F0\",\n    j: [\"building\", \"royalty\", \"history\"],\n    k: [11, 10],\n    o: 2\n  },\n  leg: {\n    a: \"Leg\",\n    b: \"1F9B5\",\n    k: [43, 5],\n    o: 11\n  },\n  pancakes: {\n    a: \"Pancakes\",\n    b: \"1F95E\",\n    j: [\"food\", \"breakfast\", \"flapjacks\", \"hotcakes\"],\n    k: [41, 45],\n    o: 4\n  },\n  leftwards_arrow_with_hook: {\n    a: \"Leftwards Arrow with Hook\",\n    b: \"21A9-FE0F\",\n    c: \"21A9\",\n    j: [\"back\", \"return\", \"blue-square\", \"undo\", \"enter\"],\n    k: [52, 20],\n    o: 2\n  },\n  \"flag-bo\": {\n    a: \"Bolivia Flag\",\n    b: \"1F1E7-1F1F4\",\n    k: [1, 3],\n    o: 2\n  },\n  bowling: {\n    a: \"Bowling\",\n    b: \"1F3B3\",\n    j: [\"sports\", \"fun\", \"play\"],\n    k: [8, 25],\n    o: 2\n  },\n  llama: {\n    a: \"Llama\",\n    b: \"1F999\",\n    k: [42, 43],\n    o: 11\n  },\n  arrow_right_hook: {\n    a: \"Rightwards Arrow with Hook\",\n    b: \"21AA-FE0F\",\n    c: \"21AA\",\n    j: [\"blue-square\", \"return\", \"rotate\", \"direction\"],\n    k: [52, 21],\n    o: 2\n  },\n  wedding: {\n    a: \"Wedding\",\n    b: \"1F492\",\n    j: [\"love\", \"like\", \"affection\", \"couple\", \"marriage\", \"bride\", \"groom\"],\n    k: [25, 28],\n    o: 2\n  },\n  \"flag-bq\": {\n    a: \"Caribbean Netherlands Flag\",\n    b: \"1F1E7-1F1F6\",\n    k: [1, 4],\n    o: 2\n  },\n  foot: {\n    a: \"Foot\",\n    b: \"1F9B6\",\n    k: [43, 11],\n    o: 11\n  },\n  giraffe_face: {\n    a: \"Giraffe Face\",\n    b: \"1F992\",\n    k: [42, 36],\n    o: 5\n  },\n  unamused: {\n    a: \"Unamused Face\",\n    b: \"1F612\",\n    j: [\"indifference\", \"bored\", \"straight face\", \"serious\", \"sarcasm\"],\n    k: [30, 53],\n    m: \":(\",\n    o: 2\n  },\n  billed_cap: {\n    a: \"Billed Cap\",\n    b: \"1F9E2\",\n    k: [51, 21],\n    o: 5\n  },\n  waffle: {\n    a: \"Waffle\",\n    b: \"1F9C7\",\n    k: [44, 15],\n    o: 12\n  },\n  cricket_bat_and_ball: {\n    a: \"Cricket Bat and Ball\",\n    b: \"1F3CF\",\n    k: [10, 34],\n    o: 2\n  },\n  helmet_with_white_cross: {\n    a: \"Helmet with White Cross\",\n    b: \"26D1-FE0F\",\n    c: \"26D1\",\n    k: [54, 6],\n    o: 2\n  },\n  ear: {\n    a: \"Ear\",\n    b: \"1F442\",\n    j: [\"face\", \"hear\", \"sound\", \"listen\"],\n    k: [12, 39],\n    o: 2\n  },\n  elephant: {\n    a: \"Elephant\",\n    b: \"1F418\",\n    j: [\"animal\", \"nature\", \"nose\", \"th\", \"circus\"],\n    k: [11, 53],\n    o: 2\n  },\n  cheese_wedge: {\n    a: \"Cheese Wedge\",\n    b: \"1F9C0\",\n    k: [44, 8],\n    o: 2\n  },\n  tokyo_tower: {\n    a: \"Tokyo Tower\",\n    b: \"1F5FC\",\n    j: [\"photo\", \"japanese\"],\n    k: [30, 31],\n    o: 2\n  },\n  arrow_heading_up: {\n    a: \"Arrow Pointing Rightwards Then Curving Upwards\",\n    b: \"2934-FE0F\",\n    c: \"2934\",\n    j: [\"blue-square\", \"direction\", \"top\"],\n    k: [55, 35],\n    o: 2\n  },\n  field_hockey_stick_and_ball: {\n    a: \"Field Hockey Stick and Ball\",\n    b: \"1F3D1\",\n    k: [10, 36],\n    o: 2\n  },\n  \"flag-br\": {\n    a: \"Brazil Flag\",\n    b: \"1F1E7-1F1F7\",\n    k: [1, 5],\n    o: 2\n  },\n  face_with_rolling_eyes: {\n    a: \"Face with Rolling Eyes\",\n    b: \"1F644\",\n    k: [31, 46],\n    o: 2\n  },\n  ear_with_hearing_aid: {\n    a: \"Ear with Hearing Aid\",\n    b: \"1F9BB\",\n    k: [43, 55],\n    o: 12\n  },\n  arrow_heading_down: {\n    a: \"Arrow Pointing Rightwards Then Curving Downwards\",\n    b: \"2935-FE0F\",\n    c: \"2935\",\n    j: [\"blue-square\", \"direction\", \"bottom\"],\n    k: [55, 36],\n    o: 2\n  },\n  ice_hockey_stick_and_puck: {\n    a: \"Ice Hockey Stick and Puck\",\n    b: \"1F3D2\",\n    k: [10, 37],\n    o: 2\n  },\n  meat_on_bone: {\n    a: \"Meat on Bone\",\n    b: \"1F356\",\n    j: [\"good\", \"food\", \"drumstick\"],\n    k: [6, 46],\n    o: 2\n  },\n  prayer_beads: {\n    a: \"Prayer Beads\",\n    b: \"1F4FF\",\n    j: [\"dhikr\", \"religious\"],\n    k: [27, 27],\n    o: 2\n  },\n  statue_of_liberty: {\n    a: \"Statue of Liberty\",\n    b: \"1F5FD\",\n    j: [\"american\", \"newyork\"],\n    k: [30, 32],\n    o: 2\n  },\n  grimacing: {\n    a: \"Grimacing Face\",\n    b: \"1F62C\",\n    j: [\"face\", \"grimace\", \"teeth\"],\n    k: [31, 22],\n    o: 2\n  },\n  \"flag-bs\": {\n    a: \"Bahamas Flag\",\n    b: \"1F1E7-1F1F8\",\n    k: [1, 6],\n    o: 2\n  },\n  rhinoceros: {\n    a: \"Rhinoceros\",\n    b: \"1F98F\",\n    j: [\"animal\", \"nature\", \"horn\"],\n    k: [42, 33],\n    o: 4\n  },\n  lacrosse: {\n    a: \"Lacrosse Stick and Ball\",\n    b: \"1F94D\",\n    k: [41, 28],\n    o: 11\n  },\n  poultry_leg: {\n    a: \"Poultry Leg\",\n    b: \"1F357\",\n    j: [\"food\", \"meat\", \"drumstick\", \"bird\", \"chicken\", \"turkey\"],\n    k: [6, 47],\n    o: 2\n  },\n  hippopotamus: {\n    a: \"Hippopotamus\",\n    b: \"1F99B\",\n    k: [42, 45],\n    o: 11\n  },\n  nose: {\n    a: \"Nose\",\n    b: \"1F443\",\n    j: [\"smell\", \"sniff\"],\n    k: [12, 45],\n    o: 2\n  },\n  arrows_clockwise: {\n    a: \"Clockwise Downwards and Upwards Open Circle Arrows\",\n    b: \"1F503\",\n    j: [\"sync\", \"cycle\", \"round\", \"repeat\"],\n    k: [27, 31],\n    o: 2\n  },\n  \"flag-bt\": {\n    a: \"Bhutan Flag\",\n    b: \"1F1E7-1F1F9\",\n    k: [1, 7],\n    o: 2\n  },\n  church: {\n    a: \"Church\",\n    b: \"26EA\",\n    j: [\"building\", \"religion\", \"christ\"],\n    k: [54, 10],\n    o: 2\n  },\n  lipstick: {\n    a: \"Lipstick\",\n    b: \"1F484\",\n    j: [\"female\", \"girl\", \"fashion\", \"woman\"],\n    k: [24, 32],\n    o: 2\n  },\n  lying_face: {\n    a: \"Lying Face\",\n    b: \"1F925\",\n    j: [\"face\", \"lie\", \"pinocchio\"],\n    k: [38, 22],\n    o: 4\n  },\n  arrows_counterclockwise: {\n    a: \"Anticlockwise Downwards and Upwards Open Circle Arrows\",\n    b: \"1F504\",\n    j: [\"blue-square\", \"sync\", \"cycle\"],\n    k: [27, 32],\n    o: 2\n  },\n  \"flag-bv\": {\n    a: \"Bouvet Island Flag\",\n    b: \"1F1E7-1F1FB\",\n    k: [1, 8],\n    o: 2\n  },\n  cut_of_meat: {\n    a: \"Cut of Meat\",\n    b: \"1F969\",\n    k: [41, 56],\n    o: 5\n  },\n  mosque: {\n    a: \"Mosque\",\n    b: \"1F54C\",\n    j: [\"islam\", \"worship\", \"minaret\"],\n    k: [28, 36],\n    o: 2\n  },\n  ring: {\n    a: \"Ring\",\n    b: \"1F48D\",\n    j: [\"wedding\", \"propose\", \"marriage\", \"valentines\", \"diamond\", \"fashion\", \"jewelry\", \"gem\", \"engagement\"],\n    k: [25, 23],\n    o: 2\n  },\n  brain: {\n    a: \"Brain\",\n    b: \"1F9E0\",\n    k: [51, 19],\n    o: 5\n  },\n  table_tennis_paddle_and_ball: {\n    a: \"Table Tennis Paddle and Ball\",\n    b: \"1F3D3\",\n    k: [10, 38],\n    o: 2\n  },\n  relieved: {\n    a: \"Relieved Face\",\n    b: \"1F60C\",\n    j: [\"face\", \"relaxed\", \"phew\", \"massage\", \"happiness\"],\n    k: [30, 47],\n    o: 2\n  },\n  mouse: {\n    a: \"Mouse Face\",\n    b: \"1F42D\",\n    j: [\"animal\", \"nature\", \"cheese_wedge\", \"rodent\"],\n    k: [12, 17],\n    o: 2\n  },\n  hindu_temple: {\n    a: \"Hindu Temple\",\n    b: \"1F6D5\",\n    k: [36, 41],\n    o: 12\n  },\n  back: {\n    a: \"Back with Leftwards Arrow Above\",\n    b: \"1F519\",\n    j: [\"arrow\", \"words\", \"return\"],\n    k: [27, 53],\n    o: 2\n  },\n  gem: {\n    a: \"Gem Stone\",\n    b: \"1F48E\",\n    j: [\"blue\", \"ruby\", \"diamond\", \"jewelry\"],\n    k: [25, 24],\n    o: 2\n  },\n  pensive: {\n    a: \"Pensive Face\",\n    b: \"1F614\",\n    j: [\"face\", \"sad\", \"depressed\", \"upset\"],\n    k: [30, 55],\n    o: 2\n  },\n  \"flag-bw\": {\n    a: \"Botswana Flag\",\n    b: \"1F1E7-1F1FC\",\n    k: [1, 9],\n    o: 2\n  },\n  mouse2: {\n    a: \"Mouse\",\n    b: \"1F401\",\n    j: [\"animal\", \"nature\", \"rodent\"],\n    k: [11, 29],\n    o: 2\n  },\n  bacon: {\n    a: \"Bacon\",\n    b: \"1F953\",\n    j: [\"food\", \"breakfast\", \"pork\", \"pig\", \"meat\"],\n    k: [41, 34],\n    o: 4\n  },\n  tooth: {\n    a: \"Tooth\",\n    b: \"1F9B7\",\n    k: [43, 17],\n    o: 11\n  },\n  badminton_racquet_and_shuttlecock: {\n    a: \"Badminton Racquet and Shuttlecock\",\n    b: \"1F3F8\",\n    k: [11, 20],\n    o: 2\n  },\n  rat: {\n    a: \"Rat\",\n    b: \"1F400\",\n    j: [\"animal\", \"mouse\", \"rodent\"],\n    k: [11, 28],\n    o: 2\n  },\n  synagogue: {\n    a: \"Synagogue\",\n    b: \"1F54D\",\n    j: [\"judaism\", \"worship\", \"temple\", \"jewish\"],\n    k: [28, 37],\n    o: 2\n  },\n  end: {\n    a: \"End with Leftwards Arrow Above\",\n    b: \"1F51A\",\n    j: [\"words\", \"arrow\"],\n    k: [27, 54],\n    o: 2\n  },\n  bone: {\n    a: \"Bone\",\n    b: \"1F9B4\",\n    k: [43, 4],\n    o: 11\n  },\n  boxing_glove: {\n    a: \"Boxing Glove\",\n    b: \"1F94A\",\n    j: [\"sports\", \"fighting\"],\n    k: [41, 25],\n    o: 4\n  },\n  mute: {\n    a: \"Speaker with Cancellation Stroke\",\n    b: \"1F507\",\n    j: [\"sound\", \"volume\", \"silence\", \"quiet\"],\n    k: [27, 35],\n    o: 2\n  },\n  hamburger: {\n    a: \"Hamburger\",\n    b: \"1F354\",\n    j: [\"meat\", \"fast food\", \"beef\", \"cheeseburger\", \"mcdonalds\", \"burger king\"],\n    k: [6, 44],\n    o: 2\n  },\n  \"flag-by\": {\n    a: \"Belarus Flag\",\n    b: \"1F1E7-1F1FE\",\n    k: [1, 10],\n    o: 2\n  },\n  sleepy: {\n    a: \"Sleepy Face\",\n    b: \"1F62A\",\n    j: [\"face\", \"tired\", \"rest\", \"nap\"],\n    k: [31, 20],\n    o: 2\n  },\n  on: {\n    a: \"On with Exclamation Mark with Left Right Arrow Above\",\n    b: \"1F51B\",\n    j: [\"arrow\", \"words\"],\n    k: [27, 55],\n    o: 2\n  },\n  martial_arts_uniform: {\n    a: \"Martial Arts Uniform\",\n    b: \"1F94B\",\n    j: [\"judo\", \"karate\", \"taekwondo\"],\n    k: [41, 26],\n    o: 4\n  },\n  speaker: {\n    a: \"Speaker\",\n    b: \"1F508\",\n    j: [\"sound\", \"volume\", \"silence\", \"broadcast\"],\n    k: [27, 36],\n    o: 2\n  },\n  drooling_face: {\n    a: \"Drooling Face\",\n    b: \"1F924\",\n    j: [\"face\"],\n    k: [38, 21],\n    o: 4\n  },\n  eyes: {\n    a: \"Eyes\",\n    b: \"1F440\",\n    j: [\"look\", \"watch\", \"stalk\", \"peek\", \"see\"],\n    k: [12, 36],\n    o: 2\n  },\n  \"flag-bz\": {\n    a: \"Belize Flag\",\n    b: \"1F1E7-1F1FF\",\n    k: [1, 11],\n    o: 2\n  },\n  hamster: {\n    a: \"Hamster Face\",\n    b: \"1F439\",\n    j: [\"animal\", \"nature\"],\n    k: [12, 29],\n    o: 2\n  },\n  shinto_shrine: {\n    a: \"Shinto Shrine\",\n    b: \"26E9-FE0F\",\n    c: \"26E9\",\n    j: [\"temple\", \"japan\", \"kyoto\"],\n    k: [54, 9],\n    o: 2\n  },\n  fries: {\n    a: \"French Fries\",\n    b: \"1F35F\",\n    j: [\"chips\", \"snack\", \"fast food\"],\n    k: [6, 55],\n    o: 2\n  },\n  goal_net: {\n    a: \"Goal Net\",\n    b: \"1F945\",\n    j: [\"sports\"],\n    k: [41, 21],\n    o: 4\n  },\n  kaaba: {\n    a: \"Kaaba\",\n    b: \"1F54B\",\n    j: [\"mecca\", \"mosque\", \"islam\"],\n    k: [28, 35],\n    o: 2\n  },\n  soon: {\n    a: \"Soon with Rightwards Arrow Above\",\n    b: \"1F51C\",\n    j: [\"arrow\", \"words\"],\n    k: [27, 56],\n    o: 2\n  },\n  \"flag-ca\": {\n    a: \"Canada Flag\",\n    b: \"1F1E8-1F1E6\",\n    k: [1, 12],\n    o: 2\n  },\n  rabbit: {\n    a: \"Rabbit Face\",\n    b: \"1F430\",\n    j: [\"animal\", \"nature\", \"pet\", \"spring\", \"magic\", \"bunny\"],\n    k: [12, 20],\n    o: 2\n  },\n  eye: {\n    a: \"Eye\",\n    b: \"1F441-FE0F\",\n    c: \"1F441\",\n    j: [\"face\", \"look\", \"see\", \"watch\", \"stare\"],\n    k: [12, 38],\n    o: 2\n  },\n  sleeping: {\n    a: \"Sleeping Face\",\n    b: \"1F634\",\n    j: [\"face\", \"tired\", \"sleepy\", \"night\", \"zzz\"],\n    k: [31, 30],\n    o: 2\n  },\n  pizza: {\n    a: \"Slice of Pizza\",\n    b: \"1F355\",\n    j: [\"food\", \"party\"],\n    k: [6, 45],\n    o: 2\n  },\n  sound: {\n    a: \"Speaker with One Sound Wave\",\n    b: \"1F509\",\n    j: [\"volume\", \"speaker\", \"broadcast\"],\n    k: [27, 37],\n    o: 2\n  },\n  rabbit2: {\n    a: \"Rabbit\",\n    b: \"1F407\",\n    j: [\"animal\", \"nature\", \"pet\", \"magic\", \"spring\"],\n    k: [11, 35],\n    o: 2\n  },\n  fountain: {\n    a: \"Fountain\",\n    b: \"26F2\",\n    j: [\"photo\", \"summer\", \"water\", \"fresh\"],\n    k: [54, 13],\n    o: 2\n  },\n  golf: {\n    a: \"Flag in Hole\",\n    b: \"26F3\",\n    j: [\"sports\", \"business\", \"flag\", \"hole\", \"summer\"],\n    k: [54, 14],\n    o: 2\n  },\n  top: {\n    a: \"Top with Upwards Arrow Above\",\n    b: \"1F51D\",\n    j: [\"words\", \"blue-square\"],\n    k: [28, 0],\n    o: 2\n  },\n  mask: {\n    a: \"Face with Medical Mask\",\n    b: \"1F637\",\n    j: [\"face\", \"sick\", \"ill\", \"disease\"],\n    k: [31, 33],\n    o: 2\n  },\n  \"flag-cc\": {\n    a: \"Cocos (keeling) Islands Flag\",\n    b: \"1F1E8-1F1E8\",\n    k: [1, 13],\n    o: 2\n  },\n  hotdog: {\n    a: \"Hot Dog\",\n    b: \"1F32D\",\n    j: [\"food\", \"frankfurter\"],\n    k: [6, 5],\n    o: 2\n  },\n  loud_sound: {\n    a: \"Speaker with Three Sound Waves\",\n    b: \"1F50A\",\n    j: [\"volume\", \"noise\", \"noisy\", \"speaker\", \"broadcast\"],\n    k: [27, 38],\n    o: 2\n  },\n  tongue: {\n    a: \"Tongue\",\n    b: \"1F445\",\n    j: [\"mouth\", \"playful\"],\n    k: [12, 52],\n    o: 2\n  },\n  place_of_worship: {\n    a: \"Place of Worship\",\n    b: \"1F6D0\",\n    j: [\"religion\", \"church\", \"temple\", \"prayer\"],\n    k: [36, 38],\n    o: 2\n  },\n  ice_skate: {\n    a: \"Ice Skate\",\n    b: \"26F8-FE0F\",\n    c: \"26F8\",\n    j: [\"sports\"],\n    k: [54, 18],\n    o: 2\n  },\n  sandwich: {\n    a: \"Sandwich\",\n    b: \"1F96A\",\n    k: [42, 0],\n    o: 5\n  },\n  chipmunk: {\n    a: \"Chipmunk\",\n    b: \"1F43F-FE0F\",\n    c: \"1F43F\",\n    j: [\"animal\", \"nature\", \"rodent\", \"squirrel\"],\n    k: [12, 35],\n    o: 2\n  },\n  loudspeaker: {\n    a: \"Public Address Loudspeaker\",\n    b: \"1F4E2\",\n    j: [\"volume\", \"sound\"],\n    k: [26, 56],\n    o: 2\n  },\n  lips: {\n    a: \"Mouth\",\n    b: \"1F444\",\n    j: [\"mouth\", \"kiss\"],\n    k: [12, 51],\n    o: 2\n  },\n  \"flag-cd\": {\n    a: \"Congo - Kinshasa Flag\",\n    b: \"1F1E8-1F1E9\",\n    k: [1, 14],\n    o: 2\n  },\n  tent: {\n    a: \"Tent\",\n    b: \"26FA\",\n    j: [\"photo\", \"camping\", \"outdoors\"],\n    k: [54, 37],\n    o: 2\n  },\n  face_with_thermometer: {\n    a: \"Face with Thermometer\",\n    b: \"1F912\",\n    j: [\"sick\", \"temperature\", \"thermometer\", \"cold\", \"fever\"],\n    k: [37, 25],\n    o: 2\n  },\n  taco: {\n    a: \"Taco\",\n    b: \"1F32E\",\n    j: [\"food\", \"mexican\"],\n    k: [6, 6],\n    o: 2\n  },\n  foggy: {\n    a: \"Foggy\",\n    b: \"1F301\",\n    j: [\"photo\", \"mountain\"],\n    k: [5, 20],\n    o: 2\n  },\n  \"flag-cf\": {\n    a: \"Central African Republic Flag\",\n    b: \"1F1E8-1F1EB\",\n    k: [1, 15],\n    o: 2\n  },\n  baby: {\n    a: \"Baby\",\n    b: \"1F476\",\n    j: [\"child\", \"boy\", \"girl\", \"toddler\"],\n    k: [23, 4],\n    o: 2\n  },\n  atom_symbol: {\n    a: \"Atom Symbol\",\n    b: \"269B-FE0F\",\n    c: \"269B\",\n    j: [\"science\", \"physics\", \"chemistry\"],\n    k: [53, 48],\n    o: 2\n  },\n  fishing_pole_and_fish: {\n    a: \"Fishing Pole and Fish\",\n    b: \"1F3A3\",\n    j: [\"food\", \"hobby\", \"summer\"],\n    k: [8, 9],\n    o: 2\n  },\n  hedgehog: {\n    a: \"Hedgehog\",\n    b: \"1F994\",\n    k: [42, 38],\n    o: 5\n  },\n  face_with_head_bandage: {\n    a: \"Face with Head-Bandage\",\n    b: \"1F915\",\n    j: [\"injured\", \"clumsy\", \"bandage\", \"hurt\"],\n    k: [37, 28],\n    o: 2\n  },\n  mega: {\n    a: \"Cheering Megaphone\",\n    b: \"1F4E3\",\n    j: [\"sound\", \"speaker\", \"volume\"],\n    k: [27, 0],\n    o: 2\n  },\n  nauseated_face: {\n    a: \"Nauseated Face\",\n    b: \"1F922\",\n    j: [\"face\", \"vomit\", \"gross\", \"green\", \"sick\", \"throw up\", \"ill\"],\n    k: [38, 19],\n    o: 4\n  },\n  child: {\n    a: \"Child\",\n    b: \"1F9D2\",\n    k: [48, 16],\n    o: 5\n  },\n  \"flag-cg\": {\n    a: \"Congo - Brazzaville Flag\",\n    b: \"1F1E8-1F1EC\",\n    k: [1, 16],\n    o: 2\n  },\n  bat: {\n    a: \"Bat\",\n    b: \"1F987\",\n    j: [\"animal\", \"nature\", \"blind\", \"vampire\"],\n    k: [42, 25],\n    o: 4\n  },\n  diving_mask: {\n    a: \"Diving Mask\",\n    b: \"1F93F\",\n    k: [41, 15],\n    o: 12\n  },\n  burrito: {\n    a: \"Burrito\",\n    b: \"1F32F\",\n    j: [\"food\", \"mexican\"],\n    k: [6, 7],\n    o: 2\n  },\n  postal_horn: {\n    a: \"Postal Horn\",\n    b: \"1F4EF\",\n    j: [\"instrument\", \"music\"],\n    k: [27, 12],\n    o: 2\n  },\n  night_with_stars: {\n    a: \"Night with Stars\",\n    b: \"1F303\",\n    j: [\"evening\", \"city\", \"downtown\"],\n    k: [5, 22],\n    o: 2\n  },\n  om_symbol: {\n    a: \"Om Symbol\",\n    b: \"1F549-FE0F\",\n    c: \"1F549\",\n    k: [28, 33],\n    o: 2\n  },\n  star_of_david: {\n    a: \"Star of David\",\n    b: \"2721-FE0F\",\n    c: \"2721\",\n    j: [\"judaism\"],\n    k: [55, 15],\n    o: 2\n  },\n  boy: {\n    a: \"Boy\",\n    b: \"1F466\",\n    j: [\"man\", \"male\", \"guy\", \"teenager\"],\n    k: [14, 26],\n    o: 2\n  },\n  bell: {\n    a: \"Bell\",\n    b: \"1F514\",\n    j: [\"sound\", \"notification\", \"christmas\", \"xmas\", \"chime\"],\n    k: [27, 48],\n    o: 2\n  },\n  \"flag-ch\": {\n    a: \"Switzerland Flag\",\n    b: \"1F1E8-1F1ED\",\n    k: [1, 17],\n    o: 2\n  },\n  running_shirt_with_sash: {\n    a: \"Running Shirt with Sash\",\n    b: \"1F3BD\",\n    j: [\"play\", \"pageant\"],\n    k: [8, 35],\n    o: 2\n  },\n  stuffed_flatbread: {\n    a: \"Stuffed Flatbread\",\n    b: \"1F959\",\n    j: [\"food\", \"flatbread\", \"stuffed\", \"gyro\"],\n    k: [41, 40],\n    o: 4\n  },\n  bear: {\n    a: \"Bear Face\",\n    b: \"1F43B\",\n    j: [\"animal\", \"nature\", \"wild\"],\n    k: [12, 31],\n    o: 2\n  },\n  cityscape: {\n    a: \"Cityscape\",\n    b: \"1F3D9-FE0F\",\n    c: \"1F3D9\",\n    j: [\"photo\", \"night life\", \"urban\"],\n    k: [10, 44],\n    o: 2\n  },\n  face_vomiting: {\n    a: \"Face with Open Mouth Vomiting\",\n    b: \"1F92E\",\n    k: [38, 48],\n    n: [\"face_with_open_mouth_vomiting\"],\n    o: 5\n  },\n  wheel_of_dharma: {\n    a: \"Wheel of Dharma\",\n    b: \"2638-FE0F\",\n    c: \"2638\",\n    j: [\"hinduism\", \"buddhism\", \"sikhism\", \"jainism\"],\n    k: [53, 15],\n    o: 2\n  },\n  ski: {\n    a: \"Ski and Ski Boot\",\n    b: \"1F3BF\",\n    j: [\"sports\", \"winter\", \"cold\", \"snow\"],\n    k: [8, 37],\n    o: 2\n  },\n  girl: {\n    a: \"Girl\",\n    b: \"1F467\",\n    j: [\"female\", \"woman\", \"teenager\"],\n    k: [14, 32],\n    o: 2\n  },\n  falafel: {\n    a: \"Falafel\",\n    b: \"1F9C6\",\n    k: [44, 14],\n    o: 12\n  },\n  sneezing_face: {\n    a: \"Sneezing Face\",\n    b: \"1F927\",\n    j: [\"face\", \"gesundheit\", \"sneeze\", \"sick\", \"allergy\"],\n    k: [38, 41],\n    o: 4\n  },\n  no_bell: {\n    a: \"Bell with Cancellation Stroke\",\n    b: \"1F515\",\n    j: [\"sound\", \"volume\", \"mute\", \"quiet\", \"silent\"],\n    k: [27, 49],\n    o: 2\n  },\n  koala: {\n    a: \"Koala\",\n    b: \"1F428\",\n    j: [\"animal\", \"nature\"],\n    k: [12, 12],\n    o: 2\n  },\n  sunrise_over_mountains: {\n    a: \"Sunrise over Mountains\",\n    b: \"1F304\",\n    j: [\"view\", \"vacation\", \"photo\"],\n    k: [5, 23],\n    o: 2\n  },\n  \"flag-ci\": {\n    a: \"Côte D’ivoire Flag\",\n    b: \"1F1E8-1F1EE\",\n    k: [1, 18],\n    o: 2\n  },\n  sunrise: {\n    a: \"Sunrise\",\n    b: \"1F305\",\n    j: [\"morning\", \"view\", \"vacation\", \"photo\"],\n    k: [5, 24],\n    o: 2\n  },\n  yin_yang: {\n    a: \"Yin Yang\",\n    b: \"262F-FE0F\",\n    c: \"262F\",\n    j: [\"balance\"],\n    k: [53, 14],\n    o: 2\n  },\n  adult: {\n    a: \"Adult\",\n    b: \"1F9D1\",\n    k: [48, 10],\n    o: 5\n  },\n  hot_face: {\n    a: \"Overheated Face\",\n    b: \"1F975\",\n    k: [42, 10],\n    o: 11\n  },\n  musical_score: {\n    a: \"Musical Score\",\n    b: \"1F3BC\",\n    j: [\"treble\", \"clef\", \"compose\"],\n    k: [8, 34],\n    o: 2\n  },\n  sled: {\n    a: \"Sled\",\n    b: \"1F6F7\",\n    k: [36, 56],\n    o: 5\n  },\n  egg: {\n    a: \"Egg\",\n    b: \"1F95A\",\n    j: [\"food\", \"chicken\", \"breakfast\"],\n    k: [41, 41],\n    o: 4\n  },\n  panda_face: {\n    a: \"Panda Face\",\n    b: \"1F43C\",\n    j: [\"animal\", \"nature\", \"panda\"],\n    k: [12, 32],\n    o: 2\n  },\n  \"flag-ck\": {\n    a: \"Cook Islands Flag\",\n    b: \"1F1E8-1F1F0\",\n    k: [1, 19],\n    o: 2\n  },\n  \"flag-cl\": {\n    a: \"Chile Flag\",\n    b: \"1F1E8-1F1F1\",\n    k: [1, 20],\n    o: 2\n  },\n  sloth: {\n    a: \"Sloth\",\n    b: \"1F9A5\",\n    k: [42, 53],\n    o: 12\n  },\n  latin_cross: {\n    a: \"Latin Cross\",\n    b: \"271D-FE0F\",\n    c: \"271D\",\n    j: [\"christianity\"],\n    k: [55, 14],\n    o: 2\n  },\n  curling_stone: {\n    a: \"Curling Stone\",\n    b: \"1F94C\",\n    k: [41, 27],\n    o: 5\n  },\n  cold_face: {\n    a: \"Freezing Face\",\n    b: \"1F976\",\n    k: [42, 11],\n    o: 11\n  },\n  fried_egg: {\n    a: \"Cooking\",\n    b: \"1F373\",\n    j: [\"food\", \"breakfast\", \"kitchen\", \"egg\"],\n    k: [7, 18],\n    n: [\"cooking\"],\n    o: 2\n  },\n  city_sunset: {\n    a: \"Cityscape at Dusk\",\n    b: \"1F306\",\n    j: [\"photo\", \"evening\", \"sky\", \"buildings\"],\n    k: [5, 25],\n    o: 2\n  },\n  musical_note: {\n    a: \"Musical Note\",\n    b: \"1F3B5\",\n    j: [\"score\", \"tone\", \"sound\"],\n    k: [8, 27],\n    o: 2\n  },\n  \"flag-cm\": {\n    a: \"Cameroon Flag\",\n    b: \"1F1E8-1F1F2\",\n    k: [1, 21],\n    o: 2\n  },\n  notes: {\n    a: \"Multiple Musical Notes\",\n    b: \"1F3B6\",\n    j: [\"music\", \"score\"],\n    k: [8, 28],\n    o: 2\n  },\n  woozy_face: {\n    a: \"Face with Uneven Eyes and Wavy Mouth\",\n    b: \"1F974\",\n    k: [42, 9],\n    o: 11\n  },\n  dart: {\n    a: \"Direct Hit\",\n    b: \"1F3AF\",\n    j: [\"game\", \"play\", \"bar\"],\n    k: [8, 21],\n    o: 2\n  },\n  orthodox_cross: {\n    a: \"Orthodox Cross\",\n    b: \"2626-FE0F\",\n    c: \"2626\",\n    j: [\"suppedaneum\", \"religion\"],\n    k: [53, 11],\n    o: 2\n  },\n  shallow_pan_of_food: {\n    a: \"Shallow Pan of Food\",\n    b: \"1F958\",\n    j: [\"food\", \"cooking\", \"casserole\", \"paella\"],\n    k: [41, 39],\n    o: 4\n  },\n  otter: {\n    a: \"Otter\",\n    b: \"1F9A6\",\n    k: [42, 54],\n    o: 12\n  },\n  man: {\n    a: \"Man\",\n    b: \"1F468\",\n    j: [\"mustache\", \"father\", \"dad\", \"guy\", \"classy\", \"sir\", \"moustache\"],\n    k: [17, 22],\n    o: 2\n  },\n  city_sunrise: {\n    a: \"Sunset over Buildings\",\n    b: \"1F307\",\n    j: [\"photo\", \"good morning\", \"dawn\"],\n    k: [5, 26],\n    o: 2\n  },\n  bearded_person: {\n    a: \"Bearded Person\",\n    b: \"1F9D4\",\n    k: [48, 28],\n    o: 5\n  },\n  skunk: {\n    a: \"Skunk\",\n    b: \"1F9A8\",\n    k: [42, 56],\n    o: 12\n  },\n  stew: {\n    a: \"Pot of Food\",\n    b: \"1F372\",\n    j: [\"food\", \"meat\", \"soup\"],\n    k: [7, 17],\n    o: 2\n  },\n  cn: {\n    a: \"China Flag\",\n    b: \"1F1E8-1F1F3\",\n    j: [\"china\", \"chinese\", \"prc\", \"flag\", \"country\", \"nation\", \"banner\"],\n    k: [1, 22],\n    n: [\"flag-cn\"],\n    o: 2\n  },\n  studio_microphone: {\n    a: \"Studio Microphone\",\n    b: \"1F399-FE0F\",\n    c: \"1F399\",\n    j: [\"sing\", \"recording\", \"artist\", \"talkshow\"],\n    k: [8, 1],\n    o: 2\n  },\n  star_and_crescent: {\n    a: \"Star and Crescent\",\n    b: \"262A-FE0F\",\n    c: \"262A\",\n    j: [\"islam\"],\n    k: [53, 12],\n    o: 2\n  },\n  \"yo-yo\": {\n    a: \"Yo-Yo\",\n    b: \"1FA80\",\n    k: [52, 1],\n    o: 12\n  },\n  bridge_at_night: {\n    a: \"Bridge at Night\",\n    b: \"1F309\",\n    j: [\"photo\", \"sanfrancisco\"],\n    k: [5, 28],\n    o: 2\n  },\n  dizzy_face: {\n    a: \"Dizzy Face\",\n    b: \"1F635\",\n    j: [\"spent\", \"unconscious\", \"xox\", \"dizzy\"],\n    k: [31, 31],\n    o: 2\n  },\n  red_haired_man: {\n    a: \"Red Haired Man\",\n    b: \"1F468-200D-1F9B0\",\n    k: [16, 23],\n    o: 11\n  },\n  kite: {\n    a: \"Kite\",\n    b: \"1FA81\",\n    k: [52, 2],\n    o: 12\n  },\n  bowl_with_spoon: {\n    a: \"Bowl with Spoon\",\n    b: \"1F963\",\n    k: [41, 50],\n    o: 5\n  },\n  \"flag-co\": {\n    a: \"Colombia Flag\",\n    b: \"1F1E8-1F1F4\",\n    k: [1, 23],\n    o: 2\n  },\n  peace_symbol: {\n    a: \"Peace Symbol\",\n    b: \"262E-FE0F\",\n    c: \"262E\",\n    j: [\"hippie\"],\n    k: [53, 13],\n    o: 2\n  },\n  kangaroo: {\n    a: \"Kangaroo\",\n    b: \"1F998\",\n    k: [42, 42],\n    o: 11\n  },\n  hotsprings: {\n    a: \"Hot Springs\",\n    b: \"2668-FE0F\",\n    c: \"2668\",\n    j: [\"bath\", \"warm\", \"relax\"],\n    k: [53, 37],\n    o: 2\n  },\n  exploding_head: {\n    a: \"Shocked Face with Exploding Head\",\n    b: \"1F92F\",\n    k: [38, 49],\n    n: [\"shocked_face_with_exploding_head\"],\n    o: 5\n  },\n  level_slider: {\n    a: \"Level Slider\",\n    b: \"1F39A-FE0F\",\n    c: \"1F39A\",\n    j: [\"scale\"],\n    k: [8, 2],\n    o: 2\n  },\n  badger: {\n    a: \"Badger\",\n    b: \"1F9A1\",\n    k: [42, 51],\n    o: 11\n  },\n  \"8ball\": {\n    a: \"Billiards\",\n    b: \"1F3B1\",\n    j: [\"pool\", \"hobby\", \"game\", \"luck\", \"magic\"],\n    k: [8, 23],\n    o: 2\n  },\n  curly_haired_man: {\n    a: \"Curly Haired Man\",\n    b: \"1F468-200D-1F9B1\",\n    k: [16, 29],\n    o: 11\n  },\n  \"flag-cp\": {\n    a: \"Clipperton Island Flag\",\n    b: \"1F1E8-1F1F5\",\n    k: [1, 24],\n    o: 2\n  },\n  carousel_horse: {\n    a: \"Carousel Horse\",\n    b: \"1F3A0\",\n    j: [\"photo\", \"carnival\"],\n    k: [8, 6],\n    o: 2\n  },\n  face_with_cowboy_hat: {\n    a: \"Face with Cowboy Hat\",\n    b: \"1F920\",\n    k: [38, 17],\n    o: 4\n  },\n  menorah_with_nine_branches: {\n    a: \"Menorah with Nine Branches\",\n    b: \"1F54E\",\n    k: [28, 38],\n    o: 2\n  },\n  green_salad: {\n    a: \"Green Salad\",\n    b: \"1F957\",\n    j: [\"food\", \"healthy\", \"lettuce\"],\n    k: [41, 38],\n    o: 4\n  },\n  control_knobs: {\n    a: \"Control Knobs\",\n    b: \"1F39B-FE0F\",\n    c: \"1F39B\",\n    j: [\"dial\"],\n    k: [8, 3],\n    o: 2\n  },\n  popcorn: {\n    a: \"Popcorn\",\n    b: \"1F37F\",\n    j: [\"food\", \"movie theater\", \"films\", \"snack\"],\n    k: [7, 30],\n    o: 2\n  },\n  six_pointed_star: {\n    a: \"Six Pointed Star with Middle Dot\",\n    b: \"1F52F\",\n    j: [\"purple-square\", \"religion\", \"jewish\", \"hexagram\"],\n    k: [28, 18],\n    o: 2\n  },\n  feet: {\n    a: \"Paw Prints\",\n    b: \"1F43E\",\n    k: [12, 34],\n    n: [\"paw_prints\"],\n    o: 2\n  },\n  ferris_wheel: {\n    a: \"Ferris Wheel\",\n    b: \"1F3A1\",\n    j: [\"photo\", \"carnival\", \"londoneye\"],\n    k: [8, 7],\n    o: 2\n  },\n  microphone: {\n    a: \"Microphone\",\n    b: \"1F3A4\",\n    j: [\"sound\", \"music\", \"PA\", \"sing\", \"talkshow\"],\n    k: [8, 10],\n    o: 2\n  },\n  crystal_ball: {\n    a: \"Crystal Ball\",\n    b: \"1F52E\",\n    j: [\"disco\", \"party\", \"magic\", \"circus\", \"fortune_teller\"],\n    k: [28, 17],\n    o: 2\n  },\n  partying_face: {\n    a: \"Face with Party Horn and Party Hat\",\n    b: \"1F973\",\n    k: [42, 8],\n    o: 11\n  },\n  \"flag-cr\": {\n    a: \"Costa Rica Flag\",\n    b: \"1F1E8-1F1F7\",\n    k: [1, 25],\n    o: 2\n  },\n  white_haired_man: {\n    a: \"White Haired Man\",\n    b: \"1F468-200D-1F9B3\",\n    k: [16, 41],\n    o: 11\n  },\n  headphones: {\n    a: \"Headphone\",\n    b: \"1F3A7\",\n    j: [\"music\", \"score\", \"gadgets\"],\n    k: [8, 13],\n    o: 2\n  },\n  bald_man: {\n    a: \"Bald Man\",\n    b: \"1F468-200D-1F9B2\",\n    k: [16, 35],\n    o: 11\n  },\n  sunglasses: {\n    a: \"Smiling Face with Sunglasses\",\n    b: \"1F60E\",\n    j: [\"face\", \"cool\", \"smile\", \"summer\", \"beach\", \"sunglass\"],\n    k: [30, 49],\n    l: [\"8)\"],\n    o: 2\n  },\n  butter: {\n    a: \"Butter\",\n    b: \"1F9C8\",\n    k: [44, 16],\n    o: 12\n  },\n  roller_coaster: {\n    a: \"Roller Coaster\",\n    b: \"1F3A2\",\n    j: [\"carnival\", \"playground\", \"photo\", \"fun\"],\n    k: [8, 8],\n    o: 2\n  },\n  turkey: {\n    a: \"Turkey\",\n    b: \"1F983\",\n    j: [\"animal\", \"bird\"],\n    k: [42, 21],\n    o: 2\n  },\n  nazar_amulet: {\n    a: \"Nazar Amulet\",\n    b: \"1F9FF\",\n    k: [51, 50],\n    o: 11\n  },\n  \"flag-cu\": {\n    a: \"Cuba Flag\",\n    b: \"1F1E8-1F1FA\",\n    k: [1, 26],\n    o: 2\n  },\n  aries: {\n    a: \"Aries\",\n    b: \"2648\",\n    j: [\"sign\", \"purple-square\", \"zodiac\", \"astrology\"],\n    k: [53, 20],\n    o: 2\n  },\n  \"flag-cv\": {\n    a: \"Cape Verde Flag\",\n    b: \"1F1E8-1F1FB\",\n    k: [1, 27],\n    o: 2\n  },\n  barber: {\n    a: \"Barber Pole\",\n    b: \"1F488\",\n    j: [\"hair\", \"salon\", \"style\"],\n    k: [25, 18],\n    o: 2\n  },\n  taurus: {\n    a: \"Taurus\",\n    b: \"2649\",\n    j: [\"purple-square\", \"sign\", \"zodiac\", \"astrology\"],\n    k: [53, 21],\n    o: 2\n  },\n  salt: {\n    a: \"Salt Shaker\",\n    b: \"1F9C2\",\n    k: [44, 10],\n    o: 11\n  },\n  woman: {\n    a: \"Woman\",\n    b: \"1F469\",\n    j: [\"female\", \"girls\", \"lady\"],\n    k: [20, 9],\n    o: 2\n  },\n  video_game: {\n    a: \"Video Game\",\n    b: \"1F3AE\",\n    j: [\"play\", \"console\", \"PS4\", \"controller\"],\n    k: [8, 20],\n    o: 2\n  },\n  chicken: {\n    a: \"Chicken\",\n    b: \"1F414\",\n    j: [\"animal\", \"cluck\", \"nature\", \"bird\"],\n    k: [11, 48],\n    o: 2\n  },\n  radio: {\n    a: \"Radio\",\n    b: \"1F4FB\",\n    j: [\"communication\", \"music\", \"podcast\", \"program\"],\n    k: [27, 24],\n    o: 2\n  },\n  nerd_face: {\n    a: \"Nerd Face\",\n    b: \"1F913\",\n    j: [\"face\", \"nerdy\", \"geek\", \"dork\"],\n    k: [37, 26],\n    o: 2\n  },\n  red_haired_woman: {\n    a: \"Red Haired Woman\",\n    b: \"1F469-200D-1F9B0\",\n    k: [19, 8],\n    o: 11\n  },\n  circus_tent: {\n    a: \"Circus Tent\",\n    b: \"1F3AA\",\n    j: [\"festival\", \"carnival\", \"party\"],\n    k: [8, 16],\n    o: 2\n  },\n  face_with_monocle: {\n    a: \"Face with Monocle\",\n    b: \"1F9D0\",\n    k: [45, 16],\n    o: 5\n  },\n  canned_food: {\n    a: \"Canned Food\",\n    b: \"1F96B\",\n    k: [42, 1],\n    o: 5\n  },\n  \"flag-cw\": {\n    a: \"Curaçao Flag\",\n    b: \"1F1E8-1F1FC\",\n    k: [1, 28],\n    o: 2\n  },\n  gemini: {\n    a: \"Gemini\",\n    b: \"264A\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\"],\n    k: [53, 22],\n    o: 2\n  },\n  saxophone: {\n    a: \"Saxophone\",\n    b: \"1F3B7\",\n    j: [\"music\", \"instrument\", \"jazz\", \"blues\"],\n    k: [8, 29],\n    o: 2\n  },\n  rooster: {\n    a: \"Rooster\",\n    b: \"1F413\",\n    j: [\"animal\", \"nature\", \"chicken\"],\n    k: [11, 47],\n    o: 2\n  },\n  joystick: {\n    a: \"Joystick\",\n    b: \"1F579-FE0F\",\n    c: \"1F579\",\n    j: [\"game\", \"play\"],\n    k: [29, 36],\n    o: 2\n  },\n  guitar: {\n    a: \"Guitar\",\n    b: \"1F3B8\",\n    j: [\"music\", \"instrument\"],\n    k: [8, 30],\n    o: 2\n  },\n  slot_machine: {\n    a: \"Slot Machine\",\n    b: \"1F3B0\",\n    j: [\"bet\", \"gamble\", \"vegas\", \"fruit machine\", \"luck\", \"casino\"],\n    k: [8, 22],\n    o: 2\n  },\n  bento: {\n    a: \"Bento Box\",\n    b: \"1F371\",\n    j: [\"food\", \"japanese\", \"box\"],\n    k: [7, 16],\n    o: 2\n  },\n  steam_locomotive: {\n    a: \"Steam Locomotive\",\n    b: \"1F682\",\n    j: [\"transportation\", \"vehicle\", \"train\"],\n    k: [34, 1],\n    o: 2\n  },\n  confused: {\n    a: \"Confused Face\",\n    b: \"1F615\",\n    j: [\"face\", \"indifference\", \"huh\", \"weird\", \"hmmm\", \":/\"],\n    k: [30, 56],\n    l: [\":\\\\\", \":-\\\\\", \":/\", \":-/\"],\n    o: 2\n  },\n  \"flag-cx\": {\n    a: \"Christmas Island Flag\",\n    b: \"1F1E8-1F1FD\",\n    k: [1, 29],\n    o: 2\n  },\n  hatching_chick: {\n    a: \"Hatching Chick\",\n    b: \"1F423\",\n    j: [\"animal\", \"chicken\", \"egg\", \"born\", \"baby\", \"bird\"],\n    k: [12, 7],\n    o: 2\n  },\n  cancer: {\n    a: \"Cancer\",\n    b: \"264B\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\"],\n    k: [53, 23],\n    o: 2\n  },\n  \"flag-cy\": {\n    a: \"Cyprus Flag\",\n    b: \"1F1E8-1F1FE\",\n    k: [1, 30],\n    o: 2\n  },\n  worried: {\n    a: \"Worried Face\",\n    b: \"1F61F\",\n    j: [\"face\", \"concern\", \"nervous\", \":(\"],\n    k: [31, 9],\n    o: 2\n  },\n  railway_car: {\n    a: \"Railway Car\",\n    b: \"1F683\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 2],\n    o: 2\n  },\n  leo: {\n    a: \"Leo\",\n    b: \"264C\",\n    j: [\"sign\", \"purple-square\", \"zodiac\", \"astrology\"],\n    k: [53, 24],\n    o: 2\n  },\n  curly_haired_woman: {\n    a: \"Curly Haired Woman\",\n    b: \"1F469-200D-1F9B1\",\n    k: [19, 14],\n    o: 11\n  },\n  baby_chick: {\n    a: \"Baby Chick\",\n    b: \"1F424\",\n    j: [\"animal\", \"chicken\", \"bird\"],\n    k: [12, 8],\n    o: 2\n  },\n  musical_keyboard: {\n    a: \"Musical Keyboard\",\n    b: \"1F3B9\",\n    j: [\"piano\", \"instrument\", \"compose\"],\n    k: [8, 31],\n    o: 2\n  },\n  game_die: {\n    a: \"Game Die\",\n    b: \"1F3B2\",\n    j: [\"dice\", \"random\", \"tabletop\", \"play\", \"luck\"],\n    k: [8, 24],\n    o: 2\n  },\n  rice_cracker: {\n    a: \"Rice Cracker\",\n    b: \"1F358\",\n    j: [\"food\", \"japanese\"],\n    k: [6, 48],\n    o: 2\n  },\n  virgo: {\n    a: \"Virgo\",\n    b: \"264D\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\"],\n    k: [53, 25],\n    o: 2\n  },\n  \"flag-cz\": {\n    a: \"Czechia Flag\",\n    b: \"1F1E8-1F1FF\",\n    k: [1, 31],\n    o: 2\n  },\n  rice_ball: {\n    a: \"Rice Ball\",\n    b: \"1F359\",\n    j: [\"food\", \"japanese\"],\n    k: [6, 49],\n    o: 2\n  },\n  hatched_chick: {\n    a: \"Front-Facing Baby Chick\",\n    b: \"1F425\",\n    j: [\"animal\", \"chicken\", \"baby\", \"bird\"],\n    k: [12, 9],\n    o: 2\n  },\n  jigsaw: {\n    a: \"Jigsaw Puzzle Piece\",\n    b: \"1F9E9\",\n    k: [51, 28],\n    o: 11\n  },\n  trumpet: {\n    a: \"Trumpet\",\n    b: \"1F3BA\",\n    j: [\"music\", \"brass\"],\n    k: [8, 32],\n    o: 2\n  },\n  slightly_frowning_face: {\n    a: \"Slightly Frowning Face\",\n    b: \"1F641\",\n    j: [\"face\", \"frowning\", \"disappointed\", \"sad\", \"upset\"],\n    k: [31, 43],\n    o: 2\n  },\n  bullettrain_side: {\n    a: \"High-Speed Train\",\n    b: \"1F684\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 3],\n    o: 2\n  },\n  libra: {\n    a: \"Libra\",\n    b: \"264E\",\n    j: [\"sign\", \"purple-square\", \"zodiac\", \"astrology\"],\n    k: [53, 26],\n    o: 2\n  },\n  de: {\n    a: \"Germany Flag\",\n    b: \"1F1E9-1F1EA\",\n    j: [\"german\", \"nation\", \"flag\", \"country\", \"banner\"],\n    k: [1, 32],\n    n: [\"flag-de\"],\n    o: 2\n  },\n  rice: {\n    a: \"Cooked Rice\",\n    b: \"1F35A\",\n    j: [\"food\", \"china\", \"asian\"],\n    k: [6, 50],\n    o: 2\n  },\n  violin: {\n    a: \"Violin\",\n    b: \"1F3BB\",\n    j: [\"music\", \"instrument\", \"orchestra\", \"symphony\"],\n    k: [8, 33],\n    o: 2\n  },\n  white_haired_woman: {\n    a: \"White Haired Woman\",\n    b: \"1F469-200D-1F9B3\",\n    k: [19, 26],\n    o: 11\n  },\n  bird: {\n    a: \"Bird\",\n    b: \"1F426\",\n    j: [\"animal\", \"nature\", \"fly\", \"tweet\", \"spring\"],\n    k: [12, 10],\n    o: 2\n  },\n  white_frowning_face: {\n    a: \"White Frowning Face\",\n    b: \"2639-FE0F\",\n    c: \"2639\",\n    k: [53, 16],\n    o: 2\n  },\n  bullettrain_front: {\n    a: \"High-Speed Train with Bullet Nose\",\n    b: \"1F685\",\n    j: [\"transportation\", \"vehicle\", \"speed\", \"fast\", \"public\", \"travel\"],\n    k: [34, 4],\n    o: 2\n  },\n  teddy_bear: {\n    a: \"Teddy Bear\",\n    b: \"1F9F8\",\n    k: [51, 43],\n    o: 11\n  },\n  spades: {\n    a: \"Black Spade Suit\",\n    b: \"2660-FE0F\",\n    c: \"2660\",\n    j: [\"poker\", \"cards\", \"suits\", \"magic\"],\n    k: [53, 33],\n    o: 2\n  },\n  banjo: {\n    a: \"Banjo\",\n    b: \"1FA95\",\n    k: [52, 9],\n    o: 12\n  },\n  train2: {\n    a: \"Train\",\n    b: \"1F686\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 5],\n    o: 2\n  },\n  scorpius: {\n    a: \"Scorpius\",\n    b: \"264F\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\", \"scorpio\"],\n    k: [53, 27],\n    o: 2\n  },\n  curry: {\n    a: \"Curry and Rice\",\n    b: \"1F35B\",\n    j: [\"food\", \"spicy\", \"hot\", \"indian\"],\n    k: [6, 51],\n    o: 2\n  },\n  open_mouth: {\n    a: \"Face with Open Mouth\",\n    b: \"1F62E\",\n    j: [\"face\", \"surprise\", \"impressed\", \"wow\", \"whoa\", \":O\"],\n    k: [31, 24],\n    l: [\":o\", \":-o\", \":O\", \":-O\"],\n    o: 2\n  },\n  \"flag-dg\": {\n    a: \"Diego Garcia Flag\",\n    b: \"1F1E9-1F1EC\",\n    k: [1, 33],\n    o: 2\n  },\n  penguin: {\n    a: \"Penguin\",\n    b: \"1F427\",\n    j: [\"animal\", \"nature\"],\n    k: [12, 11],\n    o: 2\n  },\n  hearts: {\n    a: \"Black Heart Suit\",\n    b: \"2665-FE0F\",\n    c: \"2665\",\n    j: [\"poker\", \"cards\", \"magic\", \"suits\"],\n    k: [53, 35],\n    o: 2\n  },\n  ramen: {\n    a: \"Steaming Bowl\",\n    b: \"1F35C\",\n    j: [\"food\", \"japanese\", \"noodle\", \"chopsticks\"],\n    k: [6, 52],\n    o: 2\n  },\n  sagittarius: {\n    a: \"Sagittarius\",\n    b: \"2650\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\"],\n    k: [53, 28],\n    o: 2\n  },\n  bald_woman: {\n    a: \"Bald Woman\",\n    b: \"1F469-200D-1F9B2\",\n    k: [19, 20],\n    o: 11\n  },\n  dove_of_peace: {\n    a: \"Dove of Peace\",\n    b: \"1F54A-FE0F\",\n    c: \"1F54A\",\n    k: [28, 34],\n    o: 2\n  },\n  hushed: {\n    a: \"Hushed Face\",\n    b: \"1F62F\",\n    j: [\"face\", \"woo\", \"shh\"],\n    k: [31, 25],\n    o: 2\n  },\n  metro: {\n    a: \"Metro\",\n    b: \"1F687\",\n    j: [\"transportation\", \"blue-square\", \"mrt\", \"underground\", \"tube\"],\n    k: [34, 6],\n    o: 2\n  },\n  \"flag-dj\": {\n    a: \"Djibouti Flag\",\n    b: \"1F1E9-1F1EF\",\n    k: [1, 34],\n    o: 2\n  },\n  drum_with_drumsticks: {\n    a: \"Drum with Drumsticks\",\n    b: \"1F941\",\n    k: [41, 17],\n    o: 4\n  },\n  spaghetti: {\n    a: \"Spaghetti\",\n    b: \"1F35D\",\n    j: [\"food\", \"italian\", \"noodle\"],\n    k: [6, 53],\n    o: 2\n  },\n  eagle: {\n    a: \"Eagle\",\n    b: \"1F985\",\n    j: [\"animal\", \"nature\", \"bird\"],\n    k: [42, 23],\n    o: 4\n  },\n  astonished: {\n    a: \"Astonished Face\",\n    b: \"1F632\",\n    j: [\"face\", \"xox\", \"surprised\", \"poisoned\"],\n    k: [31, 28],\n    o: 2\n  },\n  capricorn: {\n    a: \"Capricorn\",\n    b: \"2651\",\n    j: [\"sign\", \"zodiac\", \"purple-square\", \"astrology\"],\n    k: [53, 29],\n    o: 2\n  },\n  light_rail: {\n    a: \"Light Rail\",\n    b: \"1F688\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 7],\n    o: 2\n  },\n  \"flag-dk\": {\n    a: \"Denmark Flag\",\n    b: \"1F1E9-1F1F0\",\n    k: [1, 35],\n    o: 2\n  },\n  iphone: {\n    a: \"Mobile Phone\",\n    b: \"1F4F1\",\n    j: [\"technology\", \"apple\", \"gadgets\", \"dial\"],\n    k: [27, 14],\n    o: 2\n  },\n  diamonds: {\n    a: \"Black Diamond Suit\",\n    b: \"2666-FE0F\",\n    c: \"2666\",\n    j: [\"poker\", \"cards\", \"magic\", \"suits\"],\n    k: [53, 36],\n    o: 2\n  },\n  clubs: {\n    a: \"Black Club Suit\",\n    b: \"2663-FE0F\",\n    c: \"2663\",\n    j: [\"poker\", \"cards\", \"magic\", \"suits\"],\n    k: [53, 34],\n    o: 2\n  },\n  aquarius: {\n    a: \"Aquarius\",\n    b: \"2652\",\n    j: [\"sign\", \"purple-square\", \"zodiac\", \"astrology\"],\n    k: [53, 30],\n    o: 2\n  },\n  sweet_potato: {\n    a: \"Roasted Sweet Potato\",\n    b: \"1F360\",\n    j: [\"food\", \"nature\"],\n    k: [6, 56],\n    o: 2\n  },\n  \"flag-dm\": {\n    a: \"Dominica Flag\",\n    b: \"1F1E9-1F1F2\",\n    k: [1, 36],\n    o: 2\n  },\n  duck: {\n    a: \"Duck\",\n    b: \"1F986\",\n    j: [\"animal\", \"nature\", \"bird\", \"mallard\"],\n    k: [42, 24],\n    o: 4\n  },\n  calling: {\n    a: \"Mobile Phone with Rightwards Arrow at Left\",\n    b: \"1F4F2\",\n    j: [\"iphone\", \"incoming\"],\n    k: [27, 15],\n    o: 2\n  },\n  station: {\n    a: \"Station\",\n    b: \"1F689\",\n    j: [\"transportation\", \"vehicle\", \"public\"],\n    k: [34, 8],\n    o: 2\n  },\n  \"blond-haired-woman\": {\n    a: \"Blond Haired Woman\",\n    b: \"1F471-200D-2640-FE0F\",\n    c: \"1F471-200D-2640\",\n    k: [22, 7],\n    o: 4\n  },\n  flushed: {\n    a: \"Flushed Face\",\n    b: \"1F633\",\n    j: [\"face\", \"blush\", \"shy\", \"flattered\"],\n    k: [31, 29],\n    o: 2\n  },\n  pisces: {\n    a: \"Pisces\",\n    b: \"2653\",\n    j: [\"purple-square\", \"sign\", \"zodiac\", \"astrology\"],\n    k: [53, 31],\n    o: 2\n  },\n  chess_pawn: {\n    a: \"Chess Pawn\",\n    b: \"265F-FE0F\",\n    c: \"265F\",\n    k: [53, 32],\n    o: 11\n  },\n  \"blond-haired-man\": {\n    obsoletes: \"1F471\",\n    a: \"Blond Haired Man\",\n    b: \"1F471-200D-2642-FE0F\",\n    c: \"1F471-200D-2642\",\n    k: [22, 13],\n    o: 4\n  },\n  phone: {\n    a: \"Black Telephone\",\n    b: \"260E-FE0F\",\n    c: \"260E\",\n    j: [\"technology\", \"communication\", \"dial\", \"telephone\"],\n    k: [52, 54],\n    n: [\"telephone\"],\n    o: 2\n  },\n  oden: {\n    a: \"Oden\",\n    b: \"1F362\",\n    j: [\"food\", \"japanese\"],\n    k: [7, 1],\n    o: 2\n  },\n  \"flag-do\": {\n    a: \"Dominican Republic Flag\",\n    b: \"1F1E9-1F1F4\",\n    k: [1, 37],\n    o: 2\n  },\n  tram: {\n    a: \"Tram\",\n    b: \"1F68A\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 9],\n    o: 2\n  },\n  swan: {\n    a: \"Swan\",\n    b: \"1F9A2\",\n    k: [42, 52],\n    o: 11\n  },\n  pleading_face: {\n    a: \"Face with Pleading Eyes\",\n    b: \"1F97A\",\n    k: [42, 12],\n    o: 11\n  },\n  \"flag-dz\": {\n    a: \"Algeria Flag\",\n    b: \"1F1E9-1F1FF\",\n    k: [1, 38],\n    o: 2\n  },\n  monorail: {\n    a: \"Monorail\",\n    b: \"1F69D\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 28],\n    o: 2\n  },\n  owl: {\n    a: \"Owl\",\n    b: \"1F989\",\n    j: [\"animal\", \"nature\", \"bird\", \"hoot\"],\n    k: [42, 27],\n    o: 4\n  },\n  sushi: {\n    a: \"Sushi\",\n    b: \"1F363\",\n    j: [\"food\", \"fish\", \"japanese\", \"rice\"],\n    k: [7, 2],\n    o: 2\n  },\n  telephone_receiver: {\n    a: \"Telephone Receiver\",\n    b: \"1F4DE\",\n    j: [\"technology\", \"communication\", \"dial\"],\n    k: [26, 52],\n    o: 2\n  },\n  black_joker: {\n    a: \"Playing Card Black Joker\",\n    b: \"1F0CF\",\n    j: [\"poker\", \"cards\", \"game\", \"play\", \"magic\"],\n    k: [0, 15],\n    o: 2\n  },\n  ophiuchus: {\n    a: \"Ophiuchus\",\n    b: \"26CE\",\n    j: [\"sign\", \"purple-square\", \"constellation\", \"astrology\"],\n    k: [54, 4],\n    o: 2\n  },\n  frowning: {\n    a: \"Frowning Face with Open Mouth\",\n    b: \"1F626\",\n    j: [\"face\", \"aw\", \"what\"],\n    k: [31, 16],\n    o: 2\n  },\n  older_adult: {\n    a: \"Older Adult\",\n    b: \"1F9D3\",\n    k: [48, 22],\n    o: 5\n  },\n  \"flag-ea\": {\n    a: \"Ceuta & Melilla Flag\",\n    b: \"1F1EA-1F1E6\",\n    k: [1, 39],\n    o: 2\n  },\n  flamingo: {\n    a: \"Flamingo\",\n    b: \"1F9A9\",\n    k: [43, 0],\n    o: 12\n  },\n  pager: {\n    a: \"Pager\",\n    b: \"1F4DF\",\n    j: [\"bbcall\", \"oldschool\", \"90s\"],\n    k: [26, 53],\n    o: 2\n  },\n  mountain_railway: {\n    a: \"Mountain Railway\",\n    b: \"1F69E\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 29],\n    o: 2\n  },\n  mahjong: {\n    a: \"Mahjong Tile Red Dragon\",\n    b: \"1F004\",\n    j: [\"game\", \"play\", \"chinese\", \"kanji\"],\n    k: [0, 14],\n    o: 2\n  },\n  older_man: {\n    a: \"Older Man\",\n    b: \"1F474\",\n    j: [\"human\", \"male\", \"men\", \"old\", \"elder\", \"senior\"],\n    k: [22, 49],\n    o: 2\n  },\n  twisted_rightwards_arrows: {\n    a: \"Twisted Rightwards Arrows\",\n    b: \"1F500\",\n    j: [\"blue-square\", \"shuffle\", \"music\", \"random\"],\n    k: [27, 28],\n    o: 2\n  },\n  fried_shrimp: {\n    a: \"Fried Shrimp\",\n    b: \"1F364\",\n    j: [\"food\", \"animal\", \"appetizer\", \"summer\"],\n    k: [7, 3],\n    o: 2\n  },\n  anguished: {\n    a: \"Anguished Face\",\n    b: \"1F627\",\n    j: [\"face\", \"stunned\", \"nervous\"],\n    k: [31, 17],\n    l: [\"D:\"],\n    o: 2\n  },\n  repeat: {\n    a: \"Clockwise Rightwards and Leftwards Open Circle Arrows\",\n    b: \"1F501\",\n    j: [\"loop\", \"record\"],\n    k: [27, 29],\n    o: 2\n  },\n  fish_cake: {\n    a: \"Fish Cake with Swirl Design\",\n    b: \"1F365\",\n    j: [\"food\", \"japan\", \"sea\", \"beach\", \"narutomaki\", \"pink\", \"swirl\", \"kamaboko\", \"surimi\", \"ramen\"],\n    k: [7, 4],\n    o: 2\n  },\n  fax: {\n    a: \"Fax Machine\",\n    b: \"1F4E0\",\n    j: [\"communication\", \"technology\"],\n    k: [26, 54],\n    o: 2\n  },\n  older_woman: {\n    a: \"Older Woman\",\n    b: \"1F475\",\n    j: [\"human\", \"female\", \"women\", \"lady\", \"old\", \"elder\", \"senior\"],\n    k: [22, 55],\n    o: 2\n  },\n  \"flag-ec\": {\n    a: \"Ecuador Flag\",\n    b: \"1F1EA-1F1E8\",\n    k: [1, 40],\n    o: 2\n  },\n  peacock: {\n    a: \"Peacock\",\n    b: \"1F99A\",\n    k: [42, 44],\n    o: 11\n  },\n  fearful: {\n    a: \"Fearful Face\",\n    b: \"1F628\",\n    j: [\"face\", \"scared\", \"terrified\", \"nervous\", \"oops\", \"huh\"],\n    k: [31, 18],\n    o: 2\n  },\n  train: {\n    a: \"Tram Car\",\n    b: \"1F68B\",\n    j: [\"transportation\", \"vehicle\", \"carriage\", \"public\", \"travel\"],\n    k: [34, 10],\n    o: 2\n  },\n  flower_playing_cards: {\n    a: \"Flower Playing Cards\",\n    b: \"1F3B4\",\n    j: [\"game\", \"sunset\", \"red\"],\n    k: [8, 26],\n    o: 2\n  },\n  repeat_one: {\n    a: \"Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay\",\n    b: \"1F502\",\n    j: [\"blue-square\", \"loop\"],\n    k: [27, 30],\n    o: 2\n  },\n  moon_cake: {\n    a: \"Moon Cake\",\n    b: \"1F96E\",\n    k: [42, 4],\n    o: 11\n  },\n  performing_arts: {\n    a: \"Performing Arts\",\n    b: \"1F3AD\",\n    j: [\"acting\", \"theater\", \"drama\"],\n    k: [8, 19],\n    o: 2\n  },\n  cold_sweat: {\n    a: \"Face with Open Mouth and Cold Sweat\",\n    b: \"1F630\",\n    j: [\"face\", \"nervous\", \"sweat\"],\n    k: [31, 26],\n    o: 2\n  },\n  \"flag-ee\": {\n    a: \"Estonia Flag\",\n    b: \"1F1EA-1F1EA\",\n    k: [1, 41],\n    o: 2\n  },\n  battery: {\n    a: \"Battery\",\n    b: \"1F50B\",\n    j: [\"power\", \"energy\", \"sustain\"],\n    k: [27, 39],\n    o: 2\n  },\n  parrot: {\n    a: \"Parrot\",\n    b: \"1F99C\",\n    k: [42, 46],\n    o: 11\n  },\n  bus: {\n    a: \"Bus\",\n    b: \"1F68C\",\n    j: [\"car\", \"vehicle\", \"transportation\"],\n    k: [34, 11],\n    o: 2\n  },\n  \"flag-eg\": {\n    a: \"Egypt Flag\",\n    b: \"1F1EA-1F1EC\",\n    k: [1, 42],\n    o: 2\n  },\n  arrow_forward: {\n    a: \"Black Right-Pointing Triangle\",\n    b: \"25B6-FE0F\",\n    c: \"25B6\",\n    j: [\"blue-square\", \"right\", \"direction\", \"play\"],\n    k: [52, 43],\n    o: 2\n  },\n  \"man-frowning\": {\n    a: \"Man Frowning\",\n    b: \"1F64D-200D-2642-FE0F\",\n    c: \"1F64D-200D-2642\",\n    k: [33, 20],\n    o: 4\n  },\n  disappointed_relieved: {\n    a: \"Disappointed but Relieved Face\",\n    b: \"1F625\",\n    j: [\"face\", \"phew\", \"sweat\", \"nervous\"],\n    k: [31, 15],\n    o: 2\n  },\n  electric_plug: {\n    a: \"Electric Plug\",\n    b: \"1F50C\",\n    j: [\"charger\", \"power\"],\n    k: [27, 40],\n    o: 2\n  },\n  frame_with_picture: {\n    a: \"Frame with Picture\",\n    b: \"1F5BC-FE0F\",\n    c: \"1F5BC\",\n    k: [30, 14],\n    o: 2\n  },\n  oncoming_bus: {\n    a: \"Oncoming Bus\",\n    b: \"1F68D\",\n    j: [\"vehicle\", \"transportation\"],\n    k: [34, 12],\n    o: 2\n  },\n  dango: {\n    a: \"Dango\",\n    b: \"1F361\",\n    j: [\"food\", \"dessert\", \"sweet\", \"japanese\", \"barbecue\", \"meat\"],\n    k: [7, 0],\n    o: 2\n  },\n  frog: {\n    a: \"Frog Face\",\n    b: \"1F438\",\n    j: [\"animal\", \"nature\", \"croak\", \"toad\"],\n    k: [12, 28],\n    o: 2\n  },\n  computer: {\n    a: \"Personal Computer\",\n    b: \"1F4BB\",\n    j: [\"technology\", \"laptop\", \"screen\", \"display\", \"monitor\"],\n    k: [26, 17],\n    o: 2\n  },\n  art: {\n    a: \"Artist Palette\",\n    b: \"1F3A8\",\n    j: [\"design\", \"paint\", \"draw\", \"colors\"],\n    k: [8, 14],\n    o: 2\n  },\n  \"flag-eh\": {\n    a: \"Western Sahara Flag\",\n    b: \"1F1EA-1F1ED\",\n    k: [1, 43],\n    o: 2\n  },\n  fast_forward: {\n    a: \"Black Right-Pointing Double Triangle\",\n    b: \"23E9\",\n    j: [\"blue-square\", \"play\", \"speed\", \"continue\"],\n    k: [52, 26],\n    o: 2\n  },\n  cry: {\n    a: \"Crying Face\",\n    b: \"1F622\",\n    j: [\"face\", \"tears\", \"sad\", \"depressed\", \"upset\", \":'(\"],\n    k: [31, 12],\n    l: [\":'(\"],\n    m: \":'(\",\n    o: 2\n  },\n  \"woman-frowning\": {\n    obsoletes: \"1F64D\",\n    a: \"Woman Frowning\",\n    b: \"1F64D-200D-2640-FE0F\",\n    c: \"1F64D-200D-2640\",\n    k: [33, 14],\n    o: 4\n  },\n  trolleybus: {\n    a: \"Trolleybus\",\n    b: \"1F68E\",\n    j: [\"bart\", \"transportation\", \"vehicle\"],\n    k: [34, 13],\n    o: 2\n  },\n  crocodile: {\n    a: \"Crocodile\",\n    b: \"1F40A\",\n    j: [\"animal\", \"nature\", \"reptile\", \"lizard\", \"alligator\"],\n    k: [11, 38],\n    o: 2\n  },\n  dumpling: {\n    a: \"Dumpling\",\n    b: \"1F95F\",\n    k: [41, 46],\n    o: 5\n  },\n  black_right_pointing_double_triangle_with_vertical_bar: {\n    a: \"Black Right Pointing Double Triangle with Vertical Bar\",\n    b: \"23ED-FE0F\",\n    c: \"23ED\",\n    k: [52, 30],\n    o: 2\n  },\n  desktop_computer: {\n    a: \"Desktop Computer\",\n    b: \"1F5A5-FE0F\",\n    c: \"1F5A5\",\n    j: [\"technology\", \"computing\", \"screen\"],\n    k: [30, 10],\n    o: 2\n  },\n  turtle: {\n    a: \"Turtle\",\n    b: \"1F422\",\n    j: [\"animal\", \"slow\", \"nature\", \"tortoise\"],\n    k: [12, 6],\n    o: 2\n  },\n  sob: {\n    a: \"Loudly Crying Face\",\n    b: \"1F62D\",\n    j: [\"face\", \"cry\", \"tears\", \"sad\", \"upset\", \"depressed\"],\n    k: [31, 23],\n    m: \":'(\",\n    o: 2\n  },\n  \"flag-er\": {\n    a: \"Eritrea Flag\",\n    b: \"1F1EA-1F1F7\",\n    k: [1, 44],\n    o: 2\n  },\n  thread: {\n    a: \"Spool of Thread\",\n    b: \"1F9F5\",\n    k: [51, 40],\n    o: 11\n  },\n  minibus: {\n    a: \"Minibus\",\n    b: \"1F690\",\n    j: [\"vehicle\", \"car\", \"transportation\"],\n    k: [34, 15],\n    o: 2\n  },\n  fortune_cookie: {\n    a: \"Fortune Cookie\",\n    b: \"1F960\",\n    k: [41, 47],\n    o: 5\n  },\n  yarn: {\n    a: \"Ball of Yarn\",\n    b: \"1F9F6\",\n    k: [51, 41],\n    o: 11\n  },\n  takeout_box: {\n    a: \"Takeout Box\",\n    b: \"1F961\",\n    k: [41, 48],\n    o: 5\n  },\n  \"man-pouting\": {\n    a: \"Man Pouting\",\n    b: \"1F64E-200D-2642-FE0F\",\n    c: \"1F64E-200D-2642\",\n    k: [33, 38],\n    o: 4\n  },\n  printer: {\n    a: \"Printer\",\n    b: \"1F5A8-FE0F\",\n    c: \"1F5A8\",\n    j: [\"paper\", \"ink\"],\n    k: [30, 11],\n    o: 2\n  },\n  scream: {\n    a: \"Face Screaming in Fear\",\n    b: \"1F631\",\n    j: [\"face\", \"munch\", \"scared\", \"omg\"],\n    k: [31, 27],\n    o: 2\n  },\n  es: {\n    a: \"Spain Flag\",\n    b: \"1F1EA-1F1F8\",\n    j: [\"spain\", \"flag\", \"nation\", \"country\", \"banner\"],\n    k: [1, 45],\n    n: [\"flag-es\"],\n    o: 2\n  },\n  ambulance: {\n    a: \"Ambulance\",\n    b: \"1F691\",\n    j: [\"health\", \"911\", \"hospital\"],\n    k: [34, 16],\n    o: 2\n  },\n  black_right_pointing_triangle_with_double_vertical_bar: {\n    a: \"Black Right Pointing Triangle with Double Vertical Bar\",\n    b: \"23EF-FE0F\",\n    c: \"23EF\",\n    k: [52, 32],\n    o: 2\n  },\n  lizard: {\n    a: \"Lizard\",\n    b: \"1F98E\",\n    j: [\"animal\", \"nature\", \"reptile\"],\n    k: [42, 32],\n    o: 4\n  },\n  \"flag-et\": {\n    a: \"Ethiopia Flag\",\n    b: \"1F1EA-1F1F9\",\n    k: [1, 46],\n    o: 2\n  },\n  keyboard: {\n    a: \"Keyboard\",\n    b: \"2328-FE0F\",\n    c: \"2328\",\n    j: [\"technology\", \"computer\", \"type\", \"input\", \"text\"],\n    k: [52, 24],\n    o: 2\n  },\n  crab: {\n    a: \"Crab\",\n    b: \"1F980\",\n    j: [\"animal\", \"crustacean\"],\n    k: [42, 18],\n    o: 2\n  },\n  confounded: {\n    a: \"Confounded Face\",\n    b: \"1F616\",\n    j: [\"face\", \"confused\", \"sick\", \"unwell\", \"oops\", \":S\"],\n    k: [31, 0],\n    o: 2\n  },\n  snake: {\n    a: \"Snake\",\n    b: \"1F40D\",\n    j: [\"animal\", \"evil\", \"nature\", \"hiss\", \"python\"],\n    k: [11, 41],\n    o: 2\n  },\n  \"woman-pouting\": {\n    obsoletes: \"1F64E\",\n    a: \"Woman Pouting\",\n    b: \"1F64E-200D-2640-FE0F\",\n    c: \"1F64E-200D-2640\",\n    k: [33, 32],\n    o: 4\n  },\n  arrow_backward: {\n    a: \"Black Left-Pointing Triangle\",\n    b: \"25C0-FE0F\",\n    c: \"25C0\",\n    j: [\"blue-square\", \"left\", \"direction\"],\n    k: [52, 44],\n    o: 2\n  },\n  fire_engine: {\n    a: \"Fire Engine\",\n    b: \"1F692\",\n    j: [\"transportation\", \"cars\", \"vehicle\"],\n    k: [34, 17],\n    o: 2\n  },\n  rewind: {\n    a: \"Black Left-Pointing Double Triangle\",\n    b: \"23EA\",\n    j: [\"play\", \"blue-square\"],\n    k: [52, 27],\n    o: 2\n  },\n  three_button_mouse: {\n    a: \"Three Button Mouse\",\n    b: \"1F5B1-FE0F\",\n    c: \"1F5B1\",\n    k: [30, 12],\n    o: 2\n  },\n  police_car: {\n    a: \"Police Car\",\n    b: \"1F693\",\n    j: [\"vehicle\", \"cars\", \"transportation\", \"law\", \"legal\", \"enforcement\"],\n    k: [34, 18],\n    o: 2\n  },\n  dragon_face: {\n    a: \"Dragon Face\",\n    b: \"1F432\",\n    j: [\"animal\", \"myth\", \"nature\", \"chinese\", \"green\"],\n    k: [12, 22],\n    o: 2\n  },\n  persevere: {\n    a: \"Persevering Face\",\n    b: \"1F623\",\n    j: [\"face\", \"sick\", \"no\", \"upset\", \"oops\"],\n    k: [31, 13],\n    o: 2\n  },\n  lobster: {\n    a: \"Lobster\",\n    b: \"1F99E\",\n    k: [42, 48],\n    o: 11\n  },\n  \"flag-eu\": {\n    a: \"European Union Flag\",\n    b: \"1F1EA-1F1FA\",\n    k: [1, 47],\n    o: 2\n  },\n  disappointed: {\n    a: \"Disappointed Face\",\n    b: \"1F61E\",\n    j: [\"face\", \"sad\", \"upset\", \"depressed\", \":(\"],\n    k: [31, 8],\n    l: [\"):\", \":(\", \":-(\"],\n    m: \":(\",\n    o: 2\n  },\n  shrimp: {\n    a: \"Shrimp\",\n    b: \"1F990\",\n    j: [\"animal\", \"ocean\", \"nature\", \"seafood\"],\n    k: [42, 34],\n    o: 4\n  },\n  dragon: {\n    a: \"Dragon\",\n    b: \"1F409\",\n    j: [\"animal\", \"myth\", \"nature\", \"chinese\", \"green\"],\n    k: [11, 37],\n    o: 2\n  },\n  \"man-gesturing-no\": {\n    a: \"Man Gesturing No\",\n    b: \"1F645-200D-2642-FE0F\",\n    c: \"1F645-200D-2642\",\n    k: [31, 53],\n    o: 4\n  },\n  \"flag-fi\": {\n    a: \"Finland Flag\",\n    b: \"1F1EB-1F1EE\",\n    k: [1, 48],\n    o: 2\n  },\n  trackball: {\n    a: \"Trackball\",\n    b: \"1F5B2-FE0F\",\n    c: \"1F5B2\",\n    j: [\"technology\", \"trackpad\"],\n    k: [30, 13],\n    o: 2\n  },\n  black_left_pointing_double_triangle_with_vertical_bar: {\n    a: \"Black Left Pointing Double Triangle with Vertical Bar\",\n    b: \"23EE-FE0F\",\n    c: \"23EE\",\n    k: [52, 31],\n    o: 2\n  },\n  oncoming_police_car: {\n    a: \"Oncoming Police Car\",\n    b: \"1F694\",\n    j: [\"vehicle\", \"law\", \"legal\", \"enforcement\", \"911\"],\n    k: [34, 19],\n    o: 2\n  },\n  minidisc: {\n    a: \"Minidisc\",\n    b: \"1F4BD\",\n    j: [\"technology\", \"record\", \"data\", \"disk\", \"90s\"],\n    k: [26, 19],\n    o: 2\n  },\n  sweat: {\n    a: \"Face with Cold Sweat\",\n    b: \"1F613\",\n    j: [\"face\", \"hot\", \"sad\", \"tired\", \"exercise\"],\n    k: [30, 54],\n    o: 2\n  },\n  squid: {\n    a: \"Squid\",\n    b: \"1F991\",\n    j: [\"animal\", \"nature\", \"ocean\", \"sea\"],\n    k: [42, 35],\n    o: 4\n  },\n  sauropod: {\n    a: \"Sauropod\",\n    b: \"1F995\",\n    k: [42, 39],\n    o: 5\n  },\n  arrow_up_small: {\n    a: \"Up-Pointing Small Red Triangle\",\n    b: \"1F53C\",\n    j: [\"blue-square\", \"triangle\", \"direction\", \"point\", \"forward\", \"top\"],\n    k: [28, 31],\n    o: 2\n  },\n  \"flag-fj\": {\n    a: \"Fiji Flag\",\n    b: \"1F1EB-1F1EF\",\n    k: [1, 49],\n    o: 2\n  },\n  \"woman-gesturing-no\": {\n    obsoletes: \"1F645\",\n    a: \"Woman Gesturing No\",\n    b: \"1F645-200D-2640-FE0F\",\n    c: \"1F645-200D-2640\",\n    k: [31, 47],\n    o: 4\n  },\n  taxi: {\n    a: \"Taxi\",\n    b: \"1F695\",\n    j: [\"uber\", \"vehicle\", \"cars\", \"transportation\"],\n    k: [34, 20],\n    o: 2\n  },\n  \"flag-fk\": {\n    a: \"Falkland Islands Flag\",\n    b: \"1F1EB-1F1F0\",\n    k: [1, 50],\n    o: 2\n  },\n  floppy_disk: {\n    a: \"Floppy Disk\",\n    b: \"1F4BE\",\n    j: [\"oldschool\", \"technology\", \"save\", \"90s\", \"80s\"],\n    k: [26, 20],\n    o: 2\n  },\n  \"t-rex\": {\n    a: \"T-Rex\",\n    b: \"1F996\",\n    k: [42, 40],\n    o: 5\n  },\n  oyster: {\n    a: \"Oyster\",\n    b: \"1F9AA\",\n    k: [43, 1],\n    o: 12\n  },\n  arrow_double_up: {\n    a: \"Black Up-Pointing Double Triangle\",\n    b: \"23EB\",\n    j: [\"blue-square\", \"direction\", \"top\"],\n    k: [52, 28],\n    o: 2\n  },\n  oncoming_taxi: {\n    a: \"Oncoming Taxi\",\n    b: \"1F696\",\n    j: [\"vehicle\", \"cars\", \"uber\"],\n    k: [34, 21],\n    o: 2\n  },\n  weary: {\n    a: \"Weary Face\",\n    b: \"1F629\",\n    j: [\"face\", \"tired\", \"sleepy\", \"sad\", \"frustrated\", \"upset\"],\n    k: [31, 19],\n    o: 2\n  },\n  \"man-gesturing-ok\": {\n    a: \"Man Gesturing Ok\",\n    b: \"1F646-200D-2642-FE0F\",\n    c: \"1F646-200D-2642\",\n    k: [32, 14],\n    o: 4\n  },\n  arrow_down_small: {\n    a: \"Down-Pointing Small Red Triangle\",\n    b: \"1F53D\",\n    j: [\"blue-square\", \"direction\", \"bottom\"],\n    k: [28, 32],\n    o: 2\n  },\n  tired_face: {\n    a: \"Tired Face\",\n    b: \"1F62B\",\n    j: [\"sick\", \"whine\", \"upset\", \"frustrated\"],\n    k: [31, 21],\n    o: 2\n  },\n  car: {\n    a: \"Automobile\",\n    b: \"1F697\",\n    k: [34, 22],\n    n: [\"red_car\"],\n    o: 2\n  },\n  icecream: {\n    a: \"Soft Ice Cream\",\n    b: \"1F366\",\n    j: [\"food\", \"hot\", \"dessert\", \"summer\"],\n    k: [7, 5],\n    o: 2\n  },\n  cd: {\n    a: \"Optical Disc\",\n    b: \"1F4BF\",\n    j: [\"technology\", \"dvd\", \"disk\", \"disc\", \"90s\"],\n    k: [26, 21],\n    o: 2\n  },\n  whale: {\n    a: \"Spouting Whale\",\n    b: \"1F433\",\n    j: [\"animal\", \"nature\", \"sea\", \"ocean\"],\n    k: [12, 23],\n    o: 2\n  },\n  \"flag-fm\": {\n    a: \"Micronesia Flag\",\n    b: \"1F1EB-1F1F2\",\n    k: [1, 51],\n    o: 2\n  },\n  oncoming_automobile: {\n    a: \"Oncoming Automobile\",\n    b: \"1F698\",\n    j: [\"car\", \"vehicle\", \"transportation\"],\n    k: [34, 23],\n    o: 2\n  },\n  arrow_double_down: {\n    a: \"Black Down-Pointing Double Triangle\",\n    b: \"23EC\",\n    j: [\"blue-square\", \"direction\", \"bottom\"],\n    k: [52, 29],\n    o: 2\n  },\n  \"woman-gesturing-ok\": {\n    obsoletes: \"1F646\",\n    a: \"Woman Gesturing Ok\",\n    b: \"1F646-200D-2640-FE0F\",\n    c: \"1F646-200D-2640\",\n    k: [32, 8],\n    o: 4\n  },\n  yawning_face: {\n    a: \"Yawning Face\",\n    b: \"1F971\",\n    k: [42, 7],\n    o: 12\n  },\n  dvd: {\n    a: \"Dvd\",\n    b: \"1F4C0\",\n    j: [\"cd\", \"disk\", \"disc\"],\n    k: [26, 22],\n    o: 2\n  },\n  whale2: {\n    a: \"Whale\",\n    b: \"1F40B\",\n    j: [\"animal\", \"nature\", \"sea\", \"ocean\"],\n    k: [11, 39],\n    o: 2\n  },\n  \"flag-fo\": {\n    a: \"Faroe Islands Flag\",\n    b: \"1F1EB-1F1F4\",\n    k: [1, 52],\n    o: 2\n  },\n  shaved_ice: {\n    a: \"Shaved Ice\",\n    b: \"1F367\",\n    j: [\"hot\", \"dessert\", \"summer\"],\n    k: [7, 6],\n    o: 2\n  },\n  double_vertical_bar: {\n    a: \"Double Vertical Bar\",\n    b: \"23F8-FE0F\",\n    c: \"23F8\",\n    k: [52, 37],\n    o: 2\n  },\n  dolphin: {\n    a: \"Dolphin\",\n    b: \"1F42C\",\n    j: [\"animal\", \"nature\", \"fish\", \"sea\", \"ocean\", \"flipper\", \"fins\", \"beach\"],\n    k: [12, 16],\n    n: [\"flipper\"],\n    o: 2\n  },\n  blue_car: {\n    a: \"Recreational Vehicle\",\n    b: \"1F699\",\n    j: [\"transportation\", \"vehicle\"],\n    k: [34, 24],\n    o: 2\n  },\n  ice_cream: {\n    a: \"Ice Cream\",\n    b: \"1F368\",\n    j: [\"food\", \"hot\", \"dessert\"],\n    k: [7, 7],\n    o: 2\n  },\n  fr: {\n    a: \"France Flag\",\n    b: \"1F1EB-1F1F7\",\n    j: [\"banner\", \"flag\", \"nation\", \"france\", \"french\", \"country\"],\n    k: [1, 53],\n    n: [\"flag-fr\"],\n    o: 2\n  },\n  triumph: {\n    a: \"Face with Look of Triumph\",\n    b: \"1F624\",\n    j: [\"face\", \"gas\", \"phew\", \"proud\", \"pride\"],\n    k: [31, 14],\n    o: 2\n  },\n  abacus: {\n    a: \"Abacus\",\n    b: \"1F9EE\",\n    k: [51, 33],\n    o: 11\n  },\n  \"man-tipping-hand\": {\n    a: \"Man Tipping Hand\",\n    b: \"1F481-200D-2642-FE0F\",\n    c: \"1F481-200D-2642\",\n    k: [23, 53],\n    o: 4\n  },\n  doughnut: {\n    a: \"Doughnut\",\n    b: \"1F369\",\n    j: [\"food\", \"dessert\", \"snack\", \"sweet\", \"donut\"],\n    k: [7, 8],\n    o: 2\n  },\n  fish: {\n    a: \"Fish\",\n    b: \"1F41F\",\n    j: [\"animal\", \"food\", \"nature\"],\n    k: [12, 3],\n    o: 2\n  },\n  truck: {\n    a: \"Delivery Truck\",\n    b: \"1F69A\",\n    j: [\"cars\", \"transportation\"],\n    k: [34, 25],\n    o: 2\n  },\n  movie_camera: {\n    a: \"Movie Camera\",\n    b: \"1F3A5\",\n    j: [\"film\", \"record\"],\n    k: [8, 11],\n    o: 2\n  },\n  \"flag-ga\": {\n    a: \"Gabon Flag\",\n    b: \"1F1EC-1F1E6\",\n    k: [1, 54],\n    o: 2\n  },\n  rage: {\n    a: \"Pouting Face\",\n    b: \"1F621\",\n    j: [\"angry\", \"mad\", \"hate\", \"despise\"],\n    k: [31, 11],\n    o: 2\n  },\n  black_square_for_stop: {\n    a: \"Black Square for Stop\",\n    b: \"23F9-FE0F\",\n    c: \"23F9\",\n    k: [52, 38],\n    o: 2\n  },\n  articulated_lorry: {\n    a: \"Articulated Lorry\",\n    b: \"1F69B\",\n    j: [\"vehicle\", \"cars\", \"transportation\", \"express\"],\n    k: [34, 26],\n    o: 2\n  },\n  angry: {\n    a: \"Angry Face\",\n    b: \"1F620\",\n    j: [\"mad\", \"face\", \"annoyed\", \"frustrated\"],\n    k: [31, 10],\n    l: [\">:(\", \">:-(\"],\n    o: 2\n  },\n  cookie: {\n    a: \"Cookie\",\n    b: \"1F36A\",\n    j: [\"food\", \"snack\", \"oreo\", \"chocolate\", \"sweet\", \"dessert\"],\n    k: [7, 9],\n    o: 2\n  },\n  gb: {\n    a: \"United Kingdom Flag\",\n    b: \"1F1EC-1F1E7\",\n    k: [1, 55],\n    n: [\"uk\", \"flag-gb\"],\n    o: 2\n  },\n  tropical_fish: {\n    a: \"Tropical Fish\",\n    b: \"1F420\",\n    j: [\"animal\", \"swim\", \"ocean\", \"beach\", \"nemo\"],\n    k: [12, 4],\n    o: 2\n  },\n  \"woman-tipping-hand\": {\n    obsoletes: \"1F481\",\n    a: \"Woman Tipping Hand\",\n    b: \"1F481-200D-2640-FE0F\",\n    c: \"1F481-200D-2640\",\n    k: [23, 47],\n    o: 4\n  },\n  black_circle_for_record: {\n    a: \"Black Circle for Record\",\n    b: \"23FA-FE0F\",\n    c: \"23FA\",\n    k: [52, 39],\n    o: 2\n  },\n  film_frames: {\n    a: \"Film Frames\",\n    b: \"1F39E-FE0F\",\n    c: \"1F39E\",\n    k: [8, 4],\n    o: 2\n  },\n  film_projector: {\n    a: \"Film Projector\",\n    b: \"1F4FD-FE0F\",\n    c: \"1F4FD\",\n    j: [\"video\", \"tape\", \"record\", \"movie\"],\n    k: [27, 26],\n    o: 2\n  },\n  \"flag-gd\": {\n    a: \"Grenada Flag\",\n    b: \"1F1EC-1F1E9\",\n    k: [1, 56],\n    o: 2\n  },\n  blowfish: {\n    a: \"Blowfish\",\n    b: \"1F421\",\n    j: [\"animal\", \"nature\", \"food\", \"sea\", \"ocean\"],\n    k: [12, 5],\n    o: 2\n  },\n  face_with_symbols_on_mouth: {\n    a: \"Serious Face with Symbols Covering Mouth\",\n    b: \"1F92C\",\n    k: [38, 46],\n    n: [\"serious_face_with_symbols_covering_mouth\"],\n    o: 5\n  },\n  birthday: {\n    a: \"Birthday Cake\",\n    b: \"1F382\",\n    j: [\"food\", \"dessert\", \"cake\"],\n    k: [7, 33],\n    o: 2\n  },\n  eject: {\n    a: \"Eject\",\n    b: \"23CF-FE0F\",\n    c: \"23CF\",\n    k: [52, 25],\n    o: 2\n  },\n  tractor: {\n    a: \"Tractor\",\n    b: \"1F69C\",\n    j: [\"vehicle\", \"car\", \"farming\", \"agriculture\"],\n    k: [34, 27],\n    o: 2\n  },\n  \"flag-ge\": {\n    a: \"Georgia Flag\",\n    b: \"1F1EC-1F1EA\",\n    k: [2, 0],\n    o: 2\n  },\n  smiling_imp: {\n    a: \"Smiling Face with Horns\",\n    b: \"1F608\",\n    j: [\"devil\", \"horns\"],\n    k: [30, 43],\n    o: 2\n  },\n  racing_car: {\n    a: \"Racing Car\",\n    b: \"1F3CE-FE0F\",\n    c: \"1F3CE\",\n    j: [\"sports\", \"race\", \"fast\", \"formula\", \"f1\"],\n    k: [10, 33],\n    o: 2\n  },\n  cinema: {\n    a: \"Cinema\",\n    b: \"1F3A6\",\n    j: [\"blue-square\", \"record\", \"film\", \"movie\", \"curtain\", \"stage\", \"theater\"],\n    k: [8, 12],\n    o: 2\n  },\n  clapper: {\n    a: \"Clapper Board\",\n    b: \"1F3AC\",\n    j: [\"movie\", \"film\", \"record\"],\n    k: [8, 18],\n    o: 2\n  },\n  shark: {\n    a: \"Shark\",\n    b: \"1F988\",\n    j: [\"animal\", \"nature\", \"fish\", \"sea\", \"ocean\", \"jaws\", \"fins\", \"beach\"],\n    k: [42, 26],\n    o: 4\n  },\n  cake: {\n    a: \"Shortcake\",\n    b: \"1F370\",\n    j: [\"food\", \"dessert\"],\n    k: [7, 15],\n    o: 2\n  },\n  \"man-raising-hand\": {\n    a: \"Man Raising Hand\",\n    b: \"1F64B-200D-2642-FE0F\",\n    c: \"1F64B-200D-2642\",\n    k: [32, 53],\n    o: 4\n  },\n  octopus: {\n    a: \"Octopus\",\n    b: \"1F419\",\n    j: [\"animal\", \"creature\", \"ocean\", \"sea\", \"nature\", \"beach\"],\n    k: [11, 54],\n    o: 2\n  },\n  \"woman-raising-hand\": {\n    obsoletes: \"1F64B\",\n    a: \"Woman Raising Hand\",\n    b: \"1F64B-200D-2640-FE0F\",\n    c: \"1F64B-200D-2640\",\n    k: [32, 47],\n    o: 4\n  },\n  \"flag-gf\": {\n    a: \"French Guiana Flag\",\n    b: \"1F1EC-1F1EB\",\n    k: [2, 1],\n    o: 2\n  },\n  tv: {\n    a: \"Television\",\n    b: \"1F4FA\",\n    j: [\"technology\", \"program\", \"oldschool\", \"show\", \"television\"],\n    k: [27, 23],\n    o: 2\n  },\n  imp: {\n    a: \"Imp\",\n    b: \"1F47F\",\n    j: [\"devil\", \"angry\", \"horns\"],\n    k: [23, 45],\n    o: 2\n  },\n  cupcake: {\n    a: \"Cupcake\",\n    b: \"1F9C1\",\n    k: [44, 9],\n    o: 11\n  },\n  racing_motorcycle: {\n    a: \"Racing Motorcycle\",\n    b: \"1F3CD-FE0F\",\n    c: \"1F3CD\",\n    k: [10, 32],\n    o: 2\n  },\n  low_brightness: {\n    a: \"Low Brightness Symbol\",\n    b: \"1F505\",\n    j: [\"sun\", \"afternoon\", \"warm\", \"summer\"],\n    k: [27, 33],\n    o: 2\n  },\n  shell: {\n    a: \"Spiral Shell\",\n    b: \"1F41A\",\n    j: [\"nature\", \"sea\", \"beach\"],\n    k: [11, 55],\n    o: 2\n  },\n  \"flag-gg\": {\n    a: \"Guernsey Flag\",\n    b: \"1F1EC-1F1EC\",\n    k: [2, 2],\n    o: 2\n  },\n  high_brightness: {\n    a: \"High Brightness Symbol\",\n    b: \"1F506\",\n    j: [\"sun\", \"light\"],\n    k: [27, 34],\n    o: 2\n  },\n  deaf_person: {\n    a: \"Deaf Person\",\n    b: \"1F9CF\",\n    k: [45, 10],\n    o: 12\n  },\n  skull: {\n    a: \"Skull\",\n    b: \"1F480\",\n    j: [\"dead\", \"skeleton\", \"creepy\", \"death\"],\n    k: [23, 46],\n    o: 2\n  },\n  motor_scooter: {\n    a: \"Motor Scooter\",\n    b: \"1F6F5\",\n    j: [\"vehicle\", \"vespa\", \"sasha\"],\n    k: [36, 54],\n    o: 4\n  },\n  camera: {\n    a: \"Camera\",\n    b: \"1F4F7\",\n    j: [\"gadgets\", \"photography\"],\n    k: [27, 20],\n    o: 2\n  },\n  pie: {\n    a: \"Pie\",\n    b: \"1F967\",\n    k: [41, 54],\n    o: 5\n  },\n  \"flag-gh\": {\n    a: \"Ghana Flag\",\n    b: \"1F1EC-1F1ED\",\n    k: [2, 3],\n    o: 2\n  },\n  deaf_man: {\n    a: \"Deaf Man\",\n    b: \"1F9CF-200D-2642-FE0F\",\n    c: \"1F9CF-200D-2642\",\n    k: [45, 4],\n    o: 12\n  },\n  skull_and_crossbones: {\n    a: \"Skull and Crossbones\",\n    b: \"2620-FE0F\",\n    c: \"2620\",\n    j: [\"poison\", \"danger\", \"deadly\", \"scary\", \"death\", \"pirate\", \"evil\"],\n    k: [53, 8],\n    o: 2\n  },\n  camera_with_flash: {\n    a: \"Camera with Flash\",\n    b: \"1F4F8\",\n    k: [27, 21],\n    o: 2\n  },\n  signal_strength: {\n    a: \"Antenna with Bars\",\n    b: \"1F4F6\",\n    j: [\"blue-square\", \"reception\", \"phone\", \"internet\", \"connection\", \"wifi\", \"bluetooth\", \"bars\"],\n    k: [27, 19],\n    o: 2\n  },\n  chocolate_bar: {\n    a: \"Chocolate Bar\",\n    b: \"1F36B\",\n    j: [\"food\", \"snack\", \"dessert\", \"sweet\"],\n    k: [7, 10],\n    o: 2\n  },\n  manual_wheelchair: {\n    a: \"Manual Wheelchair\",\n    b: \"1F9BD\",\n    k: [44, 5],\n    o: 12\n  },\n  snail: {\n    a: \"Snail\",\n    b: \"1F40C\",\n    j: [\"slow\", \"animal\", \"shell\"],\n    k: [11, 40],\n    o: 2\n  },\n  motorized_wheelchair: {\n    a: \"Motorized Wheelchair\",\n    b: \"1F9BC\",\n    k: [44, 4],\n    o: 12\n  },\n  \"flag-gi\": {\n    a: \"Gibraltar Flag\",\n    b: \"1F1EC-1F1EE\",\n    k: [2, 4],\n    o: 2\n  },\n  hankey: {\n    a: \"Pile of Poo\",\n    b: \"1F4A9\",\n    k: [25, 51],\n    n: [\"poop\", \"shit\"],\n    o: 2\n  },\n  vibration_mode: {\n    a: \"Vibration Mode\",\n    b: \"1F4F3\",\n    j: [\"orange-square\", \"phone\"],\n    k: [27, 16],\n    o: 2\n  },\n  deaf_woman: {\n    a: \"Deaf Woman\",\n    b: \"1F9CF-200D-2640-FE0F\",\n    c: \"1F9CF-200D-2640\",\n    k: [44, 55],\n    o: 12\n  },\n  butterfly: {\n    a: \"Butterfly\",\n    b: \"1F98B\",\n    j: [\"animal\", \"insect\", \"nature\", \"caterpillar\"],\n    k: [42, 29],\n    o: 4\n  },\n  video_camera: {\n    a: \"Video Camera\",\n    b: \"1F4F9\",\n    j: [\"film\", \"record\"],\n    k: [27, 22],\n    o: 2\n  },\n  candy: {\n    a: \"Candy\",\n    b: \"1F36C\",\n    j: [\"snack\", \"dessert\", \"sweet\", \"lolly\"],\n    k: [7, 11],\n    o: 2\n  },\n  auto_rickshaw: {\n    a: \"Auto Rickshaw\",\n    b: \"1F6FA\",\n    k: [37, 2],\n    o: 12\n  },\n  mobile_phone_off: {\n    a: \"Mobile Phone off\",\n    b: \"1F4F4\",\n    j: [\"mute\", \"orange-square\", \"silence\", \"quiet\"],\n    k: [27, 17],\n    o: 2\n  },\n  clown_face: {\n    a: \"Clown Face\",\n    b: \"1F921\",\n    j: [\"face\"],\n    k: [38, 18],\n    o: 4\n  },\n  lollipop: {\n    a: \"Lollipop\",\n    b: \"1F36D\",\n    j: [\"food\", \"snack\", \"candy\", \"sweet\"],\n    k: [7, 12],\n    o: 2\n  },\n  \"flag-gl\": {\n    a: \"Greenland Flag\",\n    b: \"1F1EC-1F1F1\",\n    k: [2, 5],\n    o: 2\n  },\n  vhs: {\n    a: \"Videocassette\",\n    b: \"1F4FC\",\n    j: [\"record\", \"video\", \"oldschool\", \"90s\", \"80s\"],\n    k: [27, 25],\n    o: 2\n  },\n  bug: {\n    a: \"Bug\",\n    b: \"1F41B\",\n    j: [\"animal\", \"insect\", \"nature\", \"worm\"],\n    k: [11, 56],\n    o: 2\n  },\n  bike: {\n    a: \"Bicycle\",\n    b: \"1F6B2\",\n    j: [\"sports\", \"bicycle\", \"exercise\", \"hipster\"],\n    k: [35, 9],\n    o: 2\n  },\n  \"man-bowing\": {\n    obsoletes: \"1F647\",\n    a: \"Man Bowing\",\n    b: \"1F647-200D-2642-FE0F\",\n    c: \"1F647-200D-2642\",\n    k: [32, 32],\n    o: 4\n  },\n  female_sign: {\n    a: \"Female Sign\",\n    b: \"2640-FE0F\",\n    c: \"2640\",\n    k: [53, 18],\n    o: 4\n  },\n  japanese_ogre: {\n    a: \"Japanese Ogre\",\n    b: \"1F479\",\n    j: [\"monster\", \"red\", \"mask\", \"halloween\", \"scary\", \"creepy\", \"devil\", \"demon\", \"japanese\", \"ogre\"],\n    k: [23, 34],\n    o: 2\n  },\n  custard: {\n    a: \"Custard\",\n    b: \"1F36E\",\n    j: [\"dessert\", \"food\"],\n    k: [7, 13],\n    o: 2\n  },\n  ant: {\n    a: \"Ant\",\n    b: \"1F41C\",\n    j: [\"animal\", \"insect\", \"nature\", \"bug\"],\n    k: [12, 0],\n    o: 2\n  },\n  mag: {\n    a: \"Left-Pointing Magnifying Glass\",\n    b: \"1F50D\",\n    j: [\"search\", \"zoom\", \"find\", \"detective\"],\n    k: [27, 41],\n    o: 2\n  },\n  \"flag-gm\": {\n    a: \"Gambia Flag\",\n    b: \"1F1EC-1F1F2\",\n    k: [2, 6],\n    o: 2\n  },\n  honey_pot: {\n    a: \"Honey Pot\",\n    b: \"1F36F\",\n    j: [\"bees\", \"sweet\", \"kitchen\"],\n    k: [7, 14],\n    o: 2\n  },\n  \"woman-bowing\": {\n    a: \"Woman Bowing\",\n    b: \"1F647-200D-2640-FE0F\",\n    c: \"1F647-200D-2640\",\n    k: [32, 26],\n    o: 4\n  },\n  male_sign: {\n    a: \"Male Sign\",\n    b: \"2642-FE0F\",\n    c: \"2642\",\n    k: [53, 19],\n    o: 4\n  },\n  mag_right: {\n    a: \"Right-Pointing Magnifying Glass\",\n    b: \"1F50E\",\n    j: [\"search\", \"zoom\", \"find\", \"detective\"],\n    k: [27, 42],\n    o: 2\n  },\n  japanese_goblin: {\n    a: \"Japanese Goblin\",\n    b: \"1F47A\",\n    j: [\"red\", \"evil\", \"mask\", \"monster\", \"scary\", \"creepy\", \"japanese\", \"goblin\"],\n    k: [23, 35],\n    o: 2\n  },\n  scooter: {\n    a: \"Scooter\",\n    b: \"1F6F4\",\n    k: [36, 53],\n    o: 4\n  },\n  bee: {\n    a: \"Honeybee\",\n    b: \"1F41D\",\n    k: [12, 1],\n    n: [\"honeybee\"],\n    o: 2\n  },\n  \"flag-gn\": {\n    a: \"Guinea Flag\",\n    b: \"1F1EC-1F1F3\",\n    k: [2, 7],\n    o: 2\n  },\n  candle: {\n    a: \"Candle\",\n    b: \"1F56F-FE0F\",\n    c: \"1F56F\",\n    j: [\"fire\", \"wax\"],\n    k: [29, 6],\n    o: 2\n  },\n  skateboard: {\n    a: \"Skateboard\",\n    b: \"1F6F9\",\n    k: [37, 1],\n    o: 11\n  },\n  medical_symbol: {\n    a: \"Medical Symbol\",\n    b: \"2695-FE0F\",\n    c: \"2695\",\n    k: [53, 44],\n    n: [\"staff_of_aesculapius\"],\n    o: 4\n  },\n  ghost: {\n    a: \"Ghost\",\n    b: \"1F47B\",\n    j: [\"halloween\", \"spooky\", \"scary\"],\n    k: [23, 36],\n    o: 2\n  },\n  beetle: {\n    a: \"Lady Beetle\",\n    b: \"1F41E\",\n    j: [\"animal\", \"insect\", \"nature\", \"ladybug\"],\n    k: [12, 2],\n    o: 2\n  },\n  \"flag-gp\": {\n    a: \"Guadeloupe Flag\",\n    b: \"1F1EC-1F1F5\",\n    k: [2, 8],\n    o: 2\n  },\n  baby_bottle: {\n    a: \"Baby Bottle\",\n    b: \"1F37C\",\n    j: [\"food\", \"container\", \"milk\"],\n    k: [7, 27],\n    o: 2\n  },\n  infinity: {\n    a: \"Infinity\",\n    b: \"267E-FE0F\",\n    c: \"267E\",\n    k: [53, 39],\n    o: 11\n  },\n  glass_of_milk: {\n    a: \"Glass of Milk\",\n    b: \"1F95B\",\n    k: [41, 42],\n    o: 4\n  },\n  \"man-facepalming\": {\n    a: \"Man Facepalming\",\n    b: \"1F926-200D-2642-FE0F\",\n    c: \"1F926-200D-2642\",\n    k: [38, 29],\n    o: 4\n  },\n  cricket: {\n    a: \"Cricket\",\n    b: \"1F997\",\n    j: [\"sports\"],\n    k: [42, 41],\n    o: 5\n  },\n  busstop: {\n    a: \"Bus Stop\",\n    b: \"1F68F\",\n    j: [\"transportation\", \"wait\"],\n    k: [34, 14],\n    o: 2\n  },\n  \"flag-gq\": {\n    a: \"Equatorial Guinea Flag\",\n    b: \"1F1EC-1F1F6\",\n    k: [2, 9],\n    o: 2\n  },\n  alien: {\n    a: \"Extraterrestrial Alien\",\n    b: \"1F47D\",\n    j: [\"UFO\", \"paul\", \"weird\", \"outer_space\"],\n    k: [23, 43],\n    o: 2\n  },\n  bulb: {\n    a: \"Electric Light Bulb\",\n    b: \"1F4A1\",\n    j: [\"light\", \"electricity\", \"idea\"],\n    k: [25, 43],\n    o: 2\n  },\n  \"woman-facepalming\": {\n    a: \"Woman Facepalming\",\n    b: \"1F926-200D-2640-FE0F\",\n    c: \"1F926-200D-2640\",\n    k: [38, 23],\n    o: 4\n  },\n  spider: {\n    a: \"Spider\",\n    b: \"1F577-FE0F\",\n    c: \"1F577\",\n    j: [\"animal\", \"arachnid\"],\n    k: [29, 34],\n    o: 2\n  },\n  space_invader: {\n    a: \"Alien Monster\",\n    b: \"1F47E\",\n    j: [\"game\", \"arcade\", \"play\"],\n    k: [23, 44],\n    o: 2\n  },\n  motorway: {\n    a: \"Motorway\",\n    b: \"1F6E3-FE0F\",\n    c: \"1F6E3\",\n    j: [\"road\", \"cupertino\", \"interstate\", \"highway\"],\n    k: [36, 45],\n    o: 2\n  },\n  \"flag-gr\": {\n    a: \"Greece Flag\",\n    b: \"1F1EC-1F1F7\",\n    k: [2, 10],\n    o: 2\n  },\n  recycle: {\n    a: \"Black Universal Recycling Symbol\",\n    b: \"267B-FE0F\",\n    c: \"267B\",\n    j: [\"arrow\", \"environment\", \"garbage\", \"trash\"],\n    k: [53, 38],\n    o: 2\n  },\n  coffee: {\n    a: \"Hot Beverage\",\n    b: \"2615\",\n    j: [\"beverage\", \"caffeine\", \"latte\", \"espresso\"],\n    k: [53, 0],\n    o: 2\n  },\n  flashlight: {\n    a: \"Electric Torch\",\n    b: \"1F526\",\n    j: [\"dark\", \"camping\", \"sight\", \"night\"],\n    k: [28, 9],\n    o: 2\n  },\n  spider_web: {\n    a: \"Spider Web\",\n    b: \"1F578-FE0F\",\n    c: \"1F578\",\n    j: [\"animal\", \"insect\", \"arachnid\", \"silk\"],\n    k: [29, 35],\n    o: 2\n  },\n  izakaya_lantern: {\n    a: \"Izakaya Lantern\",\n    b: \"1F3EE\",\n    j: [\"light\", \"paper\", \"halloween\", \"spooky\"],\n    k: [11, 8],\n    n: [\"lantern\"],\n    o: 2\n  },\n  \"flag-gs\": {\n    a: \"South Georgia & South Sandwich Islands Flag\",\n    b: \"1F1EC-1F1F8\",\n    k: [2, 11],\n    o: 2\n  },\n  fleur_de_lis: {\n    a: \"Fleur De Lis\",\n    b: \"269C-FE0F\",\n    c: \"269C\",\n    j: [\"decorative\", \"scout\"],\n    k: [53, 49],\n    o: 2\n  },\n  robot_face: {\n    a: \"Robot Face\",\n    b: \"1F916\",\n    k: [37, 29],\n    o: 2\n  },\n  railway_track: {\n    a: \"Railway Track\",\n    b: \"1F6E4-FE0F\",\n    c: \"1F6E4\",\n    j: [\"train\", \"transportation\"],\n    k: [36, 46],\n    o: 2\n  },\n  tea: {\n    a: \"Teacup Without Handle\",\n    b: \"1F375\",\n    j: [\"drink\", \"bowl\", \"breakfast\", \"green\", \"british\"],\n    k: [7, 20],\n    o: 2\n  },\n  \"flag-gt\": {\n    a: \"Guatemala Flag\",\n    b: \"1F1EC-1F1F9\",\n    k: [2, 12],\n    o: 2\n  },\n  oil_drum: {\n    a: \"Oil Drum\",\n    b: \"1F6E2-FE0F\",\n    c: \"1F6E2\",\n    j: [\"barrell\"],\n    k: [36, 44],\n    o: 2\n  },\n  diya_lamp: {\n    a: \"Diya Lamp\",\n    b: \"1FA94\",\n    k: [52, 8],\n    o: 12\n  },\n  sake: {\n    a: \"Sake Bottle and Cup\",\n    b: \"1F376\",\n    j: [\"wine\", \"drink\", \"drunk\", \"beverage\", \"japanese\", \"alcohol\", \"booze\"],\n    k: [7, 21],\n    o: 2\n  },\n  trident: {\n    a: \"Trident Emblem\",\n    b: \"1F531\",\n    j: [\"weapon\", \"spear\"],\n    k: [28, 20],\n    o: 2\n  },\n  \"man-shrugging\": {\n    a: \"Man Shrugging\",\n    b: \"1F937-200D-2642-FE0F\",\n    c: \"1F937-200D-2642\",\n    k: [39, 41],\n    o: 4\n  },\n  smiley_cat: {\n    a: \"Smiling Cat Face with Open Mouth\",\n    b: \"1F63A\",\n    j: [\"animal\", \"cats\", \"happy\", \"smile\"],\n    k: [31, 36],\n    o: 2\n  },\n  scorpion: {\n    a: \"Scorpion\",\n    b: \"1F982\",\n    j: [\"animal\", \"arachnid\"],\n    k: [42, 20],\n    o: 2\n  },\n  \"woman-shrugging\": {\n    a: \"Woman Shrugging\",\n    b: \"1F937-200D-2640-FE0F\",\n    c: \"1F937-200D-2640\",\n    k: [39, 35],\n    o: 4\n  },\n  notebook_with_decorative_cover: {\n    a: \"Notebook with Decorative Cover\",\n    b: \"1F4D4\",\n    j: [\"classroom\", \"notes\", \"record\", \"paper\", \"study\"],\n    k: [26, 42],\n    o: 2\n  },\n  fuelpump: {\n    a: \"Fuel Pump\",\n    b: \"26FD\",\n    j: [\"gas station\", \"petroleum\"],\n    k: [54, 38],\n    o: 2\n  },\n  name_badge: {\n    a: \"Name Badge\",\n    b: \"1F4DB\",\n    j: [\"fire\", \"forbid\"],\n    k: [26, 49],\n    o: 2\n  },\n  mosquito: {\n    a: \"Mosquito\",\n    b: \"1F99F\",\n    k: [42, 49],\n    o: 11\n  },\n  \"flag-gu\": {\n    a: \"Guam Flag\",\n    b: \"1F1EC-1F1FA\",\n    k: [2, 13],\n    o: 2\n  },\n  smile_cat: {\n    a: \"Grinning Cat Face with Smiling Eyes\",\n    b: \"1F638\",\n    j: [\"animal\", \"cats\", \"smile\"],\n    k: [31, 34],\n    o: 2\n  },\n  champagne: {\n    a: \"Bottle with Popping Cork\",\n    b: \"1F37E\",\n    j: [\"drink\", \"wine\", \"bottle\", \"celebration\"],\n    k: [7, 29],\n    o: 2\n  },\n  joy_cat: {\n    a: \"Cat Face with Tears of Joy\",\n    b: \"1F639\",\n    j: [\"animal\", \"cats\", \"haha\", \"happy\", \"tears\"],\n    k: [31, 35],\n    o: 2\n  },\n  closed_book: {\n    a: \"Closed Book\",\n    b: \"1F4D5\",\n    j: [\"read\", \"library\", \"knowledge\", \"textbook\", \"learn\"],\n    k: [26, 43],\n    o: 2\n  },\n  rotating_light: {\n    a: \"Police Cars Revolving Light\",\n    b: \"1F6A8\",\n    j: [\"police\", \"ambulance\", \"911\", \"emergency\", \"alert\", \"error\", \"pinged\", \"law\", \"legal\"],\n    k: [34, 56],\n    o: 2\n  },\n  microbe: {\n    a: \"Microbe\",\n    b: \"1F9A0\",\n    k: [42, 50],\n    o: 11\n  },\n  \"flag-gw\": {\n    a: \"Guinea-Bissau Flag\",\n    b: \"1F1EC-1F1FC\",\n    k: [2, 14],\n    o: 2\n  },\n  wine_glass: {\n    a: \"Wine Glass\",\n    b: \"1F377\",\n    j: [\"drink\", \"beverage\", \"drunk\", \"alcohol\", \"booze\"],\n    k: [7, 22],\n    o: 2\n  },\n  beginner: {\n    a: \"Japanese Symbol for Beginner\",\n    b: \"1F530\",\n    j: [\"badge\", \"shield\"],\n    k: [28, 19],\n    o: 2\n  },\n  bouquet: {\n    a: \"Bouquet\",\n    b: \"1F490\",\n    j: [\"flowers\", \"nature\", \"spring\"],\n    k: [25, 26],\n    o: 2\n  },\n  heart_eyes_cat: {\n    a: \"Smiling Cat Face with Heart-Shaped Eyes\",\n    b: \"1F63B\",\n    j: [\"animal\", \"love\", \"like\", \"affection\", \"cats\", \"valentines\", \"heart\"],\n    k: [31, 37],\n    o: 2\n  },\n  \"male-doctor\": {\n    a: \"Male Doctor\",\n    b: \"1F468-200D-2695-FE0F\",\n    c: \"1F468-200D-2695\",\n    k: [17, 2],\n    o: 4\n  },\n  book: {\n    a: \"Open Book\",\n    b: \"1F4D6\",\n    k: [26, 44],\n    n: [\"open_book\"],\n    o: 2\n  },\n  traffic_light: {\n    a: \"Horizontal Traffic Light\",\n    b: \"1F6A5\",\n    j: [\"transportation\", \"signal\"],\n    k: [34, 53],\n    o: 2\n  },\n  cocktail: {\n    a: \"Cocktail Glass\",\n    b: \"1F378\",\n    j: [\"drink\", \"drunk\", \"alcohol\", \"beverage\", \"booze\", \"mojito\"],\n    k: [7, 23],\n    o: 2\n  },\n  o: {\n    a: \"Heavy Large Circle\",\n    b: \"2B55\",\n    j: [\"circle\", \"round\"],\n    k: [55, 43],\n    o: 2\n  },\n  \"flag-gy\": {\n    a: \"Guyana Flag\",\n    b: \"1F1EC-1F1FE\",\n    k: [2, 15],\n    o: 2\n  },\n  \"female-doctor\": {\n    a: \"Female Doctor\",\n    b: \"1F469-200D-2695-FE0F\",\n    c: \"1F469-200D-2695\",\n    k: [19, 44],\n    o: 4\n  },\n  smirk_cat: {\n    a: \"Cat Face with Wry Smile\",\n    b: \"1F63C\",\n    j: [\"animal\", \"cats\", \"smirk\"],\n    k: [31, 38],\n    o: 2\n  },\n  green_book: {\n    a: \"Green Book\",\n    b: \"1F4D7\",\n    j: [\"read\", \"library\", \"knowledge\", \"study\"],\n    k: [26, 45],\n    o: 2\n  },\n  cherry_blossom: {\n    a: \"Cherry Blossom\",\n    b: \"1F338\",\n    j: [\"nature\", \"plant\", \"spring\", \"flower\"],\n    k: [6, 16],\n    o: 2\n  },\n  \"flag-hk\": {\n    a: \"Hong Kong Sar China Flag\",\n    b: \"1F1ED-1F1F0\",\n    k: [2, 16],\n    o: 2\n  },\n  vertical_traffic_light: {\n    a: \"Vertical Traffic Light\",\n    b: \"1F6A6\",\n    j: [\"transportation\", \"driving\"],\n    k: [34, 54],\n    o: 2\n  },\n  white_check_mark: {\n    a: \"White Heavy Check Mark\",\n    b: \"2705\",\n    j: [\"green-square\", \"ok\", \"agree\", \"vote\", \"election\", \"answer\", \"tick\"],\n    k: [54, 40],\n    o: 2\n  },\n  tropical_drink: {\n    a: \"Tropical Drink\",\n    b: \"1F379\",\n    j: [\"beverage\", \"cocktail\", \"summer\", \"beach\", \"alcohol\", \"booze\", \"mojito\"],\n    k: [7, 24],\n    o: 2\n  },\n  kissing_cat: {\n    a: \"Kissing Cat Face with Closed Eyes\",\n    b: \"1F63D\",\n    j: [\"animal\", \"cats\", \"kiss\"],\n    k: [31, 39],\n    o: 2\n  },\n  \"flag-hm\": {\n    a: \"Heard & Mcdonald Islands Flag\",\n    b: \"1F1ED-1F1F2\",\n    k: [2, 17],\n    o: 2\n  },\n  octagonal_sign: {\n    a: \"Octagonal Sign\",\n    b: \"1F6D1\",\n    k: [36, 39],\n    o: 4\n  },\n  white_flower: {\n    a: \"White Flower\",\n    b: \"1F4AE\",\n    j: [\"japanese\", \"spring\"],\n    k: [26, 4],\n    o: 2\n  },\n  ballot_box_with_check: {\n    a: \"Ballot Box with Check\",\n    b: \"2611-FE0F\",\n    c: \"2611\",\n    j: [\"ok\", \"agree\", \"confirm\", \"black-square\", \"vote\", \"election\", \"yes\", \"tick\"],\n    k: [52, 55],\n    o: 2\n  },\n  blue_book: {\n    a: \"Blue Book\",\n    b: \"1F4D8\",\n    j: [\"read\", \"library\", \"knowledge\", \"learn\", \"study\"],\n    k: [26, 46],\n    o: 2\n  },\n  beer: {\n    a: \"Beer Mug\",\n    b: \"1F37A\",\n    j: [\"relax\", \"beverage\", \"drink\", \"drunk\", \"party\", \"pub\", \"summer\", \"alcohol\", \"booze\"],\n    k: [7, 25],\n    o: 2\n  },\n  construction: {\n    a: \"Construction Sign\",\n    b: \"1F6A7\",\n    j: [\"wip\", \"progress\", \"caution\", \"warning\"],\n    k: [34, 55],\n    o: 2\n  },\n  rosette: {\n    a: \"Rosette\",\n    b: \"1F3F5-FE0F\",\n    c: \"1F3F5\",\n    j: [\"flower\", \"decoration\", \"military\"],\n    k: [11, 18],\n    o: 2\n  },\n  heavy_check_mark: {\n    a: \"Heavy Check Mark\",\n    b: \"2714-FE0F\",\n    c: \"2714\",\n    j: [\"ok\", \"nike\", \"answer\", \"yes\", \"tick\"],\n    k: [55, 12],\n    o: 2\n  },\n  scream_cat: {\n    a: \"Weary Cat Face\",\n    b: \"1F640\",\n    j: [\"animal\", \"cats\", \"munch\", \"scared\", \"scream\"],\n    k: [31, 42],\n    o: 2\n  },\n  orange_book: {\n    a: \"Orange Book\",\n    b: \"1F4D9\",\n    j: [\"read\", \"library\", \"knowledge\", \"textbook\", \"study\"],\n    k: [26, 47],\n    o: 2\n  },\n  beers: {\n    a: \"Clinking Beer Mugs\",\n    b: \"1F37B\",\n    j: [\"relax\", \"beverage\", \"drink\", \"drunk\", \"party\", \"pub\", \"summer\", \"alcohol\", \"booze\"],\n    k: [7, 26],\n    o: 2\n  },\n  \"male-student\": {\n    a: \"Male Student\",\n    b: \"1F468-200D-1F393\",\n    k: [14, 50],\n    o: 4\n  },\n  \"flag-hn\": {\n    a: \"Honduras Flag\",\n    b: \"1F1ED-1F1F3\",\n    k: [2, 18],\n    o: 2\n  },\n  crying_cat_face: {\n    a: \"Crying Cat Face\",\n    b: \"1F63F\",\n    j: [\"animal\", \"tears\", \"weep\", \"sad\", \"cats\", \"upset\", \"cry\"],\n    k: [31, 41],\n    o: 2\n  },\n  anchor: {\n    a: \"Anchor\",\n    b: \"2693\",\n    j: [\"ship\", \"ferry\", \"sea\", \"boat\"],\n    k: [53, 42],\n    o: 2\n  },\n  \"flag-hr\": {\n    a: \"Croatia Flag\",\n    b: \"1F1ED-1F1F7\",\n    k: [2, 19],\n    o: 2\n  },\n  heavy_multiplication_x: {\n    a: \"Heavy Multiplication X\",\n    b: \"2716-FE0F\",\n    c: \"2716\",\n    j: [\"math\", \"calculation\"],\n    k: [55, 13],\n    o: 2\n  },\n  \"female-student\": {\n    a: \"Female Student\",\n    b: \"1F469-200D-1F393\",\n    k: [17, 40],\n    o: 4\n  },\n  rose: {\n    a: \"Rose\",\n    b: \"1F339\",\n    j: [\"flowers\", \"valentines\", \"love\", \"spring\"],\n    k: [6, 17],\n    o: 2\n  },\n  books: {\n    a: \"Books\",\n    b: \"1F4DA\",\n    j: [\"literature\", \"library\", \"study\"],\n    k: [26, 48],\n    o: 2\n  },\n  clinking_glasses: {\n    a: \"Clinking Glasses\",\n    b: \"1F942\",\n    j: [\"beverage\", \"drink\", \"party\", \"alcohol\", \"celebrate\", \"cheers\"],\n    k: [41, 18],\n    o: 4\n  },\n  x: {\n    a: \"Cross Mark\",\n    b: \"274C\",\n    j: [\"no\", \"delete\", \"remove\", \"cancel\"],\n    k: [55, 21],\n    o: 2\n  },\n  pouting_cat: {\n    a: \"Pouting Cat Face\",\n    b: \"1F63E\",\n    j: [\"animal\", \"cats\"],\n    k: [31, 40],\n    o: 2\n  },\n  wilted_flower: {\n    a: \"Wilted Flower\",\n    b: \"1F940\",\n    j: [\"plant\", \"nature\", \"flower\"],\n    k: [41, 16],\n    o: 4\n  },\n  boat: {\n    a: \"Sailboat\",\n    b: \"26F5\",\n    k: [54, 16],\n    n: [\"sailboat\"],\n    o: 2\n  },\n  \"flag-ht\": {\n    a: \"Haiti Flag\",\n    b: \"1F1ED-1F1F9\",\n    k: [2, 20],\n    o: 2\n  },\n  tumbler_glass: {\n    a: \"Tumbler Glass\",\n    b: \"1F943\",\n    j: [\"drink\", \"beverage\", \"drunk\", \"alcohol\", \"liquor\", \"booze\", \"bourbon\", \"scotch\", \"whisky\", \"glass\", \"shot\"],\n    k: [41, 19],\n    o: 4\n  },\n  notebook: {\n    a: \"Notebook\",\n    b: \"1F4D3\",\n    j: [\"stationery\", \"record\", \"notes\", \"paper\", \"study\"],\n    k: [26, 41],\n    o: 2\n  },\n  \"male-teacher\": {\n    a: \"Male Teacher\",\n    b: \"1F468-200D-1F3EB\",\n    k: [15, 11],\n    o: 4\n  },\n  ledger: {\n    a: \"Ledger\",\n    b: \"1F4D2\",\n    j: [\"notes\", \"paper\"],\n    k: [26, 40],\n    o: 2\n  },\n  \"flag-hu\": {\n    a: \"Hungary Flag\",\n    b: \"1F1ED-1F1FA\",\n    k: [2, 21],\n    o: 2\n  },\n  cup_with_straw: {\n    a: \"Cup with Straw\",\n    b: \"1F964\",\n    k: [41, 51],\n    o: 5\n  },\n  hibiscus: {\n    a: \"Hibiscus\",\n    b: \"1F33A\",\n    j: [\"plant\", \"vegetable\", \"flowers\", \"beach\"],\n    k: [6, 18],\n    o: 2\n  },\n  see_no_evil: {\n    a: \"See-No-Evil Monkey\",\n    b: \"1F648\",\n    j: [\"monkey\", \"animal\", \"nature\", \"haha\"],\n    k: [32, 44],\n    o: 2\n  },\n  canoe: {\n    a: \"Canoe\",\n    b: \"1F6F6\",\n    j: [\"boat\", \"paddle\", \"water\", \"ship\"],\n    k: [36, 55],\n    o: 4\n  },\n  negative_squared_cross_mark: {\n    a: \"Negative Squared Cross Mark\",\n    b: \"274E\",\n    j: [\"x\", \"green-square\", \"no\", \"deny\"],\n    k: [55, 22],\n    o: 2\n  },\n  \"flag-ic\": {\n    a: \"Canary Islands Flag\",\n    b: \"1F1EE-1F1E8\",\n    k: [2, 22],\n    o: 2\n  },\n  beverage_box: {\n    a: \"Beverage Box\",\n    b: \"1F9C3\",\n    k: [44, 11],\n    o: 12\n  },\n  speedboat: {\n    a: \"Speedboat\",\n    b: \"1F6A4\",\n    j: [\"ship\", \"transportation\", \"vehicle\", \"summer\"],\n    k: [34, 52],\n    o: 2\n  },\n  heavy_plus_sign: {\n    a: \"Heavy Plus Sign\",\n    b: \"2795\",\n    j: [\"math\", \"calculation\", \"addition\", \"more\", \"increase\"],\n    k: [55, 29],\n    o: 2\n  },\n  sunflower: {\n    a: \"Sunflower\",\n    b: \"1F33B\",\n    j: [\"nature\", \"plant\", \"fall\"],\n    k: [6, 19],\n    o: 2\n  },\n  page_with_curl: {\n    a: \"Page with Curl\",\n    b: \"1F4C3\",\n    j: [\"documents\", \"office\", \"paper\"],\n    k: [26, 25],\n    o: 2\n  },\n  \"female-teacher\": {\n    a: \"Female Teacher\",\n    b: \"1F469-200D-1F3EB\",\n    k: [18, 1],\n    o: 4\n  },\n  hear_no_evil: {\n    a: \"Hear-No-Evil Monkey\",\n    b: \"1F649\",\n    j: [\"animal\", \"monkey\", \"nature\"],\n    k: [32, 45],\n    o: 2\n  },\n  mate_drink: {\n    a: \"Mate Drink\",\n    b: \"1F9C9\",\n    k: [44, 17],\n    o: 12\n  },\n  passenger_ship: {\n    a: \"Passenger Ship\",\n    b: \"1F6F3-FE0F\",\n    c: \"1F6F3\",\n    j: [\"yacht\", \"cruise\", \"ferry\"],\n    k: [36, 52],\n    o: 2\n  },\n  scroll: {\n    a: \"Scroll\",\n    b: \"1F4DC\",\n    j: [\"documents\", \"ancient\", \"history\", \"paper\"],\n    k: [26, 50],\n    o: 2\n  },\n  blossom: {\n    a: \"Blossom\",\n    b: \"1F33C\",\n    j: [\"nature\", \"flowers\", \"yellow\"],\n    k: [6, 20],\n    o: 2\n  },\n  \"flag-id\": {\n    a: \"Indonesia Flag\",\n    b: \"1F1EE-1F1E9\",\n    k: [2, 23],\n    o: 2\n  },\n  speak_no_evil: {\n    a: \"Speak-No-Evil Monkey\",\n    b: \"1F64A\",\n    j: [\"monkey\", \"animal\", \"nature\", \"omg\"],\n    k: [32, 46],\n    o: 2\n  },\n  heavy_minus_sign: {\n    a: \"Heavy Minus Sign\",\n    b: \"2796\",\n    j: [\"math\", \"calculation\", \"subtract\", \"less\"],\n    k: [55, 30],\n    o: 2\n  },\n  \"flag-ie\": {\n    a: \"Ireland Flag\",\n    b: \"1F1EE-1F1EA\",\n    k: [2, 24],\n    o: 2\n  },\n  ice_cube: {\n    a: \"Ice Cube\",\n    b: \"1F9CA\",\n    k: [44, 18],\n    o: 12\n  },\n  page_facing_up: {\n    a: \"Page Facing Up\",\n    b: \"1F4C4\",\n    j: [\"documents\", \"office\", \"paper\", \"information\"],\n    k: [26, 26],\n    o: 2\n  },\n  \"male-judge\": {\n    a: \"Male Judge\",\n    b: \"1F468-200D-2696-FE0F\",\n    c: \"1F468-200D-2696\",\n    k: [17, 8],\n    o: 4\n  },\n  tulip: {\n    a: \"Tulip\",\n    b: \"1F337\",\n    j: [\"flowers\", \"plant\", \"nature\", \"summer\", \"spring\"],\n    k: [6, 15],\n    o: 2\n  },\n  ferry: {\n    a: \"Ferry\",\n    b: \"26F4-FE0F\",\n    c: \"26F4\",\n    j: [\"boat\", \"ship\", \"yacht\"],\n    k: [54, 15],\n    o: 2\n  },\n  kiss: {\n    a: \"Kiss Mark\",\n    b: \"1F48B\",\n    j: [\"face\", \"lips\", \"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 21],\n    o: 2\n  },\n  heavy_division_sign: {\n    a: \"Heavy Division Sign\",\n    b: \"2797\",\n    j: [\"divide\", \"math\", \"calculation\"],\n    k: [55, 31],\n    o: 2\n  },\n  newspaper: {\n    a: \"Newspaper\",\n    b: \"1F4F0\",\n    j: [\"press\", \"headline\"],\n    k: [27, 13],\n    o: 2\n  },\n  \"female-judge\": {\n    a: \"Female Judge\",\n    b: \"1F469-200D-2696-FE0F\",\n    c: \"1F469-200D-2696\",\n    k: [19, 50],\n    o: 4\n  },\n  seedling: {\n    a: \"Seedling\",\n    b: \"1F331\",\n    j: [\"plant\", \"nature\", \"grass\", \"lawn\", \"spring\"],\n    k: [6, 9],\n    o: 2\n  },\n  love_letter: {\n    a: \"Love Letter\",\n    b: \"1F48C\",\n    j: [\"email\", \"like\", \"affection\", \"envelope\", \"valentines\"],\n    k: [25, 22],\n    o: 2\n  },\n  chopsticks: {\n    a: \"Chopsticks\",\n    b: \"1F962\",\n    k: [41, 49],\n    o: 5\n  },\n  motor_boat: {\n    a: \"Motor Boat\",\n    b: \"1F6E5-FE0F\",\n    c: \"1F6E5\",\n    j: [\"ship\"],\n    k: [36, 47],\n    o: 2\n  },\n  \"flag-il\": {\n    a: \"Israel Flag\",\n    b: \"1F1EE-1F1F1\",\n    k: [2, 25],\n    o: 2\n  },\n  curly_loop: {\n    a: \"Curly Loop\",\n    b: \"27B0\",\n    j: [\"scribble\", \"draw\", \"shape\", \"squiggle\"],\n    k: [55, 33],\n    o: 2\n  },\n  \"flag-im\": {\n    a: \"Isle of Man Flag\",\n    b: \"1F1EE-1F1F2\",\n    k: [2, 26],\n    o: 2\n  },\n  evergreen_tree: {\n    a: \"Evergreen Tree\",\n    b: \"1F332\",\n    j: [\"plant\", \"nature\"],\n    k: [6, 10],\n    o: 2\n  },\n  cupid: {\n    a: \"Heart with Arrow\",\n    b: \"1F498\",\n    j: [\"love\", \"like\", \"heart\", \"affection\", \"valentines\"],\n    k: [25, 34],\n    o: 2\n  },\n  loop: {\n    a: \"Double Curly Loop\",\n    b: \"27BF\",\n    j: [\"tape\", \"cassette\"],\n    k: [55, 34],\n    o: 2\n  },\n  ship: {\n    a: \"Ship\",\n    b: \"1F6A2\",\n    j: [\"transportation\", \"titanic\", \"deploy\"],\n    k: [34, 33],\n    o: 2\n  },\n  rolled_up_newspaper: {\n    a: \"Rolled Up Newspaper\",\n    b: \"1F5DE-FE0F\",\n    c: \"1F5DE\",\n    k: [30, 23],\n    o: 2\n  },\n  knife_fork_plate: {\n    a: \"Knife Fork Plate\",\n    b: \"1F37D-FE0F\",\n    c: \"1F37D\",\n    k: [7, 28],\n    o: 2\n  },\n  fork_and_knife: {\n    a: \"Fork and Knife\",\n    b: \"1F374\",\n    j: [\"cutlery\", \"kitchen\"],\n    k: [7, 19],\n    o: 2\n  },\n  \"male-farmer\": {\n    a: \"Male Farmer\",\n    b: \"1F468-200D-1F33E\",\n    k: [14, 38],\n    o: 4\n  },\n  bookmark_tabs: {\n    a: \"Bookmark Tabs\",\n    b: \"1F4D1\",\n    j: [\"favorite\", \"save\", \"order\", \"tidy\"],\n    k: [26, 39],\n    o: 2\n  },\n  part_alternation_mark: {\n    a: \"Part Alternation Mark\",\n    b: \"303D-FE0F\",\n    c: \"303D\",\n    j: [\"graph\", \"presentation\", \"stats\", \"business\", \"economics\", \"bad\"],\n    k: [55, 45],\n    o: 2\n  },\n  \"flag-in\": {\n    a: \"India Flag\",\n    b: \"1F1EE-1F1F3\",\n    k: [2, 27],\n    o: 2\n  },\n  gift_heart: {\n    a: \"Heart with Ribbon\",\n    b: \"1F49D\",\n    j: [\"love\", \"valentines\"],\n    k: [25, 39],\n    o: 2\n  },\n  airplane: {\n    a: \"Airplane\",\n    b: \"2708-FE0F\",\n    c: \"2708\",\n    j: [\"vehicle\", \"transportation\", \"flight\", \"fly\"],\n    k: [54, 41],\n    o: 2\n  },\n  deciduous_tree: {\n    a: \"Deciduous Tree\",\n    b: \"1F333\",\n    j: [\"plant\", \"nature\"],\n    k: [6, 11],\n    o: 2\n  },\n  spoon: {\n    a: \"Spoon\",\n    b: \"1F944\",\n    j: [\"cutlery\", \"kitchen\", \"tableware\"],\n    k: [41, 20],\n    o: 4\n  },\n  \"flag-io\": {\n    a: \"British Indian Ocean Territory Flag\",\n    b: \"1F1EE-1F1F4\",\n    k: [2, 28],\n    o: 2\n  },\n  palm_tree: {\n    a: \"Palm Tree\",\n    b: \"1F334\",\n    j: [\"plant\", \"vegetable\", \"nature\", \"summer\", \"beach\", \"mojito\", \"tropical\"],\n    k: [6, 12],\n    o: 2\n  },\n  sparkling_heart: {\n    a: \"Sparkling Heart\",\n    b: \"1F496\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 32],\n    o: 2\n  },\n  \"female-farmer\": {\n    a: \"Female Farmer\",\n    b: \"1F469-200D-1F33E\",\n    k: [17, 28],\n    o: 4\n  },\n  eight_spoked_asterisk: {\n    a: \"Eight Spoked Asterisk\",\n    b: \"2733-FE0F\",\n    c: \"2733\",\n    j: [\"star\", \"sparkle\", \"green-square\"],\n    k: [55, 17],\n    o: 2\n  },\n  small_airplane: {\n    a: \"Small Airplane\",\n    b: \"1F6E9-FE0F\",\n    c: \"1F6E9\",\n    j: [\"flight\", \"transportation\", \"fly\", \"vehicle\"],\n    k: [36, 48],\n    o: 2\n  },\n  bookmark: {\n    a: \"Bookmark\",\n    b: \"1F516\",\n    j: [\"favorite\", \"label\", \"save\"],\n    k: [27, 50],\n    o: 2\n  },\n  eight_pointed_black_star: {\n    a: \"Eight Pointed Black Star\",\n    b: \"2734-FE0F\",\n    c: \"2734\",\n    j: [\"orange-square\", \"shape\", \"polygon\"],\n    k: [55, 18],\n    o: 2\n  },\n  heartpulse: {\n    a: \"Growing Heart\",\n    b: \"1F497\",\n    j: [\"like\", \"love\", \"affection\", \"valentines\", \"pink\"],\n    k: [25, 33],\n    o: 2\n  },\n  label: {\n    a: \"Label\",\n    b: \"1F3F7-FE0F\",\n    c: \"1F3F7\",\n    j: [\"sale\", \"tag\"],\n    k: [11, 19],\n    o: 2\n  },\n  \"flag-iq\": {\n    a: \"Iraq Flag\",\n    b: \"1F1EE-1F1F6\",\n    k: [2, 29],\n    o: 2\n  },\n  hocho: {\n    a: \"Hocho\",\n    b: \"1F52A\",\n    j: [\"knife\", \"blade\", \"cutlery\", \"kitchen\", \"weapon\"],\n    k: [28, 13],\n    n: [\"knife\"],\n    o: 2\n  },\n  cactus: {\n    a: \"Cactus\",\n    b: \"1F335\",\n    j: [\"vegetable\", \"plant\", \"nature\"],\n    k: [6, 13],\n    o: 2\n  },\n  airplane_departure: {\n    a: \"Airplane Departure\",\n    b: \"1F6EB\",\n    k: [36, 49],\n    o: 2\n  },\n  airplane_arriving: {\n    a: \"Airplane Arriving\",\n    b: \"1F6EC\",\n    k: [36, 50],\n    o: 2\n  },\n  ear_of_rice: {\n    a: \"Ear of Rice\",\n    b: \"1F33E\",\n    j: [\"nature\", \"plant\"],\n    k: [6, 22],\n    o: 2\n  },\n  \"flag-ir\": {\n    a: \"Iran Flag\",\n    b: \"1F1EE-1F1F7\",\n    k: [2, 30],\n    o: 2\n  },\n  moneybag: {\n    a: \"Money Bag\",\n    b: \"1F4B0\",\n    j: [\"dollar\", \"payment\", \"coins\", \"sale\"],\n    k: [26, 6],\n    o: 2\n  },\n  \"male-cook\": {\n    a: \"Male Cook\",\n    b: \"1F468-200D-1F373\",\n    k: [14, 44],\n    o: 4\n  },\n  heartbeat: {\n    a: \"Beating Heart\",\n    b: \"1F493\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\", \"pink\", \"heart\"],\n    k: [25, 29],\n    o: 2\n  },\n  sparkle: {\n    a: \"Sparkle\",\n    b: \"2747-FE0F\",\n    c: \"2747\",\n    j: [\"stars\", \"green-square\", \"awesome\", \"good\", \"fireworks\"],\n    k: [55, 20],\n    o: 2\n  },\n  amphora: {\n    a: \"Amphora\",\n    b: \"1F3FA\",\n    j: [\"vase\", \"jar\"],\n    k: [11, 22],\n    o: 2\n  },\n  yen: {\n    a: \"Banknote with Yen Sign\",\n    b: \"1F4B4\",\n    j: [\"money\", \"sales\", \"japanese\", \"dollar\", \"currency\"],\n    k: [26, 10],\n    o: 2\n  },\n  revolving_hearts: {\n    a: \"Revolving Hearts\",\n    b: \"1F49E\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 40],\n    o: 2\n  },\n  bangbang: {\n    a: \"Double Exclamation Mark\",\n    b: \"203C-FE0F\",\n    c: \"203C\",\n    j: [\"exclamation\", \"surprise\"],\n    k: [52, 10],\n    o: 2\n  },\n  parachute: {\n    a: \"Parachute\",\n    b: \"1FA82\",\n    k: [52, 3],\n    o: 12\n  },\n  herb: {\n    a: \"Herb\",\n    b: \"1F33F\",\n    j: [\"vegetable\", \"plant\", \"medicine\", \"weed\", \"grass\", \"lawn\"],\n    k: [6, 23],\n    o: 2\n  },\n  \"flag-is\": {\n    a: \"Iceland Flag\",\n    b: \"1F1EE-1F1F8\",\n    k: [2, 31],\n    o: 2\n  },\n  \"female-cook\": {\n    a: \"Female Cook\",\n    b: \"1F469-200D-1F373\",\n    k: [17, 34],\n    o: 4\n  },\n  interrobang: {\n    a: \"Exclamation Question Mark\",\n    b: \"2049-FE0F\",\n    c: \"2049\",\n    j: [\"wat\", \"punctuation\", \"surprise\"],\n    k: [52, 11],\n    o: 2\n  },\n  seat: {\n    a: \"Seat\",\n    b: \"1F4BA\",\n    j: [\"sit\", \"airplane\", \"transport\", \"bus\", \"flight\", \"fly\"],\n    k: [26, 16],\n    o: 2\n  },\n  dollar: {\n    a: \"Banknote with Dollar Sign\",\n    b: \"1F4B5\",\n    j: [\"money\", \"sales\", \"bill\", \"currency\"],\n    k: [26, 11],\n    o: 2\n  },\n  two_hearts: {\n    a: \"Two Hearts\",\n    b: \"1F495\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\", \"heart\"],\n    k: [25, 31],\n    o: 2\n  },\n  it: {\n    a: \"Italy Flag\",\n    b: \"1F1EE-1F1F9\",\n    j: [\"italy\", \"flag\", \"nation\", \"country\", \"banner\"],\n    k: [2, 32],\n    n: [\"flag-it\"],\n    o: 2\n  },\n  shamrock: {\n    a: \"Shamrock\",\n    b: \"2618-FE0F\",\n    c: \"2618\",\n    j: [\"vegetable\", \"plant\", \"nature\", \"irish\", \"clover\"],\n    k: [53, 1],\n    o: 2\n  },\n  four_leaf_clover: {\n    a: \"Four Leaf Clover\",\n    b: \"1F340\",\n    j: [\"vegetable\", \"plant\", \"nature\", \"lucky\", \"irish\"],\n    k: [6, 24],\n    o: 2\n  },\n  euro: {\n    a: \"Banknote with Euro Sign\",\n    b: \"1F4B6\",\n    j: [\"money\", \"sales\", \"dollar\", \"currency\"],\n    k: [26, 12],\n    o: 2\n  },\n  question: {\n    a: \"Black Question Mark Ornament\",\n    b: \"2753\",\n    j: [\"doubt\", \"confused\"],\n    k: [55, 23],\n    o: 2\n  },\n  helicopter: {\n    a: \"Helicopter\",\n    b: \"1F681\",\n    j: [\"transportation\", \"vehicle\", \"fly\"],\n    k: [34, 0],\n    o: 2\n  },\n  heart_decoration: {\n    a: \"Heart Decoration\",\n    b: \"1F49F\",\n    j: [\"purple-square\", \"love\", \"like\"],\n    k: [25, 41],\n    o: 2\n  },\n  \"flag-je\": {\n    a: \"Jersey Flag\",\n    b: \"1F1EF-1F1EA\",\n    k: [2, 33],\n    o: 2\n  },\n  \"male-mechanic\": {\n    a: \"Male Mechanic\",\n    b: \"1F468-200D-1F527\",\n    k: [15, 50],\n    o: 4\n  },\n  suspension_railway: {\n    a: \"Suspension Railway\",\n    b: \"1F69F\",\n    j: [\"vehicle\", \"transportation\"],\n    k: [34, 30],\n    o: 2\n  },\n  heavy_heart_exclamation_mark_ornament: {\n    a: \"Heavy Heart Exclamation Mark Ornament\",\n    b: \"2763-FE0F\",\n    c: \"2763\",\n    k: [55, 27],\n    o: 2\n  },\n  \"female-mechanic\": {\n    a: \"Female Mechanic\",\n    b: \"1F469-200D-1F527\",\n    k: [18, 35],\n    o: 4\n  },\n  \"flag-jm\": {\n    a: \"Jamaica Flag\",\n    b: \"1F1EF-1F1F2\",\n    k: [2, 34],\n    o: 2\n  },\n  grey_question: {\n    a: \"White Question Mark Ornament\",\n    b: \"2754\",\n    j: [\"doubts\", \"gray\", \"huh\", \"confused\"],\n    k: [55, 24],\n    o: 2\n  },\n  maple_leaf: {\n    a: \"Maple Leaf\",\n    b: \"1F341\",\n    j: [\"nature\", \"plant\", \"vegetable\", \"ca\", \"fall\"],\n    k: [6, 25],\n    o: 2\n  },\n  pound: {\n    a: \"Banknote with Pound Sign\",\n    b: \"1F4B7\",\n    j: [\"british\", \"sterling\", \"money\", \"sales\", \"bills\", \"uk\", \"england\", \"currency\"],\n    k: [26, 13],\n    o: 2\n  },\n  money_with_wings: {\n    a: \"Money with Wings\",\n    b: \"1F4B8\",\n    j: [\"dollar\", \"bills\", \"payment\", \"sale\"],\n    k: [26, 14],\n    o: 2\n  },\n  \"flag-jo\": {\n    a: \"Jordan Flag\",\n    b: \"1F1EF-1F1F4\",\n    k: [2, 35],\n    o: 2\n  },\n  fallen_leaf: {\n    a: \"Fallen Leaf\",\n    b: \"1F342\",\n    j: [\"nature\", \"plant\", \"vegetable\", \"leaves\"],\n    k: [6, 26],\n    o: 2\n  },\n  broken_heart: {\n    a: \"Broken Heart\",\n    b: \"1F494\",\n    j: [\"sad\", \"sorry\", \"break\", \"heart\", \"heartbreak\"],\n    k: [25, 30],\n    l: [\"</3\"],\n    m: \"</3\",\n    o: 2\n  },\n  grey_exclamation: {\n    a: \"White Exclamation Mark Ornament\",\n    b: \"2755\",\n    j: [\"surprise\", \"punctuation\", \"gray\", \"wow\", \"warning\"],\n    k: [55, 25],\n    o: 2\n  },\n  mountain_cableway: {\n    a: \"Mountain Cableway\",\n    b: \"1F6A0\",\n    j: [\"transportation\", \"vehicle\", \"ski\"],\n    k: [34, 31],\n    o: 2\n  },\n  exclamation: {\n    a: \"Heavy Exclamation Mark Symbol\",\n    b: \"2757\",\n    j: [\"heavy_exclamation_mark\", \"danger\", \"surprise\", \"punctuation\", \"wow\", \"warning\"],\n    k: [55, 26],\n    n: [\"heavy_exclamation_mark\"],\n    o: 2\n  },\n  leaves: {\n    a: \"Leaf Fluttering in Wind\",\n    b: \"1F343\",\n    j: [\"nature\", \"plant\", \"tree\", \"vegetable\", \"grass\", \"lawn\", \"spring\"],\n    k: [6, 27],\n    o: 2\n  },\n  heart: {\n    a: \"Heavy Black Heart\",\n    b: \"2764-FE0F\",\n    c: \"2764\",\n    j: [\"love\", \"like\", \"valentines\"],\n    k: [55, 28],\n    l: [\"<3\"],\n    m: \"<3\",\n    o: 2\n  },\n  jp: {\n    a: \"Japan Flag\",\n    b: \"1F1EF-1F1F5\",\n    j: [\"japanese\", \"nation\", \"flag\", \"country\", \"banner\"],\n    k: [2, 36],\n    n: [\"flag-jp\"],\n    o: 2\n  },\n  \"male-factory-worker\": {\n    a: \"Male Factory Worker\",\n    b: \"1F468-200D-1F3ED\",\n    k: [15, 17],\n    o: 4\n  },\n  credit_card: {\n    a: \"Credit Card\",\n    b: \"1F4B3\",\n    j: [\"money\", \"sales\", \"dollar\", \"bill\", \"payment\", \"shopping\"],\n    k: [26, 9],\n    o: 2\n  },\n  aerial_tramway: {\n    a: \"Aerial Tramway\",\n    b: \"1F6A1\",\n    j: [\"transportation\", \"vehicle\", \"ski\"],\n    k: [34, 32],\n    o: 2\n  },\n  \"female-factory-worker\": {\n    a: \"Female Factory Worker\",\n    b: \"1F469-200D-1F3ED\",\n    k: [18, 7],\n    o: 4\n  },\n  receipt: {\n    a: \"Receipt\",\n    b: \"1F9FE\",\n    k: [51, 49],\n    o: 11\n  },\n  wavy_dash: {\n    a: \"Wavy Dash\",\n    b: \"3030-FE0F\",\n    c: \"3030\",\n    j: [\"draw\", \"line\", \"moustache\", \"mustache\", \"squiggle\", \"scribble\"],\n    k: [55, 44],\n    o: 2\n  },\n  \"flag-ke\": {\n    a: \"Kenya Flag\",\n    b: \"1F1F0-1F1EA\",\n    k: [2, 37],\n    o: 2\n  },\n  satellite: {\n    a: \"Satellite\",\n    b: \"1F6F0-FE0F\",\n    c: \"1F6F0\",\n    j: [\"communication\", \"future\", \"radio\", \"space\"],\n    k: [36, 51],\n    o: 2\n  },\n  orange_heart: {\n    a: \"Orange Heart\",\n    b: \"1F9E1\",\n    k: [51, 20],\n    o: 5\n  },\n  yellow_heart: {\n    a: \"Yellow Heart\",\n    b: \"1F49B\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 37],\n    m: \"<3\",\n    o: 2\n  },\n  rocket: {\n    a: \"Rocket\",\n    b: \"1F680\",\n    j: [\"launch\", \"ship\", \"staffmode\", \"NASA\", \"outer space\", \"outer_space\", \"fly\"],\n    k: [33, 56],\n    o: 2\n  },\n  chart: {\n    a: \"Chart with Upwards Trend and Yen Sign\",\n    b: \"1F4B9\",\n    j: [\"green-square\", \"graph\", \"presentation\", \"stats\"],\n    k: [26, 15],\n    o: 2\n  },\n  \"flag-kg\": {\n    a: \"Kyrgyzstan Flag\",\n    b: \"1F1F0-1F1EC\",\n    k: [2, 38],\n    o: 2\n  },\n  currency_exchange: {\n    a: \"Currency Exchange\",\n    b: \"1F4B1\",\n    j: [\"money\", \"sales\", \"dollar\", \"travel\"],\n    k: [26, 7],\n    o: 2\n  },\n  green_heart: {\n    a: \"Green Heart\",\n    b: \"1F49A\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 36],\n    m: \"<3\",\n    o: 2\n  },\n  flying_saucer: {\n    a: \"Flying Saucer\",\n    b: \"1F6F8\",\n    k: [37, 0],\n    o: 5\n  },\n  \"flag-kh\": {\n    a: \"Cambodia Flag\",\n    b: \"1F1F0-1F1ED\",\n    k: [2, 39],\n    o: 2\n  },\n  \"male-office-worker\": {\n    a: \"Male Office Worker\",\n    b: \"1F468-200D-1F4BC\",\n    k: [15, 44],\n    o: 4\n  },\n  tm: {\n    a: \"Trade Mark Sign\",\n    b: \"2122-FE0F\",\n    c: \"2122\",\n    j: [\"trademark\", \"brand\", \"law\", \"legal\"],\n    k: [52, 12],\n    o: 2\n  },\n  bellhop_bell: {\n    a: \"Bellhop Bell\",\n    b: \"1F6CE-FE0F\",\n    c: \"1F6CE\",\n    j: [\"service\"],\n    k: [36, 36],\n    o: 2\n  },\n  blue_heart: {\n    a: \"Blue Heart\",\n    b: \"1F499\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 35],\n    m: \"<3\",\n    o: 2\n  },\n  \"flag-ki\": {\n    a: \"Kiribati Flag\",\n    b: \"1F1F0-1F1EE\",\n    k: [2, 40],\n    o: 2\n  },\n  heavy_dollar_sign: {\n    a: \"Heavy Dollar Sign\",\n    b: \"1F4B2\",\n    j: [\"money\", \"sales\", \"payment\", \"currency\", \"buck\"],\n    k: [26, 8],\n    o: 2\n  },\n  \"female-office-worker\": {\n    a: \"Female Office Worker\",\n    b: \"1F469-200D-1F4BC\",\n    k: [18, 29],\n    o: 4\n  },\n  purple_heart: {\n    a: \"Purple Heart\",\n    b: \"1F49C\",\n    j: [\"love\", \"like\", \"affection\", \"valentines\"],\n    k: [25, 38],\n    m: \"<3\",\n    o: 2\n  },\n  luggage: {\n    a: \"Luggage\",\n    b: \"1F9F3\",\n    k: [51, 38],\n    o: 11\n  },\n  \"flag-km\": {\n    a: \"Comoros Flag\",\n    b: \"1F1F0-1F1F2\",\n    k: [2, 41],\n    o: 2\n  },\n  email: {\n    a: \"Envelope\",\n    b: \"2709-FE0F\",\n    c: \"2709\",\n    j: [\"letter\", \"postal\", \"inbox\", \"communication\"],\n    k: [54, 42],\n    n: [\"envelope\"],\n    o: 2\n  },\n  \"e-mail\": {\n    a: \"E-Mail Symbol\",\n    b: \"1F4E7\",\n    j: [\"communication\", \"inbox\"],\n    k: [27, 4],\n    o: 2\n  },\n  \"flag-kn\": {\n    a: \"St. Kitts & Nevis Flag\",\n    b: \"1F1F0-1F1F3\",\n    k: [2, 42],\n    o: 2\n  },\n  hourglass: {\n    a: \"Hourglass\",\n    b: \"231B\",\n    j: [\"time\", \"clock\", \"oldschool\", \"limit\", \"exam\", \"quiz\", \"test\"],\n    k: [52, 23],\n    o: 2\n  },\n  brown_heart: {\n    a: \"Brown Heart\",\n    b: \"1F90E\",\n    k: [37, 16],\n    o: 12\n  },\n  \"male-scientist\": {\n    a: \"Male Scientist\",\n    b: \"1F468-200D-1F52C\",\n    k: [15, 56],\n    o: 4\n  },\n  hourglass_flowing_sand: {\n    a: \"Hourglass with Flowing Sand\",\n    b: \"23F3\",\n    j: [\"oldschool\", \"time\", \"countdown\"],\n    k: [52, 36],\n    o: 2\n  },\n  black_heart: {\n    a: \"Black Heart\",\n    b: \"1F5A4\",\n    j: [\"evil\"],\n    k: [30, 9],\n    o: 4\n  },\n  incoming_envelope: {\n    a: \"Incoming Envelope\",\n    b: \"1F4E8\",\n    j: [\"email\", \"inbox\"],\n    k: [27, 5],\n    o: 2\n  },\n  \"flag-kp\": {\n    a: \"North Korea Flag\",\n    b: \"1F1F0-1F1F5\",\n    k: [2, 43],\n    o: 2\n  },\n  \"female-scientist\": {\n    a: \"Female Scientist\",\n    b: \"1F469-200D-1F52C\",\n    k: [18, 41],\n    o: 4\n  },\n  watch: {\n    a: \"Watch\",\n    b: \"231A\",\n    j: [\"time\", \"accessories\"],\n    k: [52, 22],\n    o: 2\n  },\n  white_heart: {\n    a: \"White Heart\",\n    b: \"1F90D\",\n    k: [37, 15],\n    o: 12\n  },\n  kr: {\n    a: \"South Korea Flag\",\n    b: \"1F1F0-1F1F7\",\n    j: [\"south\", \"korea\", \"nation\", \"flag\", \"country\", \"banner\"],\n    k: [2, 44],\n    n: [\"flag-kr\"],\n    o: 2\n  },\n  envelope_with_arrow: {\n    a: \"Envelope with Downwards Arrow Above\",\n    b: \"1F4E9\",\n    j: [\"email\", \"communication\"],\n    k: [27, 6],\n    o: 2\n  },\n  outbox_tray: {\n    a: \"Outbox Tray\",\n    b: \"1F4E4\",\n    j: [\"inbox\", \"email\"],\n    k: [27, 1],\n    o: 2\n  },\n  \"male-technologist\": {\n    a: \"Male Technologist\",\n    b: \"1F468-200D-1F4BB\",\n    k: [15, 38],\n    o: 4\n  },\n  alarm_clock: {\n    a: \"Alarm Clock\",\n    b: \"23F0\",\n    j: [\"time\", \"wake\"],\n    k: [52, 33],\n    o: 2\n  },\n  \"flag-kw\": {\n    a: \"Kuwait Flag\",\n    b: \"1F1F0-1F1FC\",\n    k: [2, 45],\n    o: 2\n  },\n  anger: {\n    a: \"Anger Symbol\",\n    b: \"1F4A2\",\n    j: [\"angry\", \"mad\"],\n    k: [25, 44],\n    o: 2\n  },\n  inbox_tray: {\n    a: \"Inbox Tray\",\n    b: \"1F4E5\",\n    j: [\"email\", \"documents\"],\n    k: [27, 2],\n    o: 2\n  },\n  \"flag-ky\": {\n    a: \"Cayman Islands Flag\",\n    b: \"1F1F0-1F1FE\",\n    k: [2, 46],\n    o: 2\n  },\n  stopwatch: {\n    a: \"Stopwatch\",\n    b: \"23F1-FE0F\",\n    c: \"23F1\",\n    j: [\"time\", \"deadline\"],\n    k: [52, 34],\n    o: 2\n  },\n  \"female-technologist\": {\n    a: \"Female Technologist\",\n    b: \"1F469-200D-1F4BB\",\n    k: [18, 23],\n    o: 4\n  },\n  boom: {\n    a: \"Collision Symbol\",\n    b: \"1F4A5\",\n    j: [\"bomb\", \"explode\", \"explosion\", \"collision\", \"blown\"],\n    k: [25, 47],\n    n: [\"collision\"],\n    o: 2\n  },\n  \"flag-kz\": {\n    a: \"Kazakhstan Flag\",\n    b: \"1F1F0-1F1FF\",\n    k: [2, 47],\n    o: 2\n  },\n  timer_clock: {\n    a: \"Timer Clock\",\n    b: \"23F2-FE0F\",\n    c: \"23F2\",\n    j: [\"alarm\"],\n    k: [52, 35],\n    o: 2\n  },\n  \"package\": {\n    a: \"Package\",\n    b: \"1F4E6\",\n    j: [\"mail\", \"gift\", \"cardboard\", \"box\", \"moving\"],\n    k: [27, 3],\n    o: 2\n  },\n  mailbox: {\n    a: \"Closed Mailbox with Raised Flag\",\n    b: \"1F4EB\",\n    j: [\"email\", \"inbox\", \"communication\"],\n    k: [27, 8],\n    o: 2\n  },\n  \"flag-la\": {\n    a: \"Laos Flag\",\n    b: \"1F1F1-1F1E6\",\n    k: [2, 48],\n    o: 2\n  },\n  dizzy: {\n    a: \"Dizzy Symbol\",\n    b: \"1F4AB\",\n    j: [\"star\", \"sparkle\", \"shoot\", \"magic\"],\n    k: [26, 1],\n    o: 2\n  },\n  \"male-singer\": {\n    a: \"Male Singer\",\n    b: \"1F468-200D-1F3A4\",\n    k: [14, 56],\n    o: 4\n  },\n  mantelpiece_clock: {\n    a: \"Mantelpiece Clock\",\n    b: \"1F570-FE0F\",\n    c: \"1F570\",\n    j: [\"time\"],\n    k: [29, 7],\n    o: 2\n  },\n  \"female-singer\": {\n    a: \"Female Singer\",\n    b: \"1F469-200D-1F3A4\",\n    k: [17, 46],\n    o: 4\n  },\n  \"flag-lb\": {\n    a: \"Lebanon Flag\",\n    b: \"1F1F1-1F1E7\",\n    k: [2, 49],\n    o: 2\n  },\n  mailbox_closed: {\n    a: \"Closed Mailbox with Lowered Flag\",\n    b: \"1F4EA\",\n    j: [\"email\", \"communication\", \"inbox\"],\n    k: [27, 7],\n    o: 2\n  },\n  sweat_drops: {\n    a: \"Splashing Sweat Symbol\",\n    b: \"1F4A6\",\n    j: [\"water\", \"drip\", \"oops\"],\n    k: [25, 48],\n    o: 2\n  },\n  clock12: {\n    a: \"Clock Face Twelve Oclock\",\n    b: \"1F55B\",\n    j: [\"time\", \"noon\", \"midnight\", \"midday\", \"late\", \"early\", \"schedule\"],\n    k: [28, 50],\n    o: 2\n  },\n  mailbox_with_mail: {\n    a: \"Open Mailbox with Raised Flag\",\n    b: \"1F4EC\",\n    j: [\"email\", \"inbox\", \"communication\"],\n    k: [27, 9],\n    o: 2\n  },\n  clock1230: {\n    a: \"Clock Face Twelve-Thirty\",\n    b: \"1F567\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 5],\n    o: 2\n  },\n  dash: {\n    a: \"Dash Symbol\",\n    b: \"1F4A8\",\n    j: [\"wind\", \"air\", \"fast\", \"shoo\", \"fart\", \"smoke\", \"puff\"],\n    k: [25, 50],\n    o: 2\n  },\n  \"flag-lc\": {\n    a: \"St. Lucia Flag\",\n    b: \"1F1F1-1F1E8\",\n    k: [2, 50],\n    o: 2\n  },\n  hole: {\n    a: \"Hole\",\n    b: \"1F573-FE0F\",\n    c: \"1F573\",\n    j: [\"embarrassing\"],\n    k: [29, 8],\n    o: 2\n  },\n  \"male-artist\": {\n    a: \"Male Artist\",\n    b: \"1F468-200D-1F3A8\",\n    k: [15, 5],\n    o: 4\n  },\n  clock1: {\n    a: \"Clock Face One Oclock\",\n    b: \"1F550\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 39],\n    o: 2\n  },\n  mailbox_with_no_mail: {\n    a: \"Open Mailbox with Lowered Flag\",\n    b: \"1F4ED\",\n    j: [\"email\", \"inbox\"],\n    k: [27, 10],\n    o: 2\n  },\n  \"flag-li\": {\n    a: \"Liechtenstein Flag\",\n    b: \"1F1F1-1F1EE\",\n    k: [2, 51],\n    o: 2\n  },\n  bomb: {\n    a: \"Bomb\",\n    b: \"1F4A3\",\n    j: [\"boom\", \"explode\", \"explosion\", \"terrorism\"],\n    k: [25, 45],\n    o: 2\n  },\n  postbox: {\n    a: \"Postbox\",\n    b: \"1F4EE\",\n    j: [\"email\", \"letter\", \"envelope\"],\n    k: [27, 11],\n    o: 2\n  },\n  \"female-artist\": {\n    a: \"Female Artist\",\n    b: \"1F469-200D-1F3A8\",\n    k: [17, 52],\n    o: 4\n  },\n  clock130: {\n    a: \"Clock Face One-Thirty\",\n    b: \"1F55C\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 51],\n    o: 2\n  },\n  \"flag-lk\": {\n    a: \"Sri Lanka Flag\",\n    b: \"1F1F1-1F1F0\",\n    k: [2, 52],\n    o: 2\n  },\n  ballot_box_with_ballot: {\n    a: \"Ballot Box with Ballot\",\n    b: \"1F5F3-FE0F\",\n    c: \"1F5F3\",\n    k: [30, 28],\n    o: 2\n  },\n  keycap_ten: {\n    a: \"Keycap Ten\",\n    b: \"1F51F\",\n    j: [\"numbers\", \"10\", \"blue-square\"],\n    k: [28, 2],\n    o: 2\n  },\n  clock2: {\n    a: \"Clock Face Two Oclock\",\n    b: \"1F551\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 40],\n    o: 2\n  },\n  \"flag-lr\": {\n    a: \"Liberia Flag\",\n    b: \"1F1F1-1F1F7\",\n    k: [2, 53],\n    o: 2\n  },\n  speech_balloon: {\n    a: \"Speech Balloon\",\n    b: \"1F4AC\",\n    j: [\"bubble\", \"words\", \"message\", \"talk\", \"chatting\"],\n    k: [26, 2],\n    o: 2\n  },\n  \"flag-ls\": {\n    a: \"Lesotho Flag\",\n    b: \"1F1F1-1F1F8\",\n    k: [2, 54],\n    o: 2\n  },\n  clock230: {\n    a: \"Clock Face Two-Thirty\",\n    b: \"1F55D\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 52],\n    o: 2\n  },\n  \"male-pilot\": {\n    a: \"Male Pilot\",\n    b: \"1F468-200D-2708-FE0F\",\n    c: \"1F468-200D-2708\",\n    k: [17, 14],\n    o: 4\n  },\n  capital_abcd: {\n    a: \"Input Symbol for Latin Capital Letters\",\n    b: \"1F520\",\n    j: [\"alphabet\", \"words\", \"blue-square\"],\n    k: [28, 3],\n    o: 2\n  },\n  pencil2: {\n    a: \"Pencil\",\n    b: \"270F-FE0F\",\n    c: \"270F\",\n    j: [\"stationery\", \"write\", \"paper\", \"writing\", \"school\", \"study\"],\n    k: [55, 10],\n    o: 2\n  },\n  \"female-pilot\": {\n    a: \"Female Pilot\",\n    b: \"1F469-200D-2708-FE0F\",\n    c: \"1F469-200D-2708\",\n    k: [19, 56],\n    o: 4\n  },\n  black_nib: {\n    a: \"Black Nib\",\n    b: \"2712-FE0F\",\n    c: \"2712\",\n    j: [\"pen\", \"stationery\", \"writing\", \"write\"],\n    k: [55, 11],\n    o: 2\n  },\n  left_speech_bubble: {\n    a: \"Left Speech Bubble\",\n    b: \"1F5E8-FE0F\",\n    c: \"1F5E8\",\n    j: [\"words\", \"message\", \"talk\", \"chatting\"],\n    k: [30, 26],\n    o: 2\n  },\n  clock3: {\n    a: \"Clock Face Three Oclock\",\n    b: \"1F552\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 41],\n    o: 2\n  },\n  abcd: {\n    a: \"Input Symbol for Latin Small Letters\",\n    b: \"1F521\",\n    j: [\"blue-square\", \"alphabet\"],\n    k: [28, 4],\n    o: 2\n  },\n  \"flag-lt\": {\n    a: \"Lithuania Flag\",\n    b: \"1F1F1-1F1F9\",\n    k: [2, 55],\n    o: 2\n  },\n  clock330: {\n    a: \"Clock Face Three-Thirty\",\n    b: \"1F55E\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 53],\n    o: 2\n  },\n  \"flag-lu\": {\n    a: \"Luxembourg Flag\",\n    b: \"1F1F1-1F1FA\",\n    k: [2, 56],\n    o: 2\n  },\n  right_anger_bubble: {\n    a: \"Right Anger Bubble\",\n    b: \"1F5EF-FE0F\",\n    c: \"1F5EF\",\n    j: [\"caption\", \"speech\", \"thinking\", \"mad\"],\n    k: [30, 27],\n    o: 2\n  },\n  lower_left_fountain_pen: {\n    a: \"Lower Left Fountain Pen\",\n    b: \"1F58B-FE0F\",\n    c: \"1F58B\",\n    k: [29, 45],\n    o: 2\n  },\n  \"male-astronaut\": {\n    a: \"Male Astronaut\",\n    b: \"1F468-200D-1F680\",\n    k: [16, 5],\n    o: 4\n  },\n  thought_balloon: {\n    a: \"Thought Balloon\",\n    b: \"1F4AD\",\n    j: [\"bubble\", \"cloud\", \"speech\", \"thinking\", \"dream\"],\n    k: [26, 3],\n    o: 2\n  },\n  symbols: {\n    a: \"Input Symbol for Symbols\",\n    b: \"1F523\",\n    j: [\"blue-square\", \"music\", \"note\", \"ampersand\", \"percent\", \"glyphs\", \"characters\"],\n    k: [28, 6],\n    o: 2\n  },\n  clock4: {\n    a: \"Clock Face Four Oclock\",\n    b: \"1F553\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 42],\n    o: 2\n  },\n  \"flag-lv\": {\n    a: \"Latvia Flag\",\n    b: \"1F1F1-1F1FB\",\n    k: [3, 0],\n    o: 2\n  },\n  lower_left_ballpoint_pen: {\n    a: \"Lower Left Ballpoint Pen\",\n    b: \"1F58A-FE0F\",\n    c: \"1F58A\",\n    k: [29, 44],\n    o: 2\n  },\n  abc: {\n    a: \"Input Symbol for Latin Letters\",\n    b: \"1F524\",\n    j: [\"blue-square\", \"alphabet\"],\n    k: [28, 7],\n    o: 2\n  },\n  zzz: {\n    a: \"Sleeping Symbol\",\n    b: \"1F4A4\",\n    j: [\"sleepy\", \"tired\", \"dream\"],\n    k: [25, 46],\n    o: 2\n  },\n  lower_left_paintbrush: {\n    a: \"Lower Left Paintbrush\",\n    b: \"1F58C-FE0F\",\n    c: \"1F58C\",\n    k: [29, 46],\n    o: 2\n  },\n  \"female-astronaut\": {\n    a: \"Female Astronaut\",\n    b: \"1F469-200D-1F680\",\n    k: [18, 47],\n    o: 4\n  },\n  \"flag-ly\": {\n    a: \"Libya Flag\",\n    b: \"1F1F1-1F1FE\",\n    k: [3, 1],\n    o: 2\n  },\n  clock430: {\n    a: \"Clock Face Four-Thirty\",\n    b: \"1F55F\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 54],\n    o: 2\n  },\n  \"flag-ma\": {\n    a: \"Morocco Flag\",\n    b: \"1F1F2-1F1E6\",\n    k: [3, 2],\n    o: 2\n  },\n  a: {\n    a: \"Negative Squared Latin Capital Letter a\",\n    b: \"1F170-FE0F\",\n    c: \"1F170\",\n    j: [\"red-square\", \"alphabet\", \"letter\"],\n    k: [0, 16],\n    o: 2\n  },\n  clock5: {\n    a: \"Clock Face Five Oclock\",\n    b: \"1F554\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 43],\n    o: 2\n  },\n  lower_left_crayon: {\n    a: \"Lower Left Crayon\",\n    b: \"1F58D-FE0F\",\n    c: \"1F58D\",\n    k: [29, 47],\n    o: 2\n  },\n  \"male-firefighter\": {\n    a: \"Male Firefighter\",\n    b: \"1F468-200D-1F692\",\n    k: [16, 11],\n    o: 4\n  },\n  memo: {\n    a: \"Memo\",\n    b: \"1F4DD\",\n    j: [\"write\", \"documents\", \"stationery\", \"pencil\", \"paper\", \"writing\", \"legal\", \"exam\", \"quiz\", \"test\", \"study\", \"compose\"],\n    k: [26, 51],\n    n: [\"pencil\"],\n    o: 2\n  },\n  ab: {\n    a: \"Negative Squared Ab\",\n    b: \"1F18E\",\n    j: [\"red-square\", \"alphabet\"],\n    k: [0, 20],\n    o: 2\n  },\n  \"flag-mc\": {\n    a: \"Monaco Flag\",\n    b: \"1F1F2-1F1E8\",\n    k: [3, 3],\n    o: 2\n  },\n  clock530: {\n    a: \"Clock Face Five-Thirty\",\n    b: \"1F560\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 55],\n    o: 2\n  },\n  briefcase: {\n    a: \"Briefcase\",\n    b: \"1F4BC\",\n    j: [\"business\", \"documents\", \"work\", \"law\", \"legal\", \"job\", \"career\"],\n    k: [26, 18],\n    o: 2\n  },\n  \"female-firefighter\": {\n    a: \"Female Firefighter\",\n    b: \"1F469-200D-1F692\",\n    k: [18, 53],\n    o: 4\n  },\n  clock6: {\n    a: \"Clock Face Six Oclock\",\n    b: \"1F555\",\n    j: [\"time\", \"late\", \"early\", \"schedule\", \"dawn\", \"dusk\"],\n    k: [28, 44],\n    o: 2\n  },\n  b: {\n    a: \"Negative Squared Latin Capital Letter B\",\n    b: \"1F171-FE0F\",\n    c: \"1F171\",\n    j: [\"red-square\", \"alphabet\", \"letter\"],\n    k: [0, 17],\n    o: 2\n  },\n  \"flag-md\": {\n    a: \"Moldova Flag\",\n    b: \"1F1F2-1F1E9\",\n    k: [3, 4],\n    o: 2\n  },\n  clock630: {\n    a: \"Clock Face Six-Thirty\",\n    b: \"1F561\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 56],\n    o: 2\n  },\n  cl: {\n    a: \"Squared Cl\",\n    b: \"1F191\",\n    j: [\"alphabet\", \"words\", \"red-square\"],\n    k: [0, 21],\n    o: 2\n  },\n  \"flag-me\": {\n    a: \"Montenegro Flag\",\n    b: \"1F1F2-1F1EA\",\n    k: [3, 5],\n    o: 2\n  },\n  file_folder: {\n    a: \"File Folder\",\n    b: \"1F4C1\",\n    j: [\"documents\", \"business\", \"office\"],\n    k: [26, 23],\n    o: 2\n  },\n  \"male-police-officer\": {\n    obsoletes: \"1F46E\",\n    a: \"Male Police Officer\",\n    b: \"1F46E-200D-2642-FE0F\",\n    c: \"1F46E-200D-2642\",\n    k: [21, 43],\n    o: 4\n  },\n  cool: {\n    a: \"Squared Cool\",\n    b: \"1F192\",\n    j: [\"words\", \"blue-square\"],\n    k: [0, 22],\n    o: 2\n  },\n  clock7: {\n    a: \"Clock Face Seven Oclock\",\n    b: \"1F556\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 45],\n    o: 2\n  },\n  \"flag-mf\": {\n    a: \"St. Martin Flag\",\n    b: \"1F1F2-1F1EB\",\n    k: [3, 6],\n    o: 2\n  },\n  open_file_folder: {\n    a: \"Open File Folder\",\n    b: \"1F4C2\",\n    j: [\"documents\", \"load\"],\n    k: [26, 24],\n    o: 2\n  },\n  card_index_dividers: {\n    a: \"Card Index Dividers\",\n    b: \"1F5C2-FE0F\",\n    c: \"1F5C2\",\n    j: [\"organizing\", \"business\", \"stationery\"],\n    k: [30, 15],\n    o: 2\n  },\n  \"flag-mg\": {\n    a: \"Madagascar Flag\",\n    b: \"1F1F2-1F1EC\",\n    k: [3, 7],\n    o: 2\n  },\n  free: {\n    a: \"Squared Free\",\n    b: \"1F193\",\n    j: [\"blue-square\", \"words\"],\n    k: [0, 23],\n    o: 2\n  },\n  \"female-police-officer\": {\n    a: \"Female Police Officer\",\n    b: \"1F46E-200D-2640-FE0F\",\n    c: \"1F46E-200D-2640\",\n    k: [21, 37],\n    o: 4\n  },\n  clock730: {\n    a: \"Clock Face Seven-Thirty\",\n    b: \"1F562\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 0],\n    o: 2\n  },\n  date: {\n    a: \"Calendar\",\n    b: \"1F4C5\",\n    j: [\"calendar\", \"schedule\"],\n    k: [26, 27],\n    o: 2\n  },\n  clock8: {\n    a: \"Clock Face Eight Oclock\",\n    b: \"1F557\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 46],\n    o: 2\n  },\n  information_source: {\n    a: \"Information Source\",\n    b: \"2139-FE0F\",\n    c: \"2139\",\n    j: [\"blue-square\", \"alphabet\", \"letter\"],\n    k: [52, 13],\n    o: 2\n  },\n  \"flag-mh\": {\n    a: \"Marshall Islands Flag\",\n    b: \"1F1F2-1F1ED\",\n    k: [3, 8],\n    o: 2\n  },\n  clock830: {\n    a: \"Clock Face Eight-Thirty\",\n    b: \"1F563\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 1],\n    o: 2\n  },\n  calendar: {\n    a: \"Tear-off Calendar\",\n    b: \"1F4C6\",\n    j: [\"schedule\", \"date\", \"planning\"],\n    k: [26, 28],\n    o: 2\n  },\n  \"flag-mk\": {\n    a: \"North Macedonia Flag\",\n    b: \"1F1F2-1F1F0\",\n    k: [3, 9],\n    o: 2\n  },\n  id: {\n    a: \"Squared Id\",\n    b: \"1F194\",\n    j: [\"purple-square\", \"words\"],\n    k: [0, 24],\n    o: 2\n  },\n  spiral_note_pad: {\n    a: \"Spiral Note Pad\",\n    b: \"1F5D2-FE0F\",\n    c: \"1F5D2\",\n    k: [30, 19],\n    o: 2\n  },\n  clock9: {\n    a: \"Clock Face Nine Oclock\",\n    b: \"1F558\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 47],\n    o: 2\n  },\n  \"flag-ml\": {\n    a: \"Mali Flag\",\n    b: \"1F1F2-1F1F1\",\n    k: [3, 10],\n    o: 2\n  },\n  m: {\n    a: \"Circled Latin Capital Letter M\",\n    b: \"24C2-FE0F\",\n    c: \"24C2\",\n    j: [\"alphabet\", \"blue-circle\", \"letter\"],\n    k: [52, 40],\n    o: 2\n  },\n  \"flag-mm\": {\n    a: \"Myanmar (burma) Flag\",\n    b: \"1F1F2-1F1F2\",\n    k: [3, 11],\n    o: 2\n  },\n  clock930: {\n    a: \"Clock Face Nine-Thirty\",\n    b: \"1F564\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 2],\n    o: 2\n  },\n  \"new\": {\n    a: \"Squared New\",\n    b: \"1F195\",\n    j: [\"blue-square\", \"words\", \"start\"],\n    k: [0, 25],\n    o: 2\n  },\n  spiral_calendar_pad: {\n    a: \"Spiral Calendar Pad\",\n    b: \"1F5D3-FE0F\",\n    c: \"1F5D3\",\n    k: [30, 20],\n    o: 2\n  },\n  ng: {\n    a: \"Squared Ng\",\n    b: \"1F196\",\n    j: [\"blue-square\", \"words\", \"shape\", \"icon\"],\n    k: [0, 26],\n    o: 2\n  },\n  card_index: {\n    a: \"Card Index\",\n    b: \"1F4C7\",\n    j: [\"business\", \"stationery\"],\n    k: [26, 29],\n    o: 2\n  },\n  clock10: {\n    a: \"Clock Face Ten Oclock\",\n    b: \"1F559\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 48],\n    o: 2\n  },\n  \"flag-mn\": {\n    a: \"Mongolia Flag\",\n    b: \"1F1F2-1F1F3\",\n    k: [3, 12],\n    o: 2\n  },\n  \"male-guard\": {\n    obsoletes: \"1F482\",\n    a: \"Male Guard\",\n    b: \"1F482-200D-2642-FE0F\",\n    c: \"1F482-200D-2642\",\n    k: [24, 14],\n    o: 4\n  },\n  \"flag-mo\": {\n    a: \"Macao Sar China Flag\",\n    b: \"1F1F2-1F1F4\",\n    k: [3, 13],\n    o: 2\n  },\n  clock1030: {\n    a: \"Clock Face Ten-Thirty\",\n    b: \"1F565\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 3],\n    o: 2\n  },\n  chart_with_upwards_trend: {\n    a: \"Chart with Upwards Trend\",\n    b: \"1F4C8\",\n    j: [\"graph\", \"presentation\", \"stats\", \"recovery\", \"business\", \"economics\", \"money\", \"sales\", \"good\", \"success\"],\n    k: [26, 30],\n    o: 2\n  },\n  o2: {\n    a: \"Negative Squared Latin Capital Letter O\",\n    b: \"1F17E-FE0F\",\n    c: \"1F17E\",\n    j: [\"alphabet\", \"red-square\", \"letter\"],\n    k: [0, 18],\n    o: 2\n  },\n  \"female-guard\": {\n    a: \"Female Guard\",\n    b: \"1F482-200D-2640-FE0F\",\n    c: \"1F482-200D-2640\",\n    k: [24, 8],\n    o: 4\n  },\n  chart_with_downwards_trend: {\n    a: \"Chart with Downwards Trend\",\n    b: \"1F4C9\",\n    j: [\"graph\", \"presentation\", \"stats\", \"recession\", \"business\", \"economics\", \"money\", \"sales\", \"bad\", \"failure\"],\n    k: [26, 31],\n    o: 2\n  },\n  \"flag-mp\": {\n    a: \"Northern Mariana Islands Flag\",\n    b: \"1F1F2-1F1F5\",\n    k: [3, 14],\n    o: 2\n  },\n  ok: {\n    a: \"Squared Ok\",\n    b: \"1F197\",\n    j: [\"good\", \"agree\", \"yes\", \"blue-square\"],\n    k: [0, 27],\n    o: 2\n  },\n  clock11: {\n    a: \"Clock Face Eleven Oclock\",\n    b: \"1F55A\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [28, 49],\n    o: 2\n  },\n  \"male-construction-worker\": {\n    obsoletes: \"1F477\",\n    a: \"Male Construction Worker\",\n    b: \"1F477-200D-2642-FE0F\",\n    c: \"1F477-200D-2642\",\n    k: [23, 16],\n    o: 4\n  },\n  clock1130: {\n    a: \"Clock Face Eleven-Thirty\",\n    b: \"1F566\",\n    j: [\"time\", \"late\", \"early\", \"schedule\"],\n    k: [29, 4],\n    o: 2\n  },\n  \"flag-mq\": {\n    a: \"Martinique Flag\",\n    b: \"1F1F2-1F1F6\",\n    k: [3, 15],\n    o: 2\n  },\n  bar_chart: {\n    a: \"Bar Chart\",\n    b: \"1F4CA\",\n    j: [\"graph\", \"presentation\", \"stats\"],\n    k: [26, 32],\n    o: 2\n  },\n  parking: {\n    a: \"Negative Squared Latin Capital Letter P\",\n    b: \"1F17F-FE0F\",\n    c: \"1F17F\",\n    j: [\"cars\", \"blue-square\", \"alphabet\", \"letter\"],\n    k: [0, 19],\n    o: 2\n  },\n  new_moon: {\n    a: \"New Moon Symbol\",\n    b: \"1F311\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 36],\n    o: 2\n  },\n  \"female-construction-worker\": {\n    a: \"Female Construction Worker\",\n    b: \"1F477-200D-2640-FE0F\",\n    c: \"1F477-200D-2640\",\n    k: [23, 10],\n    o: 4\n  },\n  sos: {\n    a: \"Squared Sos\",\n    b: \"1F198\",\n    j: [\"help\", \"red-square\", \"words\", \"emergency\", \"911\"],\n    k: [0, 28],\n    o: 2\n  },\n  clipboard: {\n    a: \"Clipboard\",\n    b: \"1F4CB\",\n    j: [\"stationery\", \"documents\"],\n    k: [26, 33],\n    o: 2\n  },\n  \"flag-mr\": {\n    a: \"Mauritania Flag\",\n    b: \"1F1F2-1F1F7\",\n    k: [3, 16],\n    o: 2\n  },\n  prince: {\n    a: \"Prince\",\n    b: \"1F934\",\n    j: [\"boy\", \"man\", \"male\", \"crown\", \"royal\", \"king\"],\n    k: [39, 17],\n    o: 4\n  },\n  waxing_crescent_moon: {\n    a: \"Waxing Crescent Moon Symbol\",\n    b: \"1F312\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 37],\n    o: 2\n  },\n  \"flag-ms\": {\n    a: \"Montserrat Flag\",\n    b: \"1F1F2-1F1F8\",\n    k: [3, 17],\n    o: 2\n  },\n  pushpin: {\n    a: \"Pushpin\",\n    b: \"1F4CC\",\n    j: [\"stationery\", \"mark\", \"here\"],\n    k: [26, 34],\n    o: 2\n  },\n  up: {\n    a: \"Squared Up with Exclamation Mark\",\n    b: \"1F199\",\n    j: [\"blue-square\", \"above\", \"high\"],\n    k: [0, 29],\n    o: 2\n  },\n  \"flag-mt\": {\n    a: \"Malta Flag\",\n    b: \"1F1F2-1F1F9\",\n    k: [3, 18],\n    o: 2\n  },\n  princess: {\n    a: \"Princess\",\n    b: \"1F478\",\n    j: [\"girl\", \"woman\", \"female\", \"blond\", \"crown\", \"royal\", \"queen\"],\n    k: [23, 28],\n    o: 2\n  },\n  round_pushpin: {\n    a: \"Round Pushpin\",\n    b: \"1F4CD\",\n    j: [\"stationery\", \"location\", \"map\", \"here\"],\n    k: [26, 35],\n    o: 2\n  },\n  first_quarter_moon: {\n    a: \"First Quarter Moon Symbol\",\n    b: \"1F313\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 38],\n    o: 2\n  },\n  vs: {\n    a: \"Squared Vs\",\n    b: \"1F19A\",\n    j: [\"words\", \"orange-square\"],\n    k: [0, 30],\n    o: 2\n  },\n  \"flag-mu\": {\n    a: \"Mauritius Flag\",\n    b: \"1F1F2-1F1FA\",\n    k: [3, 19],\n    o: 2\n  },\n  koko: {\n    a: \"Squared Katakana Koko\",\n    b: \"1F201\",\n    j: [\"blue-square\", \"here\", \"katakana\", \"japanese\", \"destination\"],\n    k: [5, 4],\n    o: 2\n  },\n  moon: {\n    a: \"Waxing Gibbous Moon Symbol\",\n    b: \"1F314\",\n    k: [5, 39],\n    n: [\"waxing_gibbous_moon\"],\n    o: 2\n  },\n  paperclip: {\n    a: \"Paperclip\",\n    b: \"1F4CE\",\n    j: [\"documents\", \"stationery\"],\n    k: [26, 36],\n    o: 2\n  },\n  linked_paperclips: {\n    a: \"Linked Paperclips\",\n    b: \"1F587-FE0F\",\n    c: \"1F587\",\n    k: [29, 43],\n    o: 2\n  },\n  \"man-wearing-turban\": {\n    obsoletes: \"1F473\",\n    a: \"Man Wearing Turban\",\n    b: \"1F473-200D-2642-FE0F\",\n    c: \"1F473-200D-2642\",\n    k: [22, 37],\n    o: 4\n  },\n  sa: {\n    a: \"Squared Katakana Sa\",\n    b: \"1F202-FE0F\",\n    c: \"1F202\",\n    j: [\"japanese\", \"blue-square\", \"katakana\"],\n    k: [5, 5],\n    o: 2\n  },\n  full_moon: {\n    a: \"Full Moon Symbol\",\n    b: \"1F315\",\n    j: [\"nature\", \"yellow\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 40],\n    o: 2\n  },\n  \"flag-mv\": {\n    a: \"Maldives Flag\",\n    b: \"1F1F2-1F1FB\",\n    k: [3, 20],\n    o: 2\n  },\n  \"flag-mw\": {\n    a: \"Malawi Flag\",\n    b: \"1F1F2-1F1FC\",\n    k: [3, 21],\n    o: 2\n  },\n  waning_gibbous_moon: {\n    a: \"Waning Gibbous Moon Symbol\",\n    b: \"1F316\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\", \"waxing_gibbous_moon\"],\n    k: [5, 41],\n    o: 2\n  },\n  \"woman-wearing-turban\": {\n    a: \"Woman Wearing Turban\",\n    b: \"1F473-200D-2640-FE0F\",\n    c: \"1F473-200D-2640\",\n    k: [22, 31],\n    o: 4\n  },\n  u6708: {\n    a: \"Squared Cjk Unified Ideograph-6708\",\n    b: \"1F237-FE0F\",\n    c: \"1F237\",\n    j: [\"chinese\", \"month\", \"moon\", \"japanese\", \"orange-square\", \"kanji\"],\n    k: [5, 13],\n    o: 2\n  },\n  straight_ruler: {\n    a: \"Straight Ruler\",\n    b: \"1F4CF\",\n    j: [\"stationery\", \"calculate\", \"length\", \"math\", \"school\", \"drawing\", \"architect\", \"sketch\"],\n    k: [26, 37],\n    o: 2\n  },\n  u6709: {\n    a: \"Squared Cjk Unified Ideograph-6709\",\n    b: \"1F236\",\n    j: [\"orange-square\", \"chinese\", \"have\", \"kanji\"],\n    k: [5, 12],\n    o: 2\n  },\n  triangular_ruler: {\n    a: \"Triangular Ruler\",\n    b: \"1F4D0\",\n    j: [\"stationery\", \"math\", \"architect\", \"sketch\"],\n    k: [26, 38],\n    o: 2\n  },\n  man_with_gua_pi_mao: {\n    a: \"Man with Gua Pi Mao\",\n    b: \"1F472\",\n    j: [\"male\", \"boy\", \"chinese\"],\n    k: [22, 25],\n    o: 2\n  },\n  \"flag-mx\": {\n    a: \"Mexico Flag\",\n    b: \"1F1F2-1F1FD\",\n    k: [3, 22],\n    o: 2\n  },\n  last_quarter_moon: {\n    a: \"Last Quarter Moon Symbol\",\n    b: \"1F317\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 42],\n    o: 2\n  },\n  person_with_headscarf: {\n    a: \"Person with Headscarf\",\n    b: \"1F9D5\",\n    k: [48, 34],\n    o: 5\n  },\n  waning_crescent_moon: {\n    a: \"Waning Crescent Moon Symbol\",\n    b: \"1F318\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 43],\n    o: 2\n  },\n  u6307: {\n    a: \"Squared Cjk Unified Ideograph-6307\",\n    b: \"1F22F\",\n    j: [\"chinese\", \"point\", \"green-square\", \"kanji\"],\n    k: [5, 7],\n    o: 2\n  },\n  scissors: {\n    a: \"Black Scissors\",\n    b: \"2702-FE0F\",\n    c: \"2702\",\n    j: [\"stationery\", \"cut\"],\n    k: [54, 39],\n    o: 2\n  },\n  \"flag-my\": {\n    a: \"Malaysia Flag\",\n    b: \"1F1F2-1F1FE\",\n    k: [3, 23],\n    o: 2\n  },\n  ideograph_advantage: {\n    a: \"Circled Ideograph Advantage\",\n    b: \"1F250\",\n    j: [\"chinese\", \"kanji\", \"obtain\", \"get\", \"circle\"],\n    k: [5, 17],\n    o: 2\n  },\n  man_in_tuxedo: {\n    a: \"Man in Tuxedo\",\n    b: \"1F935\",\n    j: [\"couple\", \"marriage\", \"wedding\", \"groom\"],\n    k: [39, 23],\n    o: 4\n  },\n  \"flag-mz\": {\n    a: \"Mozambique Flag\",\n    b: \"1F1F2-1F1FF\",\n    k: [3, 24],\n    o: 2\n  },\n  card_file_box: {\n    a: \"Card File Box\",\n    b: \"1F5C3-FE0F\",\n    c: \"1F5C3\",\n    j: [\"business\", \"stationery\"],\n    k: [30, 16],\n    o: 2\n  },\n  crescent_moon: {\n    a: \"Crescent Moon\",\n    b: \"1F319\",\n    j: [\"night\", \"sleep\", \"sky\", \"evening\", \"magic\"],\n    k: [5, 44],\n    o: 2\n  },\n  \"flag-na\": {\n    a: \"Namibia Flag\",\n    b: \"1F1F3-1F1E6\",\n    k: [3, 25],\n    o: 2\n  },\n  bride_with_veil: {\n    a: \"Bride with Veil\",\n    b: \"1F470\",\n    j: [\"couple\", \"marriage\", \"wedding\", \"woman\", \"bride\"],\n    k: [22, 1],\n    o: 2\n  },\n  new_moon_with_face: {\n    a: \"New Moon with Face\",\n    b: \"1F31A\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 45],\n    o: 2\n  },\n  file_cabinet: {\n    a: \"File Cabinet\",\n    b: \"1F5C4-FE0F\",\n    c: \"1F5C4\",\n    j: [\"filing\", \"organizing\"],\n    k: [30, 17],\n    o: 2\n  },\n  u5272: {\n    a: \"Squared Cjk Unified Ideograph-5272\",\n    b: \"1F239\",\n    j: [\"cut\", \"divide\", \"chinese\", \"kanji\", \"pink-square\"],\n    k: [5, 15],\n    o: 2\n  },\n  wastebasket: {\n    a: \"Wastebasket\",\n    b: \"1F5D1-FE0F\",\n    c: \"1F5D1\",\n    j: [\"bin\", \"trash\", \"rubbish\", \"garbage\", \"toss\"],\n    k: [30, 18],\n    o: 2\n  },\n  pregnant_woman: {\n    a: \"Pregnant Woman\",\n    b: \"1F930\",\n    j: [\"baby\"],\n    k: [38, 50],\n    o: 4\n  },\n  first_quarter_moon_with_face: {\n    a: \"First Quarter Moon with Face\",\n    b: \"1F31B\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 46],\n    o: 2\n  },\n  \"flag-nc\": {\n    a: \"New Caledonia Flag\",\n    b: \"1F1F3-1F1E8\",\n    k: [3, 26],\n    o: 2\n  },\n  u7121: {\n    a: \"Squared Cjk Unified Ideograph-7121\",\n    b: \"1F21A\",\n    j: [\"nothing\", \"chinese\", \"kanji\", \"japanese\", \"orange-square\"],\n    k: [5, 6],\n    o: 2\n  },\n  lock: {\n    a: \"Lock\",\n    b: \"1F512\",\n    j: [\"security\", \"password\", \"padlock\"],\n    k: [27, 46],\n    o: 2\n  },\n  \"flag-ne\": {\n    a: \"Niger Flag\",\n    b: \"1F1F3-1F1EA\",\n    k: [3, 27],\n    o: 2\n  },\n  last_quarter_moon_with_face: {\n    a: \"Last Quarter Moon with Face\",\n    b: \"1F31C\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 47],\n    o: 2\n  },\n  \"breast-feeding\": {\n    a: \"Breast-Feeding\",\n    b: \"1F931\",\n    k: [38, 56],\n    o: 5\n  },\n  u7981: {\n    a: \"Squared Cjk Unified Ideograph-7981\",\n    b: \"1F232\",\n    j: [\"kanji\", \"japanese\", \"chinese\", \"forbidden\", \"limit\", \"restricted\", \"red-square\"],\n    k: [5, 8],\n    o: 2\n  },\n  accept: {\n    a: \"Circled Ideograph Accept\",\n    b: \"1F251\",\n    j: [\"ok\", \"good\", \"chinese\", \"kanji\", \"agree\", \"yes\", \"orange-circle\"],\n    k: [5, 18],\n    o: 2\n  },\n  angel: {\n    a: \"Baby Angel\",\n    b: \"1F47C\",\n    j: [\"heaven\", \"wings\", \"halo\"],\n    k: [23, 37],\n    o: 2\n  },\n  unlock: {\n    a: \"Open Lock\",\n    b: \"1F513\",\n    j: [\"privacy\", \"security\"],\n    k: [27, 47],\n    o: 2\n  },\n  \"flag-nf\": {\n    a: \"Norfolk Island Flag\",\n    b: \"1F1F3-1F1EB\",\n    k: [3, 28],\n    o: 2\n  },\n  thermometer: {\n    a: \"Thermometer\",\n    b: \"1F321-FE0F\",\n    c: \"1F321\",\n    j: [\"weather\", \"temperature\", \"hot\", \"cold\"],\n    k: [5, 52],\n    o: 2\n  },\n  \"flag-ng\": {\n    a: \"Nigeria Flag\",\n    b: \"1F1F3-1F1EC\",\n    k: [3, 29],\n    o: 2\n  },\n  u7533: {\n    a: \"Squared Cjk Unified Ideograph-7533\",\n    b: \"1F238\",\n    j: [\"chinese\", \"japanese\", \"kanji\", \"orange-square\"],\n    k: [5, 14],\n    o: 2\n  },\n  sunny: {\n    a: \"Black Sun with Rays\",\n    b: \"2600-FE0F\",\n    c: \"2600\",\n    j: [\"weather\", \"nature\", \"brightness\", \"summer\", \"beach\", \"spring\"],\n    k: [52, 49],\n    o: 2\n  },\n  lock_with_ink_pen: {\n    a: \"Lock with Ink Pen\",\n    b: \"1F50F\",\n    j: [\"security\", \"secret\"],\n    k: [27, 43],\n    o: 2\n  },\n  santa: {\n    a: \"Father Christmas\",\n    b: \"1F385\",\n    j: [\"festival\", \"man\", \"male\", \"xmas\", \"father christmas\"],\n    k: [7, 36],\n    o: 2\n  },\n  closed_lock_with_key: {\n    a: \"Closed Lock with Key\",\n    b: \"1F510\",\n    j: [\"security\", \"privacy\"],\n    k: [27, 44],\n    o: 2\n  },\n  u5408: {\n    a: \"Squared Cjk Unified Ideograph-5408\",\n    b: \"1F234\",\n    j: [\"japanese\", \"chinese\", \"join\", \"kanji\", \"red-square\"],\n    k: [5, 10],\n    o: 2\n  },\n  \"flag-ni\": {\n    a: \"Nicaragua Flag\",\n    b: \"1F1F3-1F1EE\",\n    k: [3, 30],\n    o: 2\n  },\n  mrs_claus: {\n    a: \"Mother Christmas\",\n    b: \"1F936\",\n    j: [\"woman\", \"female\", \"xmas\", \"mother christmas\"],\n    k: [39, 29],\n    n: [\"mother_christmas\"],\n    o: 4\n  },\n  full_moon_with_face: {\n    a: \"Full Moon with Face\",\n    b: \"1F31D\",\n    j: [\"nature\", \"twilight\", \"planet\", \"space\", \"night\", \"evening\", \"sleep\"],\n    k: [5, 48],\n    o: 2\n  },\n  key: {\n    a: \"Key\",\n    b: \"1F511\",\n    j: [\"lock\", \"door\", \"password\"],\n    k: [27, 45],\n    o: 2\n  },\n  superhero: {\n    a: \"Superhero\",\n    b: \"1F9B8\",\n    k: [43, 30],\n    o: 11\n  },\n  \"flag-nl\": {\n    a: \"Netherlands Flag\",\n    b: \"1F1F3-1F1F1\",\n    k: [3, 31],\n    o: 2\n  },\n  u7a7a: {\n    a: \"Squared Cjk Unified Ideograph-7a7a\",\n    b: \"1F233\",\n    j: [\"kanji\", \"japanese\", \"chinese\", \"empty\", \"sky\", \"blue-square\"],\n    k: [5, 9],\n    o: 2\n  },\n  sun_with_face: {\n    a: \"Sun with Face\",\n    b: \"1F31E\",\n    j: [\"nature\", \"morning\", \"sky\"],\n    k: [5, 49],\n    o: 2\n  },\n  male_superhero: {\n    a: \"Male Superhero\",\n    b: \"1F9B8-200D-2642-FE0F\",\n    c: \"1F9B8-200D-2642\",\n    k: [43, 24],\n    o: 11\n  },\n  ringed_planet: {\n    a: \"Ringed Planet\",\n    b: \"1FA90\",\n    k: [52, 4],\n    o: 12\n  },\n  old_key: {\n    a: \"Old Key\",\n    b: \"1F5DD-FE0F\",\n    c: \"1F5DD\",\n    j: [\"lock\", \"door\", \"password\"],\n    k: [30, 22],\n    o: 2\n  },\n  congratulations: {\n    a: \"Circled Ideograph Congratulation\",\n    b: \"3297-FE0F\",\n    c: \"3297\",\n    j: [\"chinese\", \"kanji\", \"japanese\", \"red-circle\"],\n    k: [55, 46],\n    o: 2\n  },\n  \"flag-no\": {\n    a: \"Norway Flag\",\n    b: \"1F1F3-1F1F4\",\n    k: [3, 32],\n    o: 2\n  },\n  star: {\n    a: \"White Medium Star\",\n    b: \"2B50\",\n    j: [\"night\", \"yellow\"],\n    k: [55, 42],\n    o: 2\n  },\n  secret: {\n    a: \"Circled Ideograph Secret\",\n    b: \"3299-FE0F\",\n    c: \"3299\",\n    j: [\"privacy\", \"chinese\", \"sshh\", \"kanji\", \"red-circle\"],\n    k: [55, 47],\n    o: 2\n  },\n  \"flag-np\": {\n    a: \"Nepal Flag\",\n    b: \"1F1F3-1F1F5\",\n    k: [3, 33],\n    o: 2\n  },\n  female_superhero: {\n    a: \"Female Superhero\",\n    b: \"1F9B8-200D-2640-FE0F\",\n    c: \"1F9B8-200D-2640\",\n    k: [43, 18],\n    o: 11\n  },\n  hammer: {\n    a: \"Hammer\",\n    b: \"1F528\",\n    j: [\"tools\", \"build\", \"create\"],\n    k: [28, 11],\n    o: 2\n  },\n  star2: {\n    a: \"Glowing Star\",\n    b: \"1F31F\",\n    j: [\"night\", \"sparkle\", \"awesome\", \"good\", \"magic\"],\n    k: [5, 50],\n    o: 2\n  },\n  \"flag-nr\": {\n    a: \"Nauru Flag\",\n    b: \"1F1F3-1F1F7\",\n    k: [3, 34],\n    o: 2\n  },\n  axe: {\n    a: \"Axe\",\n    b: \"1FA93\",\n    k: [52, 7],\n    o: 12\n  },\n  u55b6: {\n    a: \"Squared Cjk Unified Ideograph-55b6\",\n    b: \"1F23A\",\n    j: [\"japanese\", \"opening hours\", \"orange-square\"],\n    k: [5, 16],\n    o: 2\n  },\n  supervillain: {\n    a: \"Supervillain\",\n    b: \"1F9B9\",\n    k: [43, 48],\n    o: 11\n  },\n  stars: {\n    a: \"Shooting Star\",\n    b: \"1F320\",\n    j: [\"night\", \"photo\"],\n    k: [5, 51],\n    o: 2\n  },\n  u6e80: {\n    a: \"Squared Cjk Unified Ideograph-6e80\",\n    b: \"1F235\",\n    j: [\"full\", \"chinese\", \"japanese\", \"red-square\", \"kanji\"],\n    k: [5, 11],\n    o: 2\n  },\n  \"flag-nu\": {\n    a: \"Niue Flag\",\n    b: \"1F1F3-1F1FA\",\n    k: [3, 35],\n    o: 2\n  },\n  pick: {\n    a: \"Pick\",\n    b: \"26CF-FE0F\",\n    c: \"26CF\",\n    j: [\"tools\", \"dig\"],\n    k: [54, 5],\n    o: 2\n  },\n  male_supervillain: {\n    a: \"Male Supervillain\",\n    b: \"1F9B9-200D-2642-FE0F\",\n    c: \"1F9B9-200D-2642\",\n    k: [43, 42],\n    o: 11\n  },\n  female_supervillain: {\n    a: \"Female Supervillain\",\n    b: \"1F9B9-200D-2640-FE0F\",\n    c: \"1F9B9-200D-2640\",\n    k: [43, 36],\n    o: 11\n  },\n  hammer_and_pick: {\n    a: \"Hammer and Pick\",\n    b: \"2692-FE0F\",\n    c: \"2692\",\n    j: [\"tools\", \"build\", \"create\"],\n    k: [53, 41],\n    o: 2\n  },\n  milky_way: {\n    a: \"Milky Way\",\n    b: \"1F30C\",\n    j: [\"photo\", \"space\", \"stars\"],\n    k: [5, 31],\n    o: 2\n  },\n  red_circle: {\n    a: \"Large Red Circle\",\n    b: \"1F534\",\n    j: [\"shape\", \"error\", \"danger\"],\n    k: [28, 23],\n    o: 2\n  },\n  \"flag-nz\": {\n    a: \"New Zealand Flag\",\n    b: \"1F1F3-1F1FF\",\n    k: [3, 36],\n    o: 2\n  },\n  large_orange_circle: {\n    a: \"Large Orange Circle\",\n    b: \"1F7E0\",\n    k: [37, 3],\n    o: 12\n  },\n  hammer_and_wrench: {\n    a: \"Hammer and Wrench\",\n    b: \"1F6E0-FE0F\",\n    c: \"1F6E0\",\n    j: [\"tools\", \"build\", \"create\"],\n    k: [36, 42],\n    o: 2\n  },\n  \"flag-om\": {\n    a: \"Oman Flag\",\n    b: \"1F1F4-1F1F2\",\n    k: [3, 37],\n    o: 2\n  },\n  cloud: {\n    a: \"Cloud\",\n    b: \"2601-FE0F\",\n    c: \"2601\",\n    j: [\"weather\", \"sky\"],\n    k: [52, 50],\n    o: 2\n  },\n  mage: {\n    obsoleted_by: \"1F9D9-200D-2640-FE0F\",\n    a: \"Mage\",\n    b: \"1F9D9\",\n    k: [49, 49],\n    o: 5\n  },\n  dagger_knife: {\n    a: \"Dagger Knife\",\n    b: \"1F5E1-FE0F\",\n    c: \"1F5E1\",\n    k: [30, 24],\n    o: 2\n  },\n  partly_sunny: {\n    a: \"Sun Behind Cloud\",\n    b: \"26C5\",\n    j: [\"weather\", \"nature\", \"cloudy\", \"morning\", \"fall\", \"spring\"],\n    k: [54, 2],\n    o: 2\n  },\n  large_yellow_circle: {\n    a: \"Large Yellow Circle\",\n    b: \"1F7E1\",\n    k: [37, 4],\n    o: 12\n  },\n  male_mage: {\n    a: \"Male Mage\",\n    b: \"1F9D9-200D-2642-FE0F\",\n    c: \"1F9D9-200D-2642\",\n    k: [49, 43],\n    o: 5\n  },\n  \"flag-pa\": {\n    a: \"Panama Flag\",\n    b: \"1F1F5-1F1E6\",\n    k: [3, 38],\n    o: 2\n  },\n  thunder_cloud_and_rain: {\n    a: \"Thunder Cloud and Rain\",\n    b: \"26C8-FE0F\",\n    c: \"26C8\",\n    k: [54, 3],\n    o: 2\n  },\n  large_green_circle: {\n    a: \"Large Green Circle\",\n    b: \"1F7E2\",\n    k: [37, 5],\n    o: 12\n  },\n  female_mage: {\n    obsoletes: \"1F9D9\",\n    a: \"Female Mage\",\n    b: \"1F9D9-200D-2640-FE0F\",\n    c: \"1F9D9-200D-2640\",\n    k: [49, 37],\n    o: 5\n  },\n  crossed_swords: {\n    a: \"Crossed Swords\",\n    b: \"2694-FE0F\",\n    c: \"2694\",\n    j: [\"weapon\"],\n    k: [53, 43],\n    o: 2\n  },\n  \"flag-pe\": {\n    a: \"Peru Flag\",\n    b: \"1F1F5-1F1EA\",\n    k: [3, 39],\n    o: 2\n  },\n  gun: {\n    a: \"Pistol\",\n    b: \"1F52B\",\n    j: [\"violence\", \"weapon\", \"pistol\", \"revolver\"],\n    k: [28, 14],\n    o: 2\n  },\n  mostly_sunny: {\n    a: \"Mostly Sunny\",\n    b: \"1F324-FE0F\",\n    c: \"1F324\",\n    k: [5, 53],\n    n: [\"sun_small_cloud\"],\n    o: 2\n  },\n  fairy: {\n    obsoleted_by: \"1F9DA-200D-2640-FE0F\",\n    a: \"Fairy\",\n    b: \"1F9DA\",\n    k: [50, 10],\n    o: 5\n  },\n  \"flag-pf\": {\n    a: \"French Polynesia Flag\",\n    b: \"1F1F5-1F1EB\",\n    k: [3, 40],\n    o: 2\n  },\n  large_blue_circle: {\n    a: \"Large Blue Circle\",\n    b: \"1F535\",\n    j: [\"shape\", \"icon\", \"button\"],\n    k: [28, 24],\n    o: 2\n  },\n  large_purple_circle: {\n    a: \"Large Purple Circle\",\n    b: \"1F7E3\",\n    k: [37, 6],\n    o: 12\n  },\n  bow_and_arrow: {\n    a: \"Bow and Arrow\",\n    b: \"1F3F9\",\n    j: [\"sports\"],\n    k: [11, 21],\n    o: 2\n  },\n  male_fairy: {\n    a: \"Male Fairy\",\n    b: \"1F9DA-200D-2642-FE0F\",\n    c: \"1F9DA-200D-2642\",\n    k: [50, 4],\n    o: 5\n  },\n  barely_sunny: {\n    a: \"Barely Sunny\",\n    b: \"1F325-FE0F\",\n    c: \"1F325\",\n    k: [5, 54],\n    n: [\"sun_behind_cloud\"],\n    o: 2\n  },\n  \"flag-pg\": {\n    a: \"Papua New Guinea Flag\",\n    b: \"1F1F5-1F1EC\",\n    k: [3, 41],\n    o: 2\n  },\n  shield: {\n    a: \"Shield\",\n    b: \"1F6E1-FE0F\",\n    c: \"1F6E1\",\n    j: [\"protection\", \"security\"],\n    k: [36, 43],\n    o: 2\n  },\n  partly_sunny_rain: {\n    a: \"Partly Sunny Rain\",\n    b: \"1F326-FE0F\",\n    c: \"1F326\",\n    k: [5, 55],\n    n: [\"sun_behind_rain_cloud\"],\n    o: 2\n  },\n  large_brown_circle: {\n    a: \"Large Brown Circle\",\n    b: \"1F7E4\",\n    k: [37, 7],\n    o: 12\n  },\n  female_fairy: {\n    obsoletes: \"1F9DA\",\n    a: \"Female Fairy\",\n    b: \"1F9DA-200D-2640-FE0F\",\n    c: \"1F9DA-200D-2640\",\n    k: [49, 55],\n    o: 5\n  },\n  \"flag-ph\": {\n    a: \"Philippines Flag\",\n    b: \"1F1F5-1F1ED\",\n    k: [3, 42],\n    o: 2\n  },\n  \"flag-pk\": {\n    a: \"Pakistan Flag\",\n    b: \"1F1F5-1F1F0\",\n    k: [3, 43],\n    o: 2\n  },\n  black_circle: {\n    a: \"Medium Black Circle\",\n    b: \"26AB\",\n    j: [\"shape\", \"button\", \"round\"],\n    k: [53, 53],\n    o: 2\n  },\n  wrench: {\n    a: \"Wrench\",\n    b: \"1F527\",\n    j: [\"tools\", \"diy\", \"ikea\", \"fix\", \"maintainer\"],\n    k: [28, 10],\n    o: 2\n  },\n  vampire: {\n    obsoleted_by: \"1F9DB-200D-2640-FE0F\",\n    a: \"Vampire\",\n    b: \"1F9DB\",\n    k: [50, 28],\n    o: 5\n  },\n  rain_cloud: {\n    a: \"Rain Cloud\",\n    b: \"1F327-FE0F\",\n    c: \"1F327\",\n    k: [5, 56],\n    o: 2\n  },\n  snow_cloud: {\n    a: \"Snow Cloud\",\n    b: \"1F328-FE0F\",\n    c: \"1F328\",\n    k: [6, 0],\n    o: 2\n  },\n  \"flag-pl\": {\n    a: \"Poland Flag\",\n    b: \"1F1F5-1F1F1\",\n    k: [3, 44],\n    o: 2\n  },\n  male_vampire: {\n    a: \"Male Vampire\",\n    b: \"1F9DB-200D-2642-FE0F\",\n    c: \"1F9DB-200D-2642\",\n    k: [50, 22],\n    o: 5\n  },\n  nut_and_bolt: {\n    a: \"Nut and Bolt\",\n    b: \"1F529\",\n    j: [\"handy\", \"tools\", \"fix\"],\n    k: [28, 12],\n    o: 2\n  },\n  white_circle: {\n    a: \"Medium White Circle\",\n    b: \"26AA\",\n    j: [\"shape\", \"round\"],\n    k: [53, 52],\n    o: 2\n  },\n  female_vampire: {\n    obsoletes: \"1F9DB\",\n    a: \"Female Vampire\",\n    b: \"1F9DB-200D-2640-FE0F\",\n    c: \"1F9DB-200D-2640\",\n    k: [50, 16],\n    o: 5\n  },\n  \"flag-pm\": {\n    a: \"St. Pierre & Miquelon Flag\",\n    b: \"1F1F5-1F1F2\",\n    k: [3, 45],\n    o: 2\n  },\n  large_red_square: {\n    a: \"Large Red Square\",\n    b: \"1F7E5\",\n    k: [37, 8],\n    o: 12\n  },\n  lightning: {\n    a: \"Lightning\",\n    b: \"1F329-FE0F\",\n    c: \"1F329\",\n    k: [6, 1],\n    n: [\"lightning_cloud\"],\n    o: 2\n  },\n  gear: {\n    a: \"Gear\",\n    b: \"2699-FE0F\",\n    c: \"2699\",\n    j: [\"cog\"],\n    k: [53, 47],\n    o: 2\n  },\n  merperson: {\n    obsoleted_by: \"1F9DC-200D-2642-FE0F\",\n    a: \"Merperson\",\n    b: \"1F9DC\",\n    k: [50, 46],\n    o: 5\n  },\n  tornado: {\n    a: \"Tornado\",\n    b: \"1F32A-FE0F\",\n    c: \"1F32A\",\n    j: [\"weather\", \"cyclone\", \"twister\"],\n    k: [6, 2],\n    n: [\"tornado_cloud\"],\n    o: 2\n  },\n  large_orange_square: {\n    a: \"Large Orange Square\",\n    b: \"1F7E7\",\n    k: [37, 10],\n    o: 12\n  },\n  \"flag-pn\": {\n    a: \"Pitcairn Islands Flag\",\n    b: \"1F1F5-1F1F3\",\n    k: [3, 46],\n    o: 2\n  },\n  compression: {\n    a: \"Compression\",\n    b: \"1F5DC-FE0F\",\n    c: \"1F5DC\",\n    k: [30, 21],\n    o: 2\n  },\n  merman: {\n    obsoletes: \"1F9DC\",\n    a: \"Merman\",\n    b: \"1F9DC-200D-2642-FE0F\",\n    c: \"1F9DC-200D-2642\",\n    k: [50, 40],\n    o: 5\n  },\n  large_yellow_square: {\n    a: \"Large Yellow Square\",\n    b: \"1F7E8\",\n    k: [37, 11],\n    o: 12\n  },\n  fog: {\n    a: \"Fog\",\n    b: \"1F32B-FE0F\",\n    c: \"1F32B\",\n    j: [\"weather\"],\n    k: [6, 3],\n    o: 2\n  },\n  scales: {\n    a: \"Scales\",\n    b: \"2696-FE0F\",\n    c: \"2696\",\n    k: [53, 45],\n    o: 2\n  },\n  \"flag-pr\": {\n    a: \"Puerto Rico Flag\",\n    b: \"1F1F5-1F1F7\",\n    k: [3, 47],\n    o: 2\n  },\n  wind_blowing_face: {\n    a: \"Wind Blowing Face\",\n    b: \"1F32C-FE0F\",\n    c: \"1F32C\",\n    k: [6, 4],\n    o: 2\n  },\n  \"flag-ps\": {\n    a: \"Palestinian Territories Flag\",\n    b: \"1F1F5-1F1F8\",\n    k: [3, 48],\n    o: 2\n  },\n  mermaid: {\n    a: \"Mermaid\",\n    b: \"1F9DC-200D-2640-FE0F\",\n    c: \"1F9DC-200D-2640\",\n    k: [50, 34],\n    o: 5\n  },\n  probing_cane: {\n    a: \"Probing Cane\",\n    b: \"1F9AF\",\n    k: [43, 3],\n    o: 12\n  },\n  large_green_square: {\n    a: \"Large Green Square\",\n    b: \"1F7E9\",\n    k: [37, 12],\n    o: 12\n  },\n  \"flag-pt\": {\n    a: \"Portugal Flag\",\n    b: \"1F1F5-1F1F9\",\n    k: [3, 49],\n    o: 2\n  },\n  link: {\n    a: \"Link Symbol\",\n    b: \"1F517\",\n    j: [\"rings\", \"url\"],\n    k: [27, 51],\n    o: 2\n  },\n  large_blue_square: {\n    a: \"Large Blue Square\",\n    b: \"1F7E6\",\n    k: [37, 9],\n    o: 12\n  },\n  elf: {\n    obsoleted_by: \"1F9DD-200D-2642-FE0F\",\n    a: \"Elf\",\n    b: \"1F9DD\",\n    k: [51, 7],\n    o: 5\n  },\n  cyclone: {\n    a: \"Cyclone\",\n    b: \"1F300\",\n    j: [\"weather\", \"swirl\", \"blue\", \"cloud\", \"vortex\", \"spiral\", \"whirlpool\", \"spin\", \"tornado\", \"hurricane\", \"typhoon\"],\n    k: [5, 19],\n    o: 2\n  },\n  rainbow: {\n    a: \"Rainbow\",\n    b: \"1F308\",\n    j: [\"nature\", \"happy\", \"unicorn_face\", \"photo\", \"sky\", \"spring\"],\n    k: [5, 27],\n    o: 2\n  },\n  male_elf: {\n    obsoletes: \"1F9DD\",\n    a: \"Male Elf\",\n    b: \"1F9DD-200D-2642-FE0F\",\n    c: \"1F9DD-200D-2642\",\n    k: [51, 1],\n    o: 5\n  },\n  \"flag-pw\": {\n    a: \"Palau Flag\",\n    b: \"1F1F5-1F1FC\",\n    k: [3, 50],\n    o: 2\n  },\n  chains: {\n    a: \"Chains\",\n    b: \"26D3-FE0F\",\n    c: \"26D3\",\n    j: [\"lock\", \"arrest\"],\n    k: [54, 7],\n    o: 2\n  },\n  large_purple_square: {\n    a: \"Large Purple Square\",\n    b: \"1F7EA\",\n    k: [37, 13],\n    o: 12\n  },\n  female_elf: {\n    a: \"Female Elf\",\n    b: \"1F9DD-200D-2640-FE0F\",\n    c: \"1F9DD-200D-2640\",\n    k: [50, 52],\n    o: 5\n  },\n  \"flag-py\": {\n    a: \"Paraguay Flag\",\n    b: \"1F1F5-1F1FE\",\n    k: [3, 51],\n    o: 2\n  },\n  closed_umbrella: {\n    a: \"Closed Umbrella\",\n    b: \"1F302\",\n    j: [\"weather\", \"rain\", \"drizzle\"],\n    k: [5, 21],\n    o: 2\n  },\n  toolbox: {\n    a: \"Toolbox\",\n    b: \"1F9F0\",\n    k: [51, 35],\n    o: 11\n  },\n  large_brown_square: {\n    a: \"Large Brown Square\",\n    b: \"1F7EB\",\n    k: [37, 14],\n    o: 12\n  },\n  magnet: {\n    a: \"Magnet\",\n    b: \"1F9F2\",\n    k: [51, 37],\n    o: 11\n  },\n  genie: {\n    obsoleted_by: \"1F9DE-200D-2642-FE0F\",\n    a: \"Genie\",\n    b: \"1F9DE\",\n    k: [51, 15],\n    o: 5\n  },\n  \"flag-qa\": {\n    a: \"Qatar Flag\",\n    b: \"1F1F6-1F1E6\",\n    k: [3, 52],\n    o: 2\n  },\n  umbrella: {\n    a: \"Umbrella\",\n    b: \"2602-FE0F\",\n    c: \"2602\",\n    j: [\"rainy\", \"weather\", \"spring\"],\n    k: [52, 51],\n    o: 2\n  },\n  black_large_square: {\n    a: \"Black Large Square\",\n    b: \"2B1B\",\n    j: [\"shape\", \"icon\", \"button\"],\n    k: [55, 40],\n    o: 2\n  },\n  male_genie: {\n    obsoletes: \"1F9DE\",\n    a: \"Male Genie\",\n    b: \"1F9DE-200D-2642-FE0F\",\n    c: \"1F9DE-200D-2642\",\n    k: [51, 14],\n    o: 5\n  },\n  umbrella_with_rain_drops: {\n    a: \"Umbrella with Rain Drops\",\n    b: \"2614\",\n    k: [52, 56],\n    o: 2\n  },\n  \"flag-re\": {\n    a: \"Réunion Flag\",\n    b: \"1F1F7-1F1EA\",\n    k: [3, 53],\n    o: 2\n  },\n  white_large_square: {\n    a: \"White Large Square\",\n    b: \"2B1C\",\n    j: [\"shape\", \"icon\", \"stone\", \"button\"],\n    k: [55, 41],\n    o: 2\n  },\n  alembic: {\n    a: \"Alembic\",\n    b: \"2697-FE0F\",\n    c: \"2697\",\n    j: [\"distilling\", \"science\", \"experiment\", \"chemistry\"],\n    k: [53, 46],\n    o: 2\n  },\n  black_medium_square: {\n    a: \"Black Medium Square\",\n    b: \"25FC-FE0F\",\n    c: \"25FC\",\n    j: [\"shape\", \"button\", \"icon\"],\n    k: [52, 46],\n    o: 2\n  },\n  test_tube: {\n    a: \"Test Tube\",\n    b: \"1F9EA\",\n    k: [51, 29],\n    o: 11\n  },\n  \"flag-ro\": {\n    a: \"Romania Flag\",\n    b: \"1F1F7-1F1F4\",\n    k: [3, 54],\n    o: 2\n  },\n  female_genie: {\n    a: \"Female Genie\",\n    b: \"1F9DE-200D-2640-FE0F\",\n    c: \"1F9DE-200D-2640\",\n    k: [51, 13],\n    o: 5\n  },\n  umbrella_on_ground: {\n    a: \"Umbrella on Ground\",\n    b: \"26F1-FE0F\",\n    c: \"26F1\",\n    k: [54, 12],\n    o: 2\n  },\n  zombie: {\n    obsoleted_by: \"1F9DF-200D-2642-FE0F\",\n    a: \"Zombie\",\n    b: \"1F9DF\",\n    k: [51, 18],\n    o: 5\n  },\n  zap: {\n    a: \"High Voltage Sign\",\n    b: \"26A1\",\n    j: [\"thunder\", \"weather\", \"lightning bolt\", \"fast\"],\n    k: [53, 51],\n    o: 2\n  },\n  white_medium_square: {\n    a: \"White Medium Square\",\n    b: \"25FB-FE0F\",\n    c: \"25FB\",\n    j: [\"shape\", \"stone\", \"icon\"],\n    k: [52, 45],\n    o: 2\n  },\n  \"flag-rs\": {\n    a: \"Serbia Flag\",\n    b: \"1F1F7-1F1F8\",\n    k: [3, 55],\n    o: 2\n  },\n  petri_dish: {\n    a: \"Petri Dish\",\n    b: \"1F9EB\",\n    k: [51, 30],\n    o: 11\n  },\n  snowflake: {\n    a: \"Snowflake\",\n    b: \"2744-FE0F\",\n    c: \"2744\",\n    j: [\"winter\", \"season\", \"cold\", \"weather\", \"christmas\", \"xmas\"],\n    k: [55, 19],\n    o: 2\n  },\n  dna: {\n    a: \"Dna Double Helix\",\n    b: \"1F9EC\",\n    k: [51, 31],\n    o: 11\n  },\n  male_zombie: {\n    obsoletes: \"1F9DF\",\n    a: \"Male Zombie\",\n    b: \"1F9DF-200D-2642-FE0F\",\n    c: \"1F9DF-200D-2642\",\n    k: [51, 17],\n    o: 5\n  },\n  black_medium_small_square: {\n    a: \"Black Medium Small Square\",\n    b: \"25FE\",\n    j: [\"icon\", \"shape\", \"button\"],\n    k: [52, 48],\n    o: 2\n  },\n  ru: {\n    a: \"Russia Flag\",\n    b: \"1F1F7-1F1FA\",\n    j: [\"russian\", \"federation\", \"flag\", \"nation\", \"country\", \"banner\"],\n    k: [3, 56],\n    n: [\"flag-ru\"],\n    o: 2\n  },\n  female_zombie: {\n    a: \"Female Zombie\",\n    b: \"1F9DF-200D-2640-FE0F\",\n    c: \"1F9DF-200D-2640\",\n    k: [51, 16],\n    o: 5\n  },\n  \"flag-rw\": {\n    a: \"Rwanda Flag\",\n    b: \"1F1F7-1F1FC\",\n    k: [4, 0],\n    o: 2\n  },\n  snowman: {\n    a: \"Snowman\",\n    b: \"2603-FE0F\",\n    c: \"2603\",\n    j: [\"winter\", \"season\", \"cold\", \"weather\", \"christmas\", \"xmas\", \"frozen\", \"without_snow\"],\n    k: [52, 52],\n    o: 2\n  },\n  white_medium_small_square: {\n    a: \"White Medium Small Square\",\n    b: \"25FD\",\n    j: [\"shape\", \"stone\", \"icon\", \"button\"],\n    k: [52, 47],\n    o: 2\n  },\n  microscope: {\n    a: \"Microscope\",\n    b: \"1F52C\",\n    j: [\"laboratory\", \"experiment\", \"zoomin\", \"science\", \"study\"],\n    k: [28, 15],\n    o: 2\n  },\n  snowman_without_snow: {\n    a: \"Snowman Without Snow\",\n    b: \"26C4\",\n    k: [54, 1],\n    o: 2\n  },\n  telescope: {\n    a: \"Telescope\",\n    b: \"1F52D\",\n    j: [\"stars\", \"space\", \"zoom\", \"science\", \"astronomy\"],\n    k: [28, 16],\n    o: 2\n  },\n  black_small_square: {\n    a: \"Black Small Square\",\n    b: \"25AA-FE0F\",\n    c: \"25AA\",\n    j: [\"shape\", \"icon\"],\n    k: [52, 41],\n    o: 2\n  },\n  \"flag-sa\": {\n    a: \"Saudi Arabia Flag\",\n    b: \"1F1F8-1F1E6\",\n    k: [4, 1],\n    o: 2\n  },\n  \"man-getting-massage\": {\n    a: \"Man Getting Massage\",\n    b: \"1F486-200D-2642-FE0F\",\n    c: \"1F486-200D-2642\",\n    k: [24, 45],\n    o: 4\n  },\n  comet: {\n    a: \"Comet\",\n    b: \"2604-FE0F\",\n    c: \"2604\",\n    j: [\"space\"],\n    k: [52, 53],\n    o: 2\n  },\n  white_small_square: {\n    a: \"White Small Square\",\n    b: \"25AB-FE0F\",\n    c: \"25AB\",\n    j: [\"shape\", \"icon\"],\n    k: [52, 42],\n    o: 2\n  },\n  \"flag-sb\": {\n    a: \"Solomon Islands Flag\",\n    b: \"1F1F8-1F1E7\",\n    k: [4, 2],\n    o: 2\n  },\n  satellite_antenna: {\n    a: \"Satellite Antenna\",\n    b: \"1F4E1\",\n    k: [26, 55],\n    o: 2\n  },\n  large_orange_diamond: {\n    a: \"Large Orange Diamond\",\n    b: \"1F536\",\n    j: [\"shape\", \"jewel\", \"gem\"],\n    k: [28, 25],\n    o: 2\n  },\n  \"woman-getting-massage\": {\n    obsoletes: \"1F486\",\n    a: \"Woman Getting Massage\",\n    b: \"1F486-200D-2640-FE0F\",\n    c: \"1F486-200D-2640\",\n    k: [24, 39],\n    o: 4\n  },\n  fire: {\n    a: \"Fire\",\n    b: \"1F525\",\n    j: [\"hot\", \"cook\", \"flame\"],\n    k: [28, 8],\n    o: 2\n  },\n  syringe: {\n    a: \"Syringe\",\n    b: \"1F489\",\n    j: [\"health\", \"hospital\", \"drugs\", \"blood\", \"medicine\", \"needle\", \"doctor\", \"nurse\"],\n    k: [25, 19],\n    o: 2\n  },\n  \"flag-sc\": {\n    a: \"Seychelles Flag\",\n    b: \"1F1F8-1F1E8\",\n    k: [4, 3],\n    o: 2\n  },\n  large_blue_diamond: {\n    a: \"Large Blue Diamond\",\n    b: \"1F537\",\n    j: [\"shape\", \"jewel\", \"gem\"],\n    k: [28, 26],\n    o: 2\n  },\n  \"flag-sd\": {\n    a: \"Sudan Flag\",\n    b: \"1F1F8-1F1E9\",\n    k: [4, 4],\n    o: 2\n  },\n  droplet: {\n    a: \"Droplet\",\n    b: \"1F4A7\",\n    j: [\"water\", \"drip\", \"faucet\", \"spring\"],\n    k: [25, 49],\n    o: 2\n  },\n  drop_of_blood: {\n    a: \"Drop of Blood\",\n    b: \"1FA78\",\n    k: [51, 55],\n    o: 12\n  },\n  ocean: {\n    a: \"Water Wave\",\n    b: \"1F30A\",\n    j: [\"sea\", \"water\", \"wave\", \"nature\", \"tsunami\", \"disaster\"],\n    k: [5, 29],\n    o: 2\n  },\n  \"flag-se\": {\n    a: \"Sweden Flag\",\n    b: \"1F1F8-1F1EA\",\n    k: [4, 5],\n    o: 2\n  },\n  \"man-getting-haircut\": {\n    a: \"Man Getting Haircut\",\n    b: \"1F487-200D-2642-FE0F\",\n    c: \"1F487-200D-2642\",\n    k: [25, 6],\n    o: 4\n  },\n  small_orange_diamond: {\n    a: \"Small Orange Diamond\",\n    b: \"1F538\",\n    j: [\"shape\", \"jewel\", \"gem\"],\n    k: [28, 27],\n    o: 2\n  },\n  pill: {\n    a: \"Pill\",\n    b: \"1F48A\",\n    j: [\"health\", \"medicine\", \"doctor\", \"pharmacy\", \"drug\"],\n    k: [25, 20],\n    o: 2\n  },\n  \"woman-getting-haircut\": {\n    obsoletes: \"1F487\",\n    a: \"Woman Getting Haircut\",\n    b: \"1F487-200D-2640-FE0F\",\n    c: \"1F487-200D-2640\",\n    k: [25, 0],\n    o: 4\n  },\n  small_blue_diamond: {\n    a: \"Small Blue Diamond\",\n    b: \"1F539\",\n    j: [\"shape\", \"jewel\", \"gem\"],\n    k: [28, 28],\n    o: 2\n  },\n  \"flag-sg\": {\n    a: \"Singapore Flag\",\n    b: \"1F1F8-1F1EC\",\n    k: [4, 6],\n    o: 2\n  },\n  adhesive_bandage: {\n    a: \"Adhesive Bandage\",\n    b: \"1FA79\",\n    k: [51, 56],\n    o: 12\n  },\n  small_red_triangle: {\n    a: \"Up-Pointing Red Triangle\",\n    b: \"1F53A\",\n    j: [\"shape\", \"direction\", \"up\", \"top\"],\n    k: [28, 29],\n    o: 2\n  },\n  \"flag-sh\": {\n    a: \"St. Helena Flag\",\n    b: \"1F1F8-1F1ED\",\n    k: [4, 7],\n    o: 2\n  },\n  stethoscope: {\n    a: \"Stethoscope\",\n    b: \"1FA7A\",\n    k: [52, 0],\n    o: 12\n  },\n  \"man-walking\": {\n    obsoletes: \"1F6B6\",\n    a: \"Man Walking\",\n    b: \"1F6B6-200D-2642-FE0F\",\n    c: \"1F6B6-200D-2642\",\n    k: [35, 53],\n    o: 4\n  },\n  \"flag-si\": {\n    a: \"Slovenia Flag\",\n    b: \"1F1F8-1F1EE\",\n    k: [4, 8],\n    o: 2\n  },\n  door: {\n    a: \"Door\",\n    b: \"1F6AA\",\n    j: [\"house\", \"entry\", \"exit\"],\n    k: [35, 1],\n    o: 2\n  },\n  small_red_triangle_down: {\n    a: \"Down-Pointing Red Triangle\",\n    b: \"1F53B\",\n    j: [\"shape\", \"direction\", \"bottom\"],\n    k: [28, 30],\n    o: 2\n  },\n  \"flag-sj\": {\n    a: \"Svalbard & Jan Mayen Flag\",\n    b: \"1F1F8-1F1EF\",\n    k: [4, 9],\n    o: 2\n  },\n  diamond_shape_with_a_dot_inside: {\n    a: \"Diamond Shape with a Dot Inside\",\n    b: \"1F4A0\",\n    j: [\"jewel\", \"blue\", \"gem\", \"crystal\", \"fancy\"],\n    k: [25, 42],\n    o: 2\n  },\n  \"woman-walking\": {\n    a: \"Woman Walking\",\n    b: \"1F6B6-200D-2640-FE0F\",\n    c: \"1F6B6-200D-2640\",\n    k: [35, 47],\n    o: 4\n  },\n  bed: {\n    a: \"Bed\",\n    b: \"1F6CF-FE0F\",\n    c: \"1F6CF\",\n    j: [\"sleep\", \"rest\"],\n    k: [36, 37],\n    o: 2\n  },\n  radio_button: {\n    a: \"Radio Button\",\n    b: \"1F518\",\n    j: [\"input\", \"old\", \"music\", \"circle\"],\n    k: [27, 52],\n    o: 2\n  },\n  \"flag-sk\": {\n    a: \"Slovakia Flag\",\n    b: \"1F1F8-1F1F0\",\n    k: [4, 10],\n    o: 2\n  },\n  standing_person: {\n    a: \"Standing Person\",\n    b: \"1F9CD\",\n    k: [44, 31],\n    o: 12\n  },\n  couch_and_lamp: {\n    a: \"Couch and Lamp\",\n    b: \"1F6CB-FE0F\",\n    c: \"1F6CB\",\n    j: [\"read\", \"chill\"],\n    k: [36, 28],\n    o: 2\n  },\n  man_standing: {\n    a: \"Man Standing\",\n    b: \"1F9CD-200D-2642-FE0F\",\n    c: \"1F9CD-200D-2642\",\n    k: [44, 25],\n    o: 12\n  },\n  white_square_button: {\n    a: \"White Square Button\",\n    b: \"1F533\",\n    j: [\"shape\", \"input\"],\n    k: [28, 22],\n    o: 2\n  },\n  \"flag-sl\": {\n    a: \"Sierra Leone Flag\",\n    b: \"1F1F8-1F1F1\",\n    k: [4, 11],\n    o: 2\n  },\n  chair: {\n    a: \"Chair\",\n    b: \"1FA91\",\n    k: [52, 5],\n    o: 12\n  },\n  toilet: {\n    a: \"Toilet\",\n    b: \"1F6BD\",\n    j: [\"restroom\", \"wc\", \"washroom\", \"bathroom\", \"potty\"],\n    k: [36, 14],\n    o: 2\n  },\n  black_square_button: {\n    a: \"Black Square Button\",\n    b: \"1F532\",\n    j: [\"shape\", \"input\", \"frame\"],\n    k: [28, 21],\n    o: 2\n  },\n  \"flag-sm\": {\n    a: \"San Marino Flag\",\n    b: \"1F1F8-1F1F2\",\n    k: [4, 12],\n    o: 2\n  },\n  woman_standing: {\n    a: \"Woman Standing\",\n    b: \"1F9CD-200D-2640-FE0F\",\n    c: \"1F9CD-200D-2640\",\n    k: [44, 19],\n    o: 12\n  },\n  kneeling_person: {\n    a: \"Kneeling Person\",\n    b: \"1F9CE\",\n    k: [44, 49],\n    o: 12\n  },\n  shower: {\n    a: \"Shower\",\n    b: \"1F6BF\",\n    j: [\"clean\", \"water\", \"bathroom\"],\n    k: [36, 16],\n    o: 2\n  },\n  \"flag-sn\": {\n    a: \"Senegal Flag\",\n    b: \"1F1F8-1F1F3\",\n    k: [4, 13],\n    o: 2\n  },\n  bathtub: {\n    a: \"Bathtub\",\n    b: \"1F6C1\",\n    j: [\"clean\", \"shower\", \"bathroom\"],\n    k: [36, 23],\n    o: 2\n  },\n  \"flag-so\": {\n    a: \"Somalia Flag\",\n    b: \"1F1F8-1F1F4\",\n    k: [4, 14],\n    o: 2\n  },\n  man_kneeling: {\n    a: \"Man Kneeling\",\n    b: \"1F9CE-200D-2642-FE0F\",\n    c: \"1F9CE-200D-2642\",\n    k: [44, 43],\n    o: 12\n  },\n  \"flag-sr\": {\n    a: \"Suriname Flag\",\n    b: \"1F1F8-1F1F7\",\n    k: [4, 15],\n    o: 2\n  },\n  woman_kneeling: {\n    a: \"Woman Kneeling\",\n    b: \"1F9CE-200D-2640-FE0F\",\n    c: \"1F9CE-200D-2640\",\n    k: [44, 37],\n    o: 12\n  },\n  razor: {\n    a: \"Razor\",\n    b: \"1FA92\",\n    k: [52, 6],\n    o: 12\n  },\n  \"flag-ss\": {\n    a: \"South Sudan Flag\",\n    b: \"1F1F8-1F1F8\",\n    k: [4, 16],\n    o: 2\n  },\n  lotion_bottle: {\n    a: \"Lotion Bottle\",\n    b: \"1F9F4\",\n    k: [51, 39],\n    o: 11\n  },\n  \"flag-st\": {\n    a: \"São Tomé & Príncipe Flag\",\n    b: \"1F1F8-1F1F9\",\n    k: [4, 17],\n    o: 2\n  },\n  safety_pin: {\n    a: \"Safety Pin\",\n    b: \"1F9F7\",\n    k: [51, 42],\n    o: 11\n  },\n  man_with_probing_cane: {\n    a: \"Man with Probing Cane\",\n    b: \"1F468-200D-1F9AF\",\n    k: [16, 17],\n    o: 12\n  },\n  broom: {\n    a: \"Broom\",\n    b: \"1F9F9\",\n    k: [51, 44],\n    o: 11\n  },\n  woman_with_probing_cane: {\n    a: \"Woman with Probing Cane\",\n    b: \"1F469-200D-1F9AF\",\n    k: [19, 2],\n    o: 12\n  },\n  \"flag-sv\": {\n    a: \"El Salvador Flag\",\n    b: \"1F1F8-1F1FB\",\n    k: [4, 18],\n    o: 2\n  },\n  \"flag-sx\": {\n    a: \"Sint Maarten Flag\",\n    b: \"1F1F8-1F1FD\",\n    k: [4, 19],\n    o: 2\n  },\n  basket: {\n    a: \"Basket\",\n    b: \"1F9FA\",\n    k: [51, 45],\n    o: 11\n  },\n  man_in_motorized_wheelchair: {\n    a: \"Man in Motorized Wheelchair\",\n    b: \"1F468-200D-1F9BC\",\n    k: [16, 47],\n    o: 12\n  },\n  \"flag-sy\": {\n    a: \"Syria Flag\",\n    b: \"1F1F8-1F1FE\",\n    k: [4, 20],\n    o: 2\n  },\n  roll_of_paper: {\n    a: \"Roll of Paper\",\n    b: \"1F9FB\",\n    k: [51, 46],\n    o: 11\n  },\n  woman_in_motorized_wheelchair: {\n    a: \"Woman in Motorized Wheelchair\",\n    b: \"1F469-200D-1F9BC\",\n    k: [19, 32],\n    o: 12\n  },\n  \"flag-sz\": {\n    a: \"Eswatini Flag\",\n    b: \"1F1F8-1F1FF\",\n    k: [4, 21],\n    o: 2\n  },\n  soap: {\n    a: \"Bar of Soap\",\n    b: \"1F9FC\",\n    k: [51, 47],\n    o: 11\n  },\n  \"flag-ta\": {\n    a: \"Tristan Da Cunha Flag\",\n    b: \"1F1F9-1F1E6\",\n    k: [4, 22],\n    o: 2\n  },\n  sponge: {\n    a: \"Sponge\",\n    b: \"1F9FD\",\n    k: [51, 48],\n    o: 11\n  },\n  fire_extinguisher: {\n    a: \"Fire Extinguisher\",\n    b: \"1F9EF\",\n    k: [51, 34],\n    o: 11\n  },\n  man_in_manual_wheelchair: {\n    a: \"Man in Manual Wheelchair\",\n    b: \"1F468-200D-1F9BD\",\n    k: [16, 53],\n    o: 12\n  },\n  \"flag-tc\": {\n    a: \"Turks & Caicos Islands Flag\",\n    b: \"1F1F9-1F1E8\",\n    k: [4, 23],\n    o: 2\n  },\n  woman_in_manual_wheelchair: {\n    a: \"Woman in Manual Wheelchair\",\n    b: \"1F469-200D-1F9BD\",\n    k: [19, 38],\n    o: 12\n  },\n  \"flag-td\": {\n    a: \"Chad Flag\",\n    b: \"1F1F9-1F1E9\",\n    k: [4, 24],\n    o: 2\n  },\n  shopping_trolley: {\n    a: \"Shopping Trolley\",\n    b: \"1F6D2\",\n    k: [36, 40],\n    o: 4\n  },\n  \"flag-tf\": {\n    a: \"French Southern Territories Flag\",\n    b: \"1F1F9-1F1EB\",\n    k: [4, 25],\n    o: 2\n  },\n  smoking: {\n    a: \"Smoking Symbol\",\n    b: \"1F6AC\",\n    j: [\"kills\", \"tobacco\", \"cigarette\", \"joint\", \"smoke\"],\n    k: [35, 3],\n    o: 2\n  },\n  coffin: {\n    a: \"Coffin\",\n    b: \"26B0-FE0F\",\n    c: \"26B0\",\n    j: [\"vampire\", \"dead\", \"die\", \"death\", \"rip\", \"graveyard\", \"cemetery\", \"casket\", \"funeral\", \"box\"],\n    k: [53, 54],\n    o: 2\n  },\n  \"man-running\": {\n    obsoletes: \"1F3C3\",\n    a: \"Man Running\",\n    b: \"1F3C3-200D-2642-FE0F\",\n    c: \"1F3C3-200D-2642\",\n    k: [8, 52],\n    o: 4\n  },\n  \"flag-tg\": {\n    a: \"Togo Flag\",\n    b: \"1F1F9-1F1EC\",\n    k: [4, 26],\n    o: 2\n  },\n  \"woman-running\": {\n    a: \"Woman Running\",\n    b: \"1F3C3-200D-2640-FE0F\",\n    c: \"1F3C3-200D-2640\",\n    k: [8, 46],\n    o: 4\n  },\n  funeral_urn: {\n    a: \"Funeral Urn\",\n    b: \"26B1-FE0F\",\n    c: \"26B1\",\n    j: [\"dead\", \"die\", \"death\", \"rip\", \"ashes\"],\n    k: [53, 55],\n    o: 2\n  },\n  \"flag-th\": {\n    a: \"Thailand Flag\",\n    b: \"1F1F9-1F1ED\",\n    k: [4, 27],\n    o: 2\n  },\n  moyai: {\n    a: \"Moyai\",\n    b: \"1F5FF\",\n    j: [\"rock\", \"easter island\", \"moai\"],\n    k: [30, 34],\n    o: 2\n  },\n  \"flag-tj\": {\n    a: \"Tajikistan Flag\",\n    b: \"1F1F9-1F1EF\",\n    k: [4, 28],\n    o: 2\n  },\n  dancer: {\n    a: \"Dancer\",\n    b: \"1F483\",\n    j: [\"female\", \"girl\", \"woman\", \"fun\"],\n    k: [24, 26],\n    o: 2\n  },\n  \"flag-tk\": {\n    a: \"Tokelau Flag\",\n    b: \"1F1F9-1F1F0\",\n    k: [4, 29],\n    o: 2\n  },\n  man_dancing: {\n    a: \"Man Dancing\",\n    b: \"1F57A\",\n    j: [\"male\", \"boy\", \"fun\", \"dancer\"],\n    k: [29, 37],\n    o: 4\n  },\n  \"flag-tl\": {\n    a: \"Timor-Leste Flag\",\n    b: \"1F1F9-1F1F1\",\n    k: [4, 30],\n    o: 2\n  },\n  man_in_business_suit_levitating: {\n    a: \"Man in Business Suit Levitating\",\n    b: \"1F574-FE0F\",\n    c: \"1F574\",\n    k: [29, 9],\n    o: 2\n  },\n  \"flag-tm\": {\n    a: \"Turkmenistan Flag\",\n    b: \"1F1F9-1F1F2\",\n    k: [4, 31],\n    o: 2\n  },\n  dancers: {\n    obsoleted_by: \"1F46F-200D-2640-FE0F\",\n    a: \"Woman with Bunny Ears\",\n    b: \"1F46F\",\n    k: [22, 0],\n    o: 2\n  },\n  \"man-with-bunny-ears-partying\": {\n    a: \"Man with Bunny Ears Partying\",\n    b: \"1F46F-200D-2642-FE0F\",\n    c: \"1F46F-200D-2642\",\n    k: [21, 56],\n    o: 4\n  },\n  \"flag-tn\": {\n    a: \"Tunisia Flag\",\n    b: \"1F1F9-1F1F3\",\n    k: [4, 32],\n    o: 2\n  },\n  \"flag-to\": {\n    a: \"Tonga Flag\",\n    b: \"1F1F9-1F1F4\",\n    k: [4, 33],\n    o: 2\n  },\n  \"woman-with-bunny-ears-partying\": {\n    obsoletes: \"1F46F\",\n    a: \"Woman with Bunny Ears Partying\",\n    b: \"1F46F-200D-2640-FE0F\",\n    c: \"1F46F-200D-2640\",\n    k: [21, 55],\n    o: 4\n  },\n  \"flag-tr\": {\n    a: \"Turkey Flag\",\n    b: \"1F1F9-1F1F7\",\n    k: [4, 34],\n    o: 2\n  },\n  person_in_steamy_room: {\n    obsoleted_by: \"1F9D6-200D-2642-FE0F\",\n    a: \"Person in Steamy Room\",\n    b: \"1F9D6\",\n    k: [48, 52],\n    o: 5\n  },\n  man_in_steamy_room: {\n    obsoletes: \"1F9D6\",\n    a: \"Man in Steamy Room\",\n    b: \"1F9D6-200D-2642-FE0F\",\n    c: \"1F9D6-200D-2642\",\n    k: [48, 46],\n    o: 5\n  },\n  \"flag-tt\": {\n    a: \"Trinidad & Tobago Flag\",\n    b: \"1F1F9-1F1F9\",\n    k: [4, 35],\n    o: 2\n  },\n  woman_in_steamy_room: {\n    a: \"Woman in Steamy Room\",\n    b: \"1F9D6-200D-2640-FE0F\",\n    c: \"1F9D6-200D-2640\",\n    k: [48, 40],\n    o: 5\n  },\n  \"flag-tv\": {\n    a: \"Tuvalu Flag\",\n    b: \"1F1F9-1F1FB\",\n    k: [4, 36],\n    o: 2\n  },\n  \"flag-tw\": {\n    a: \"Taiwan Flag\",\n    b: \"1F1F9-1F1FC\",\n    k: [4, 37],\n    o: 2\n  },\n  person_climbing: {\n    obsoleted_by: \"1F9D7-200D-2640-FE0F\",\n    a: \"Person Climbing\",\n    b: \"1F9D7\",\n    k: [49, 13],\n    o: 5\n  },\n  man_climbing: {\n    a: \"Man Climbing\",\n    b: \"1F9D7-200D-2642-FE0F\",\n    c: \"1F9D7-200D-2642\",\n    k: [49, 7],\n    o: 5\n  },\n  \"flag-tz\": {\n    a: \"Tanzania Flag\",\n    b: \"1F1F9-1F1FF\",\n    k: [4, 38],\n    o: 2\n  },\n  \"flag-ua\": {\n    a: \"Ukraine Flag\",\n    b: \"1F1FA-1F1E6\",\n    k: [4, 39],\n    o: 2\n  },\n  woman_climbing: {\n    obsoletes: \"1F9D7\",\n    a: \"Woman Climbing\",\n    b: \"1F9D7-200D-2640-FE0F\",\n    c: \"1F9D7-200D-2640\",\n    k: [49, 1],\n    o: 5\n  },\n  \"flag-ug\": {\n    a: \"Uganda Flag\",\n    b: \"1F1FA-1F1EC\",\n    k: [4, 40],\n    o: 2\n  },\n  fencer: {\n    a: \"Fencer\",\n    b: \"1F93A\",\n    k: [40, 32],\n    o: 4\n  },\n  \"flag-um\": {\n    a: \"U.s. Outlying Islands Flag\",\n    b: \"1F1FA-1F1F2\",\n    k: [4, 41],\n    o: 2\n  },\n  horse_racing: {\n    a: \"Horse Racing\",\n    b: \"1F3C7\",\n    j: [\"animal\", \"betting\", \"competition\", \"gambling\", \"luck\"],\n    k: [9, 27],\n    o: 2\n  },\n  skier: {\n    a: \"Skier\",\n    b: \"26F7-FE0F\",\n    c: \"26F7\",\n    j: [\"sports\", \"winter\", \"snow\"],\n    k: [54, 17],\n    o: 2\n  },\n  \"flag-un\": {\n    a: \"United Nations Flag\",\n    b: \"1F1FA-1F1F3\",\n    k: [4, 42],\n    o: 4\n  },\n  us: {\n    a: \"United States Flag\",\n    b: \"1F1FA-1F1F8\",\n    j: [\"united\", \"states\", \"america\", \"flag\", \"nation\", \"country\", \"banner\"],\n    k: [4, 43],\n    n: [\"flag-us\"],\n    o: 2\n  },\n  snowboarder: {\n    a: \"Snowboarder\",\n    b: \"1F3C2\",\n    j: [\"sports\", \"winter\"],\n    k: [8, 40],\n    o: 2\n  },\n  \"flag-uy\": {\n    a: \"Uruguay Flag\",\n    b: \"1F1FA-1F1FE\",\n    k: [4, 44],\n    o: 2\n  },\n  \"flag-uz\": {\n    a: \"Uzbekistan Flag\",\n    b: \"1F1FA-1F1FF\",\n    k: [4, 45],\n    o: 2\n  },\n  \"flag-va\": {\n    a: \"Vatican City Flag\",\n    b: \"1F1FB-1F1E6\",\n    k: [4, 46],\n    o: 2\n  },\n  \"flag-vc\": {\n    a: \"St. Vincent & Grenadines Flag\",\n    b: \"1F1FB-1F1E8\",\n    k: [4, 47],\n    o: 2\n  },\n  \"man-surfing\": {\n    obsoletes: \"1F3C4\",\n    a: \"Man Surfing\",\n    b: \"1F3C4-200D-2642-FE0F\",\n    c: \"1F3C4-200D-2642\",\n    k: [9, 13],\n    o: 4\n  },\n  \"flag-ve\": {\n    a: \"Venezuela Flag\",\n    b: \"1F1FB-1F1EA\",\n    k: [4, 48],\n    o: 2\n  },\n  \"flag-vg\": {\n    a: \"British Virgin Islands Flag\",\n    b: \"1F1FB-1F1EC\",\n    k: [4, 49],\n    o: 2\n  },\n  \"woman-surfing\": {\n    a: \"Woman Surfing\",\n    b: \"1F3C4-200D-2640-FE0F\",\n    c: \"1F3C4-200D-2640\",\n    k: [9, 7],\n    o: 4\n  },\n  \"flag-vi\": {\n    a: \"U.s. Virgin Islands Flag\",\n    b: \"1F1FB-1F1EE\",\n    k: [4, 50],\n    o: 2\n  },\n  \"man-rowing-boat\": {\n    obsoletes: \"1F6A3\",\n    a: \"Man Rowing Boat\",\n    b: \"1F6A3-200D-2642-FE0F\",\n    c: \"1F6A3-200D-2642\",\n    k: [34, 40],\n    o: 4\n  },\n  \"flag-vn\": {\n    a: \"Vietnam Flag\",\n    b: \"1F1FB-1F1F3\",\n    k: [4, 51],\n    o: 2\n  },\n  \"flag-vu\": {\n    a: \"Vanuatu Flag\",\n    b: \"1F1FB-1F1FA\",\n    k: [4, 52],\n    o: 2\n  },\n  \"woman-rowing-boat\": {\n    a: \"Woman Rowing Boat\",\n    b: \"1F6A3-200D-2640-FE0F\",\n    c: \"1F6A3-200D-2640\",\n    k: [34, 34],\n    o: 4\n  },\n  \"flag-wf\": {\n    a: \"Wallis & Futuna Flag\",\n    b: \"1F1FC-1F1EB\",\n    k: [4, 53],\n    o: 2\n  },\n  \"man-swimming\": {\n    obsoletes: \"1F3CA\",\n    a: \"Man Swimming\",\n    b: \"1F3CA-200D-2642-FE0F\",\n    c: \"1F3CA-200D-2642\",\n    k: [9, 41],\n    o: 4\n  },\n  \"flag-ws\": {\n    a: \"Samoa Flag\",\n    b: \"1F1FC-1F1F8\",\n    k: [4, 54],\n    o: 2\n  },\n  \"woman-swimming\": {\n    a: \"Woman Swimming\",\n    b: \"1F3CA-200D-2640-FE0F\",\n    c: \"1F3CA-200D-2640\",\n    k: [9, 35],\n    o: 4\n  },\n  \"flag-xk\": {\n    a: \"Kosovo Flag\",\n    b: \"1F1FD-1F1F0\",\n    k: [4, 55],\n    o: 2\n  },\n  \"flag-ye\": {\n    a: \"Yemen Flag\",\n    b: \"1F1FE-1F1EA\",\n    k: [4, 56],\n    o: 2\n  },\n  \"flag-yt\": {\n    a: \"Mayotte Flag\",\n    b: \"1F1FE-1F1F9\",\n    k: [5, 0],\n    o: 2\n  },\n  \"flag-za\": {\n    a: \"South Africa Flag\",\n    b: \"1F1FF-1F1E6\",\n    k: [5, 1],\n    o: 2\n  },\n  \"flag-zm\": {\n    a: \"Zambia Flag\",\n    b: \"1F1FF-1F1F2\",\n    k: [5, 2],\n    o: 2\n  },\n  \"flag-zw\": {\n    a: \"Zimbabwe Flag\",\n    b: \"1F1FF-1F1FC\",\n    k: [5, 3],\n    o: 2\n  },\n  \"flag-england\": {\n    a: \"England Flag\",\n    b: \"1F3F4-E0067-E0062-E0065-E006E-E0067-E007F\",\n    k: [11, 14],\n    o: 5\n  },\n  \"flag-scotland\": {\n    a: \"Scotland Flag\",\n    b: \"1F3F4-E0067-E0062-E0073-E0063-E0074-E007F\",\n    k: [11, 15],\n    o: 5\n  },\n  \"flag-wales\": {\n    a: \"Wales Flag\",\n    b: \"1F3F4-E0067-E0062-E0077-E006C-E0073-E007F\",\n    k: [11, 16],\n    o: 5\n  },\n  \"man-biking\": {\n    obsoletes: \"1F6B4\",\n    a: \"Man Biking\",\n    b: \"1F6B4-200D-2642-FE0F\",\n    c: \"1F6B4-200D-2642\",\n    k: [35, 17],\n    o: 4\n  },\n  \"woman-biking\": {\n    a: \"Woman Biking\",\n    b: \"1F6B4-200D-2640-FE0F\",\n    c: \"1F6B4-200D-2640\",\n    k: [35, 11],\n    o: 4\n  },\n  \"man-mountain-biking\": {\n    obsoletes: \"1F6B5\",\n    a: \"Man Mountain Biking\",\n    b: \"1F6B5-200D-2642-FE0F\",\n    c: \"1F6B5-200D-2642\",\n    k: [35, 35],\n    o: 4\n  },\n  \"woman-mountain-biking\": {\n    a: \"Woman Mountain Biking\",\n    b: \"1F6B5-200D-2640-FE0F\",\n    c: \"1F6B5-200D-2640\",\n    k: [35, 29],\n    o: 4\n  },\n  \"man-cartwheeling\": {\n    a: \"Man Cartwheeling\",\n    b: \"1F938-200D-2642-FE0F\",\n    c: \"1F938-200D-2642\",\n    k: [40, 2],\n    o: 4\n  },\n  \"woman-cartwheeling\": {\n    a: \"Woman Cartwheeling\",\n    b: \"1F938-200D-2640-FE0F\",\n    c: \"1F938-200D-2640\",\n    k: [39, 53],\n    o: 4\n  },\n  wrestlers: {\n    a: \"Wrestlers\",\n    b: \"1F93C\",\n    k: [40, 35],\n    o: 4\n  },\n  \"man-wrestling\": {\n    a: \"Man Wrestling\",\n    b: \"1F93C-200D-2642-FE0F\",\n    c: \"1F93C-200D-2642\",\n    k: [40, 34],\n    o: 4\n  },\n  \"woman-wrestling\": {\n    a: \"Woman Wrestling\",\n    b: \"1F93C-200D-2640-FE0F\",\n    c: \"1F93C-200D-2640\",\n    k: [40, 33],\n    o: 4\n  },\n  \"man-playing-water-polo\": {\n    a: \"Man Playing Water Polo\",\n    b: \"1F93D-200D-2642-FE0F\",\n    c: \"1F93D-200D-2642\",\n    k: [40, 42],\n    o: 4\n  },\n  \"woman-playing-water-polo\": {\n    a: \"Woman Playing Water Polo\",\n    b: \"1F93D-200D-2640-FE0F\",\n    c: \"1F93D-200D-2640\",\n    k: [40, 36],\n    o: 4\n  },\n  \"man-playing-handball\": {\n    a: \"Man Playing Handball\",\n    b: \"1F93E-200D-2642-FE0F\",\n    c: \"1F93E-200D-2642\",\n    k: [41, 3],\n    o: 4\n  },\n  \"woman-playing-handball\": {\n    a: \"Woman Playing Handball\",\n    b: \"1F93E-200D-2640-FE0F\",\n    c: \"1F93E-200D-2640\",\n    k: [40, 54],\n    o: 4\n  },\n  juggling: {\n    a: \"Juggling\",\n    b: \"1F939\",\n    k: [40, 26],\n    o: 4\n  },\n  \"man-juggling\": {\n    a: \"Man Juggling\",\n    b: \"1F939-200D-2642-FE0F\",\n    c: \"1F939-200D-2642\",\n    k: [40, 20],\n    o: 4\n  },\n  \"woman-juggling\": {\n    a: \"Woman Juggling\",\n    b: \"1F939-200D-2640-FE0F\",\n    c: \"1F939-200D-2640\",\n    k: [40, 14],\n    o: 4\n  },\n  person_in_lotus_position: {\n    obsoleted_by: \"1F9D8-200D-2640-FE0F\",\n    a: \"Person in Lotus Position\",\n    b: \"1F9D8\",\n    k: [49, 31],\n    o: 5\n  },\n  man_in_lotus_position: {\n    a: \"Man in Lotus Position\",\n    b: \"1F9D8-200D-2642-FE0F\",\n    c: \"1F9D8-200D-2642\",\n    k: [49, 25],\n    o: 5\n  },\n  woman_in_lotus_position: {\n    obsoletes: \"1F9D8\",\n    a: \"Woman in Lotus Position\",\n    b: \"1F9D8-200D-2640-FE0F\",\n    c: \"1F9D8-200D-2640\",\n    k: [49, 19],\n    o: 5\n  },\n  bath: {\n    a: \"Bath\",\n    b: \"1F6C0\",\n    j: [\"clean\", \"shower\", \"bathroom\"],\n    k: [36, 17],\n    o: 2\n  },\n  sleeping_accommodation: {\n    a: \"Sleeping Accommodation\",\n    b: \"1F6CC\",\n    k: [36, 29],\n    o: 2\n  },\n  people_holding_hands: {\n    a: \"People Holding Hands\",\n    b: \"1F9D1-200D-1F91D-200D-1F9D1\",\n    k: [46, 38],\n    o: 12\n  },\n  two_women_holding_hands: {\n    a: \"Two Women Holding Hands\",\n    b: \"1F46D\",\n    j: [\"pair\", \"friendship\", \"couple\", \"love\", \"like\", \"female\", \"people\", \"human\"],\n    k: [21, 11],\n    n: [\"women_holding_hands\"],\n    o: 2\n  },\n  couple: {\n    a: \"Man and Woman Holding Hands\",\n    b: \"1F46B\",\n    j: [\"pair\", \"people\", \"human\", \"love\", \"date\", \"dating\", \"like\", \"affection\", \"valentines\", \"marriage\"],\n    k: [20, 16],\n    n: [\"man_and_woman_holding_hands\", \"woman_and_man_holding_hands\"],\n    o: 2\n  },\n  two_men_holding_hands: {\n    a: \"Two Men Holding Hands\",\n    b: \"1F46C\",\n    j: [\"pair\", \"couple\", \"love\", \"like\", \"bromance\", \"friendship\", \"people\", \"human\"],\n    k: [20, 42],\n    n: [\"men_holding_hands\"],\n    o: 2\n  },\n  couplekiss: {\n    obsoleted_by: \"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468\",\n    a: \"Kiss\",\n    b: \"1F48F\",\n    k: [25, 25],\n    o: 2\n  },\n  \"woman-kiss-man\": {\n    obsoletes: \"1F48F\",\n    a: \"Woman Kiss Man\",\n    b: \"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468\",\n    c: \"1F469-200D-2764-200D-1F48B-200D-1F468\",\n    k: [20, 7],\n    o: 2\n  },\n  \"man-kiss-man\": {\n    a: \"Man Kiss Man\",\n    b: \"1F468-200D-2764-FE0F-200D-1F48B-200D-1F468\",\n    c: \"1F468-200D-2764-200D-1F48B-200D-1F468\",\n    k: [17, 21],\n    o: 2\n  },\n  \"woman-kiss-woman\": {\n    a: \"Woman Kiss Woman\",\n    b: \"1F469-200D-2764-FE0F-200D-1F48B-200D-1F469\",\n    c: \"1F469-200D-2764-200D-1F48B-200D-1F469\",\n    k: [20, 8],\n    o: 2\n  },\n  couple_with_heart: {\n    obsoleted_by: \"1F469-200D-2764-FE0F-200D-1F468\",\n    a: \"Couple with Heart\",\n    b: \"1F491\",\n    k: [25, 27],\n    o: 2\n  },\n  \"woman-heart-man\": {\n    obsoletes: \"1F491\",\n    a: \"Woman Heart Man\",\n    b: \"1F469-200D-2764-FE0F-200D-1F468\",\n    c: \"1F469-200D-2764-200D-1F468\",\n    k: [20, 5],\n    o: 2\n  },\n  \"man-heart-man\": {\n    a: \"Man Heart Man\",\n    b: \"1F468-200D-2764-FE0F-200D-1F468\",\n    c: \"1F468-200D-2764-200D-1F468\",\n    k: [17, 20],\n    o: 2\n  },\n  \"woman-heart-woman\": {\n    a: \"Woman Heart Woman\",\n    b: \"1F469-200D-2764-FE0F-200D-1F469\",\n    c: \"1F469-200D-2764-200D-1F469\",\n    k: [20, 6],\n    o: 2\n  },\n  family: {\n    obsoleted_by: \"1F468-200D-1F469-200D-1F466\",\n    a: \"Family\",\n    b: \"1F46A\",\n    k: [20, 15],\n    n: [\"man-woman-boy\"],\n    o: 2\n  },\n  \"man-woman-boy\": {\n    obsoletes: \"1F46A\",\n    a: \"Man Woman Boy\",\n    b: \"1F468-200D-1F469-200D-1F466\",\n    k: [15, 33],\n    n: [\"family\"],\n    o: 2\n  },\n  \"man-woman-girl\": {\n    a: \"Man Woman Girl\",\n    b: \"1F468-200D-1F469-200D-1F467\",\n    k: [15, 35],\n    o: 2\n  },\n  \"man-woman-girl-boy\": {\n    a: \"Man Woman Girl Boy\",\n    b: \"1F468-200D-1F469-200D-1F467-200D-1F466\",\n    k: [15, 36],\n    o: 2\n  },\n  \"man-woman-boy-boy\": {\n    a: \"Man Woman Boy Boy\",\n    b: \"1F468-200D-1F469-200D-1F466-200D-1F466\",\n    k: [15, 34],\n    o: 2\n  },\n  \"man-woman-girl-girl\": {\n    a: \"Man Woman Girl Girl\",\n    b: \"1F468-200D-1F469-200D-1F467-200D-1F467\",\n    k: [15, 37],\n    o: 2\n  },\n  \"man-man-boy\": {\n    a: \"Man Man Boy\",\n    b: \"1F468-200D-1F468-200D-1F466\",\n    k: [15, 28],\n    o: 2\n  },\n  \"man-man-girl\": {\n    a: \"Man Man Girl\",\n    b: \"1F468-200D-1F468-200D-1F467\",\n    k: [15, 30],\n    o: 2\n  },\n  \"man-man-girl-boy\": {\n    a: \"Man Man Girl Boy\",\n    b: \"1F468-200D-1F468-200D-1F467-200D-1F466\",\n    k: [15, 31],\n    o: 2\n  },\n  \"man-man-boy-boy\": {\n    a: \"Man Man Boy Boy\",\n    b: \"1F468-200D-1F468-200D-1F466-200D-1F466\",\n    k: [15, 29],\n    o: 2\n  },\n  \"man-man-girl-girl\": {\n    a: \"Man Man Girl Girl\",\n    b: \"1F468-200D-1F468-200D-1F467-200D-1F467\",\n    k: [15, 32],\n    o: 2\n  },\n  \"woman-woman-boy\": {\n    a: \"Woman Woman Boy\",\n    b: \"1F469-200D-1F469-200D-1F466\",\n    k: [18, 18],\n    o: 2\n  },\n  \"woman-woman-girl\": {\n    a: \"Woman Woman Girl\",\n    b: \"1F469-200D-1F469-200D-1F467\",\n    k: [18, 20],\n    o: 2\n  },\n  \"woman-woman-girl-boy\": {\n    a: \"Woman Woman Girl Boy\",\n    b: \"1F469-200D-1F469-200D-1F467-200D-1F466\",\n    k: [18, 21],\n    o: 2\n  },\n  \"woman-woman-boy-boy\": {\n    a: \"Woman Woman Boy Boy\",\n    b: \"1F469-200D-1F469-200D-1F466-200D-1F466\",\n    k: [18, 19],\n    o: 2\n  },\n  \"woman-woman-girl-girl\": {\n    a: \"Woman Woman Girl Girl\",\n    b: \"1F469-200D-1F469-200D-1F467-200D-1F467\",\n    k: [18, 22],\n    o: 2\n  },\n  \"man-boy\": {\n    a: \"Man Boy\",\n    b: \"1F468-200D-1F466\",\n    k: [15, 24],\n    o: 4\n  },\n  \"man-boy-boy\": {\n    a: \"Man Boy Boy\",\n    b: \"1F468-200D-1F466-200D-1F466\",\n    k: [15, 23],\n    o: 4\n  },\n  \"man-girl\": {\n    a: \"Man Girl\",\n    b: \"1F468-200D-1F467\",\n    k: [15, 27],\n    o: 4\n  },\n  \"man-girl-boy\": {\n    a: \"Man Girl Boy\",\n    b: \"1F468-200D-1F467-200D-1F466\",\n    k: [15, 25],\n    o: 4\n  },\n  \"man-girl-girl\": {\n    a: \"Man Girl Girl\",\n    b: \"1F468-200D-1F467-200D-1F467\",\n    k: [15, 26],\n    o: 4\n  },\n  \"woman-boy\": {\n    a: \"Woman Boy\",\n    b: \"1F469-200D-1F466\",\n    k: [18, 14],\n    o: 4\n  },\n  \"woman-boy-boy\": {\n    a: \"Woman Boy Boy\",\n    b: \"1F469-200D-1F466-200D-1F466\",\n    k: [18, 13],\n    o: 4\n  },\n  \"woman-girl\": {\n    a: \"Woman Girl\",\n    b: \"1F469-200D-1F467\",\n    k: [18, 17],\n    o: 4\n  },\n  \"woman-girl-boy\": {\n    a: \"Woman Girl Boy\",\n    b: \"1F469-200D-1F467-200D-1F466\",\n    k: [18, 15],\n    o: 4\n  },\n  \"woman-girl-girl\": {\n    a: \"Woman Girl Girl\",\n    b: \"1F469-200D-1F467-200D-1F467\",\n    k: [18, 16],\n    o: 4\n  },\n  speaking_head_in_silhouette: {\n    a: \"Speaking Head in Silhouette\",\n    b: \"1F5E3-FE0F\",\n    c: \"1F5E3\",\n    k: [30, 25],\n    o: 2\n  },\n  bust_in_silhouette: {\n    a: \"Bust in Silhouette\",\n    b: \"1F464\",\n    j: [\"user\", \"person\", \"human\"],\n    k: [14, 24],\n    o: 2\n  },\n  busts_in_silhouette: {\n    a: \"Busts in Silhouette\",\n    b: \"1F465\",\n    j: [\"user\", \"person\", \"human\", \"group\", \"team\"],\n    k: [14, 25],\n    o: 2\n  },\n  footprints: {\n    a: \"Footprints\",\n    b: \"1F463\",\n    j: [\"feet\", \"tracking\", \"walking\", \"beach\"],\n    k: [14, 23],\n    o: 2\n  }\n};\nvar aliases = {\n  raised_hand: \"hand\",\n  satisfied: \"laughing\",\n  tshirt: \"shirt\",\n  hand_with_index_and_middle_fingers_crossed: \"crossed_fingers\",\n  sign_of_the_horns: \"the_horns\",\n  grinning_face_with_star_eyes: \"star-struck\",\n  reversed_hand_with_middle_finger_extended: \"middle_finger\",\n  thumbsup: \"+1\",\n  thumbsdown: \"-1\",\n  punch: \"facepunch\",\n  grinning_face_with_one_large_and_one_small_eye: \"zany_face\",\n  shoe: \"mans_shoe\",\n  smiling_face_with_smiling_eyes_and_hand_covering_mouth: \"face_with_hand_over_mouth\",\n  face_with_finger_covering_closed_lips: \"shushing_face\",\n  face_with_one_eyebrow_raised: \"face_with_raised_eyebrow\",\n  face_with_open_mouth_vomiting: \"face_vomiting\",\n  cooking: \"fried_egg\",\n  \"flag-cn\": \"cn\",\n  shocked_face_with_exploding_head: \"exploding_head\",\n  paw_prints: \"feet\",\n  \"flag-de\": \"de\",\n  telephone: \"phone\",\n  \"flag-es\": \"es\",\n  red_car: \"car\",\n  flipper: \"dolphin\",\n  \"flag-fr\": \"fr\",\n  uk: \"gb\",\n  \"flag-gb\": \"gb\",\n  serious_face_with_symbols_covering_mouth: \"face_with_symbols_on_mouth\",\n  poop: \"hankey\",\n  shit: \"hankey\",\n  honeybee: \"bee\",\n  staff_of_aesculapius: \"medical_symbol\",\n  lantern: \"izakaya_lantern\",\n  open_book: \"book\",\n  sailboat: \"boat\",\n  knife: \"hocho\",\n  \"flag-it\": \"it\",\n  heavy_exclamation_mark: \"exclamation\",\n  \"flag-jp\": \"jp\",\n  envelope: \"email\",\n  \"flag-kr\": \"kr\",\n  collision: \"boom\",\n  pencil: \"memo\",\n  waxing_gibbous_moon: \"moon\",\n  mother_christmas: \"mrs_claus\",\n  sun_small_cloud: \"mostly_sunny\",\n  sun_behind_cloud: \"barely_sunny\",\n  sun_behind_rain_cloud: \"partly_sunny_rain\",\n  lightning_cloud: \"lightning\",\n  tornado_cloud: \"tornado\",\n  \"flag-ru\": \"ru\",\n  \"flag-us\": \"us\",\n  women_holding_hands: \"two_women_holding_hands\",\n  man_and_woman_holding_hands: \"couple\",\n  woman_and_man_holding_hands: \"couple\",\n  men_holding_hands: \"two_men_holding_hands\",\n  \"man-woman-boy\": \"family\",\n  family: \"man-woman-boy\"\n};\nvar defaultEmojiData = {\n  compressed: compressed,\n  categories: categories,\n  emojis: emojis,\n  aliases: aliases\n};\n\nvar UnMemoizedChannel = function UnMemoizedChannel(props) {\n  var propsChannel = props.channel,\n      _a = props.EmptyPlaceholder,\n      EmptyPlaceholder = _a === void 0 ? null : _a;\n  var contextChannel = useChatContext().channel;\n  var channel = propsChannel || contextChannel;\n  if (!(channel === null || channel === void 0 ? void 0 : channel.cid)) return EmptyPlaceholder;\n  return React.createElement(ChannelInner, _assign({}, props, {\n    channel: channel,\n    key: channel.cid\n  }));\n};\n\nvar ChannelInner = function ChannelInner(props) {\n  var acceptedFiles = props.acceptedFiles,\n      _a = props.Attachment,\n      Attachment$1 = _a === void 0 ? Attachment : _a,\n      channel = props.channel,\n      children = props.children,\n      doMarkReadRequest = props.doMarkReadRequest,\n      doSendMessageRequest = props.doSendMessageRequest,\n      doUpdateMessageRequest = props.doUpdateMessageRequest,\n      _b = props.Emoji,\n      Emoji = _b === void 0 ? DefaultEmoji : _b,\n      _c = props.emojiData,\n      emojiData = _c === void 0 ? defaultEmojiData : _c,\n      _d = props.EmojiIndex,\n      EmojiIndex = _d === void 0 ? DefaultEmojiIndex : _d,\n      _e = props.EmojiPicker,\n      EmojiPicker = _e === void 0 ? DefaultEmojiPicker : _e,\n      _f = props.LoadingErrorIndicator,\n      LoadingErrorIndicator$1 = _f === void 0 ? LoadingErrorIndicator : _f,\n      _g = props.LoadingIndicator,\n      LoadingIndicator$1 = _g === void 0 ? LoadingIndicator : _g,\n      maxNumberOfFiles = props.maxNumberOfFiles,\n      _h = props.Message,\n      Message = _h === void 0 ? MessageSimple : _h,\n      _j = props.multipleUploads,\n      multipleUploads = _j === void 0 ? true : _j,\n      onMentionsClick = props.onMentionsClick,\n      onMentionsHover = props.onMentionsHover;\n\n  var _k = useChatContext(),\n      client = _k.client,\n      mutes = _k.mutes,\n      theme = _k.theme;\n\n  var t = useTranslationContext().t;\n\n  var _l = useState([]),\n      notifications = _l[0],\n      setNotifications = _l[1];\n\n  var notificationTimeouts = [];\n\n  var _m = useReducer(channelReducer, initialState),\n      state = _m[0],\n      dispatch = _m[1];\n\n  var isMounted = useIsMounted();\n  var originalTitle = useRef('');\n  var lastRead = useRef(new Date());\n  var online = useRef(true);\n  var emojiConfig = {\n    commonEmoji: commonEmoji,\n    defaultMinimalEmojis: defaultMinimalEmojis,\n    Emoji: Emoji,\n    emojiData: emojiData,\n    EmojiIndex: EmojiIndex,\n    EmojiPicker: EmojiPicker,\n    emojiSetDef: emojiSetDef\n  };\n  var throttledCopyStateFromChannel = useCallback(throttle(function () {\n    if (!channel) return;\n    dispatch({\n      channel: channel,\n      type: 'copyStateFromChannelOnEvent'\n    });\n  }, 500, {\n    leading: true,\n    trailing: true\n  }), [channel]);\n  var markRead = useCallback(function () {\n    var _a;\n\n    if (!channel || channel.disconnected || !((_a = channel.getConfig()) === null || _a === void 0 ? void 0 : _a.read_events)) {\n      return;\n    }\n\n    lastRead.current = new Date();\n\n    if (doMarkReadRequest) {\n      doMarkReadRequest(channel);\n    } else {\n      logChatPromiseExecution(channel.markRead(), 'mark read');\n    }\n\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel, doMarkReadRequest]);\n  var markReadThrottled = useCallback(throttle(markRead, 500, {\n    leading: true,\n    trailing: true\n  }), [markRead]);\n  var handleEvent = useCallback(function (event) {\n    var _a, _b, _c, _d, _e;\n\n    if (event.message) {\n      dispatch({\n        channel: channel,\n        message: event.message,\n        type: 'updateThreadOnEvent'\n      });\n    }\n\n    if (event.type === 'connection.changed' && typeof event.online === 'boolean') {\n      online.current = event.online;\n    }\n\n    if (event.type === 'message.new') {\n      var mainChannelUpdated = true;\n\n      if (((_a = event.message) === null || _a === void 0 ? void 0 : _a.parent_id) && !((_b = event.message) === null || _b === void 0 ? void 0 : _b.show_in_channel)) {\n        mainChannelUpdated = false;\n      }\n\n      if (mainChannelUpdated && ((_d = (_c = event.message) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id) !== client.userID) {\n        if (!document.hidden) {\n          markReadThrottled();\n        } else if (((_e = channel.getConfig()) === null || _e === void 0 ? void 0 : _e.read_events) && !channel.muteStatus().muted) {\n          var unread = channel.countUnread(lastRead.current);\n          document.title = \"(\" + unread + \") \" + originalTitle.current;\n        }\n      }\n    }\n\n    throttledCopyStateFromChannel();\n  }, [channel, client.userID, markReadThrottled, throttledCopyStateFromChannel]); // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n\n  useLayoutEffect(function () {\n    var errored = false;\n    var done = false;\n\n    var onVisibilityChange = function onVisibilityChange() {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n\n    (function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var e_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(channel && !channel.initialized)) return [3\n              /*break*/\n              , 4];\n              _a.label = 1;\n\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n\n              return [4\n              /*yield*/\n              , channel.watch()];\n\n            case 2:\n              _a.sent();\n\n              return [3\n              /*break*/\n              , 4];\n\n            case 3:\n              e_1 = _a.sent();\n              dispatch({\n                error: e_1,\n                type: 'setError'\n              });\n              errored = true;\n              return [3\n              /*break*/\n              , 4];\n\n            case 4:\n              done = true;\n              originalTitle.current = document.title;\n\n              if (channel && !errored) {\n                dispatch({\n                  channel: channel,\n                  type: 'initStateFromChannel'\n                });\n                if (channel.countUnread() > 0) markRead(); // The more complex sync logic is done in Chat\n\n                document.addEventListener('visibilitychange', onVisibilityChange);\n                client.on('connection.changed', handleEvent);\n                client.on('connection.recovered', handleEvent);\n                channel.on(handleEvent);\n              }\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    })();\n\n    return function () {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      if (channel) channel.off(handleEvent);\n      client.off('connection.changed', handleEvent);\n      client.off('connection.recovered', handleEvent);\n      notificationTimeouts.forEach(clearTimeout);\n    };\n  }, [channel, client, handleEvent, markRead]);\n  useEffect(function () {\n    var _a;\n\n    if (state.thread && ((_a = state.messages) === null || _a === void 0 ? void 0 : _a.length)) {\n      for (var i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({\n            message: state.messages[i],\n            type: 'setThread'\n          });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]);\n  /** MESSAGE */\n  // Adds a temporary notification to message list, will be removed after 5 seconds\n\n  var addNotification = function addNotification(text, type) {\n    if (typeof text !== 'string' || type !== 'success' && type !== 'error') {\n      return;\n    }\n\n    var id = v4();\n    setNotifications(function (prevNotifications) {\n      return __spreadArrays(prevNotifications, [{\n        id: id,\n        text: text,\n        type: type\n      }]);\n    });\n    var timeout = setTimeout(function () {\n      return setNotifications(function (prevNotifications) {\n        return prevNotifications.filter(function (notification) {\n          return notification.id !== id;\n        });\n      });\n    }, 5000);\n    notificationTimeouts.push(timeout);\n  };\n\n  var loadMoreFinished = useCallback(debounce(function (hasMore, messages) {\n    if (!isMounted.current) return;\n    dispatch({\n      hasMore: hasMore,\n      messages: messages,\n      type: 'loadMoreFinished'\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMore = useCallback( // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  function (limit) {\n    if (limit === void 0) {\n      limit = 100;\n    }\n\n    return __awaiter(void 0, void 0, void 0, function () {\n      var oldestMessage, oldestID, perPage, queryResponse, e_2, hasMoreMessages;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!online.current || !window.navigator.onLine || !channel) return [2\n            /*return*/\n            , 0];\n            oldestMessage = (_a = state === null || state === void 0 ? void 0 : state.messages) === null || _a === void 0 ? void 0 : _a[0];\n            if (state.loadingMore || (oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.status) !== 'received') return [2\n            /*return*/\n            , 0];\n            dispatch({\n              loadingMore: true,\n              type: 'setLoadingMore'\n            });\n            oldestID = oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.id;\n            perPage = limit;\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , channel.query({\n              messages: {\n                id_lt: oldestID,\n                limit: perPage\n              },\n              watchers: {\n                limit: perPage\n              }\n            })];\n\n          case 2:\n            queryResponse = _b.sent();\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            e_2 = _b.sent();\n            console.warn('message pagination request failed with error', e_2);\n            dispatch({\n              loadingMore: false,\n              type: 'setLoadingMore'\n            });\n            return [2\n            /*return*/\n            , 0];\n\n          case 4:\n            hasMoreMessages = queryResponse.messages.length === perPage;\n            loadMoreFinished(hasMoreMessages, channel.state.messages);\n            return [2\n            /*return*/\n            , queryResponse.messages.length];\n        }\n      });\n    });\n  }, [channel, loadMoreFinished, online, state.loadingMore, state.messages]);\n  var updateMessage = useCallback(function (updatedMessage) {\n    if (!channel) return; // adds the message to the local channel state..\n    // this adds to both the main channel state as well as any reply threads\n\n    channel.state.addMessageSorted(updatedMessage, true);\n    dispatch({\n      channel: channel,\n      parentId: state.thread && updatedMessage.parent_id,\n      type: 'copyMessagesFromChannel'\n    });\n  }, [channel, state.thread]);\n\n  var isUserResponseArray = function isUserResponseArray(output) {\n    var _a;\n\n    return ((_a = output[0]) === null || _a === void 0 ? void 0 : _a.id) != null;\n  };\n\n  var doSendMessage = useCallback(function (message) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var attachments, id, _a, mentioned_users, parent_id, text, mentions, messageData, messageResponse, error_1, stringError, parsedError;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!channel) return [2\n            /*return*/\n            ];\n            attachments = message.attachments, id = message.id, _a = message.mentioned_users, mentioned_users = _a === void 0 ? [] : _a, parent_id = message.parent_id, text = message.text;\n            mentions = isUserResponseArray(mentioned_users) ? mentioned_users.map(function (_a) {\n              var id = _a.id;\n              return id;\n            }) : mentioned_users;\n            messageData = {\n              attachments: attachments,\n              id: id,\n              mentioned_users: mentions,\n              parent_id: parent_id,\n              text: text\n            };\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 6,, 7]);\n\n            messageResponse = void 0;\n            if (!doSendMessageRequest) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , doSendMessageRequest(channel.cid, messageData)];\n\n          case 2:\n            messageResponse = _b.sent();\n            return [3\n            /*break*/\n            , 5];\n\n          case 3:\n            return [4\n            /*yield*/\n            , channel.sendMessage(messageData)];\n\n          case 4:\n            messageResponse = _b.sent();\n            _b.label = 5;\n\n          case 5:\n            // replace it after send is completed\n            if (messageResponse && messageResponse.message) {\n              updateMessage(_assign(_assign({}, messageResponse.message), {\n                status: 'received'\n              }));\n            }\n\n            return [3\n            /*break*/\n            , 7];\n\n          case 6:\n            error_1 = _b.sent();\n            stringError = JSON.stringify(error_1);\n            parsedError = stringError ? JSON.parse(stringError) : {};\n            updateMessage(_assign(_assign({}, message), {\n              errorStatusCode: parsedError.status || undefined,\n              status: 'failed'\n            }));\n            return [3\n            /*break*/\n            , 7];\n\n          case 7:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [channel, doSendMessageRequest, updateMessage]);\n  var createMessagePreview = useCallback(function (text, attachments, parent, mentioned_users) {\n    // create a preview of the message\n    var clientSideID = client.userID + \"-\" + v4();\n    return _assign({\n      __html: text,\n      attachments: attachments,\n      created_at: new Date(),\n      html: text,\n      id: clientSideID,\n      mentioned_users: mentioned_users,\n      reactions: [],\n      status: 'sending',\n      text: text,\n      type: 'regular',\n      user: client.user\n    }, (parent === null || parent === void 0 ? void 0 : parent.id) ? {\n      parent_id: parent.id\n    } : null);\n  }, [client.user, client.userID]);\n  var sendMessage = useCallback(function (_a) {\n    var _b = _a.attachments,\n        attachments = _b === void 0 ? [] : _b,\n        _c = _a.mentioned_users,\n        mentioned_users = _c === void 0 ? [] : _c,\n        _d = _a.parent,\n        parent = _d === void 0 ? undefined : _d,\n        _e = _a.text,\n        text = _e === void 0 ? '' : _e;\n    return __awaiter(void 0, void 0, void 0, function () {\n      var messagePreview;\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            if (!channel) return [2\n            /*return*/\n            ]; // remove error messages upon submit\n\n            channel.state.filterErrorMessages();\n            messagePreview = createMessagePreview(text, attachments, parent, mentioned_users); // first we add the message to the UI\n\n            updateMessage(messagePreview);\n            return [4\n            /*yield*/\n            , doSendMessage(messagePreview)];\n\n          case 1:\n            _f.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [channel === null || channel === void 0 ? void 0 : channel.state, createMessagePreview, doSendMessage, updateMessage]);\n  var retrySendMessage = useCallback(function (message) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // set the message status to sending\n            updateMessage(_assign(_assign({}, message), {\n              errorStatusCode: undefined,\n              status: 'sending'\n            })); // actually try to send the message...\n\n            return [4\n            /*yield*/\n            , doSendMessage(message)];\n\n          case 1:\n            // actually try to send the message...\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [doSendMessage, updateMessage]);\n  var removeMessage = useCallback(function (message) {\n    if (!channel) return;\n    channel.state.removeMessage(message);\n    dispatch({\n      channel: channel,\n      parentId: state.thread && message.parent_id,\n      type: 'copyMessagesFromChannel'\n    });\n  }, [channel, state.thread]);\n  /** THREAD */\n\n  var openThread = useCallback(function (message, event) {\n    if (!channel) return;\n\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    dispatch({\n      channel: channel,\n      message: message,\n      type: 'openThread'\n    });\n  }, [channel]);\n  var loadMoreThreadFinished = useCallback(debounce(function (threadHasMore, threadMessages) {\n    dispatch({\n      threadHasMore: threadHasMore,\n      threadMessages: threadMessages,\n      type: 'loadMoreThreadFinished'\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMoreThread = useCallback(function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var parentID, oldMessages, oldestMessageID, limit, queryResponse, threadHasMoreMessages, newThreadMessages;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            // prevent duplicate loading events...\n            if (!channel || state.threadLoadingMore || !state.thread) return [2\n            /*return*/\n            ];\n            dispatch({\n              type: 'startLoadingThread'\n            });\n            parentID = state.thread.id;\n\n            if (!parentID) {\n              dispatch({\n                type: 'closeThread'\n              });\n              return [2\n              /*return*/\n              ];\n            }\n\n            oldMessages = channel.state.threads[parentID] || [];\n            oldestMessageID = (_a = oldMessages[0]) === null || _a === void 0 ? void 0 : _a.id;\n            limit = 50;\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , channel.getReplies(parentID, {\n              id_lt: oldestMessageID,\n              limit: limit\n            })];\n\n          case 2:\n            queryResponse = _b.sent();\n            threadHasMoreMessages = queryResponse.messages.length === limit;\n            newThreadMessages = channel.state.threads[parentID] || []; // next set loadingMore to false so we can start asking for more data...\n\n            loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _b.sent();\n\n            loadMoreThreadFinished(false, oldMessages);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n  var closeThread = useCallback(function (event) {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    dispatch({\n      type: 'closeThread'\n    });\n  }, []);\n  var onMentionsHoverOrClick = useMentionsHandlers(onMentionsHover, onMentionsClick);\n  var editMessage = useEditMessageHandler(doUpdateMessageRequest);\n\n  var channelContextValue = _assign(_assign({}, state), {\n    acceptedFiles: acceptedFiles,\n    addNotification: addNotification,\n    Attachment: Attachment$1,\n    channel: channel,\n    client: client,\n    closeThread: closeThread,\n    dispatch: dispatch,\n    editMessage: editMessage,\n    emojiConfig: emojiConfig,\n    loadMore: loadMore,\n    loadMoreThread: loadMoreThread,\n    maxNumberOfFiles: maxNumberOfFiles,\n    Message: Message,\n    multipleUploads: multipleUploads,\n    mutes: mutes,\n    notifications: notifications,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    openThread: openThread,\n    removeMessage: removeMessage,\n    retrySendMessage: retrySendMessage,\n    sendMessage: sendMessage,\n    updateMessage: updateMessage,\n    watcher_count: state.watcherCount\n  });\n\n  if (state.error) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(LoadingErrorIndicator$1, {\n      error: state.error\n    }));\n  }\n\n  if (state.loading) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(LoadingIndicator$1, {\n      size: 25\n    }));\n  }\n\n  if (!(channel === null || channel === void 0 ? void 0 : channel.watch)) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(\"div\", null, t('Channel Missing')));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"str-chat str-chat-channel \" + theme\n  }, React.createElement(ChannelProvider, {\n    value: channelContextValue\n  }, React.createElement(\"div\", {\n    className: 'str-chat__container'\n  }, children)));\n};\n/**\n * Channel - Wrapper component for Channel. This Channel component provides the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n *\n * It also exposes the [withChannelContext](https://getstream.github.io/stream-chat-react/#section-withchannelcontext) HOC which you can use to consume the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n * @example ./Channel.md\n */\n\n\nvar Channel = React.memo(UnMemoizedChannel);\n\nvar UnMemoizedChannelHeader = function UnMemoizedChannelHeader(props) {\n  var _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      propImage = props.image,\n      live = props.live,\n      title = props.title;\n\n  var _b = useChannelContext(),\n      channel = _b.channel,\n      watcher_count = _b.watcher_count;\n\n  var openMobileNav = useChatContext().openMobileNav;\n  var t = useTranslationContext().t;\n\n  var _c = (channel === null || channel === void 0 ? void 0 : channel.data) || {},\n      channelImage = _c.image,\n      member_count = _c.member_count,\n      name = _c.name,\n      subtitle = _c.subtitle;\n\n  var image = propImage || channelImage;\n  return React.createElement(\"div\", {\n    className: 'str-chat__header-livestream'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__header-hamburger',\n    onClick: openMobileNav\n  }, React.createElement(\"span\", {\n    className: 'str-chat__header-hamburger--line'\n  }), React.createElement(\"span\", {\n    className: 'str-chat__header-hamburger--line'\n  }), React.createElement(\"span\", {\n    className: 'str-chat__header-hamburger--line'\n  })), image && React.createElement(Avatar$1, {\n    image: image,\n    shape: 'rounded',\n    size: (channel === null || channel === void 0 ? void 0 : channel.type) === 'commerce' ? 60 : 40\n  }), React.createElement(\"div\", {\n    className: 'str-chat__header-livestream-left'\n  }, React.createElement(\"p\", {\n    className: 'str-chat__header-livestream-left--title'\n  }, title || name, ' ', live && React.createElement(\"span\", {\n    className: 'str-chat__header-livestream-left--livelabel'\n  }, t('live'))), subtitle && React.createElement(\"p\", {\n    className: 'str-chat__header-livestream-left--subtitle'\n  }, subtitle), React.createElement(\"p\", {\n    className: 'str-chat__header-livestream-left--members'\n  }, !live && !!member_count && member_count > 0 && React.createElement(React.Fragment, null, t('{{ memberCount }} members', {\n    memberCount: member_count\n  }), \",\", ' '), t('{{ watcherCount }} online', {\n    watcherCount: watcher_count\n  }))));\n};\n/**\nThe ChannelHeader component renders some basic information about a Channel.\n* @example ./ChannelHeader.md\n*/\n\n\nvar ChannelHeader = React.memo(UnMemoizedChannelHeader);\nvar placeholder = \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\";\n\nvar UnMemoizedChatDown = function UnMemoizedChatDown(props) {\n  var image = props.image,\n      text = props.text,\n      _a = props.type,\n      type = _a === void 0 ? 'Error' : _a;\n  var t = useTranslationContext().t;\n  return React.createElement(\"div\", {\n    className: 'str-chat__down'\n  }, React.createElement(LoadingChannels, null), React.createElement(\"div\", {\n    className: 'str-chat__down-main'\n  }, React.createElement(\"img\", {\n    \"data-testid\": 'chatdown-img',\n    src: image || placeholder\n  }), React.createElement(\"h1\", null, type), React.createElement(\"h3\", null, text || t('Error connecting to chat, refresh the page to try again.'))));\n};\n/**\n * ChatDown - A simple indicator that chat functionality isn't available, triggered when the Chat API is unavailable or your network isn't working.\n * @example ./ChatDown.md\n */\n\n\nvar ChatDown = React.memo(UnMemoizedChatDown);\nvar chevrondown = \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\";\n/**\n * ChannelListTeam - A preview list of channels, allowing you to select the channel you want to open\n */\n\nvar ChannelListTeam = function ChannelListTeam(props) {\n  var _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      children = props.children,\n      _b = props.error,\n      error = _b === void 0 ? false : _b,\n      loading = props.loading,\n      _c = props.LoadingErrorIndicator,\n      LoadingErrorIndicator = _c === void 0 ? ChatDown : _c,\n      _d = props.LoadingIndicator,\n      LoadingIndicator = _d === void 0 ? LoadingChannels : _d,\n      showSidebar = props.showSidebar,\n      sidebarImage = props.sidebarImage;\n  var client = useChatContext().client;\n\n  var _e = client.user || {},\n      id = _e.id,\n      image = _e.image,\n      name = _e.name,\n      status = _e.status;\n\n  if (error) {\n    return React.createElement(LoadingErrorIndicator, {\n      type: 'Connection Error'\n    });\n  }\n\n  if (loading) {\n    return React.createElement(LoadingIndicator, null);\n  }\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team'\n  }, showSidebar && React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__sidebar'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__sidebar--top'\n  }, React.createElement(Avatar$1, {\n    image: sidebarImage,\n    size: 50\n  }))), React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__main'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__header'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__header--left'\n  }, React.createElement(Avatar$1, {\n    image: image,\n    name: name || id,\n    size: 40\n  })), React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__header--middle'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__header--title'\n  }, name || id), React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--status \" + status\n  }, status)), React.createElement(\"div\", {\n    className: 'str-chat__channel-list-team__header--right'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__channel-list-team__header--button'\n  }, React.createElement(\"img\", {\n    src: chevrondown\n  })))), children));\n};\n\nvar useChannelDeletedListener = function useChannelDeletedListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels(function (channels) {\n          var channelIndex = channels.findIndex(function (channel) {\n            return channel.cid === event.cid;\n          });\n          if (channelIndex < 0) return __spreadArrays(channels); // Remove the deleted channel from the list.s\n\n          channels.splice(channelIndex, 1);\n          return __spreadArrays(channels);\n        });\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    return function () {\n      client.off('channel.deleted', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useChannelHiddenListener = function useChannelHiddenListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels(function (channels) {\n          var channelIndex = channels.findIndex(function (channel) {\n            return channel.cid === event.cid;\n          });\n          if (channelIndex < 0) return __spreadArrays(channels); // Remove the hidden channel from the list.s\n\n          channels.splice(channelIndex, 1);\n          return __spreadArrays(channels);\n        });\n      }\n    };\n\n    client.on('channel.hidden', handleEvent);\n    return function () {\n      client.off('channel.hidden', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useChannelTruncatedListener = function useChannelTruncatedListener(setChannels, customHandler, forceUpdate) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      setChannels(function (channels) {\n        return __spreadArrays(channels);\n      });\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      }\n\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('channel.truncated', handleEvent);\n    return function () {\n      client.off('channel.truncated', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useChannelUpdatedListener = function useChannelUpdatedListener(setChannels, customHandler, forceUpdate) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      setChannels(function (channels) {\n        var channelIndex = channels.findIndex(function (channel) {\n          var _a;\n\n          return channel.cid === ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid);\n        });\n\n        if (channelIndex > -1 && event.channel) {\n          var newChannels = channels;\n          newChannels[channelIndex].data = event.channel;\n          return __spreadArrays(newChannels);\n        }\n\n        return channels;\n      });\n\n      if (forceUpdate) {\n        forceUpdate();\n      }\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      }\n    };\n\n    client.on('channel.updated', handleEvent);\n    return function () {\n      client.off('channel.updated', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar getChannel = function getChannel(client, type, id) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var channel;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          channel = client.channel(type, id);\n          return [4\n          /*yield*/\n          , channel.watch()];\n\n        case 1:\n          _a.sent();\n\n          return [2\n          /*return*/\n          , channel];\n      }\n    });\n  });\n};\n\nvar MAX_QUERY_CHANNELS_LIMIT = 30;\n\nvar moveChannelUp = function moveChannelUp(cid, channels) {\n  // get channel index\n  var channelIndex = channels.findIndex(function (channel) {\n    return channel.cid === cid;\n  });\n  if (channelIndex <= 0) return channels; // get channel from channels\n\n  var channel = channels[channelIndex]; // remove channel from current position\n\n  channels.splice(channelIndex, 1); // add channel at the start\n\n  channels.unshift(channel);\n  return __spreadArrays(channels);\n};\n\nvar useChannelVisibleListener = function useChannelVisibleListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var channel_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(customHandler && typeof customHandler === 'function')) return [3\n              /*break*/\n              , 1];\n              customHandler(setChannels, event);\n              return [3\n              /*break*/\n              , 3];\n\n            case 1:\n              if (!(event.type && event.channel_type && event.channel_id)) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , getChannel(client, event.channel_type, event.channel_id)];\n\n            case 2:\n              channel_1 = _a.sent();\n              setChannels(function (channels) {\n                return uniqBy(__spreadArrays([channel_1], channels), 'cid');\n              });\n              _a.label = 3;\n\n            case 3:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    client.on('channel.visible', handleEvent);\n    return function () {\n      client.off('channel.visible', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useConnectionRecoveredListener = function useConnectionRecoveredListener(forceUpdate) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent() {\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('connection.recovered', handleEvent);\n    return function () {\n      client.off('connection.recovered', handleEvent);\n    };\n  }, []);\n};\n\nvar useMessageNewListener = function useMessageNewListener(setChannels, lockChannelOrder, allowNewMessagesFromUnfilteredChannels) {\n  if (lockChannelOrder === void 0) {\n    lockChannelOrder = false;\n  }\n\n  if (allowNewMessagesFromUnfilteredChannels === void 0) {\n    allowNewMessagesFromUnfilteredChannels = true;\n  }\n\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      setChannels(function (channels) {\n        var channelInList = channels.filter(function (channel) {\n          return channel.cid === event.cid;\n        }).length > 0;\n\n        if (!channelInList && allowNewMessagesFromUnfilteredChannels && event.channel_type) {\n          var channel = client.channel(event.channel_type, event.channel_id);\n          return uniqBy(__spreadArrays([channel], channels), 'cid');\n        }\n\n        if (!lockChannelOrder) return moveChannelUp(event.cid || '', channels);\n        return channels;\n      });\n    };\n\n    client.on('message.new', handleEvent);\n    return function () {\n      client.off('message.new', handleEvent);\n    };\n  }, [lockChannelOrder]);\n};\n\nvar useMobileNavigation = function useMobileNavigation(channelListRef, navOpen, closeMobileNav) {\n  useEffect(function () {\n    var handleClickOutside = function handleClickOutside(event) {\n      if (closeMobileNav && channelListRef.current && !channelListRef.current.contains(event.target) && navOpen) {\n        closeMobileNav();\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return function () {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [channelListRef, closeMobileNav, navOpen]);\n};\n\nvar useNotificationAddedToChannelListener = function useNotificationAddedToChannelListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var channel_1;\n\n        var _a;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              if (!(customHandler && typeof customHandler === 'function')) return [3\n              /*break*/\n              , 1];\n              customHandler(setChannels, event);\n              return [3\n              /*break*/\n              , 3];\n\n            case 1:\n              if (!((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type)) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , getChannel(client, event.channel.type, event.channel.id)];\n\n            case 2:\n              channel_1 = _b.sent();\n              setChannels(function (channels) {\n                return uniqBy(__spreadArrays([channel_1], channels), 'cid');\n              });\n              _b.label = 3;\n\n            case 3:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    client.on('notification.added_to_channel', handleEvent);\n    return function () {\n      client.off('notification.added_to_channel', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useNotificationMessageNewListener = function useNotificationMessageNewListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var channel_1;\n\n        var _a;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              if (!(customHandler && typeof customHandler === 'function')) return [3\n              /*break*/\n              , 1];\n              customHandler(setChannels, event);\n              return [3\n              /*break*/\n              , 3];\n\n            case 1:\n              if (!((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type)) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , getChannel(client, event.channel.type, event.channel.id)];\n\n            case 2:\n              channel_1 = _b.sent(); // move channel to starting position\n\n              setChannels(function (channels) {\n                return uniqBy(__spreadArrays([channel_1], channels), 'cid');\n              });\n              _b.label = 3;\n\n            case 3:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    client.on('notification.message_new', handleEvent);\n    return function () {\n      client.off('notification.message_new', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar useNotificationRemovedFromChannelListener = function useNotificationRemovedFromChannelListener(setChannels, customHandler) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels(function (channels) {\n          return channels.filter(function (channel) {\n            var _a;\n\n            return channel.cid !== ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid);\n          });\n        });\n      }\n    };\n\n    client.on('notification.removed_from_channel', handleEvent);\n    return function () {\n      client.off('notification.removed_from_channel', handleEvent);\n    };\n  }, [customHandler]);\n};\n\nvar usePaginatedChannels = function usePaginatedChannels(client, filters, sort, options, activeChannelHandler) {\n  var _a = useState([]),\n      channels = _a[0],\n      setChannels = _a[1];\n\n  var _b = useState(false),\n      error = _b[0],\n      setError = _b[1];\n\n  var _c = useState(true),\n      hasNextPage = _c[0],\n      setHasNextPage = _c[1];\n\n  var _d = useState(true),\n      loadingChannels = _d[0],\n      setLoadingChannels = _d[1];\n\n  var _e = useState(0),\n      offset = _e[0],\n      setOffset = _e[1];\n\n  var _f = useState(true),\n      refreshing = _f[0],\n      setRefreshing = _f[1];\n\n  var filterString = useMemo(function () {\n    return JSON.stringify(filters);\n  }, [filters]);\n\n  var queryChannels = function queryChannels(queryType) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var newOptions, channelQueryResponse, newChannels, err_1;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (queryType === 'reload') {\n              setChannels([]);\n              setLoadingChannels(true);\n            }\n\n            setRefreshing(true);\n            newOptions = _assign({\n              limit: (_a = options === null || options === void 0 ? void 0 : options.limit) !== null && _a !== void 0 ? _a : MAX_QUERY_CHANNELS_LIMIT,\n              offset: queryType === 'reload' ? 0 : offset\n            }, options);\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , client.queryChannels(filters, sort || {}, newOptions)];\n\n          case 2:\n            channelQueryResponse = _b.sent();\n            newChannels = void 0;\n\n            if (queryType === 'reload') {\n              newChannels = channelQueryResponse;\n            } else {\n              newChannels = __spreadArrays(channels, channelQueryResponse);\n            }\n\n            setChannels(newChannels);\n            setHasNextPage(channelQueryResponse.length >= newOptions.limit); // Set active channel only after first page.\n\n            if (offset === 0 && activeChannelHandler) {\n              activeChannelHandler(newChannels, setChannels);\n            }\n\n            setOffset(newChannels.length);\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            err_1 = _b.sent();\n            console.warn(err_1);\n            setError(true);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            setLoadingChannels(false);\n            setRefreshing(false);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  var loadNextPage = function loadNextPage() {\n    queryChannels();\n  };\n\n  useEffect(function () {\n    queryChannels('reload');\n  }, [filterString]);\n  return {\n    channels: channels,\n    hasNextPage: hasNextPage,\n    loadNextPage: loadNextPage,\n    setChannels: setChannels,\n    status: {\n      error: error,\n      loadingChannels: loadingChannels,\n      refreshing: refreshing\n    }\n  };\n};\n\nvar useUserPresenceChangedListener = function useUserPresenceChangedListener(setChannels) {\n  var client = useChatContext().client;\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      setChannels(function (channels) {\n        var newChannels = channels.map(function (channel) {\n          var _a;\n\n          if (!((_a = event.user) === null || _a === void 0 ? void 0 : _a.id) || !channel.state.members[event.user.id]) {\n            return channel;\n          }\n\n          var newChannel = channel; // dumb workaround for linter\n\n          newChannel.state.members[event.user.id].user = event.user;\n          return newChannel;\n        });\n        return __spreadArrays(newChannels);\n      });\n    };\n\n    client.on('user.presence.changed', handleEvent);\n    return function () {\n      client.off('user.presence.changed', handleEvent);\n    };\n  }, []);\n};\n\nvar UnMemoizedChannelPreviewCountOnly = function UnMemoizedChannelPreviewCountOnly(props) {\n  var channel = props.channel,\n      displayTitle = props.displayTitle,\n      setActiveChannel = props.setActiveChannel,\n      unread = props.unread,\n      watchers = props.watchers;\n  return React.createElement(\"div\", {\n    className: unread && unread >= 1 ? 'unread' : ''\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      if (setActiveChannel) {\n        setActiveChannel(channel, watchers);\n      }\n    }\n  }, ' ', displayTitle, \" \", React.createElement(\"span\", null, unread)));\n};\n\nvar ChannelPreviewCountOnly = React.memo(UnMemoizedChannelPreviewCountOnly);\n\nvar getLatestMessagePreview = function getLatestMessagePreview(channel, t, userLanguage) {\n  var _a, _b;\n\n  if (userLanguage === void 0) {\n    userLanguage = 'en';\n  }\n\n  var latestMessage = channel.state.messages[channel.state.messages.length - 1];\n  var previewTextToRender = ((_a = latestMessage === null || latestMessage === void 0 ? void 0 : latestMessage.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || (latestMessage === null || latestMessage === void 0 ? void 0 : latestMessage.text);\n\n  if (!latestMessage) {\n    return t('Nothing yet...');\n  }\n\n  if (latestMessage.deleted_at) {\n    return t('Message deleted');\n  }\n\n  if (previewTextToRender) {\n    return previewTextToRender;\n  }\n\n  if (latestMessage.command) {\n    return \"/\" + latestMessage.command;\n  }\n\n  if ((_b = latestMessage.attachments) === null || _b === void 0 ? void 0 : _b.length) {\n    return t('🏙 Attachment...');\n  }\n\n  return t('Empty message...');\n};\n\nvar getDisplayTitle = function getDisplayTitle(channel, currentUser) {\n  var _a, _b;\n\n  var title = (_a = channel.data) === null || _a === void 0 ? void 0 : _a.name;\n  var members = Object.values(channel.state.members);\n\n  if (!title && members.length === 2) {\n    var otherMember = members.find(function (member) {\n      var _a;\n\n      return ((_a = member.user) === null || _a === void 0 ? void 0 : _a.id) !== (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id);\n    });\n\n    if ((_b = otherMember === null || otherMember === void 0 ? void 0 : otherMember.user) === null || _b === void 0 ? void 0 : _b.name) {\n      title = otherMember.user.name;\n    }\n  }\n\n  return title;\n};\n\nvar getDisplayImage = function getDisplayImage(channel, currentUser) {\n  var _a, _b;\n\n  var image = (_a = channel.data) === null || _a === void 0 ? void 0 : _a.image;\n  var members = Object.values(channel.state.members);\n\n  if (!image && members.length === 2) {\n    var otherMember = members.find(function (member) {\n      var _a;\n\n      return ((_a = member.user) === null || _a === void 0 ? void 0 : _a.id) !== (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id);\n    });\n\n    if ((_b = otherMember === null || otherMember === void 0 ? void 0 : otherMember.user) === null || _b === void 0 ? void 0 : _b.image) {\n      image = otherMember.user.image;\n    }\n  }\n\n  return image;\n};\n\nvar ChannelPreview = function ChannelPreview(props) {\n  var channel = props.channel,\n      _a = props.Preview,\n      Preview = _a === void 0 ? ChannelPreviewCountOnly : _a;\n\n  var _b = useChatContext(),\n      activeChannel = _b.channel,\n      client = _b.client,\n      setActiveChannel = _b.setActiveChannel;\n\n  var _c = useTranslationContext(),\n      t = _c.t,\n      userLanguage = _c.userLanguage;\n\n  var _d = useState(channel.state.messages[channel.state.messages.length - 1]),\n      lastMessage = _d[0],\n      setLastMessage = _d[1];\n\n  var _e = useState(0),\n      unread = _e[0],\n      setUnread = _e[1];\n\n  var isActive = (activeChannel === null || activeChannel === void 0 ? void 0 : activeChannel.cid) === channel.cid;\n  var muted = channel.muteStatus().muted;\n  useEffect(function () {\n    if (isActive || muted) {\n      setUnread(0);\n    } else {\n      setUnread(channel.countUnread());\n    }\n  }, [channel, isActive, muted]);\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      if (event.message) setLastMessage(event.message);\n\n      if (!isActive && !muted) {\n        setUnread(channel.countUnread());\n      } else {\n        setUnread(0);\n      }\n    };\n\n    channel.on('message.new', handleEvent);\n    channel.on('message.updated', handleEvent);\n    channel.on('message.deleted', handleEvent);\n    return function () {\n      channel.off('message.new', handleEvent);\n      channel.off('message.updated', handleEvent);\n      channel.off('message.deleted', handleEvent);\n    };\n  }, [channel, isActive, muted]);\n  if (!Preview) return null;\n  return React.createElement(Preview, _assign({}, props, {\n    active: isActive,\n    displayImage: getDisplayImage(channel, client.user),\n    displayTitle: getDisplayTitle(channel, client.user),\n    lastMessage: lastMessage,\n    latestMessage: getLatestMessagePreview(channel, t, userLanguage),\n    setActiveChannel: setActiveChannel,\n    unread: unread\n  }));\n};\n\nvar UnMemoizedChannelPreviewLastMessage = function UnMemoizedChannelPreviewLastMessage(props) {\n  var active = props.active,\n      _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      channel = props.channel,\n      displayImage = props.displayImage,\n      displayTitle = props.displayTitle,\n      latestMessage = props.latestMessage,\n      _b = props.latestMessageLength,\n      latestMessageLength = _b === void 0 ? 20 : _b,\n      setActiveChannel = props.setActiveChannel,\n      unread = props.unread,\n      watchers = props.watchers;\n  var channelPreviewButton = useRef(null);\n\n  var onSelectChannel = function onSelectChannel() {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n\n    if (channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : channelPreviewButton.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  var unreadClass = unread && unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n  var activeClass = active ? 'str-chat__channel-preview--active' : '';\n  return React.createElement(\"div\", {\n    className: \"str-chat__channel-preview \" + unreadClass + \" \" + activeClass\n  }, React.createElement(\"button\", {\n    \"data-testid\": 'channel-preview-button',\n    onClick: onSelectChannel,\n    ref: channelPreviewButton\n  }, unread && unread >= 1 ? React.createElement(\"div\", {\n    className: 'str-chat__channel-preview--dot'\n  }) : null, React.createElement(Avatar$1, {\n    image: displayImage,\n    name: displayTitle\n  }), React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-info'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__channel-preview-title'\n  }, displayTitle), React.createElement(\"span\", {\n    className: 'str-chat__channel-preview-last-message'\n  }, truncate(latestMessage, latestMessageLength)), unread && unread >= 1 ? React.createElement(\"span\", {\n    className: 'str-chat__channel-preview-unread-count'\n  }, unread) : null)));\n};\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component\n * @example ./ChannelPreviewLastMessage.md\n */\n\n\nvar ChannelPreviewLastMessage = React.memo(UnMemoizedChannelPreviewLastMessage);\n\nvar UnMemoizedEmptyStateIndicator = function UnMemoizedEmptyStateIndicator(props) {\n  var listType = props.listType;\n  var t = useTranslationContext().t;\n  if (listType === 'channel') return React.createElement(\"p\", null, t('You have no channels currently'));\n  if (listType === 'message') return null;\n  return React.createElement(\"p\", null, \"No items exist\");\n};\n\nvar EmptyStateIndicator = React.memo(UnMemoizedEmptyStateIndicator);\n\nvar UnMemoizedLoadMoreButton = function UnMemoizedLoadMoreButton(props) {\n  var _a = props.children,\n      children = _a === void 0 ? 'Load more' : _a,\n      onClick = props.onClick,\n      refreshing = props.refreshing;\n  return React.createElement(\"div\", {\n    className: 'str-chat__load-more-button'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__load-more-button__button',\n    \"data-testid\": 'load-more-button',\n    disabled: refreshing,\n    onClick: onClick\n  }, refreshing ? React.createElement(LoadingIndicator$1, null) : children));\n};\n\nvar LoadMoreButton = React.memo(UnMemoizedLoadMoreButton);\n\nvar UnMemoizedLoadMorePaginator = function UnMemoizedLoadMorePaginator(props) {\n  var children = props.children,\n      hasNextPage = props.hasNextPage,\n      _a = props.LoadMoreButton,\n      LoadMoreButton$1 = _a === void 0 ? LoadMoreButton : _a,\n      loadNextPage = props.loadNextPage,\n      refreshing = props.refreshing,\n      reverse = props.reverse;\n  return React.createElement(React.Fragment, null, !reverse && children, hasNextPage && React.createElement(LoadMoreButton$1, {\n    onClick: loadNextPage,\n    refreshing: refreshing\n  }), reverse && children);\n};\n\nvar LoadMorePaginator = React.memo(UnMemoizedLoadMorePaginator);\nvar DEFAULT_FILTERS = {};\nvar DEFAULT_OPTIONS = {};\nvar DEFAULT_SORT = {};\n\nvar UnMemoizedChannelList = function UnMemoizedChannelList(props) {\n  var _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      allowNewMessagesFromUnfilteredChannels = props.allowNewMessagesFromUnfilteredChannels,\n      channelRenderFilterFn = props.channelRenderFilterFn,\n      customActiveChannel = props.customActiveChannel,\n      _b = props.EmptyStateIndicator,\n      EmptyStateIndicator$1 = _b === void 0 ? EmptyStateIndicator : _b,\n      filters = props.filters,\n      _c = props.LoadingErrorIndicator,\n      LoadingErrorIndicator = _c === void 0 ? ChatDown : _c,\n      _d = props.LoadingIndicator,\n      LoadingIndicator = _d === void 0 ? LoadingChannels : _d,\n      _e = props.List,\n      List = _e === void 0 ? ChannelListTeam : _e,\n      lockChannelOrder = props.lockChannelOrder,\n      onAddedToChannel = props.onAddedToChannel,\n      onChannelDeleted = props.onChannelDeleted,\n      onChannelHidden = props.onChannelHidden,\n      onChannelTruncated = props.onChannelTruncated,\n      onChannelUpdated = props.onChannelUpdated,\n      onChannelVisible = props.onChannelVisible,\n      onMessageNew = props.onMessageNew,\n      onRemovedFromChannel = props.onRemovedFromChannel,\n      options = props.options,\n      _f = props.Paginator,\n      Paginator = _f === void 0 ? LoadMorePaginator : _f,\n      _g = props.Preview,\n      Preview = _g === void 0 ? ChannelPreviewLastMessage : _g,\n      _h = props.setActiveChannelOnMount,\n      setActiveChannelOnMount = _h === void 0 ? true : _h,\n      showSidebar = props.showSidebar,\n      _j = props.sort,\n      sort = _j === void 0 ? DEFAULT_SORT : _j,\n      _k = props.watchers,\n      watchers = _k === void 0 ? {} : _k;\n\n  var _l = useChatContext(),\n      channel = _l.channel,\n      client = _l.client,\n      closeMobileNav = _l.closeMobileNav,\n      _m = _l.navOpen,\n      navOpen = _m === void 0 ? false : _m,\n      setActiveChannel = _l.setActiveChannel,\n      theme = _l.theme;\n\n  var channelListRef = useRef(null);\n\n  var _o = useState(0),\n      channelUpdateCount = _o[0],\n      setChannelUpdateCount = _o[1];\n  /**\n   * Set a channel with id {customActiveChannel} as active and move it to the top of the list.\n   * If customActiveChannel prop is absent, then set the first channel in list as active channel.\n   */\n\n\n  var activeChannelHandler = function activeChannelHandler(channels, setChannels) {\n    if (!channels || channels.length === 0 || channels.length > ((options === null || options === void 0 ? void 0 : options.limit) || MAX_QUERY_CHANNELS_LIMIT)) {\n      return;\n    }\n\n    if (customActiveChannel) {\n      var customActiveChannelObject = channels.find(function (chan) {\n        return chan.id === customActiveChannel;\n      });\n\n      if (customActiveChannelObject) {\n        if (setActiveChannel) {\n          setActiveChannel(customActiveChannelObject, watchers);\n        }\n\n        var newChannels = moveChannelUp(customActiveChannelObject.cid, channels);\n        setChannels(newChannels);\n      }\n\n      return;\n    }\n\n    if (setActiveChannelOnMount && setActiveChannel) {\n      setActiveChannel(channels[0], watchers);\n    }\n  }; // When channel list (channels array) is updated without any shallow changes (or with only deep changes), then we want\n  // to force the channel preview to re-render.\n  // This happens in case of event channel.updated, channel.truncated etc. Inner properties of channel is updated but\n  // react renderer will only make shallow comparison and choose to not to re-render the UI.\n  // By updating the dummy prop - channelUpdateCount, we can force this re-render.\n\n\n  var forceUpdate = function forceUpdate() {\n    return setChannelUpdateCount(function (count) {\n      return count + 1;\n    });\n  };\n\n  var _p = usePaginatedChannels(client, filters || DEFAULT_FILTERS, sort || DEFAULT_SORT, options || DEFAULT_OPTIONS, activeChannelHandler),\n      channels = _p.channels,\n      hasNextPage = _p.hasNextPage,\n      loadNextPage = _p.loadNextPage,\n      setChannels = _p.setChannels,\n      status = _p.status;\n\n  var loadedChannels = channelRenderFilterFn ? channelRenderFilterFn(channels) : channels;\n  useMobileNavigation(channelListRef, navOpen, closeMobileNav);\n  useMessageNewListener(setChannels, lockChannelOrder, allowNewMessagesFromUnfilteredChannels);\n  useNotificationMessageNewListener(setChannels, onMessageNew);\n  useNotificationAddedToChannelListener(setChannels, onAddedToChannel);\n  useNotificationRemovedFromChannelListener(setChannels, onRemovedFromChannel);\n  useChannelDeletedListener(setChannels, onChannelDeleted);\n  useChannelHiddenListener(setChannels, onChannelHidden);\n  useChannelVisibleListener(setChannels, onChannelVisible);\n  useChannelTruncatedListener(setChannels, onChannelTruncated, forceUpdate);\n  useChannelUpdatedListener(setChannels, onChannelUpdated, forceUpdate);\n  useConnectionRecoveredListener(forceUpdate);\n  useUserPresenceChangedListener(setChannels);\n  useEffect(function () {\n    var handleEvent = function handleEvent(event) {\n      if (setActiveChannel && (event === null || event === void 0 ? void 0 : event.cid) === (channel === null || channel === void 0 ? void 0 : channel.cid)) {\n        setActiveChannel();\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    client.on('channel.hidden', handleEvent);\n    return function () {\n      client.off('channel.deleted', handleEvent);\n      client.off('channel.hidden', handleEvent);\n    };\n  }, [channel]);\n\n  var renderChannel = function renderChannel(item) {\n    if (!item) return null;\n    var previewProps = {\n      activeChannel: channel,\n      Avatar: Avatar$1,\n      channel: item,\n      channelUpdateCount: channelUpdateCount,\n      key: item.id,\n      Preview: Preview,\n      setActiveChannel: setActiveChannel,\n      watchers: watchers\n    };\n    return React.createElement(ChannelPreview, _assign({}, previewProps));\n  };\n\n  var renderList = function renderList() {\n    return React.createElement(List, {\n      Avatar: Avatar$1,\n      error: status.error,\n      loading: status.loadingChannels,\n      LoadingErrorIndicator: LoadingErrorIndicator,\n      LoadingIndicator: LoadingIndicator,\n      showSidebar: showSidebar\n    }, !loadedChannels || loadedChannels.length === 0 ? React.createElement(EmptyStateIndicator$1, {\n      listType: 'channel'\n    }) : React.createElement(Paginator, {\n      hasNextPage: hasNextPage,\n      loadNextPage: loadNextPage,\n      refreshing: status.refreshing\n    }, loadedChannels.map(renderChannel)));\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"str-chat str-chat-channel-list \" + theme + \" \" + (navOpen ? 'str-chat-channel-list--open' : ''),\n    ref: channelListRef\n  }, renderList()));\n};\n/**\n * ChannelList - A preview list of Channels, allowing you to select the Channel you want to open.\n * @example ./ChannelList.md\n */\n\n\nvar ChannelList = React.memo(UnMemoizedChannelList);\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n */\n\nvar ChannelListMessenger = function ChannelListMessenger(props) {\n  var children = props.children,\n      _a = props.error,\n      error = _a === void 0 ? false : _a,\n      loading = props.loading,\n      _b = props.LoadingErrorIndicator,\n      LoadingErrorIndicator = _b === void 0 ? ChatDown : _b,\n      _c = props.LoadingIndicator,\n      LoadingIndicator = _c === void 0 ? LoadingChannels : _c;\n\n  if (error) {\n    return React.createElement(LoadingErrorIndicator, {\n      type: 'Connection Error'\n    });\n  }\n\n  if (loading) {\n    return React.createElement(LoadingIndicator, null);\n  }\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__channel-list-messenger'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-list-messenger__main'\n  }, children));\n};\n\nvar UnMemoizedChannelPreviewCompact = function UnMemoizedChannelPreviewCompact(props) {\n  var active = props.active,\n      _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      channel = props.channel,\n      displayImage = props.displayImage,\n      displayTitle = props.displayTitle,\n      setActiveChannel = props.setActiveChannel,\n      unread = props.unread,\n      watchers = props.watchers;\n  var channelPreviewButton = useRef(null);\n  var unreadClass = unread && unread >= 1 ? 'str-chat__channel-preview-compact--unread' : '';\n  var activeClass = active ? 'str-chat__channel-preview-compact--active' : '';\n\n  var onSelectChannel = function onSelectChannel() {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n\n    if (channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : channelPreviewButton.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return React.createElement(\"button\", {\n    className: \"str-chat__channel-preview-compact \" + unreadClass + \" \" + activeClass,\n    \"data-testid\": 'channel-preview-button',\n    onClick: onSelectChannel,\n    ref: channelPreviewButton\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-compact--left'\n  }, React.createElement(Avatar$1, {\n    image: displayImage,\n    name: displayTitle,\n    size: 20\n  })), React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-compact--right'\n  }, displayTitle));\n};\n/**\n *  Used as preview component for channel item in [ChannelList](#channellist) component.\n * @example ./ChannelPreviewCompact.md\n */\n\n\nvar ChannelPreviewCompact = React.memo(UnMemoizedChannelPreviewCompact);\n\nvar UnMemoizedChannelPreviewMessenger = function UnMemoizedChannelPreviewMessenger(props) {\n  var active = props.active,\n      _a = props.Avatar,\n      Avatar$1 = _a === void 0 ? Avatar : _a,\n      channel = props.channel,\n      displayImage = props.displayImage,\n      displayTitle = props.displayTitle,\n      latestMessage = props.latestMessage,\n      _b = props.latestMessageLength,\n      latestMessageLength = _b === void 0 ? 14 : _b,\n      setActiveChannel = props.setActiveChannel,\n      unread = props.unread,\n      watchers = props.watchers;\n  var channelPreviewButton = useRef(null);\n  var unreadClass = unread && unread >= 1 ? 'str-chat__channel-preview-messenger--unread' : '';\n  var activeClass = active ? 'str-chat__channel-preview-messenger--active' : '';\n\n  var onSelectChannel = function onSelectChannel() {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n\n    if (channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : channelPreviewButton.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return React.createElement(\"button\", {\n    className: \"str-chat__channel-preview-messenger \" + unreadClass + \" \" + activeClass,\n    \"data-testid\": 'channel-preview-button',\n    onClick: onSelectChannel,\n    ref: channelPreviewButton\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-messenger--left'\n  }, React.createElement(Avatar$1, {\n    image: displayImage,\n    name: displayTitle,\n    size: 40\n  })), React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-messenger--right'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-messenger--name'\n  }, React.createElement(\"span\", null, displayTitle)), React.createElement(\"div\", {\n    className: 'str-chat__channel-preview-messenger--last-message'\n  }, truncate(latestMessage, latestMessageLength))));\n};\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n * @example ./ChannelPreviewMessenger.md\n */\n\n\nvar ChannelPreviewMessenger = React.memo(UnMemoizedChannelPreviewMessenger);\n\nvar UnMemoizedChannelSearch = function UnMemoizedChannelSearch() {\n  return React.createElement(\"div\", {\n    className: 'str-chat__channel-search'\n  }, React.createElement(\"input\", {\n    placeholder: 'Search',\n    type: 'text'\n  }), React.createElement(\"button\", {\n    type: 'submit'\n  }, React.createElement(\"svg\", {\n    height: '17',\n    viewBox: '0 0 18 17',\n    width: '18',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z',\n    fillRule: 'evenodd'\n  }))));\n};\n\nvar ChannelSearch = React.memo(UnMemoizedChannelSearch);\nvar Cancel$6 = \"Cancel\";\nvar Close$6 = \"Close\";\nvar Delete$6 = \"Delete\";\nvar Delivered$6 = \"Delivered\";\nvar Flag$6 = \"Flag\";\nvar Mute$6 = \"Mute\";\nvar New$6 = \"New\";\nvar Pin$6 = \"Pin\";\nvar Send$6 = \"Send\";\nvar Thread$7 = \"Thread\";\nvar Unmute$6 = \"Unmute\";\nvar Unpin$6 = \"Unpin\";\nvar live$6 = \"live\";\nvar enTranslations = {\n  \"1 reply\": \"1 reply\",\n  \"Attach files\": \"Attach files\",\n  Cancel: Cancel$6,\n  \"Channel Missing\": \"Channel Missing\",\n  Close: Close$6,\n  \"Close emoji picker\": \"Close emoji picker\",\n  \"Commands matching\": \"Commands matching\",\n  \"Connection failure, reconnecting now...\": \"Connection failure, reconnecting now...\",\n  Delete: Delete$6,\n  Delivered: Delivered$6,\n  \"Edit Message\": \"Edit Message\",\n  \"Emoji matching\": \"Emoji matching\",\n  \"Empty message...\": \"Empty message...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Error adding flag: Either the flag already exist or there is issue with network connection ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Error connecting to chat, refresh the page to try again.\",\n  \"Error muting a user ...\": \"Error muting a user ...\",\n  \"Error pinning message\": \"Error pinning message\",\n  \"Error removing message pin\": \"Error removing message pin\",\n  \"Error unmuting a user ...\": \"Error unmuting a user ...\",\n  \"Error · Unsent\": \"Error · Unsent\",\n  \"Error: {{ errorMessage }}\": \"Error: {{ errorMessage }}\",\n  Flag: Flag$6,\n  \"Message Failed · Click to try again\": \"Message Failed · Click to try again\",\n  \"Message Failed · Unauthorized\": \"Message Failed · Unauthorized\",\n  \"Message deleted\": \"Message deleted\",\n  \"Message has been successfully flagged\": \"Message has been successfully flagged\",\n  \"Message pinned\": \"Message pinned\",\n  Mute: Mute$6,\n  New: New$6,\n  \"New Messages!\": \"New Messages!\",\n  \"Nothing yet...\": \"Nothing yet...\",\n  \"Only visible to you\": \"Only visible to you\",\n  \"Open emoji picker\": \"Open emoji picker\",\n  \"People matching\": \"People matching\",\n  \"Pick your emoji\": \"Pick your emoji\",\n  Pin: Pin$6,\n  \"Pinned by\": \"Pinned by\",\n  Send: Send$6,\n  \"Sending...\": \"Sending...\",\n  \"Start of a new thread\": \"Start of a new thread\",\n  \"This message was deleted...\": \"This message was deleted...\",\n  Thread: Thread$7,\n  \"Type your message\": \"Type your message\",\n  Unmute: Unmute$6,\n  Unpin: Unpin$6,\n  \"You have no channels currently\": \"You have no channels currently\",\n  \"You've reached the maximum number of files\": \"You've reached the maximum number of files\",\n  live: live$6,\n  \"this content could not be displayed\": \"this content could not be displayed\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} and {{ moreCount }} more\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }}, and {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} and {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} and {{ secondUser }} are typing...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} more\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} members\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} replies\",\n  \"{{ user }} has been muted\": \"{{ user }} has been muted\",\n  \"{{ user }} has been unmuted\": \"{{ user }} has been unmuted\",\n  \"{{ user }} is typing...\": \"{{ user }} is typing...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Attachment...\"\n};\nvar Cancel$5 = \"Annuleer\";\nvar Close$5 = \"Sluit\";\nvar Delete$5 = \"Verwijder\";\nvar Delivered$5 = \"Afgeleverd\";\nvar Flag$5 = \"Markeer\";\nvar Mute$5 = \"Mute\";\nvar New$5 = \"Nieuwe\";\nvar Pin$5 = \"Pin\";\nvar Send$5 = \"Verstuur\";\nvar Thread$6 = \"Draadje\";\nvar Unmute$5 = \"Unmute\";\nvar Unpin$5 = \"Losmaken\";\nvar live$5 = \"live\";\nvar nlTranslations = {\n  \"1 reply\": \"1 antwoord\",\n  \"Attach files\": \"Bijlage toevoegen\",\n  Cancel: Cancel$5,\n  \"Channel Missing\": \"Kanaal niet gevonden\",\n  Close: Close$5,\n  \"Close emoji picker\": \"Sluit de emoji-kiezer\",\n  \"Commands matching\": \"Bijpassende opdrachten\",\n  \"Connection failure, reconnecting now...\": \"Probleem met de verbinding, opnieuw verbinding maken...\",\n  Delete: Delete$5,\n  Delivered: Delivered$5,\n  \"Edit Message\": \"Pas bericht aan\",\n  \"Emoji matching\": \"Emoji-overeenkomsten\",\n  \"Empty message...\": \"Leeg bericht...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Fout bij het markeren: of het bericht is al gemarkeerd of er is een probleem met de netwerk verbinding\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Fout bij het verbinden, ververs de pagina om nogmaals te proberen\",\n  \"Error muting a user ...\": \"Fout bij het muten van de gebruiker\",\n  \"Error pinning message\": \"Fout bij vastzetten van bericht\",\n  \"Error removing message pin\": \"Fout bij verwijderen van berichtpin\",\n  \"Error unmuting a user ...\": \"Fout bij het unmuten van de gebruiker\",\n  \"Error · Unsent\": \"Error: · niet verzonden\",\n  \"Error: {{ errorMessage }}\": \"Error: {{ errorMessage }}\",\n  Flag: Flag$5,\n  \"Message Failed · Click to try again\": \"Bericht mislukt, klik om het nogmaals te proberen\",\n  \"Message Failed · Unauthorized\": \"Bericht mislukt, ongeautoriseerd\",\n  \"Message deleted\": \"Bericht verwijderd\",\n  \"Message has been successfully flagged\": \"Bericht is succesvol gemarkeerd\",\n  \"Message pinned\": \"Bericht vastgezet\",\n  Mute: Mute$5,\n  New: New$5,\n  \"New Messages!\": \"Nieuwe Berichten!\",\n  \"Nothing yet...\": \"Nog niets ...\",\n  \"Only visible to you\": \"Alleen zichtbaar voor jou\",\n  \"Open emoji picker\": \"Open emojipicker\",\n  \"People matching\": \"Mensen die matchen\",\n  \"Pick your emoji\": \"Kies je emoji\",\n  Pin: Pin$5,\n  \"Pinned by\": \"Vastgemaakt door\",\n  Send: Send$5,\n  \"Sending...\": \"Aan het verzenden...\",\n  \"Start of a new thread\": \"Begin van een nieuwe draadje\",\n  \"This message was deleted...\": \"Dit bericht was verwijderd\",\n  Thread: Thread$6,\n  \"Type your message\": \"Type je bericht\",\n  Unmute: Unmute$5,\n  Unpin: Unpin$5,\n  \"You have no channels currently\": \"Er zijn geen chats beschikbaar\",\n  \"You've reached the maximum number of files\": \"Je hebt het maximale aantal bestanden bereikt\",\n  live: live$5,\n  \"this content could not be displayed\": \"Deze inhoud kan niet weergegeven worden\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} en {{ lastUser }} zijn aan het typen ...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} en {{ moreCount }} meer\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} en {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} en {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} en {{ secondUser }} zijn aan het typen ...\",\n  \"{{ imageCount }} more\": \"+{{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} deelnemers\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} antwoorden\",\n  \"{{ user }} has been muted\": \"{{ user }} is muted\",\n  \"{{ user }} has been unmuted\": \"{{ user }} is unmuted\",\n  \"{{ user }} is typing...\": \"{{ user }} is aan het typen...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Bijlage...\"\n};\nvar Cancel$4 = \"Отмена\";\nvar Close$4 = \"Закрыть\";\nvar Delete$4 = \"Удалить\";\nvar Delivered$4 = \"Отправлено\";\nvar Flag$4 = \"Пожаловаться\";\nvar Mute$4 = \"Отключить уведомления\";\nvar New$4 = \"Новые\";\nvar Pin$4 = \"Штырь\";\nvar Send$4 = \"Отправить\";\nvar Thread$5 = \"Ветка\";\nvar Unmute$4 = \"Включить уведомления\";\nvar Unpin$4 = \"Открепить\";\nvar live$4 = \"В прямом эфире\";\nvar ruTranslations = {\n  \"1 reply\": \"1 ответ\",\n  \"Attach files\": \"Прикрепить файлы\",\n  Cancel: Cancel$4,\n  \"Channel Missing\": \"Канал не найден\",\n  Close: Close$4,\n  \"Close emoji picker\": \"Закрыть окно выбора смайлов\",\n  \"Commands matching\": \"Соответствие команд\",\n  \"Connection failure, reconnecting now...\": \"Ошибка соединения, переподключение...\",\n  Delete: Delete$4,\n  Delivered: Delivered$4,\n  \"Edit Message\": \"Редактировать сообщение\",\n  \"Emoji matching\": \"Соответствие эмодзи\",\n  \"Empty message...\": \"Пустое сообщение...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Ошибка добавления флага: флаг уже существует или ошибка подключения к сети...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Ошибка подключения к чату, обновите страницу чтобы попробовать снова.\",\n  \"Error muting a user ...\": \"Ошибка отключения уведомлений от пользователя...\",\n  \"Error pinning message\": \"Сообщение об ошибке при закреплении\",\n  \"Error removing message pin\": \"Ошибка при удалении булавки сообщения\",\n  \"Error unmuting a user ...\": \"Ошибка включения уведомлений...\",\n  \"Error · Unsent\": \"Ошибка · Не отправлено\",\n  \"Error: {{ errorMessage }}\": \"Ошибка: {{ errorMessage }}\",\n  Flag: Flag$4,\n  \"Message Failed · Click to try again\": \"Ошибка отправки сообщения · Нажмите чтобы повторить\",\n  \"Message Failed · Unauthorized\": \"Ошибка отправки сообщения · Неавторизованный\",\n  \"Message deleted\": \"Сообщение удалено\",\n  \"Message has been successfully flagged\": \"Жалоба на сообщение была принята\",\n  \"Message pinned\": \"Сообщение закреплено\",\n  Mute: Mute$4,\n  New: New$4,\n  \"New Messages!\": \"Новые сообщения!\",\n  \"Nothing yet...\": \"Пока ничего нет...\",\n  \"Only visible to you\": \"Только видно для вас\",\n  \"Open emoji picker\": \"Выбрать emoji\",\n  \"People matching\": \"Соответствующие люди\",\n  \"Pick your emoji\": \"Выберите свой emoji\",\n  Pin: Pin$4,\n  \"Pinned by\": \"Закреплено\",\n  Send: Send$4,\n  \"Sending...\": \"Отправка...\",\n  \"Start of a new thread\": \"Начало новой ветки\",\n  \"This message was deleted...\": \"Сообщение было удалено...\",\n  Thread: Thread$5,\n  \"Type your message\": \"Ваше сообщение\",\n  Unmute: Unmute$4,\n  Unpin: Unpin$4,\n  \"You have no channels currently\": \"У вас нет каналов в данный момент\",\n  \"You've reached the maximum number of files\": \"Вы достигли максимального количества файлов\",\n  live: live$4,\n  \"this content could not be displayed\": \"Этот контент не может быть отображен в данный момент\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} и {{ lastUser }} пишут...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} и {{ moreCount }} еще\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} и {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} и {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} и {{ secondUser }} пишут...\",\n  \"{{ imageCount }} more\": \"Ещё {{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} члены\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} ответов\",\n  \"{{ user }} has been muted\": \"Вы отписались от уведомлений от {{ user }}\",\n  \"{{ user }} has been unmuted\": \"Уведомления от {{ user }} были включены\",\n  \"{{ user }} is typing...\": \"{{ user }} пишет...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} в сети\",\n  \"🏙 Attachment...\": \"🏙 Вложение...\"\n};\nvar Cancel$3 = \"İptal\";\nvar Close$3 = \"Kapat\";\nvar Delete$3 = \"Sil\";\nvar Delivered$3 = \"İletildi\";\nvar Flag$3 = \"Bayrak\";\nvar Mute$3 = \"Sessiz\";\nvar New$3 = \"Yeni\";\nvar Pin$3 = \"Toplu iğne\";\nvar Send$3 = \"Gönder\";\nvar Thread$4 = \"Konu\";\nvar Unmute$3 = \"Sesini aç\";\nvar Unpin$3 = \"Sabitlemeyi kaldır\";\nvar live$3 = \"canlı\";\nvar trTranslations = {\n  \"1 reply\": \"1 cevap\",\n  \"Attach files\": \"Dosya ekle\",\n  Cancel: Cancel$3,\n  \"Channel Missing\": \"Kanal bulunamıyor\",\n  Close: Close$3,\n  \"Close emoji picker\": \"Emoji seçiciyi kapat\",\n  \"Commands matching\": \"Eşleşen komutlar\",\n  \"Connection failure, reconnecting now...\": \"Bağlantı hatası, tekrar bağlanılıyor...\",\n  Delete: Delete$3,\n  Delivered: Delivered$3,\n  \"Edit Message\": \"Mesajı Düzenle\",\n  \"Emoji matching\": \"Emoji eşleştirme\",\n  \"Empty message...\": \"Boş mesaj...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Bayraklama hatası: Bayrak zaten var veya bağlantı sorunlu\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Bağlantı hatası, sayfayı yenileyip tekrar deneyin.\",\n  \"Error muting a user ...\": \"Kullanıcıyı sessize alırken hata oluştu ...\",\n  \"Error pinning message\": \"Mesaj sabitlenirken hata oluştu\",\n  \"Error removing message pin\": \"Mesaj PIN'i kaldırılırken hata oluştu\",\n  \"Error unmuting a user ...\": \"Kullanıcının sesini açarken hata oluştu ...\",\n  \"Error · Unsent\": \"Hata · Gönderilemedi\",\n  \"Error: {{ errorMessage }}\": \"Hata: {{ errorMessage }}\",\n  Flag: Flag$3,\n  \"Message Failed · Click to try again\": \"Mesaj Başarısız · Tekrar denemek için tıklayın\",\n  \"Message Failed · Unauthorized\": \"Mesaj Başarısız · Yetkisiz\",\n  \"Message deleted\": \"Mesaj silindi\",\n  \"Message has been successfully flagged\": \"Mesaj başarıyla bayraklandı\",\n  \"Message pinned\": \"Mesaj sabitlendi\",\n  Mute: Mute$3,\n  New: New$3,\n  \"New Messages!\": \"Yeni Mesajlar!\",\n  \"Nothing yet...\": \"Şimdilik hiçbir şey...\",\n  \"Only visible to you\": \"Sadece size görünür\",\n  \"Open emoji picker\": \"Emoji klavyesini aç\",\n  \"People matching\": \"Eşleşen kişiler\",\n  \"Pick your emoji\": \"Emoji seçin\",\n  Pin: Pin$3,\n  \"Pinned by\": \"Sabitleyen\",\n  Send: Send$3,\n  \"Sending...\": \"Gönderiliyor...\",\n  \"Start of a new thread\": \"Yeni konunun başı\",\n  \"This message was deleted...\": \"Bu mesaj silindi\",\n  Thread: Thread$4,\n  \"Type your message\": \"Mesajınızı yazın\",\n  Unmute: Unmute$3,\n  Unpin: Unpin$3,\n  \"You have no channels currently\": \"Henüz kanalınız yok\",\n  \"You've reached the maximum number of files\": \"Maksimum dosya sayısına ulaştınız\",\n  live: live$3,\n  \"this content could not be displayed\": \"bu içerik gösterilemiyor\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} ve {{ lastUser }} yazıyor...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} ve {{ moreCount }} daha\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }}, ve {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} ve {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} ve {{ secondUser }} yazıyor...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} adet daha\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} üyeler\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} cevaplar\",\n  \"{{ user }} has been muted\": \"{{ user }} sessize alındı\",\n  \"{{ user }} has been unmuted\": \"{{ user }} sesi açıldı\",\n  \"{{ user }} is typing...\": \"{{ user }} yazıyor...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} çevrimiçi\",\n  \"🏙 Attachment...\": \"🏙 Ek...\"\n};\nvar Cancel$2 = \"Annuler\";\nvar Close$2 = \"Fermer\";\nvar Delete$2 = \"Supprimer\";\nvar Delivered$2 = \"Publié\";\nvar Flag$2 = \"Signaler\";\nvar Mute$2 = \"Muet\";\nvar New$2 = \"Nouveaux\";\nvar Pin$2 = \"Épingle\";\nvar Send$2 = \"Envoyer\";\nvar Thread$3 = \"Fil de discussion\";\nvar Unmute$2 = \"Désactiver muet\";\nvar Unpin$2 = \"Détacher\";\nvar live$2 = \"en direct\";\nvar frTranslations = {\n  \"1 reply\": \"1 réponse\",\n  \"Attach files\": \"Pièces jointes\",\n  Cancel: Cancel$2,\n  \"Channel Missing\": \"Canal Manquant\",\n  Close: Close$2,\n  \"Close emoji picker\": \"Fermer le sélecteur d'emojis\",\n  \"Commands matching\": \"Correspondance des commandes\",\n  \"Connection failure, reconnecting now...\": \"Échec de la connexion, reconnexion en cours...\",\n  Delete: Delete$2,\n  Delivered: Delivered$2,\n  \"Edit Message\": \"Éditer un message\",\n  \"Emoji matching\": \"Correspondance emoji\",\n  \"Empty message...\": \"Message vide...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Erreur d'ajout du flag : le flag existe déjà ou vous rencontrez un problème de connexion au réseau ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Erreur de connexion au chat, rafraîchissez la page pour réessayer.\",\n  \"Error muting a user ...\": \"Erreur de mise en sourdine d'un utilisateur ...\",\n  \"Error pinning message\": \"Erreur d'épinglage du message\",\n  \"Error removing message pin\": \"Erreur lors de la suppression du code PIN du message\",\n  \"Error unmuting a user ...\": \"Erreur de désactivation de la fonction sourdine pour un utilisateur ...\",\n  \"Error · Unsent\": \"Erreur - Non envoyé\",\n  \"Error: {{ errorMessage }}\": \"Erreur : {{ errorMessage }}\",\n  Flag: Flag$2,\n  \"Message Failed · Click to try again\": \"Échec de l'envoi du message - Cliquez pour réessayer\",\n  \"Message Failed · Unauthorized\": \"Échec de l'envoi du message - Non autorisé\",\n  \"Message deleted\": \"Message supprimé\",\n  \"Message has been successfully flagged\": \"Le message a été signalé avec succès\",\n  \"Message pinned\": \"Message épinglé\",\n  Mute: Mute$2,\n  New: New$2,\n  \"New Messages!\": \"Nouveaux Messages!\",\n  \"Nothing yet...\": \"Aucun message...\",\n  \"Only visible to you\": \"Visible uniquement pour vous\",\n  \"Open emoji picker\": \"Ouvrez le sélecteur d'emoji\",\n  \"People matching\": \"Correspondance de personnes\",\n  \"Pick your emoji\": \"Choisissez votre emoji\",\n  Pin: Pin$2,\n  \"Pinned by\": \"Épinglé par\",\n  Send: Send$2,\n  \"Sending...\": \"Envoi en cours...\",\n  \"Start of a new thread\": \"Début d'un nouveau fil de discussion\",\n  \"This message was deleted...\": \"Ce message a été supprimé...\",\n  Thread: Thread$3,\n  \"Type your message\": \"Saisissez votre message\",\n  Unmute: Unmute$2,\n  Unpin: Unpin$2,\n  \"You have no channels currently\": \"Vous n'avez actuellement aucun canal\",\n  \"You've reached the maximum number of files\": \"Vous avez atteint le nombre maximum de fichiers\",\n  live: live$2,\n  \"this content could not be displayed\": \"ce contenu n'a pu être affiché\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} et {{ lastUser }} sont en train d'écrire...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} et {{ moreCount }} autres\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} et {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} et {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} et {{ secondUser }} sont en train d'écrire...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} supplémentaires\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} membres\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} réponses\",\n  \"{{ user }} has been muted\": \"{{ user }} a été mis en sourdine\",\n  \"{{ user }} has been unmuted\": \"{{ user }} n'est plus en sourdine\",\n  \"{{ user }} is typing...\": \"{{ user }} est en train d'écrire...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} en ligne\",\n  \"🏙 Attachment...\": \"🏙 Pièce jointe...\"\n};\nvar Cancel$1 = \"रद्द करें\";\nvar Close$1 = \"बंद करे\";\nvar Delete$1 = \"डिलीट\";\nvar Delivered$1 = \"पहुंच गया\";\nvar Flag$1 = \"फ्लैग करे\";\nvar Mute$1 = \"म्यूट करे\";\nvar New$1 = \"नए\";\nvar Pin$1 = \"पिन\";\nvar Send$1 = \"भेजे\";\nvar Thread$2 = \"रिप्लाई थ्रेड\";\nvar Unmute$1 = \"अनम्यूट\";\nvar Unpin$1 = \"अनपिन\";\nvar live$1 = \"लाइव\";\nvar hiTranslations = {\n  \"1 reply\": \"1 रिप्लाई\",\n  \"Attach files\": \"फाइल्स अटैच करे\",\n  Cancel: Cancel$1,\n  \"Channel Missing\": \"चैनल उपलब्ध नहीं है\",\n  Close: Close$1,\n  \"Close emoji picker\": \"इमोजी पिकर बंद करें\",\n  \"Commands matching\": \"मेल खाती है\",\n  \"Connection failure, reconnecting now...\": \"कनेक्शन विफल रहा, अब पुनः कनेक्ट हो रहा है ...\",\n  Delete: Delete$1,\n  Delivered: Delivered$1,\n  \"Edit Message\": \"मैसेज में बदलाव करे\",\n  \"Emoji matching\": \"इमोजी मिलान\",\n  \"Empty message...\": \"खाली संदेश ...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"फ़ैल: या तो यह मैसेज के ऊपर पहले से फ्लैग है या तो आपके इंटरनेट कनेक्शन में कुछ परेशानी है\",\n  \"Error connecting to chat, refresh the page to try again.\": \"चैट से कनेक्ट करने में त्रुटि, पेज को रिफ्रेश करें\",\n  \"Error muting a user ...\": \"यूजर को म्यूट करने का प्रयास फेल हुआ\",\n  \"Error pinning message\": \"संदेश को पिन करने में त्रुटि\",\n  \"Error removing message pin\": \"संदेश पिन निकालने में त्रुटि\",\n  \"Error unmuting a user ...\": \"यूजर को अनम्यूट करने का प्रयास फेल हुआ\",\n  \"Error · Unsent\": \"फेल\",\n  \"Error: {{ errorMessage }}\": \"फेल: {{ errorMessage }}\",\n  Flag: Flag$1,\n  \"Message Failed · Click to try again\": \"मैसेज फ़ैल - पुनः कोशिश करें\",\n  \"Message Failed · Unauthorized\": \"मैसेज फ़ैल - अनधिकृत\",\n  \"Message deleted\": \"मैसेज हटा दिया गया\",\n  \"Message has been successfully flagged\": \"मैसेज को फ्लैग कर दिया गया है\",\n  \"Message pinned\": \"संदेश पिन किया गया\",\n  Mute: Mute$1,\n  New: New$1,\n  \"New Messages!\": \"नए मैसेज!\",\n  \"Nothing yet...\": \"कोई मैसेज नहीं है\",\n  \"Only visible to you\": \"सिर्फ आपको दिखाई दे रहा है\",\n  \"Open emoji picker\": \"इमोजी पिकर खोलिये\",\n  \"People matching\": \"मेल खाते लोग\",\n  \"Pick your emoji\": \"इमोजी चूस करे\",\n  Pin: Pin$1,\n  \"Pinned by\": \"द्वारा पिन किया गया\",\n  Send: Send$1,\n  \"Sending...\": \"भेजा जा रहा है\",\n  \"Start of a new thread\": \"एक नए थ्रेड की शुरुआत\",\n  \"This message was deleted...\": \"मैसेज हटा दिया गया\",\n  Thread: Thread$2,\n  \"Type your message\": \"अपना मैसेज लिखे\",\n  Unmute: Unmute$1,\n  Unpin: Unpin$1,\n  \"You have no channels currently\": \"आपके पास कोई चैनल नहीं है\",\n  \"You've reached the maximum number of files\": \"आप अधिकतम फ़ाइलों तक पहुँच गए हैं\",\n  live: live$1,\n  \"this content could not be displayed\": \"यह कॉन्टेंट लोड नहीं हो पाया\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} और {{ lastUser }} टाइप कर रहे हैं...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} और {{ moreCount }} और\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} और {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} और {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} और {{ secondUser }} टाइप कर रहे हैं...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} और\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} मेंबर्स\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} रिप्लाई\",\n  \"{{ user }} has been muted\": \"{{ user }} को म्यूट कर दिया गया है\",\n  \"{{ user }} has been unmuted\": \"{{ user }} को अनम्यूट कर दिया गया है\",\n  \"{{ user }} is typing...\": \"{{ user }} टाइप कर रहा है...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 अटैचमेंट\"\n};\nvar Cancel = \"Annulla\";\nvar Close = \"Chiudi\";\nvar Delete = \"Cancella\";\nvar Delivered = \"Consegnato\";\nvar Flag = \"Segnala\";\nvar Mute = \"Silenzia\";\nvar New = \"Nuovo\";\nvar Pin = \"Pin\";\nvar Send = \"Invia\";\nvar Thread$1 = \"Thread\";\nvar Unmute = \"Riattiva le notifiche\";\nvar Unpin = \"Sblocca\";\nvar live = \"live\";\nvar itTranslations = {\n  \"1 reply\": \"Una risposta\",\n  \"Attach files\": \"Allega file\",\n  Cancel: Cancel,\n  \"Channel Missing\": \"Il canale non esiste\",\n  Close: Close,\n  \"Close emoji picker\": \"Chiudi il selettore di emoji\",\n  \"Commands matching\": \"Comandi corrispondenti\",\n  \"Connection failure, reconnecting now...\": \"Connessione fallitta, riconnessione in corso...\",\n  Delete: Delete,\n  Delivered: Delivered,\n  \"Edit Message\": \"Modifica messaggio\",\n  \"Emoji matching\": \"Abbinamento emoji\",\n  \"Empty message...\": \"Message vuoto...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Errore durante la segnalazione: la segnalazione esiste giá o c'é un problema di connessione ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Errore di connessione alla chat, aggiorna la pagina per riprovare\",\n  \"Error muting a user ...\": \"Errore silenziando un utente ...\",\n  \"Error pinning message\": \"Errore durante il blocco del messaggio\",\n  \"Error removing message pin\": \"Errore durante la rimozione del PIN del messaggio\",\n  \"Error unmuting a user ...\": \"Errore riattivando le notifiche per l'utente ...\",\n  \"Error · Unsent\": \"Errore · Non inviato\",\n  \"Error: {{ errorMessage }}\": \"Errore: {{ errorMessage }}\",\n  Flag: Flag,\n  \"Message Failed · Click to try again\": \"Invio messaggio fallito · Clicca per riprovare\",\n  \"Message Failed · Unauthorized\": \"Invio messaggio fallito · Non autorizzato\",\n  \"Message deleted\": \"Messaggio cancellato\",\n  \"Message has been successfully flagged\": \"Il messaggio é stato segnalato con successo\",\n  \"Message pinned\": \"Messaggio bloccato\",\n  Mute: Mute,\n  New: New,\n  \"New Messages!\": \"Nuovo messaggio!\",\n  \"Nothing yet...\": \"Ancora niente...\",\n  \"Only visible to you\": \"Visibile soltanto da te\",\n  \"Open emoji picker\": \"Apri il selettore dellle emoji\",\n  \"People matching\": \"Persone che corrispondono\",\n  \"Pick your emoji\": \"Scegli la tua emoji\",\n  Pin: Pin,\n  \"Pinned by\": \"Appuntato da\",\n  Send: Send,\n  \"Sending...\": \"Invio in corso...\",\n  \"Start of a new thread\": \"Inizia un nuovo thread\",\n  \"This message was deleted...\": \"Questo messaggio é stato cancellato\",\n  Thread: Thread$1,\n  \"Type your message\": \"Scrivi il tuo messaggio\",\n  Unmute: Unmute,\n  Unpin: Unpin,\n  \"You have no channels currently\": \"Al momento non sono presenti canali\",\n  \"You've reached the maximum number of files\": \"Hai raggiunto il numero massimo di file\",\n  live: live,\n  \"this content could not be displayed\": \"questo contenuto non puó essere mostrato\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} e {{ lastUser }} stanno scrivendo...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} e altri {{ moreCount }}\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} e {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} e {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} e {{ secondUser }} stanno scrivendo...\",\n  \"{{ imageCount }} more\": \"+ {{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} membri\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} risposte\",\n  \"{{ user }} has been muted\": \"{{ user }} é stato silenziato\",\n  \"{{ user }} has been unmuted\": \"Notifiche riattivate per {{ user }}\",\n  \"{{ user }} is typing...\": \"{{ user }} sta scrivendo...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Allegato...\"\n};\nvar defaultNS = 'translation';\nvar defaultLng = 'en';\nDayjs.extend(updateLocale);\nDayjs.updateLocale('nl', {\n  calendar: {\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    sameDay: '[vandaag om] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    sameDay: '[Oggi alle] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    sameDay: '[आज] LT',\n    sameElse: 'L'\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiem: function meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n  meridiemHour: function meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n\n    return hour;\n  },\n  meridiemParse: /रात|सुबह|दोपहर|शाम/\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    sameDay: '[Aujourd’hui à] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    sameDay: '[bugün saat] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    lastDay: '[Вчера, в] LT',\n    nextDay: '[Завтра, в] LT',\n    sameDay: '[Сегодня, в] LT'\n  }\n});\nvar en_locale = {\n  formats: {},\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  relativeTime: {},\n  weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n}; // Type guards to check DayJs\n\nvar isDayJs = function isDayJs(dateTimeParser) {\n  return dateTimeParser.extend !== undefined;\n};\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\n\n\nvar defaultStreami18nOptions = {\n  DateTimeParser: Dayjs,\n  dayjsLocaleConfigForLanguage: null,\n  debug: false,\n  disableDateTimeTranslations: false,\n  language: 'en',\n  logger: function logger(message) {\n    return console.warn(message);\n  }\n};\n\nvar Streami18n =\n/** @class */\nfunction () {\n  /**\n   * Constructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for date-times\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  function Streami18n(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.i18nInstance = i18n.createInstance();\n    this.Dayjs = null;\n\n    this.setLanguageCallback = function () {\n      return null;\n    };\n\n    this.initialized = false;\n\n    this.t = function (key) {\n      return key;\n    };\n\n    this.translations = {\n      en: (_a = {}, _a[defaultNS] = enTranslations, _a),\n      fr: (_b = {}, _b[defaultNS] = frTranslations, _b),\n      hi: (_c = {}, _c[defaultNS] = hiTranslations, _c),\n      it: (_d = {}, _d[defaultNS] = itTranslations, _d),\n      nl: (_e = {}, _e[defaultNS] = nlTranslations, _e),\n      ru: (_f = {}, _f[defaultNS] = ruTranslations, _f),\n      tr: (_g = {}, _g[defaultNS] = trTranslations, _g)\n    };\n    /**\n     * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n     * when user calls registerTranslation() function. So intead we will store the locale configs\n     * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n     * with moment, when setLanguage is called.\n     * */\n\n    this.dayjsLocales = {};\n\n    this.localeExists = function (language) {\n      if (_this.isCustomDateTimeParser) return true;\n      return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n    };\n\n    this.validateCurrentLanguage = function () {\n      var availableLanguages = Object.keys(_this.translations);\n\n      if (availableLanguages.indexOf(_this.currentLanguage) === -1) {\n        _this.logger(\"Streami18n: '\" + _this.currentLanguage + \"' language is not registered.\" + (\" Please make sure to call streami18n.registerTranslation('\" + _this.currentLanguage + \"', {...}) or \") + (\"use one the built-in supported languages - \" + _this.getAvailableLanguages()));\n\n        _this.currentLanguage = defaultLng;\n      }\n    };\n    /** Returns an instance of i18next used within this class instance */\n\n\n    this.geti18Instance = function () {\n      return _this.i18nInstance;\n    };\n    /** Returns list of available languages. */\n\n\n    this.getAvailableLanguages = function () {\n      return Object.keys(_this.translations);\n    };\n    /** Returns all the translation dictionary for all inbuilt-languages */\n\n\n    this.getTranslations = function () {\n      return _this.translations;\n    };\n\n    var finalOptions = _assign(_assign({}, defaultStreami18nOptions), options); // Prepare the i18next configuration.\n\n\n    this.logger = finalOptions.logger;\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      if (this.DateTimeParser && isDayJs(this.DateTimeParser)) {\n        this.DateTimeParser.extend(localizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\"Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins \" + error);\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    var translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = (_h = {}, _h[defaultNS] = translationsForLanguage, _h);\n    } // If translations don't exist for given language, then set it as empty object.\n\n\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = (_j = {}, _j[defaultNS] = {}, _j);\n    }\n\n    this.i18nextConfig = {\n      debug: finalOptions.debug,\n      fallbackLng: false,\n      interpolation: {\n        escapeValue: false\n      },\n      keySeparator: false,\n      lng: this.currentLanguage,\n      nsSeparator: false,\n      parseMissingKeyHandler: function parseMissingKeyHandler(key) {\n        _this.logger(\"Streami18n: Missing translation for key: \" + key);\n\n        return key;\n      }\n    };\n    this.validateCurrentLanguage();\n    var dayjsLocaleConfigForLanguage = finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, _assign({}, dayjsLocaleConfigForLanguage));\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\"Streami18n: Streami18n(...) - Locale config for \" + this.currentLanguage + \" does not exist in momentjs.\" + (\"Please import the locale file using \\\"import 'moment/locale/\" + this.currentLanguage + \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n\n    this.tDateTimeParser = function (timestamp) {\n      if (finalOptions.disableDateTimeTranslations || !_this.localeExists(_this.currentLanguage)) {\n        /**\n         * TS needs to know which is being called to accept the chain call\n         */\n        if (isDayJs(_this.DateTimeParser)) {\n          return _this.DateTimeParser(timestamp).locale(defaultLng);\n        }\n\n        return _this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n\n      if (isDayJs(_this.DateTimeParser)) {\n        return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n      }\n\n      return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n    };\n  }\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n\n\n  Streami18n.prototype.init = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, error_1;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.validateCurrentLanguage();\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n\n            _a = this;\n            return [4\n            /*yield*/\n            , this.i18nInstance.init(_assign(_assign({}, this.i18nextConfig), {\n              lng: this.currentLanguage,\n              resources: this.translations\n            }))];\n\n          case 2:\n            _a.t = _b.sent();\n            this.initialized = true;\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            error_1 = _b.sent();\n            this.logger(\"Something went wrong with init: \" + JSON.stringify(error_1));\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            , {\n              t: this.t,\n              tDateTimeParser: this.tDateTimeParser\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns current version translator function.\n   */\n\n\n  Streami18n.prototype.getTranslators = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!this.initialized) return [3\n            /*break*/\n            , 2];\n\n            if (this.dayjsLocales[this.currentLanguage]) {\n              this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n            }\n\n            return [4\n            /*yield*/\n            , this.init()];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()];\n\n          case 2:\n            return [2\n            /*return*/\n            , {\n              t: this.t,\n              tDateTimeParser: this.tDateTimeParser\n            }];\n        }\n      });\n    });\n  };\n\n  Streami18n.prototype.registerTranslation = function (language, translation, customDayjsLocale) {\n    var _a;\n\n    if (!translation) {\n      this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation\");\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = (_a = {}, _a[defaultNS] = translation, _a);\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = _assign({}, customDayjsLocale);\n    } else if (!this.localeExists(language)) {\n      this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) - \" + (\"Locale config for \" + language + \" does not exist in Dayjs.\") + (\"Please import the locale file using \\\"import 'dayjs/locale/\" + language + \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  };\n\n  Streami18n.prototype.addOrUpdateLocale = function (key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, _assign({}, config));\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale(_assign(_assign({\n        name: key\n      }, en_locale), config), undefined, true);\n    }\n  };\n\n  Streami18n.prototype.setLanguage = function (language) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, error_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.currentLanguage = language;\n            if (!this.initialized) return [2\n            /*return*/\n            ];\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.i18nInstance.changeLanguage(language)];\n\n          case 2:\n            t = _a.sent();\n\n            if (this.dayjsLocales[language]) {\n              this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n            }\n\n            this.setLanguageCallback(t);\n            return [2\n            /*return*/\n            , t];\n\n          case 3:\n            error_2 = _a.sent();\n            this.logger(\"Failed to set language: \" + JSON.stringify(error_2));\n            return [2\n            /*return*/\n            , this.t];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Streami18n.prototype.registerSetLanguageCallback = function (callback) {\n    this.setLanguageCallback = callback;\n  };\n\n  return Streami18n;\n}();\n\nvar version = \"5.1.0\";\n\nvar useChat = function useChat(_a) {\n  var _b;\n\n  var client = _a.client,\n      i18nInstance = _a.i18nInstance,\n      initialNavOpen = _a.initialNavOpen;\n\n  var _c = useState({\n    t: function t(key) {\n      return key;\n    },\n    tDateTimeParser: function tDateTimeParser(input) {\n      return Dayjs(input);\n    },\n    userLanguage: 'en'\n  }),\n      translators = _c[0],\n      setTranslators = _c[1];\n\n  var _d = useState(),\n      channel = _d[0],\n      setChannel = _d[1];\n\n  var _e = useState([]),\n      mutes = _e[0],\n      setMutes = _e[1];\n\n  var _f = useState(initialNavOpen),\n      navOpen = _f[0],\n      setNavOpen = _f[1];\n\n  var clientMutes = (_b = client === null || client === void 0 ? void 0 : client.user) === null || _b === void 0 ? void 0 : _b.mutes;\n\n  var closeMobileNav = function closeMobileNav() {\n    return setNavOpen(false);\n  };\n\n  var openMobileNav = function openMobileNav() {\n    return setTimeout(function () {\n      return setNavOpen(true);\n    }, 100);\n  };\n\n  useEffect(function () {\n    if (client) {\n      var userAgent = client.getUserAgent();\n\n      if (!userAgent.includes('stream-chat-react')) {\n        /**\n         * results in something like: 'stream-chat-react-2.3.2-stream-chat-javascript-client-browser-2.2.2'\n         */\n        client.setUserAgent(\"stream-chat-react-\" + version + \"-\" + userAgent);\n      }\n    }\n  }, [client]);\n  useEffect(function () {\n    setMutes(clientMutes || []);\n\n    var handleEvent = function handleEvent(event) {\n      var _a;\n\n      if (event.type === 'notification.mutes_updated') setMutes(((_a = event.me) === null || _a === void 0 ? void 0 : _a.mutes) || []);\n    };\n\n    if (client) client.on(handleEvent);\n    return function () {\n      if (client) {\n        client.off(handleEvent);\n      }\n    };\n  }, [client, clientMutes]);\n  useEffect(function () {\n    var streami18n = i18nInstance instanceof Streami18n ? i18nInstance : new Streami18n({\n      language: 'en'\n    });\n    streami18n.registerSetLanguageCallback(function (t) {\n      return setTranslators(function (prevTranslator) {\n        return _assign(_assign({}, prevTranslator), {\n          t: t\n        });\n      });\n    });\n    streami18n.getTranslators().then(function (translator) {\n      var _a;\n\n      if (translator) {\n        setTranslators(_assign(_assign({}, translator), {\n          userLanguage: ((_a = client === null || client === void 0 ? void 0 : client.user) === null || _a === void 0 ? void 0 : _a.language) || 'en'\n        }));\n      }\n    });\n  }, [client, i18nInstance]);\n  var setActiveChannel = useCallback(function (activeChannel, watchers, event) {\n    if (watchers === void 0) {\n      watchers = {};\n    }\n\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (event && event.preventDefault) event.preventDefault();\n            if (!(activeChannel && Object.keys(watchers).length)) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , activeChannel.query({\n              watch: true,\n              watchers: watchers\n            })];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            setChannel(activeChannel);\n            closeMobileNav();\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }, []);\n  return {\n    channel: channel,\n    closeMobileNav: closeMobileNav,\n    mutes: mutes,\n    navOpen: navOpen,\n    openMobileNav: openMobileNav,\n    setActiveChannel: setActiveChannel,\n    translators: translators\n  };\n};\n/**\n *\n * Chat - Wrapper component for Chat. The needs to be placed around any other Chat components.\n * This component provides the ChatContext to all other components.\n *\n * ChatContext provides the following values:\n *\n * - channel - the current active channel\n * - client - the client connection\n * - closeMobileNav - function to close mobile navigation\n * - mutes - array of muted users\n * - navOpen - boolean if navigation is open\n * - openMobileNav - function to open mobile navigation\n * - setActiveChannel - a function to set currently active channel\n * - theme - current theme\n *\n * It also exposes the [withChatContext](https://getstream.github.io/stream-chat-react/#section-withchatcontext) HOC which you can use to consume the [ChatContext](https://getstream.github.io/stream-chat-react/#section-chatcontext).\n * @example ./Chat.md\n */\n\n\nvar Chat = function Chat(props) {\n  var children = props.children,\n      client = props.client,\n      i18nInstance = props.i18nInstance,\n      _a = props.initialNavOpen,\n      initialNavOpen = _a === void 0 ? true : _a,\n      _b = props.theme,\n      theme = _b === void 0 ? 'messaging light' : _b;\n\n  var _c = useChat({\n    client: client,\n    i18nInstance: i18nInstance,\n    initialNavOpen: initialNavOpen\n  }),\n      channel = _c.channel,\n      closeMobileNav = _c.closeMobileNav,\n      mutes = _c.mutes,\n      navOpen = _c.navOpen,\n      openMobileNav = _c.openMobileNav,\n      setActiveChannel = _c.setActiveChannel,\n      translators = _c.translators;\n\n  if (!translators.t) return null;\n  return React.createElement(ChatProvider, {\n    value: {\n      channel: channel,\n      client: client,\n      closeMobileNav: closeMobileNav,\n      mutes: mutes,\n      navOpen: navOpen,\n      openMobileNav: openMobileNav,\n      setActiveChannel: setActiveChannel,\n      theme: theme\n    }\n  }, React.createElement(TranslationProvider, {\n    value: translators\n  }, children));\n};\n\nvar UnMemoizedDateSeparator = function UnMemoizedDateSeparator(props) {\n  var date = props.date,\n      formatDate = props.formatDate,\n      _a = props.position,\n      position = _a === void 0 ? 'right' : _a,\n      unread = props.unread;\n\n  var _b = useTranslationContext(),\n      t = _b.t,\n      tDateTimeParser = _b.tDateTimeParser;\n\n  if (typeof date === 'string') return null;\n  var parsedDate = tDateTimeParser(date.toISOString());\n  var formattedDate = formatDate ? formatDate(date) : isDayOrMoment(parsedDate) ? parsedDate.calendar() : parsedDate;\n  return React.createElement(\"div\", {\n    className: 'str-chat__date-separator'\n  }, (position === 'right' || position === 'center') && React.createElement(\"hr\", {\n    className: 'str-chat__date-separator-line'\n  }), React.createElement(\"div\", {\n    className: 'str-chat__date-separator-date'\n  }, unread ? t('New') : formattedDate), (position === 'left' || position === 'center') && React.createElement(\"hr\", {\n    className: 'str-chat__date-separator-line'\n  }));\n};\n/**\n * DateSeparator - A simple date separator between messages.\n * @example ./DateSeparator.md\n */\n\n\nvar DateSeparator = React.memo(UnMemoizedDateSeparator);\n/**\n * EventComponent - Custom render component to display system and channel event messages\n */\n\nvar UnMemoizedEventComponent = function UnMemoizedEventComponent(props) {\n  var _a, _b, _c;\n\n  var _d = props.Avatar,\n      Avatar$1 = _d === void 0 ? Avatar : _d,\n      message = props.message;\n  var tDateTimeParser = useTranslationContext().tDateTimeParser;\n  var _e = message.created_at,\n      created_at = _e === void 0 ? '' : _e,\n      event = message.event,\n      text = message.text,\n      type = message.type;\n\n  var dateFormatter = function dateFormatter(date, format) {\n    var parsedDate = tDateTimeParser(date);\n    var formattedDate = isDayOrMoment(parsedDate) ? parsedDate.format(format) : parsedDate;\n    return formattedDate;\n  };\n\n  if (type === 'system') return React.createElement(\"div\", {\n    className: 'str-chat__message--system'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message--system__text'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message--system__line'\n  }), React.createElement(\"p\", null, text), React.createElement(\"div\", {\n    className: 'str-chat__message--system__line'\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message--system__date'\n  }, React.createElement(\"strong\", null, dateFormatter(created_at, 'dddd'), \" \"), \"at \", dateFormatter(created_at, 'hh:mm A')));\n\n  if (type === 'channel.event' && event && (event.type === 'member.removed' || event.type === 'member.added')) {\n    var name_1 = ((_a = event === null || event === void 0 ? void 0 : event.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = event === null || event === void 0 ? void 0 : event.user) === null || _b === void 0 ? void 0 : _b.id);\n    var sentence = name_1 + \" \" + (event.type === 'member.added' ? 'has joined the chat' : 'was removed from the chat');\n    return React.createElement(\"div\", {\n      className: 'str-chat__event-component__channel-event'\n    }, React.createElement(Avatar$1, {\n      image: (_c = event === null || event === void 0 ? void 0 : event.user) === null || _c === void 0 ? void 0 : _c.image,\n      name: name_1\n    }), React.createElement(\"div\", {\n      className: 'str-chat__event-component__channel-event__content'\n    }, React.createElement(\"em\", {\n      className: 'str-chat__event-component__channel-event__sentence'\n    }, sentence), React.createElement(\"div\", {\n      className: 'str-chat__event-component__channel-event__date'\n    }, dateFormatter(created_at, 'LT'))));\n  }\n\n  return null;\n};\n\nvar EventComponent = React.memo(UnMemoizedEventComponent);\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n */\n\nvar mousewheelListener = function mousewheelListener(event) {\n  if (event instanceof WheelEvent && event.deltaY === 1) {\n    event.preventDefault();\n  }\n};\n\nvar calculateTopPosition = function calculateTopPosition(element) {\n  if (element instanceof HTMLElement) {\n    return element.offsetTop + calculateTopPosition(element.offsetParent);\n  }\n\n  return 0;\n};\n/**\n * Computes by recursively summing offsetTop until an element without offsetParent is reached\n */\n\n\nvar calculateOffset = function calculateOffset(element, scrollTop) {\n  if (!element) {\n    return 0;\n  }\n\n  return calculateTopPosition(element) + (element.offsetHeight - scrollTop - window.innerHeight);\n};\n\nvar InfiniteScroll = function InfiniteScroll(props) {\n  var children = props.children,\n      _a = props.element,\n      element = _a === void 0 ? 'div' : _a,\n      _b = props.hasMore,\n      hasMore = _b === void 0 ? false : _b,\n      _c = props.initialLoad,\n      initialLoad = _c === void 0 ? true : _c,\n      _d = props.isLoading,\n      isLoading = _d === void 0 ? false : _d,\n      _e = props.isReverse,\n      isReverse = _e === void 0 ? false : _e,\n      listenToScroll = props.listenToScroll,\n      loader = props.loader,\n      loadMore = props.loadMore,\n      _f = props.threshold,\n      threshold = _f === void 0 ? 250 : _f,\n      _g = props.useCapture,\n      useCapture = _g === void 0 ? false : _g,\n      _h = props.useWindow,\n      useWindow = _h === void 0 ? true : _h,\n      elementProps = __rest(props, [\"children\", \"element\", \"hasMore\", \"initialLoad\", \"isLoading\", \"isReverse\", \"listenToScroll\", \"loader\", \"loadMore\", \"threshold\", \"useCapture\", \"useWindow\"]);\n\n  var scrollComponent = useRef();\n  var scrollListener = useCallback(function () {\n    var element = scrollComponent.current;\n    if (!element) return;\n    var parentElement = element.parentElement;\n    var offset = 0;\n    var reverseOffset = 0;\n\n    if (useWindow) {\n      var doc = document.documentElement || document.body.parentNode || document.body;\n      var scrollTop = window.pageYOffset !== undefined ? window.pageYOffset : doc.scrollTop;\n      offset = calculateOffset(element, scrollTop);\n      reverseOffset = scrollTop;\n    } else if (parentElement) {\n      offset = element.scrollHeight - parentElement.scrollTop - parentElement.clientHeight;\n      reverseOffset = parentElement.scrollTop;\n    }\n\n    if (listenToScroll) {\n      listenToScroll(offset, reverseOffset, threshold);\n    } // Here we make sure the element is visible as well as checking the offset\n\n\n    if ((isReverse ? reverseOffset : offset) < Number(threshold) && element.offsetParent !== null && typeof loadMore === 'function' && hasMore) {\n      loadMore();\n    }\n  }, [hasMore, useWindow, isReverse, threshold, listenToScroll, loadMore]);\n  useEffect(function () {\n    var _a;\n\n    var scrollElement = useWindow ? window : (_a = scrollComponent.current) === null || _a === void 0 ? void 0 : _a.parentNode;\n\n    if (isLoading || !scrollElement) {\n      return function () {\n        return undefined;\n      };\n    }\n\n    scrollElement.addEventListener('scroll', scrollListener, useCapture);\n    scrollElement.addEventListener('resize', scrollListener, useCapture);\n\n    if (initialLoad) {\n      scrollListener();\n    }\n\n    return function () {\n      scrollElement.removeEventListener('scroll', scrollListener, useCapture);\n      scrollElement.removeEventListener('resize', scrollListener, useCapture);\n    };\n  }, [initialLoad, isLoading, scrollListener, useCapture, useWindow]);\n  useEffect(function () {\n    var _a;\n\n    var scrollElement = useWindow ? window : (_a = scrollComponent.current) === null || _a === void 0 ? void 0 : _a.parentNode;\n\n    if (scrollElement) {\n      scrollElement.addEventListener('mousewheel', mousewheelListener, useCapture);\n    }\n\n    return function () {\n      if (scrollElement) {\n        scrollElement.removeEventListener('mousewheel', mousewheelListener, useCapture);\n      }\n    };\n  }, [useCapture, useWindow]);\n\n  var attributes = _assign(_assign({}, elementProps), {\n    ref: function ref(element) {\n      scrollComponent.current = element;\n    }\n  });\n\n  var childrenArray = [children];\n\n  if (isLoading && loader) {\n    if (isReverse) {\n      childrenArray.unshift(loader);\n    } else {\n      childrenArray.push(loader);\n    }\n  }\n\n  return React.createElement(element, attributes, childrenArray);\n};\n\nvar InfiniteScrollPaginator = function InfiniteScrollPaginator(props) {\n  var children = props.children,\n      hasNextPage = props.hasNextPage,\n      _a = props.LoadingIndicator,\n      LoadingIndicator = _a === void 0 ? LoadingIndicator$1 : _a,\n      loadNextPage = props.loadNextPage,\n      refreshing = props.refreshing,\n      reverse = props.reverse,\n      threshold = props.threshold;\n  return React.createElement(InfiniteScroll, {\n    hasMore: hasNextPage,\n    isLoading: refreshing,\n    isReverse: reverse,\n    loader: React.createElement(\"div\", {\n      className: 'str-chat__infinite-scroll-paginator',\n      key: 'loadingindicator'\n    }, React.createElement(LoadingIndicator, null)),\n    loadMore: loadNextPage,\n    threshold: threshold,\n    useWindow: false\n  }, children);\n};\n\nvar ReverseInfiniteScroll = function ReverseInfiniteScroll(props) {\n  return React.createElement(InfiniteScroll, _assign({}, props, {\n    isReverse: true\n  }));\n};\n\nvar UnMemoizedCustomNotification = function UnMemoizedCustomNotification(props) {\n  var active = props.active,\n      children = props.children,\n      type = props.type;\n  if (!active) return null;\n  return React.createElement(\"div\", {\n    className: \"str-chat__custom-notification notification-\" + type,\n    \"data-testid\": 'custom-notification'\n  }, children);\n};\n\nvar CustomNotification = React.memo(UnMemoizedCustomNotification);\n\nvar UnMemoizedConnectionStatus = function UnMemoizedConnectionStatus() {\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n\n  var _a = useState(true),\n      online = _a[0],\n      setOnline = _a[1];\n\n  useEffect(function () {\n    var connectionChanged = function connectionChanged(_a) {\n      var _b = _a.online,\n          onlineStatus = _b === void 0 ? false : _b;\n\n      if (online !== onlineStatus) {\n        setOnline(onlineStatus);\n      }\n    };\n\n    client.on('connection.changed', connectionChanged);\n    return function () {\n      return client.off('connection.changed', connectionChanged);\n    };\n  }, [client, online]);\n  return React.createElement(CustomNotification, {\n    active: !online,\n    type: 'error'\n  }, t('Connection failure, reconnecting now...'));\n};\n\nvar ConnectionStatus = React.memo(UnMemoizedConnectionStatus);\n\nvar UnMemoizedCenter = function UnMemoizedCenter(_a) {\n  var children = _a.children;\n  return React.createElement(\"div\", {\n    className: 'str-chat__list__center'\n  }, children);\n};\n\nvar Center = React.memo(UnMemoizedCenter);\n\nvar insertDates = function insertDates(messages, lastRead, userID, hideDeletedMessages, disableDateSeparator) {\n  var _a, _b;\n\n  var unread = false;\n  var lastDateSeparator;\n  var newMessages = [];\n\n  for (var i = 0, l = messages.length; i < l; i += 1) {\n    var message = messages[i];\n\n    if (hideDeletedMessages && message.type === 'deleted') {\n      continue;\n    }\n\n    if (message.type === 'message.read') {\n      newMessages.push(message);\n      continue;\n    } //@ts-expect-error\n\n\n    var messageDate = message.created_at.toDateString();\n    var prevMessageDate = messageDate;\n\n    if (i > 0 && !disableDateSeparator) {\n      //@ts-expect-error\n      prevMessageDate = messages[i - 1].created_at.toDateString();\n    }\n\n    if (!unread) {\n      //@ts-expect-error\n      unread = lastRead && new Date(lastRead) < message.created_at; // do not show date separator for current user's messages\n      //@ts-expect-error\n\n      if (!disableDateSeparator && unread && message.user.id !== userID) {\n        //@ts-expect-error\n        newMessages.push({\n          date: message.created_at,\n          id: message.id,\n          type: 'message.date',\n          unread: unread\n        });\n      }\n    }\n\n    if (!disableDateSeparator && (i === 0 || messageDate !== prevMessageDate || hideDeletedMessages && ((_a = messages[i - 1]) === null || _a === void 0 ? void 0 : _a.type) === 'deleted' && lastDateSeparator !== messageDate) && ((_b = newMessages === null || newMessages === void 0 ? void 0 : newMessages[newMessages.length - 1]) === null || _b === void 0 ? void 0 : _b.type) !== 'message.date' // do not show two date separators in a row\n    ) {\n        lastDateSeparator = messageDate;\n        newMessages.push( //@ts-expect-error\n        {\n          date: message.created_at,\n          id: message.id,\n          type: 'message.date'\n        }, message);\n      } else {\n      newMessages.push(message);\n    }\n  }\n\n  return newMessages;\n}; // fast since it usually iterates just the last few messages\n\n\nvar getLastReceived = function getLastReceived(messages) {\n  for (var i = messages.length - 1; i > 0; i -= 1) {\n    if (messages[i].status === 'received') {\n      return messages[i].id;\n    }\n  }\n\n  return null;\n};\n\nvar getReadStates = function getReadStates(messages, read) {\n  if (read === void 0) {\n    read = {};\n  } // create object with empty array for each message id\n\n\n  var readData = {};\n  Object.values(read).forEach(function (readState) {\n    if (!readState.last_read) return;\n    var userLastReadMsgId;\n    messages.forEach(function (msg) {\n      //@ts-expect-error\n      if (msg.updated_at < readState.last_read) userLastReadMsgId = msg.id;\n    });\n\n    if (userLastReadMsgId) {\n      if (!readData[userLastReadMsgId]) readData[userLastReadMsgId] = [];\n      readData[userLastReadMsgId].push(readState.user);\n    }\n  });\n  return readData;\n};\n\nvar insertIntro = function insertIntro(messages, headerPosition) {\n  var newMessages = messages;\n  var intro = {\n    type: 'channel.intro'\n  }; // if no headerPosition is set, HeaderComponent will go at the top\n\n  if (!headerPosition) {\n    newMessages.unshift(intro);\n    return newMessages;\n  } // if no messages, intro gets inserted\n\n\n  if (!newMessages.length) {\n    newMessages.unshift(intro);\n    return newMessages;\n  } // else loop over the messages\n\n\n  for (var i = 0, l = messages.length; i < l; i += 1) {\n    var message = messages[i];\n    var messageTime = message.created_at ? //@ts-expect-error\n    message.created_at.getTime() : null;\n    var nextMessageTime = messages[i + 1] && messages[i + 1].created_at ? //@ts-expect-error\n    messages[i + 1].created_at.getTime() : null; // header position is smaller than message time so comes after;\n\n    if (messageTime < headerPosition) {\n      // if header position is also smaller than message time continue;\n      if (nextMessageTime < headerPosition) {\n        if (messages[i + 1] && messages[i + 1].type === 'message.date') continue;\n\n        if (!nextMessageTime) {\n          newMessages.push(intro);\n          return newMessages;\n        }\n\n        continue;\n      } else {\n        newMessages.splice(i + 1, 0, intro);\n        return newMessages;\n      }\n    }\n  }\n\n  return newMessages;\n};\n\nvar getGroupStyles = function getGroupStyles(message, previousMessage, nextMessage, noGroupByUser) {\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  if (message.type === 'message.date') return '';\n  if (message.type === 'channel.event') return '';\n  if (message.type === 'channel.intro') return '';\n  if (noGroupByUser || ((_a = message.attachments) === null || _a === void 0 ? void 0 : _a.length) !== 0) return 'single';\n  var isTopMessage = !previousMessage || previousMessage.type === 'channel.intro' || previousMessage.type === 'message.date' || previousMessage.type === 'system' || previousMessage.type === 'channel.event' || ((_b = previousMessage.attachments) === null || _b === void 0 ? void 0 : _b.length) !== 0 || ((_c = message.user) === null || _c === void 0 ? void 0 : _c.id) !== ((_d = previousMessage.user) === null || _d === void 0 ? void 0 : _d.id) || previousMessage.type === 'error' || previousMessage.deleted_at;\n  var isBottomMessage = !nextMessage || nextMessage.type === 'message.date' || nextMessage.type === 'system' || nextMessage.type === 'channel.event' || nextMessage.type === 'channel.intro' || ((_e = nextMessage.attachments) === null || _e === void 0 ? void 0 : _e.length) !== 0 || ((_f = message.user) === null || _f === void 0 ? void 0 : _f.id) !== ((_g = nextMessage.user) === null || _g === void 0 ? void 0 : _g.id) || nextMessage.type === 'error' || nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error') return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n  return '';\n};\n\nvar UnMemoizedMessageListInner = function UnMemoizedMessageListInner(props) {\n  var bottomRef = props.bottomRef,\n      channel = props.channel,\n      client = props.client,\n      DateSeparator = props.DateSeparator,\n      _a = props.disableDateSeparator,\n      disableDateSeparator = _a === void 0 ? false : _a,\n      EmptyStateIndicator = props.EmptyStateIndicator,\n      HeaderComponent = props.HeaderComponent,\n      headerPosition = props.headerPosition,\n      _b = props.hideDeletedMessages,\n      hideDeletedMessages = _b === void 0 ? false : _b,\n      internalInfiniteScrollProps = props.internalInfiniteScrollProps,\n      internalMessageProps = props.internalMessageProps,\n      messages = props.messages,\n      MessageSystem = props.MessageSystem,\n      noGroupByUser = props.noGroupByUser,\n      onMessageLoadCaptured = props.onMessageLoadCaptured,\n      read = props.read,\n      threadList = props.threadList,\n      TypingIndicator = props.TypingIndicator;\n  var lastRead = useMemo(function () {\n    var _a;\n\n    return (_a = channel.lastRead) === null || _a === void 0 ? void 0 : _a.call(channel);\n  }, [channel]);\n\n  var enrichMessages = function enrichMessages() {\n    var messageWithDates = threadList ? messages : insertDates(messages, lastRead, client.userID, hideDeletedMessages, disableDateSeparator);\n\n    if (HeaderComponent) {\n      return insertIntro(messageWithDates, headerPosition);\n    }\n\n    return messageWithDates;\n  };\n\n  var enrichedMessages = enrichMessages();\n  var messageGroupStyles = useMemo(function () {\n    return enrichedMessages.reduce(function (acc, message, i) {\n      var style = getGroupStyles(message, enrichedMessages[i - 1], enrichedMessages[i + 1], noGroupByUser);\n      if (style) acc[message.id] = style;\n      return acc;\n    }, {});\n  }, [enrichedMessages, noGroupByUser]); // get the readData, but only for messages submitted by the user themselves\n\n  var userID = client.userID;\n  var readData = useMemo(function () {\n    return getReadStates(enrichedMessages.filter(function (_a) {\n      var user = _a.user;\n      return (user === null || user === void 0 ? void 0 : user.id) === userID;\n    }), read);\n  }, [userID, enrichedMessages, read]);\n  var lastReceivedId = useMemo(function () {\n    return getLastReceived(enrichedMessages);\n  }, [enrichedMessages]);\n  var elements = useMemo(function () {\n    return enrichedMessages.map(function (message) {\n      var _a;\n\n      if (message.type === 'message.date') {\n        return React.createElement(\"li\", {\n          key: message.date.toISOString() + \"-i\"\n        }, React.createElement(DateSeparator, {\n          date: message.date,\n          unread: !!message.unread\n        }));\n      }\n\n      if (message.type === 'channel.intro' && HeaderComponent) {\n        return React.createElement(\"li\", {\n          key: 'intro'\n        }, React.createElement(HeaderComponent, null));\n      }\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        if (!MessageSystem) return null;\n        return React.createElement(\"li\", {\n          key: ((_a = message.event) === null || _a === void 0 ? void 0 : _a.created_at) || message.created_at || ''\n        }, React.createElement(MessageSystem, {\n          message: message\n        }));\n      }\n\n      if (message.type !== 'message.read') {\n        var groupStyles = messageGroupStyles[message.id] || '';\n        return React.createElement(\"li\", {\n          className: \"str-chat__li str-chat__li--\" + groupStyles,\n          key: message.id || message.created_at,\n          onLoadCapture: onMessageLoadCaptured\n        }, React.createElement(Message, _assign({\n          client: client,\n          groupStyles: [groupStyles],\n          lastReceivedId: lastReceivedId,\n          message: message,\n          readBy: readData[message.id] || [],\n          threadList: threadList\n        }, internalMessageProps)));\n      }\n\n      return null;\n    });\n  }, [client, enrichedMessages, internalMessageProps, lastReceivedId, messageGroupStyles, MessageSystem, onMessageLoadCaptured, readData, threadList]);\n\n  if (!elements.length && EmptyStateIndicator) {\n    return React.createElement(EmptyStateIndicator, {\n      listType: 'message'\n    });\n  }\n\n  return React.createElement(InfiniteScroll, _assign({\n    className: 'str-chat__reverse-infinite-scroll',\n    \"data-testid\": 'reverse-infinite-scroll',\n    isReverse: true,\n    useWindow: false\n  }, internalInfiniteScrollProps), React.createElement(\"ul\", {\n    className: 'str-chat__ul'\n  }, elements), React.createElement(TypingIndicator, {\n    threadList: threadList\n  }), React.createElement(\"div\", {\n    key: 'bottom',\n    ref: bottomRef\n  }));\n};\n\nvar MessageListInner = React.memo(UnMemoizedMessageListInner, isEqual);\n\nvar UnMemoizedMessageNotification = function UnMemoizedMessageNotification(props) {\n  var children = props.children,\n      onClick = props.onClick,\n      _a = props.showNotification,\n      showNotification = _a === void 0 ? true : _a;\n  if (!showNotification) return null;\n  return React.createElement(\"button\", {\n    className: 'str-chat__message-notification',\n    \"data-testid\": 'message-notification',\n    onClick: onClick\n  }, children);\n};\n\nvar MessageNotification = React.memo(UnMemoizedMessageNotification);\n/**\n * TypingIndicator lists users currently typing, it needs to be a child of Channel component\n */\n\nvar UnMemoizedTypingIndicator = function UnMemoizedTypingIndicator(props) {\n  var _a;\n\n  var _b = props.Avatar,\n      Avatar$1 = _b === void 0 ? Avatar : _b,\n      _c = props.avatarSize,\n      avatarSize = _c === void 0 ? 32 : _c,\n      threadList = props.threadList;\n\n  var _d = useChannelContext(),\n      channel = _d.channel,\n      thread = _d.thread,\n      typing = _d.typing;\n\n  var client = useChatContext().client;\n\n  if (!typing || !client || ((_a = channel === null || channel === void 0 ? void 0 : channel.getConfig()) === null || _a === void 0 ? void 0 : _a.typing_events) === false) {\n    return null;\n  }\n\n  var typingInChannel = Object.values(typing).filter(function (_a) {\n    var _b;\n\n    var parent_id = _a.parent_id,\n        user = _a.user;\n    return (user === null || user === void 0 ? void 0 : user.id) !== ((_b = client.user) === null || _b === void 0 ? void 0 : _b.id) && parent_id == null;\n  });\n  var typingInThread = Object.values(typing).some(function (event) {\n    return (event === null || event === void 0 ? void 0 : event.parent_id) === (thread === null || thread === void 0 ? void 0 : thread.id);\n  });\n  return React.createElement(\"div\", {\n    className: \"str-chat__typing-indicator \" + (threadList && typingInThread || !threadList && typingInChannel.length ? 'str-chat__typing-indicator--typing' : '')\n  }, React.createElement(\"div\", {\n    className: 'str-chat__typing-indicator__avatars'\n  }, typingInChannel.map(function (_a, i) {\n    var user = _a.user;\n    return React.createElement(Avatar$1, {\n      image: user === null || user === void 0 ? void 0 : user.image,\n      key: (user === null || user === void 0 ? void 0 : user.id) + \"-\" + i,\n      name: (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id),\n      size: avatarSize\n    });\n  })), React.createElement(\"div\", {\n    className: 'str-chat__typing-indicator__dots'\n  }, React.createElement(\"span\", {\n    className: 'str-chat__typing-indicator__dot'\n  }), React.createElement(\"span\", {\n    className: 'str-chat__typing-indicator__dot'\n  }), React.createElement(\"span\", {\n    className: 'str-chat__typing-indicator__dot'\n  })));\n};\n\nvar TypingIndicator = React.memo(UnMemoizedTypingIndicator);\n\nvar MessageListWithContext =\n/** @class */\nfunction (_super) {\n  __extends(MessageListWithContext, _super);\n\n  function MessageListWithContext(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.scrollToBottom = function () {\n      _this._scrollToRef(_this.bottomRef, _this.messageList);\n    };\n\n    _this._scrollToRef = function (el, parent) {\n      var scrollDown = function scrollDown() {\n        if (el && el.current && parent && parent.current) {\n          _this.scrollToTarget(el.current, parent.current);\n        }\n      };\n\n      scrollDown(); // scroll down after images load again\n\n      setTimeout(scrollDown, 200);\n    };\n    /**\n     * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n     * containerEl - DOM element for the container with scrollbars\n     * source: https://stackoverflow.com/a/48429314\n     */\n\n\n    _this.scrollToTarget = function (target, containerEl) {\n      var scrollTop;\n\n      if (target instanceof HTMLElement) {\n        scrollTop = target.offsetTop;\n      } else if (typeof target === 'number') {\n        scrollTop = target;\n      } else if (target === 'top') {\n        scrollTop = 0;\n      } else if (target === 'bottom') {\n        scrollTop = containerEl.scrollHeight - containerEl.offsetHeight;\n      }\n\n      if (scrollTop !== undefined) {\n        containerEl.scrollTop = scrollTop;\n      }\n    };\n\n    _this.goToNewMessages = function () {\n      _this.scrollToBottom();\n\n      _this.setState({\n        newMessagesNotification: false\n      });\n    };\n\n    _this.userScrolledUp = function () {\n      return (_this.scrollOffset || 0) > _this.props.scrolledUpThreshold;\n    };\n\n    _this.listenToScroll = function (offset, reverseOffset, threshold) {\n      _this.scrollOffset = offset;\n      _this.closeToTop = reverseOffset < threshold;\n\n      if (_this.state.newMessagesNotification && !_this.userScrolledUp()) {\n        _this.setState({\n          newMessagesNotification: false\n        });\n      }\n    };\n\n    _this.onMessageLoadCaptured = function () {\n      // A load event (emitted by e.g. an <img>) was captured on a message.\n      // In some cases, the loaded asset is larger than the placeholder, which means we have to scroll down.\n      if (!_this.userScrolledUp() && !_this.closeToTop) {\n        _this.scrollToBottom();\n      }\n    };\n\n    _this.loadMore = function () {\n      if (_this.props.loadMore) {\n        if (_this.props.messageLimit) {\n          _this.props.loadMore(_this.props.messageLimit);\n        } else {\n          _this.props.loadMore(100);\n        }\n      }\n    };\n\n    _this.state = {\n      newMessagesNotification: false\n    };\n    _this.bottomRef = React.createRef();\n    _this.messageList = React.createRef();\n    return _this;\n  }\n\n  MessageListWithContext.prototype.componentDidMount = function () {\n    var _a; // start at the bottom\n\n\n    this.scrollToBottom();\n    var messageListRect = (_a = this.messageList.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    this.setState({\n      messageListRect: messageListRect\n    });\n  };\n\n  MessageListWithContext.prototype.getSnapshotBeforeUpdate = function (prevProps) {\n    var _a, _b;\n\n    if (this.props.threadList) {\n      return null;\n    } // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n\n    if ((((_a = prevProps.messages) === null || _a === void 0 ? void 0 : _a.length) || 0) < (((_b = this.props.messages) === null || _b === void 0 ? void 0 : _b.length) || 0)) {\n      var list = this.messageList.current;\n\n      if (list) {\n        return {\n          offsetBottom: list.scrollHeight - list.scrollTop,\n          offsetTop: list.scrollTop\n        };\n      } else {\n        return null;\n      }\n    }\n\n    return null;\n  };\n\n  MessageListWithContext.prototype.componentDidUpdate = function (prevProps, _, snapshot) {\n    var _a, _b, _c, _d, _e; // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n\n\n    var userScrolledUp = this.userScrolledUp();\n    var currentLastMessage = (_a = this.props.messages) === null || _a === void 0 ? void 0 : _a[((_b = this.props.messages) === null || _b === void 0 ? void 0 : _b.length) - 1];\n    var previousLastMessage = (_c = prevProps.messages) === null || _c === void 0 ? void 0 : _c[((_d = prevProps.messages) === null || _d === void 0 ? void 0 : _d.length) - 1];\n\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    var hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    var isOwner = ((_e = currentLastMessage === null || currentLastMessage === void 0 ? void 0 : currentLastMessage.user) === null || _e === void 0 ? void 0 : _e.id) === this.props.client.userID;\n    var list = this.messageList.current; // always scroll down when it's your own message that you added...\n\n    var scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n    if (scrollToBottom) {\n      this.scrollToBottom(); // remove the scroll notification if we already scrolled down...\n\n      if (this.state.newMessagesNotification) this.setState({\n        newMessagesNotification: false\n      });\n      return;\n    }\n\n    if (snapshot !== null) {\n      // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n      // This is for the case where user has scroll up significantly and a new message arrives from someone.\n      if (hasNewMessage) {\n        if (this.messageList.current) {\n          this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n        }\n      } else {\n        // Maintain the bottomOffset of scroll.\n        // This is for the case of pagination, when more messages get loaded.\n        if (this.messageList.current) {\n          this.scrollToTarget(((list === null || list === void 0 ? void 0 : list.scrollHeight) || 0) - snapshot.offsetBottom, this.messageList.current);\n        }\n      }\n    } // Check the scroll position... if you're scrolled up show a little notification\n\n\n    if (hasNewMessage && !this.state.newMessagesNotification) {\n      this.setState({\n        newMessagesNotification: true\n      });\n    }\n  };\n\n  MessageListWithContext.prototype.render = function () {\n    var _a = this.props,\n        addNotification = _a.addNotification,\n        _b = _a.Attachment,\n        Attachment$1 = _b === void 0 ? Attachment : _b,\n        _c = _a.Avatar,\n        Avatar$1 = _c === void 0 ? Avatar : _c,\n        _d = _a.DateSeparator,\n        DateSeparator$1 = _d === void 0 ? DateSeparator : _d,\n        _e = _a.EmptyStateIndicator,\n        EmptyStateIndicator$1 = _e === void 0 ? EmptyStateIndicator : _e,\n        internalInfiniteScrollProps = _a.internalInfiniteScrollProps,\n        _f = _a.LoadingIndicator,\n        LoadingIndicator$1 = _f === void 0 ? LoadingIndicator : _f,\n        _g = _a.Message,\n        Message = _g === void 0 ? MessageSimple : _g,\n        _h = _a.messageActions,\n        messageActions = _h === void 0 ? Object.keys(MESSAGE_ACTIONS) : _h,\n        _j = _a.messages,\n        messages = _j === void 0 ? [] : _j,\n        _k = _a.MessageSystem,\n        MessageSystem = _k === void 0 ? EventComponent : _k,\n        notifications = _a.notifications,\n        _l = _a.noGroupByUser,\n        noGroupByUser = _l === void 0 ? false : _l,\n        _m = _a.pinPermissions,\n        pinPermissions = _m === void 0 ? defaultPinPermissions : _m,\n        t = _a.t,\n        _o = _a.threadList,\n        threadList = _o === void 0 ? false : _o,\n        _p = _a.TypingIndicator,\n        TypingIndicator$1 = _p === void 0 ? TypingIndicator : _p,\n        _q = _a.unsafeHTML,\n        unsafeHTML = _q === void 0 ? false : _q;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"str-chat__list \" + (this.props.threadList ? 'str-chat__list--thread' : ''),\n      ref: this.messageList\n    }, React.createElement(MessageListInner, {\n      bottomRef: this.bottomRef,\n      channel: this.props.channel,\n      client: this.props.client,\n      DateSeparator: DateSeparator$1,\n      disableDateSeparator: this.props.disableDateSeparator,\n      EmptyStateIndicator: EmptyStateIndicator$1,\n      HeaderComponent: this.props.HeaderComponent,\n      headerPosition: this.props.headerPosition,\n      hideDeletedMessages: this.props.hideDeletedMessages,\n      internalInfiniteScrollProps: _assign({\n        hasMore: this.props.hasMore,\n        isLoading: this.props.loadingMore,\n        listenToScroll: this.listenToScroll,\n        loader: React.createElement(Center, {\n          key: 'loadingindicator'\n        }, React.createElement(LoadingIndicator$1, {\n          size: 20\n        })),\n        loadMore: this.loadMore\n      }, internalInfiniteScrollProps),\n      internalMessageProps: {\n        additionalMessageInputProps: this.props.additionalMessageInputProps,\n        addNotification: addNotification,\n        Attachment: Attachment$1,\n        Avatar: Avatar$1,\n        channel: this.props.channel,\n        getFlagMessageErrorNotification: this.props.getFlagMessageErrorNotification,\n        getFlagMessageSuccessNotification: this.props.getFlagMessageSuccessNotification,\n        getMuteUserErrorNotification: this.props.getMuteUserErrorNotification,\n        getMuteUserSuccessNotification: this.props.getMuteUserSuccessNotification,\n        getPinMessageErrorNotification: this.props.getPinMessageErrorNotification,\n        members: this.props.members,\n        Message: Message,\n        messageActions: messageActions,\n        messageListRect: this.state.messageListRect,\n        mutes: this.props.mutes,\n        onMentionsClick: this.props.onMentionsClick,\n        onMentionsHover: this.props.onMentionsHover,\n        onUserClick: this.props.onUserClick,\n        onUserHover: this.props.onUserHover,\n        openThread: this.props.openThread,\n        pinPermissions: pinPermissions,\n        removeMessage: this.props.removeMessage,\n        retrySendMessage: this.props.retrySendMessage,\n        unsafeHTML: unsafeHTML,\n        updateMessage: this.props.updateMessage,\n        watchers: this.props.watchers\n      },\n      messages: messages,\n      MessageSystem: MessageSystem,\n      noGroupByUser: noGroupByUser,\n      onMessageLoadCaptured: this.onMessageLoadCaptured,\n      read: this.props.read,\n      threadList: threadList,\n      TypingIndicator: TypingIndicator$1\n    })), React.createElement(\"div\", {\n      className: 'str-chat__list-notifications'\n    }, notifications.map(function (notification) {\n      return React.createElement(CustomNotification, {\n        active: true,\n        key: notification.id,\n        type: notification.type\n      }, notification.text);\n    }), React.createElement(ConnectionStatus, null), React.createElement(MessageNotification, {\n      onClick: this.goToNewMessages,\n      showNotification: this.state.newMessagesNotification\n    }, t('New Messages!'))));\n  };\n\n  MessageListWithContext.defaultProps = {\n    messages: [],\n    scrolledUpThreshold: 200,\n    threadList: false\n  };\n  return MessageListWithContext;\n}(PureComponent);\n/**\n * The MessageList component renders a list of Messages.\n * It is a consumer of the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n * @example ./MessageList.md\n */\n\n\nvar MessageList = function MessageList(props) {\n  var _a = useChannelContext();\n\n  _a.client; // eslint-disable-line\n\n  _a.typing; // eslint-disable-line\n\n  var channelContext = __rest(_a, [\"client\", \"typing\"]);\n\n  var client = useChatContext().client;\n  var translation = useTranslationContext();\n  return React.createElement(MessageListWithContext, _assign({\n    client: client\n  }, channelContext, translation, props));\n};\n\nfunction useNewMessageNotification(messages, currentUserId) {\n  var _a = useState(false),\n      newMessagesNotification = _a[0],\n      setNewMessagesNotification = _a[1];\n\n  var lastMessageId = useRef('');\n  var atBottom = useRef(false);\n  useEffect(function () {\n    var _a;\n    /* handle scrolling behavior for new messages */\n\n\n    if (!(messages === null || messages === void 0 ? void 0 : messages.length)) return;\n    var lastMessage = messages[messages.length - 1];\n    var prevMessageId = lastMessageId.current;\n    lastMessageId.current = lastMessage.id || ''; // update last message id\n\n    /* do nothing if new messages are loaded from top(loadMore)  */\n\n    if (lastMessage.id === prevMessageId) return;\n    /* if list is already at the bottom return, followOutput will do the job */\n\n    if (atBottom.current) return;\n    /* if the new message belongs to current user scroll to bottom */\n\n    if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) !== currentUserId) {\n      /* otherwise just show newMessage notification  */\n      setNewMessagesNotification(true);\n    }\n  }, [currentUserId, messages]);\n  return {\n    atBottom: atBottom,\n    newMessagesNotification: newMessagesNotification,\n    setNewMessagesNotification: setNewMessagesNotification\n  };\n}\n\nfunction usePrependedMessagesCount(messages) {\n  var _a;\n\n  var currentFirstMessageId = (_a = messages === null || messages === void 0 ? void 0 : messages[0]) === null || _a === void 0 ? void 0 : _a.id;\n  var firstMessageId = useRef(currentFirstMessageId);\n  var earliestMessageId = useRef(currentFirstMessageId);\n  var previousNumItemsPrepended = useRef(0);\n  var numItemsPrepended = useMemo(function () {\n    if (!messages || !messages.length) {\n      return 0;\n    } // if no new messages were prepended, return early (same amount as before)\n\n\n    if (currentFirstMessageId === earliestMessageId.current) {\n      return previousNumItemsPrepended.current;\n    }\n\n    if (!firstMessageId.current) {\n      firstMessageId.current = currentFirstMessageId;\n    }\n\n    earliestMessageId.current = currentFirstMessageId; // if new messages were prepended, find out how many\n    // start with this number because there cannot be fewer prepended items than before\n\n    for (var i = previousNumItemsPrepended.current; i < messages.length; i += 1) {\n      if (messages[i].id === firstMessageId.current) {\n        previousNumItemsPrepended.current = i;\n        return i;\n      }\n    }\n\n    return 0; // TODO: there's a bug here, the messages prop is the same array instance (something mutates it)\n    // that's why the second dependency is necessary\n  }, [messages, messages === null || messages === void 0 ? void 0 : messages.length]);\n  return numItemsPrepended;\n}\n\nfunction useShouldForceScrollToBottom(messages, currentUserId) {\n  var lastFocusedOwnMessage = useRef('');\n  var initialFocusRegistered = useRef(false);\n\n  function recheckForNewOwnMessage() {\n    var _a;\n\n    if (messages && messages.length > 0) {\n      var lastMessage = messages[messages.length - 1];\n\n      if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) === currentUserId && lastFocusedOwnMessage.current !== lastMessage.id) {\n        lastFocusedOwnMessage.current = lastMessage.id;\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  useEffect(function () {\n    if (messages && messages.length && !initialFocusRegistered.current) {\n      initialFocusRegistered.current = true;\n      recheckForNewOwnMessage();\n    }\n  }, [messages, messages === null || messages === void 0 ? void 0 : messages.length]);\n  return recheckForNewOwnMessage;\n}\n\nvar PREPEND_OFFSET = Math.pow(10, 7);\n\nvar VirtualizedMessageListWithContext = function VirtualizedMessageListWithContext(props) {\n  var channel = props.channel,\n      client = props.client,\n      customMessageRenderer = props.customMessageRenderer,\n      _a = props.disableDateSeparator,\n      disableDateSeparator = _a === void 0 ? true : _a,\n      _b = props.DateSeparator,\n      DateSeparator$1 = _b === void 0 ? DateSeparator : _b,\n      _c = props.EmptyStateIndicator,\n      EmptyStateIndicator$1 = _c === void 0 ? EmptyStateIndicator : _c,\n      hasMore = props.hasMore,\n      _d = props.LoadingIndicator,\n      LoadingIndicator$1 = _d === void 0 ? LoadingIndicator : _d,\n      loadMore = props.loadMore,\n      loadingMore = props.loadingMore,\n      _e = props.Message,\n      Message = _e === void 0 ? FixedHeightMessage : _e,\n      _f = props.MessageDeleted,\n      MessageDeleted$1 = _f === void 0 ? MessageDeleted : _f,\n      _g = props.messageLimit,\n      messageLimit = _g === void 0 ? 100 : _g,\n      messages = props.messages,\n      _h = props.MessageSystem,\n      MessageSystem = _h === void 0 ? EventComponent : _h,\n      _j = props.overscan,\n      overscan = _j === void 0 ? 0 : _j,\n      // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n  scrollSeekPlaceHolder = props.scrollSeekPlaceHolder,\n      _k = props.shouldGroupByUser,\n      shouldGroupByUser = _k === void 0 ? false : _k,\n      _l = props.stickToBottomScrollBehavior,\n      stickToBottomScrollBehavior = _l === void 0 ? 'smooth' : _l,\n      _m = props.TypingIndicator,\n      TypingIndicator = _m === void 0 ? null : _m;\n  var userID = client.userID;\n  var lastRead = useMemo(function () {\n    var _a;\n\n    return (_a = channel.lastRead) === null || _a === void 0 ? void 0 : _a.call(channel);\n  }, [channel]);\n  var processedMessages = useMemo(function () {\n    if (typeof messages === 'undefined') {\n      return undefined;\n    }\n\n    return disableDateSeparator ? messages : insertDates(messages, lastRead, userID);\n  }, [messages, lastRead, disableDateSeparator, userID, messages === null || messages === void 0 ? void 0 : messages.length]);\n  var t = useTranslationContext().t;\n  var virtuoso = useRef(null);\n\n  var _o = useNewMessageNotification(processedMessages, client.userID),\n      atBottom = _o.atBottom,\n      newMessagesNotification = _o.newMessagesNotification,\n      setNewMessagesNotification = _o.setNewMessagesNotification;\n\n  var numItemsPrepended = usePrependedMessagesCount(processedMessages);\n  var shouldForceScrollToBottom = useShouldForceScrollToBottom(processedMessages, client.userID);\n  var messageRenderer = useCallback(function (messageList, virtuosoIndex) {\n    var _a, _b;\n\n    var streamMessageIndex = virtuosoIndex + numItemsPrepended - PREPEND_OFFSET; // use custom renderer supplied by client if present and skip the rest\n\n    if (customMessageRenderer) {\n      return customMessageRenderer(messageList, streamMessageIndex);\n    }\n\n    var message = messageList[streamMessageIndex];\n\n    if (message.type === 'message.date') {\n      //@ts-expect-error\n      return React.createElement(DateSeparator$1, {\n        date: message.date,\n        unread: message.unread\n      });\n    }\n\n    if (!message) return React.createElement(\"div\", {\n      style: {\n        height: '1px'\n      }\n    }); // returning null or zero height breaks the virtuoso\n\n    if (message.type === 'channel.event' || message.type === 'system') {\n      return React.createElement(MessageSystem, {\n        message: message\n      });\n    }\n\n    if (message.deleted_at) {\n      return React.createElement(MessageDeleted$1, {\n        message: message\n      });\n    }\n\n    return React.createElement(Message, {\n      groupedByUser: shouldGroupByUser && streamMessageIndex > 0 && ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id) === ((_b = messageList[streamMessageIndex - 1].user) === null || _b === void 0 ? void 0 : _b.id),\n      message: message\n    });\n  }, [MessageDeleted$1, customMessageRenderer, shouldGroupByUser, numItemsPrepended]);\n  var virtuosoComponents = useMemo(function () {\n    var EmptyPlaceholder = function EmptyPlaceholder() {\n      return React.createElement(React.Fragment, null, EmptyStateIndicator$1 && React.createElement(EmptyStateIndicator$1, {\n        listType: 'message'\n      }));\n    };\n\n    var Header = function Header() {\n      return loadingMore ? React.createElement(\"div\", {\n        className: 'str-chat__virtual-list__loading'\n      }, React.createElement(LoadingIndicator$1, {\n        size: 20\n      })) : React.createElement(React.Fragment, null);\n    }; // using 'display: inline-block' traps CSS margins of the item elements\n    // preventing incorrect item measurements.\n\n\n    var Item = function Item(props) {\n      return React.createElement(\"div\", _assign({}, props, {\n        className: 'str-chat__virtual-list-message-wrapper'\n      }));\n    };\n\n    var Footer = function Footer() {\n      return TypingIndicator ? React.createElement(TypingIndicator, {\n        avatarSize: 24\n      }) : React.createElement(React.Fragment, null);\n    };\n\n    return {\n      EmptyPlaceholder: EmptyPlaceholder,\n      Footer: Footer,\n      Header: Header,\n      Item: Item\n    };\n  }, [EmptyStateIndicator$1, loadingMore, TypingIndicator]);\n\n  if (!processedMessages) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__virtual-list'\n  }, React.createElement(Virtuoso, _assign({\n    atBottomStateChange: function atBottomStateChange(isAtBottom) {\n      atBottom.current = isAtBottom;\n\n      if (isAtBottom && newMessagesNotification) {\n        setNewMessagesNotification(false);\n      }\n    },\n    components: virtuosoComponents,\n    firstItemIndex: PREPEND_OFFSET - numItemsPrepended,\n    followOutput: function followOutput(isAtBottom) {\n      if (shouldForceScrollToBottom()) {\n        return isAtBottom ? stickToBottomScrollBehavior : 'auto';\n      } // a message from another user has been received - don't scroll to bottom unless already there\n\n\n      return isAtBottom ? stickToBottomScrollBehavior : false;\n    },\n    initialTopMostItemIndex: processedMessages && processedMessages.length > 0 ? processedMessages.length - 1 : 0,\n    itemContent: function itemContent(i) {\n      return messageRenderer(processedMessages, i);\n    },\n    overscan: overscan,\n    ref: virtuoso,\n    startReached: function startReached() {\n      if (hasMore && loadMore) {\n        loadMore(messageLimit);\n      }\n    },\n    style: {\n      overflowX: 'hidden'\n    },\n    totalCount: processedMessages.length\n  }, scrollSeekPlaceHolder ? {\n    scrollSeek: scrollSeekPlaceHolder\n  } : {})), React.createElement(\"div\", {\n    className: 'str-chat__list-notifications'\n  }, React.createElement(MessageNotification, {\n    onClick: function onClick() {\n      if (virtuoso.current) {\n        virtuoso.current.scrollToIndex(processedMessages.length - 1);\n      }\n\n      setNewMessagesNotification(false);\n    },\n    showNotification: newMessagesNotification\n  }, t('New Messages!'))));\n};\n/**\n * The VirtualizedMessageList component renders a list of Messages in a virtualized list.\n * It is a consumer of [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n *\n * **Note**: It works well when there are thousands of Messages in a Channel, it has a shortcoming though - the Message UI should have a fixed height.\n * @example ./VirtualizedMessageList.md\n */\n\n\nfunction VirtualizedMessageList(props) {\n  var context = useChannelContext();\n  return React.createElement(VirtualizedMessageListWithContext, _assign({\n    channel: context.channel,\n    client: context.client,\n    hasMore: !!context.hasMore,\n    loadingMore: !!context.loadingMore,\n    // @ts-expect-error\n    loadMore: context.loadMore,\n    // there's a mismatch in the created_at field - stream-chat MessageResponse says it's a string,\n    // 'formatMessage' converts it to Date, which seems to be the correct type\n    messages: context.messages\n  }, props));\n}\n/**\n * Thread - The Thread renders a parent Message with a list of replies. Use the standard MessageList of the main Channel's Messages.\n * The Thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n * @example ./Thread.md\n */\n\n\nvar Thread = function Thread(props) {\n  var _a, _b;\n\n  var _c = useChannelContext(),\n      channel = _c.channel,\n      thread = _c.thread;\n\n  if (!thread || ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.replies) === false) return null; // The wrapper ensures a key variable is set and the component recreates on thread switch\n\n  return React.createElement(ThreadInner, _assign({}, props, {\n    key: \"thread-\" + thread.id + \"-\" + (channel === null || channel === void 0 ? void 0 : channel.cid)\n  }));\n};\n\nvar DefaultThreadHeader = function DefaultThreadHeader(props) {\n  var closeThread = props.closeThread,\n      t = props.t,\n      thread = props.thread;\n\n  var getReplyCount = function getReplyCount() {\n    if (!(thread === null || thread === void 0 ? void 0 : thread.reply_count) || !t) return '';\n    if (thread.reply_count === 1) return t('1 reply');\n    return t('{{ replyCount }} replies', {\n      replyCount: thread.reply_count\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: 'str-chat__thread-header'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__thread-header-details'\n  }, React.createElement(\"strong\", null, t && t('Thread')), React.createElement(\"small\", null, getReplyCount())), React.createElement(\"button\", {\n    className: 'str-chat__square-button',\n    \"data-testid\": 'close-button',\n    onClick: function onClick(event) {\n      return closeThread && closeThread(event);\n    }\n  }, React.createElement(\"svg\", {\n    height: '10',\n    width: '10',\n    xmlns: 'http://www.w3.org/2000/svg'\n  }, React.createElement(\"path\", {\n    d: 'M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z',\n    fillRule: 'evenodd'\n  }))));\n};\n\nvar ThreadInner = function ThreadInner(props) {\n  var additionalMessageInputProps = props.additionalMessageInputProps,\n      additionalMessageListProps = props.additionalMessageListProps,\n      additionalParentMessageProps = props.additionalParentMessageProps,\n      _a = props.autoFocus,\n      autoFocus = _a === void 0 ? true : _a,\n      _b = props.fullWidth,\n      fullWidth = _b === void 0 ? false : _b,\n      PropMessage = props.Message,\n      _c = props.MessageInput,\n      ThreadMessageInput = _c === void 0 ? MessageInput : _c,\n      _d = props.ThreadHeader,\n      ThreadHeader = _d === void 0 ? DefaultThreadHeader : _d;\n\n  var _e = useChannelContext(),\n      channel = _e.channel,\n      closeThread = _e.closeThread,\n      loadMoreThread = _e.loadMoreThread,\n      ContextMessage = _e.Message,\n      thread = _e.thread,\n      threadHasMore = _e.threadHasMore,\n      threadLoadingMore = _e.threadLoadingMore,\n      threadMessages = _e.threadMessages;\n\n  var client = useChatContext().client;\n  var t = useTranslationContext().t;\n  var messageList = useRef(null);\n  var parentID = thread === null || thread === void 0 ? void 0 : thread.id;\n  var ThreadMessage = PropMessage || ContextMessage;\n  useEffect(function () {\n    if (parentID && (thread === null || thread === void 0 ? void 0 : thread.reply_count) && loadMoreThread) {\n      loadMoreThread();\n    }\n  }, []);\n  useEffect(function () {\n    if (messageList.current && (threadMessages === null || threadMessages === void 0 ? void 0 : threadMessages.length)) {\n      var _a = messageList.current,\n          clientHeight = _a.clientHeight,\n          scrollHeight = _a.scrollHeight,\n          scrollTop = _a.scrollTop;\n      var scrollDown = clientHeight + scrollTop !== scrollHeight;\n\n      if (scrollDown) {\n        messageList.current.scrollTop = scrollHeight - clientHeight;\n      }\n    }\n  }, [threadMessages === null || threadMessages === void 0 ? void 0 : threadMessages.length]);\n  if (!thread) return null;\n  var read = {};\n  return React.createElement(\"div\", {\n    className: \"str-chat__thread \" + (fullWidth ? 'str-chat__thread--full' : '')\n  }, React.createElement(ThreadHeader, {\n    closeThread: closeThread,\n    t: t,\n    thread: thread\n  }), React.createElement(\"div\", {\n    className: 'str-chat__thread-list',\n    ref: messageList\n  }, React.createElement(Message, _assign({\n    channel: channel,\n    client: client,\n    initialMessage: true,\n    message: thread,\n    Message: ThreadMessage,\n    threadList: true\n  }, additionalParentMessageProps)), React.createElement(\"div\", {\n    className: 'str-chat__thread-start'\n  }, t('Start of a new thread')), React.createElement(MessageList, _assign({\n    hasMore: threadHasMore,\n    loadingMore: threadLoadingMore,\n    loadMore: loadMoreThread,\n    Message: ThreadMessage,\n    messages: threadMessages || [],\n    read: read,\n    threadList: true\n  }, additionalMessageListProps))), React.createElement(ThreadMessageInput, _assign({\n    focus: autoFocus,\n    Input: MessageInputSmall,\n    parent: thread,\n    publishTypingEvent: false\n  }, additionalMessageInputProps)));\n};\n\nvar UnMemoizedWindow = function UnMemoizedWindow(props) {\n  var children = props.children,\n      _a = props.hideOnThread,\n      hideOnThread = _a === void 0 ? false : _a;\n  var thread = useChannelContext().thread; // If thread is active and window should hide on thread. Return null\n\n  if (thread && hideOnThread) return null;\n  return React.createElement(\"div\", {\n    className: \"str-chat__main-panel\"\n  }, children);\n};\n/**\n * Window - A UI component for conditionally displaying a Thread or Channel. If you want the Thread to be displayed side by side with the Channel that's also possible with the Window.\n * It's a very minimal component that might fit some usecases, and if not it's an easy to modify and rewrite component.\n */\n\n\nvar Window = React.memo(UnMemoizedWindow);\nexport { Attachment, AttachmentActions, Audio, ReactTextareaAutocomplete as AutoCompleteTextarea, Avatar, Card, Channel, ChannelContext, ChannelHeader, ChannelList, ChannelListMessenger, ChannelListTeam, ChannelPreview, ChannelPreviewCompact, ChannelPreviewCountOnly, ChannelPreviewLastMessage, ChannelPreviewMessenger, ChannelProvider, ChannelSearch, Chat, ChatAutoComplete, ChatContext, ChatDown, ChatProvider, CommandItem, ConnectionStatus, DateSeparator, EditMessageForm, EmojiIconLarge, EmojiIconSmall, EmojiPicker, EmoticonItem, EmptyStateIndicator, EventComponent, FileAttachment, FileUploadIcon, FileUploadIconFlat, FixedHeightMessage, Gallery, ImageComponent, InfiniteScroll, InfiniteScrollPaginator, Item, KEY_CODES, List, LoadMoreButton, LoadMorePaginator, LoadingChannels, LoadingErrorIndicator, LoadingIndicator, MAX_QUERY_CHANNELS_LIMIT, MESSAGE_ACTIONS, Message, MessageActions, MessageActionsBox, MessageCommerce, MessageDeleted, MessageInput, MessageInputFlat, MessageInputLarge, MessageInputSimple, MessageInputSmall, MessageList, MessageLivestream, MessageNotification, MessageOptions, MessageRepliesCountButton, MessageSimple, MessageTeam, MessageText, Modal, ModalComponent, ModalImage, ReactionSelector, ReactionsList, ReverseInfiniteScroll, SUPPORTED_VIDEO_FORMATS, SafeAnchor, SendButton, SimpleReactionsList, Streami18n, Thread, Tooltip, TranslationContext, TranslationProvider, TypingIndicator, UnMemoizedLoadMorePaginator, UploadsPreview, UserItem, VirtualizedMessageList, Window, areMessagePropsEqual, areMessageUIPropsEqual, defaultPinPermissions, defaultScrollToItem, enTranslations, frTranslations, generateRandomId, getChannel, getDisplayImage, getDisplayTitle, getImages, getLatestMessagePreview, getMessageActions, getNonImageAttachments, getReadByTooltipText, handleActionWarning, hiTranslations, isAudioAttachment, isDate, isDayOrMoment, isFileAttachment, isGalleryAttachment, isImageAttachment, isMediaAttachment, isNumberOrString, isOnlyEmojis, isUserMuted, itTranslations, Listeners as listener, messageHasAttachments, messageHasReactions, missingUseFlagHandlerParameterWarning, missingUseMuteHandlerParamsWarning, moveChannelUp, nlTranslations, reactionHandlerWarning, renderAttachmentActions, renderAttachmentWithinContainer, renderAudio, renderCard, renderFile, renderGallery, renderImage, renderMedia, renderText, ruTranslations, showMessageActionsBox, smartRender, trTranslations, truncate, useActionHandler, useBreakpoint, useChannelContext, useChannelDeletedListener, useEditMessageHandler as useChannelEditMessageHandler, useChannelHiddenListener, useMentionsHandlers as useChannelMentionsHandler, useChannelTruncatedListener, useChannelUpdatedListener, useChannelVisibleListener, useChatContext, useConnectionRecoveredListener, useDeleteHandler, useEditHandler, useFlagHandler, useMentionsHandler, useMentionsUIHandler, useMessageInput, useMessageNewListener, useMobileNavigation, useMobilePress, useMuteHandler, useNotificationAddedToChannelListener, useNotificationMessageNewListener, useNotificationRemovedFromChannelListener, useOpenThreadHandler, usePaginatedChannels, usePinHandler, useReactionClick, useReactionHandler, useRetryHandler, useTranslationContext, useUserHandler, useUserPresenceChangedListener, useUserRole, validateAndGetMessage, withChannelContext, withChatContext, withTranslationContext };","map":{"version":3,"sources":["../node_modules/tslib/tslib.es6.js","../../src/components/Attachment/AttachmentActions.tsx","../../src/components/Attachment/Audio.tsx","../../src/components/SafeAnchor/SafeAnchor.tsx","../src/assets/Poweredby_100px-White_VertText.png","../../src/context/utils/getDisplayName.ts","../../src/context/TranslationContext.tsx","../../src/components/Attachment/Card.tsx","../../src/components/Attachment/FileAttachment.tsx","../../src/components/Attachment/utils.tsx","../../src/components/Gallery/ModalImage.tsx","../../src/components/Gallery/ModalWrapper.tsx","../../src/components/Gallery/Gallery.tsx","../../src/components/Gallery/Image.tsx","../../src/components/Attachment/Attachment.tsx","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../../src/components/Avatar/Avatar.tsx","../../src/components/Channel/channelState.ts","../../src/components/Channel/emojiData.ts","../../src/context/ChatContext.tsx","../../src/components/Channel/hooks/useEditMessageHandler.ts","../../src/components/Channel/hooks/useIsMounted.ts","../../src/components/Channel/hooks/useMentionsHandlers.ts","../../src/components/Loading/LoadingChannels.tsx","../../src/components/Loading/LoadingErrorIndicator.tsx","../../src/components/Loading/LoadingIndicator.tsx","../../src/context/ChannelContext.tsx","../../src/components/Message/hooks/useActionHandler.ts","../../src/components/Message/hooks/useBreakpoint.ts","../../src/components/Message/hooks/useDeleteHandler.ts","../../src/components/Message/hooks/useEditHandler.ts","../../src/components/Message/utils.tsx","../../src/components/Message/hooks/useFlagHandler.ts","../../src/components/Message/hooks/useMentionsHandler.ts","../../src/components/Message/hooks/useMobilePress.ts","../../src/components/Message/hooks/useMuteHandler.ts","../../src/components/Message/hooks/useOpenThreadHandler.ts","../../src/components/Message/hooks/usePinHandler.ts","../../src/components/Message/hooks/useReactionHandler.ts","../../src/components/Message/hooks/useRetryHandler.ts","../../src/components/Message/hooks/useUserHandler.ts","../../src/components/Message/hooks/useUserRole.ts","../../src/components/Message/MessageTimestamp.tsx","../../src/components/MessageActions/MessageActionsBox.tsx","../../src/components/MessageActions/MessageActions.tsx","../../src/components/MML/MML.tsx","../../src/utils.tsx","../../src/components/Message/FixedHeightMessage.tsx","../../src/components/Message/MessageDeleted.tsx","../../src/components/Message/icons.tsx","../../src/components/Message/MessageOptions.tsx","../../src/components/Message/MessageRepliesCountButton.tsx","../../src/components/Reactions/utils/utils.ts","../../src/components/Reactions/ReactionSelector.tsx","../../src/components/Reactions/ReactionsList.tsx","../../src/components/Reactions/SimpleReactionsList.tsx","../../src/components/Message/MessageText.tsx","../../src/components/MessageInput/EmojiPicker.tsx","../../src/components/MessageInput/hooks/messageInput.ts","../../src/components/MessageInput/icons.tsx","../../src/components/MessageInput/UploadsPreview.tsx","../../src/components/CommandItem/CommandItem.tsx","../../src/components/EmoticonItem/EmoticonItem.tsx","../../src/components/UserItem/UserItem.tsx","../../src/components/ChatAutoComplete/ChatAutoComplete.tsx","../../src/components/Tooltip/Tooltip.tsx","../../src/components/MessageInput/EditMessageForm.tsx","../../src/components/MessageInput/MessageInputLarge.tsx","../../src/components/MessageInput/MessageInput.tsx","../../src/components/MessageInput/MessageInputFlat.tsx","../../src/components/MessageInput/MessageInputSimple.tsx","../../src/components/MessageInput/MessageInputSmall.tsx","../../src/components/Modal/Modal.tsx","../../src/components/Message/MessageSimple.tsx","../../src/components/Message/Message.tsx","../../src/components/Message/MessageCommerce.tsx","../../src/components/Message/MessageLivestream.tsx","../../src/components/Message/MessageTeam.tsx","../../src/components/Channel/Channel.tsx","../../src/components/ChannelHeader/ChannelHeader.tsx","../src/assets/str-chat__connection-error.svg","../../src/components/ChatDown/ChatDown.tsx","../src/assets/str-chat__icon-chevron-down.svg","../../src/components/ChannelList/ChannelListTeam.tsx","../../src/components/ChannelList/hooks/useChannelDeletedListener.ts","../../src/components/ChannelList/hooks/useChannelHiddenListener.ts","../../src/components/ChannelList/hooks/useChannelTruncatedListener.ts","../../src/components/ChannelList/hooks/useChannelUpdatedListener.ts","../../src/components/ChannelList/utils.ts","../../src/components/ChannelList/hooks/useChannelVisibleListener.ts","../../src/components/ChannelList/hooks/useConnectionRecoveredListener.ts","../../src/components/ChannelList/hooks/useMessageNewListener.ts","../../src/components/ChannelList/hooks/useMobileNavigation.ts","../../src/components/ChannelList/hooks/useNotificationAddedToChannelListener.ts","../../src/components/ChannelList/hooks/useNotificationMessageNewListener.ts","../../src/components/ChannelList/hooks/useNotificationRemovedFromChannelListener.ts","../../src/components/ChannelList/hooks/usePaginatedChannels.ts","../../src/components/ChannelList/hooks/useUserPresenceChangedListener.ts","../../src/components/ChannelPreview/ChannelPreviewCountOnly.tsx","../../src/components/ChannelPreview/utils.ts","../../src/components/ChannelPreview/ChannelPreview.tsx","../../src/components/ChannelPreview/ChannelPreviewLastMessage.tsx","../../src/components/EmptyStateIndicator/EmptyStateIndicator.tsx","../../src/components/LoadMore/LoadMoreButton.tsx","../../src/components/LoadMore/LoadMorePaginator.tsx","../../src/components/ChannelList/ChannelList.tsx","../../src/components/ChannelList/ChannelListMessenger.tsx","../../src/components/ChannelPreview/ChannelPreviewCompact.tsx","../../src/components/ChannelPreview/ChannelPreviewMessenger.tsx","../../src/components/ChannelSearch/ChannelSearch.tsx","../../src/i18n/Streami18n.ts","../../src/components/Chat/hooks/useChat.ts","../../src/components/Chat/Chat.tsx","../../src/components/DateSeparator/DateSeparator.tsx","../../src/components/EventComponent/EventComponent.tsx","../../src/components/InfiniteScrollPaginator/InfiniteScroll.tsx","../../src/components/InfiniteScrollPaginator/InfiniteScrollPaginator.tsx","../../src/components/InfiniteScrollPaginator/ReverseInfiniteScroll.tsx","../../src/components/MessageList/CustomNotification.tsx","../../src/components/MessageList/ConnectionStatus.tsx","../../src/components/MessageList/Center.tsx","../../src/components/MessageList/utils.ts","../../src/components/MessageList/MessageListInner.tsx","../../src/components/MessageList/MessageNotification.tsx","../../src/components/TypingIndicator/TypingIndicator.tsx","../../src/components/MessageList/MessageList.tsx","../../src/components/MessageList/hooks/useNewMessageNotification.ts","../../src/components/MessageList/hooks/usePrependMessagesCount.ts","../../src/components/MessageList/hooks/useShouldForceScrollToBottom.ts","../../src/components/MessageList/VirtualizedMessageList.tsx","../../src/components/Thread/Thread.tsx","../../src/components/Window/Window.tsx"],"names":["Modal","ModalWrapper","DefaultAttachmentActions","DefaultAudio","DefaultCard","DefaultFile","DefaultGallery","DefaultImage","Item","className","Component","item","onClickHandler","onSelectHandler","selected","style","props","selectItem","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","code","e","Object","keyCode","fn","document","List","component","dropdownScroll","getSelectedItem","getTextToReplace","itemClassName","itemStyle","onSelect","SuggestionItem","propValue","values","t","useContext","selectedItem","setSelectedItem","useState","itemsRef","isSelected","value","getId","textToReplace","modifyText","handleClick","handleKeyDown","useCallback","event","prevSelected","newID","useEffect","renderHeader","html","restructureItem","matched","editedPropValue","parts","itemNameParts","match","__html","DEFAULT_CARET_POSITION","itemHeight","parseInt","getComputedStyle","containerHight","actualScrollTop","container","itemOffsetTop","errorMessage","console","triggerPropsCheck","trigger","Error","triggers","i","triggerChar","settings","triggerSetting","callback","dataProvider","output","isValidElementType","ReactTextareaAutocomplete","React","closeOnClickOutside","maxRows","minChar","movePopupAsYouType","scrollToItem","loadingComponent","actualToken","currentTrigger","data","dataLoading","left","listenerIndex","selectionEnd","selectionStart","top","Listeners","position","hasFocus","lastWordRegex","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","newText","bubbles","onChange","textareaValue","computeCaretPosition","startToken","token","Number","textToModify","startOfTokenPosition","newTokenString","newToken","newCaretPosition","modifiedText","triggerSettings","String","caretPosition","text","mutes","Array","mutedUser","mute","suggestion","oldValue","oldTrigger","notSafe","tokens","onCaretPositionChange","textarea","lastToken","tokenMatch","a","newLeft","newTop","getCaretCoordinates","err","onBlur","el","defaultScrollToItem","disableMentions","dropdownClassName","dropdownStyle","listClassName","SuggestionList","suggestionData","containerClassName","containerStyle","PropTypes","listStyle","loaderClassName","loaderStyle","string","MMLReact","DefaultAvatar","Avatar","DefaultReactionList","DefaultReactionSelector","defaultRenderText","ReactionsList","ReactionSelector","AutoCompleteTextarea","DefaultEmojiIcon","DefaultFileUploadIcon","FileUploadIcon","DefaultSendButton","SendButton","DefaultEditMessageForm","DefaultMessageDeleted","MessageDeleted","Attachment","DefaultAttachment","DefaultReactionsList","DefaultPinIndicator","PinIndicator","DefaultLoadingErrorIndicator","DefaultLoadingIndicator","uuidv4","LoadingErrorIndicator","LoadingIndicator","DefaultLoadMoreButton","LoadMoreButton","DefaultEmptyStateIndicator","EmptyStateIndicator","LocalizedFormat","DefaultDateSeparator","DefaultTypingIndicator","DateSeparator","TypingIndicator","DefaultMessage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AAEA,IAAI,cAAa,GAAG,uBAAS,CAAT,EAAY,CAAZ,EAAe;AAC/B,EAAA,cAAa,GAAG,MAAM,CAAC,cAAP,IACX;AAAE,IAAA,SAAS,EAAE;AAAb,eAA6B,KAA7B,IAAsC,UAAU,CAAV,EAAa,CAAb,EAAgB;AAAE,IAAA,CAAC,CAAC,SAAF,GAAc,CAAd;AAAkB,GAD/D,IAEZ,UAAU,CAAV,EAAa,CAAb,EAAgB;AAAE,SAAK,IAAI,CAAT,IAAc,CAAd;AAAiB,UAAI,CAAC,CAAC,cAAF,CAAiB,CAAjB,CAAJ,EAAyB,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAR;AAA1C;AAAwD,GAF9E;;AAGA,SAAO,cAAa,CAAC,CAAD,EAAI,CAAJ,CAApB;AACH,CALD;;AAOO,SAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB;AAC5B,EAAA,cAAa,CAAC,CAAD,EAAI,CAAJ,CAAb;;AACA,WAAS,EAAT,GAAc;AAAE,SAAK,WAAL,GAAmB,CAAnB;AAAuB;;AACvC,EAAA,CAAC,CAAC,SAAF,GAAc,CAAC,KAAK,IAAN,GAAa,MAAM,CAAC,MAAP,CAAc,CAAd,CAAb,IAAiC,EAAE,CAAC,SAAH,GAAe,CAAC,CAAC,SAAjB,EAA4B,IAAI,EAAJ,EAA7D,CAAd;AACH;;AAEM,IAAI,OAAQ,GAAG,oBAAW;AAC7B,EAAA,OAAQ,GAAG,MAAM,CAAC,MAAP,IAAiB,SAAS,QAAT,CAAkB,CAAlB,EAAqB;AAC7C,SAAK,IAAI,CAAJ,EAAO,CAAC,GAAG,CAAX,EAAc,CAAC,GAAG,SAAS,CAAC,MAAjC,EAAyC,CAAC,GAAG,CAA7C,EAAgD,CAAC,EAAjD,EAAqD;AACjD,MAAA,CAAC,GAAG,SAAS,CAAC,CAAD,CAAb;;AACA,WAAK,IAAI,CAAT,IAAc,CAAd;AAAiB,YAAI,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,CAArC,EAAwC,CAAxC,CAAJ,EAAgD,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAR;AAAjE;AACH;;AACD,WAAO,CAAP;AACR,GANI;;AAOA,SAAO,OAAQ,CAAC,KAAT,CAAe,IAAf,EAAqB,SAArB,CAAP;AACJ,CATO;;AAWA,SAAS,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB;AACzB,MAAI,CAAC,GAAG,EAAR;;AACA,OAAK,IAAI,CAAT,IAAc,CAAd;AAAiB,QAAI,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,CAArC,EAAwC,CAAxC,KAA8C,CAAC,CAAC,OAAF,CAAU,CAAV,IAAe,CAAjE,EACb,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAR;AADJ;;AAEA,MAAI,CAAC,IAAI,IAAL,IAAa,OAAO,MAAM,CAAC,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAI,CAAC,GAAG,CAAR,EAAW,CAAC,GAAG,MAAM,CAAC,qBAAP,CAA6B,CAA7B,CAApB,EAAqD,CAAC,GAAG,CAAC,CAAC,MAA3D,EAAmE,CAAC,EAApE,EAAwE;AACpE,QAAI,CAAC,CAAC,OAAF,CAAU,CAAC,CAAC,CAAD,CAAX,IAAkB,CAAlB,IAAuB,MAAM,CAAC,SAAP,CAAiB,oBAAjB,CAAsC,IAAtC,CAA2C,CAA3C,EAA8C,CAAC,CAAC,CAAD,CAA/C,CAA3B,EACI,CAAC,CAAC,CAAC,CAAC,CAAD,CAAF,CAAD,GAAU,CAAC,CAAC,CAAC,CAAC,CAAD,CAAF,CAAX;AACP;AACL,SAAO,CAAP;AACH;;AAiBM,SAAS,SAAT,CAAmB,OAAnB,EAA4B,UAA5B,EAAwC,CAAxC,EAA2C,SAA3C,EAAsD;AACzD,WAAS,KAAT,CAAe,KAAf,EAAsB;AAAE,WAAO,KAAK,YAAY,CAAjB,GAAqB,KAArB,GAA6B,IAAI,CAAJ,CAAM,UAAU,OAAV,EAAmB;AAAE,MAAA,OAAO,CAAC,KAAD,CAAP;AAAiB,KAA5C,CAApC;AAAoF;;AAC5G,SAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAT,CAAN,EAAyB,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AACvD,aAAS,SAAT,CAAmB,KAAnB,EAA0B;AAAE,UAAI;AAAE,QAAA,IAAI,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAO,CAAP,EAAU;AAAE,QAAA,MAAM,CAAC,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAAS,QAAT,CAAkB,KAAlB,EAAyB;AAAE,UAAI;AAAE,QAAA,IAAI,CAAC,SAAS,CAAC,OAAD,CAAT,CAAmB,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAO,CAAP,EAAU;AAAE,QAAA,MAAM,CAAC,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAAS,IAAT,CAAc,MAAd,EAAsB;AAAE,MAAA,MAAM,CAAC,IAAP,GAAc,OAAO,CAAC,MAAM,CAAC,KAAR,CAArB,GAAsC,KAAK,CAAC,MAAM,CAAC,KAAR,CAAL,CAAoB,IAApB,CAAyB,SAAzB,EAAoC,QAApC,CAAtC;AAAsF;;AAC9G,IAAA,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAV,CAAgB,OAAhB,EAAyB,UAAU,IAAI,EAAvC,CAAb,EAAyD,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH;;AAEM,SAAS,WAAT,CAAqB,OAArB,EAA8B,IAA9B,EAAoC;AACvC,MAAI,CAAC,GAAG;AAAE,IAAA,KAAK,EAAE,CAAT;AAAY,IAAA,IAAI,EAAE,gBAAW;AAAE,UAAI,CAAC,CAAC,CAAD,CAAD,GAAO,CAAX,EAAc,MAAM,CAAC,CAAC,CAAD,CAAP;AAAY,aAAO,CAAC,CAAC,CAAD,CAAR;AAAc,KAAvE;AAAyE,IAAA,IAAI,EAAE,EAA/E;AAAmF,IAAA,GAAG,EAAE;AAAxF,GAAR;AAAA,MAAsG,CAAtG;AAAA,MAAyG,CAAzG;AAAA,MAA4G,CAA5G;AAAA,MAA+G,CAA/G;AACA,SAAO,CAAC,GAAG;AAAE,IAAA,IAAI,EAAE,IAAI,CAAC,CAAD,CAAZ;AAAiB,aAAS,IAAI,CAAC,CAAD,CAA9B;AAAmC,cAAU,IAAI,CAAC,CAAD;AAAjD,GAAJ,EAA4D,OAAO,MAAP,KAAkB,UAAlB,KAAiC,CAAC,CAAC,MAAM,CAAC,QAAR,CAAD,GAAqB,YAAW;AAAE,WAAO,IAAP;AAAc,GAAjF,CAA5D,EAAgJ,CAAvJ;;AACA,WAAS,IAAT,CAAc,CAAd,EAAiB;AAAE,WAAO,UAAU,CAAV,EAAa;AAAE,aAAO,IAAI,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAX;AAAsB,KAA5C;AAA+C;;AAClE,WAAS,IAAT,CAAc,EAAd,EAAkB;AACd,QAAI,CAAJ,EAAO,MAAM,IAAI,SAAJ,CAAc,iCAAd,CAAN;;AACP,WAAO,CAAP;AAAU,UAAI;AACV,YAAI,CAAC,GAAG,CAAJ,EAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR,GAAY,CAAC,CAAC,QAAD,CAAb,GAA0B,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAC,CAAC,OAAD,CAAD,KAAe,CAAC,CAAC,GAAG,CAAC,CAAC,QAAD,CAAN,KAAqB,CAAC,CAAC,IAAF,CAAO,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4D,CAAC,CAAC,IAAjG,CAAD,IAA2G,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAF,CAAO,CAAP,EAAU,EAAE,CAAC,CAAD,CAAZ,CAAL,EAAuB,IAA9I,EAAoJ,OAAO,CAAP;AACpJ,YAAI,CAAC,GAAG,CAAJ,EAAO,CAAX,EAAc,EAAE,GAAG,CAAC,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAT,EAAY,CAAC,CAAC,KAAd,CAAL;;AACd,gBAAQ,EAAE,CAAC,CAAD,CAAV;AACI,eAAK,CAAL;AAAQ,eAAK,CAAL;AAAQ,YAAA,CAAC,GAAG,EAAJ;AAAQ;;AACxB,eAAK,CAAL;AAAQ,YAAA,CAAC,CAAC,KAAF;AAAW,mBAAO;AAAE,cAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAAX;AAAgB,cAAA,IAAI,EAAE;AAAtB,aAAP;;AACnB,eAAK,CAAL;AAAQ,YAAA,CAAC,CAAC,KAAF;AAAW,YAAA,CAAC,GAAG,EAAE,CAAC,CAAD,CAAN;AAAW,YAAA,EAAE,GAAG,CAAC,CAAD,CAAL;AAAU;;AACxC,eAAK,CAAL;AAAQ,YAAA,EAAE,GAAG,CAAC,CAAC,GAAF,CAAM,GAAN,EAAL;;AAAkB,YAAA,CAAC,CAAC,IAAF,CAAO,GAAP;;AAAc;;AACxC;AACI,gBAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAN,EAAY,CAAC,GAAG,CAAC,CAAC,MAAF,GAAW,CAAX,IAAgB,CAAC,CAAC,CAAC,CAAC,MAAF,GAAW,CAAZ,CAAnC,MAAuD,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAe,EAAE,CAAC,CAAD,CAAF,KAAU,CAAhF,CAAJ,EAAwF;AAAE,cAAA,CAAC,GAAG,CAAJ;AAAO;AAAW;;AAC5G,gBAAI,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,KAAgB,CAAC,CAAD,IAAO,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAC,CAAC,CAAD,CAAT,IAAgB,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAC,CAAC,CAAD,CAAhD,CAAJ,EAA2D;AAAE,cAAA,CAAC,CAAC,KAAF,GAAU,EAAE,CAAC,CAAD,CAAZ;AAAiB;AAAQ;;AACtF,gBAAI,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAe,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,CAAD,CAA9B,EAAmC;AAAE,cAAA,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,CAAD,CAAX;AAAgB,cAAA,CAAC,GAAG,EAAJ;AAAQ;AAAQ;;AACrE,gBAAI,CAAC,IAAI,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,CAAD,CAApB,EAAyB;AAAE,cAAA,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,CAAD,CAAX;;AAAgB,cAAA,CAAC,CAAC,GAAF,CAAM,IAAN,CAAW,EAAX;;AAAgB;AAAQ;;AACnE,gBAAI,CAAC,CAAC,CAAD,CAAL,EAAU,CAAC,CAAC,GAAF,CAAM,GAAN;;AACV,YAAA,CAAC,CAAC,IAAF,CAAO,GAAP;;AAAc;AAXtB;;AAaA,QAAA,EAAE,GAAG,IAAI,CAAC,IAAL,CAAU,OAAV,EAAmB,CAAnB,CAAL;AACH,OAjBS,CAiBR,OAAO,CAAP,EAAU;AAAE,QAAA,EAAE,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAL;AAAa,QAAA,CAAC,GAAG,CAAJ;AAAQ,OAjBzB,SAiBkC;AAAE,QAAA,CAAC,GAAG,CAAC,GAAG,CAAR;AAAY;AAjB1D;;AAkBA,QAAI,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAZ,EAAe,MAAM,EAAE,CAAC,CAAD,CAAR;AAAa,WAAO;AAAE,MAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAAF,GAAQ,EAAE,CAAC,CAAD,CAAV,GAAgB,KAAK,CAA9B;AAAiC,MAAA,IAAI,EAAE;AAAvC,KAAP;AAC/B;AACJ;;AA8CM,SAAS,cAAT,GAA0B;AAC7B,OAAK,IAAI,CAAC,GAAG,CAAR,EAAW,CAAC,GAAG,CAAf,EAAkB,EAAE,GAAG,SAAS,CAAC,MAAtC,EAA8C,CAAC,GAAG,EAAlD,EAAsD,CAAC,EAAvD;AAA2D,IAAA,CAAC,IAAI,SAAS,CAAC,CAAD,CAAT,CAAa,MAAlB;AAA3D;;AACA,OAAK,IAAI,CAAC,GAAG,KAAK,CAAC,CAAD,CAAb,EAAkB,CAAC,GAAG,CAAtB,EAAyB,CAAC,GAAG,CAAlC,EAAqC,CAAC,GAAG,EAAzC,EAA6C,CAAC,EAA9C;AACI,SAAK,IAAI,CAAC,GAAG,SAAS,CAAC,CAAD,CAAjB,EAAsB,CAAC,GAAG,CAA1B,EAA6B,EAAE,GAAG,CAAC,CAAC,MAAzC,EAAiD,CAAC,GAAG,EAArD,EAAyD,CAAC,IAAI,CAAC,EAA/D;AACI,MAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAR;AADJ;AADJ;;AAGA,SAAO,CAAP;AACJ;;ACxIA,IAAM,2BAA2B,GAAqC,SAAhE,2BAAgE,CACpE,KADoE,EAC/D;AAEG,MAAA,aAAa,GAAwB,KAAK,CAA7B,aAAb;AAAA,MAAe,OAAO,GAAe,KAAK,CAApB,OAAtB;AAAA,MAAwB,EAAE,GAAW,KAAK,CAAhB,EAA1B;AAAA,MAA4B,IAAI,GAAK,KAAK,CAAV,IAAhC;;AAER,MAAM,iBAAiB,GAAG,SAApB,iBAAoB,CACxB,KADwB,EAExB,IAFwB,EAGxB,KAHwB,EAGV;AAEd,QAAI,aAAJ,EAAmB;AACjB,MAAA,aAAa,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,CAAb;AACD;AACF,GARD;;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,GAAG,EAAE;AAAX,GAAA,EAAe,IAAf,CADF,EAEG,OAAO,CAAC,GAAR,CAAY,UAAC,MAAD,EAAO;AAAK,WACvB,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,MAAA,SAAS,EAAE,8FAA4F,MAAM,CAAC,KADhH;AACuH,qBACxG,KAAG,MAAM,CAAC,IAFzB;AAE+B,oBACjB,MAAM,CAAC,KAHrB;AAIE,MAAA,GAAG,EAAK,EAAE,GAAA,GAAF,GAAM,MAAM,CAAC,KAJvB;AAKE,MAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AACb,eAAA,iBAAiB,CAAC,KAAD,EAAQ,MAAM,CAAC,IAAf,EAAqB,MAAM,CAAC,KAA5B,CAAjB;AAAmD;AANvD,KAAA,EASG,MAAM,CAAC,IATV,CADuB;AAYxB,GAZA,CAFH,CADF,CADF;AAoBD,CAnCD;AAqCA;;;;;;IAIa,iBAAiB,GAAG,KAAK,CAAC,IAAN,CAC/B,2BAD+B,C;ACtDjC,IAAM,sBAAsB,GAAG,GAA/B;;AAUA,IAAM,eAAe,GAAG,SAAlB,eAAkB,CAGtB,KAHsB,EAGD;AAEb,MAAA,EAAE,GAAK,KAAK,CAAV,EAAF;;AAEF,MAAA,EAAA,GAA4B,QAAQ,CAAC,KAAD,CAApC;AAAA,MAAC,SAAS,GAAA,EAAA,CAAA,CAAA,CAAV;AAAA,MAAY,YAAY,GAAA,EAAA,CAAA,CAAA,CAAxB;;AACA,MAAA,EAAA,GAA0B,QAAQ,CAAC,CAAD,CAAlC;AAAA,MAAC,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAT;AAAA,MAAW,WAAW,GAAA,EAAA,CAAA,CAAA,CAAtB;;AAEN,MAAM,QAAQ,GAAG,MAAM,CAA0B,IAA1B,CAAvB;AAEA,MAAM,cAAc,GAAG,WAAW,CAAC,YAAA;AACjC,QAAI,QAAQ,CAAC,OAAT,KAAqB,IAAzB,EAA+B;AAC7B,UAAM,QAAQ,GAAG,QAAQ,CAAC,OAAT,CAAiB,WAAlC;AACQ,UAAA,QAAQ,GAAK,QAAQ,CAAC,OAAT,CAAL,QAAR;AACR,UAAM,eAAe,GAAI,MAAM,QAAP,GAAmB,QAA3C;AACA,MAAA,WAAW,CAAC,eAAD,CAAX;;AACA,UAAI,QAAQ,KAAK,QAAjB,EAA2B;AACzB,QAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF;AACF,GAViC,EAU/B,CAAC,QAAD,CAV+B,CAAlC;AAYA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,QAAQ,CAAC,OAAT,KAAqB,IAAzB,EAA+B;AAC7B,UAAI,SAAJ,EAAe;AACb,QAAA,QAAQ,CAAC,OAAT,CAAiB,IAAjB;AACA,YAAM,UAAQ,GAAG,WAAW,CAAC,cAAD,EAAiB,sBAAjB,CAA5B;AACA,eAAO,YAAA;AAAM,iBAAA,aAAa,CAAC,UAAD,CAAb;AAAuB,SAApC;AACD;;AACD,MAAA,QAAQ,CAAC,OAAT,CAAiB,KAAjB;AACD;;AACD;AACD,GAVQ,EAUN,CAAC,SAAD,EAAY,cAAZ,CAVM,CAAT;AAYQ,MAAA,SAAS,GAA0C,EAAE,CAA5C,SAAT;AAAA,MAAW,WAAW,GAA6B,EAAE,CAA/B,WAAtB;AAAA,MAAwB,SAAS,GAAkB,EAAE,CAApB,SAAjC;AAAA,MAAmC,IAAI,GAAY,EAAE,CAAd,IAAvC;AAAA,MAAyC,KAAK,GAAK,EAAE,CAAP,KAA9C;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAO,IAAA,GAAG,EAAE;AAAZ,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAA,mBAAoB,cAApB;AAAmC,IAAA,GAAG,EAAE,SAAxC;AAAmD,IAAA,IAAI,EAAC;AAAxD,GAAA,CADF,CADF,EAIE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,SAAD,GACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,gCADZ;AAC4C,mBAC9B,YAFd;AAGE,IAAA,OAAO,EAAE,mBAAA;AAAM,aAAA,YAAY,CAAC,IAAD,CAAZ;AAAkB;AAHnC,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,IADT;AAEE,IAAA,OAAO,EAAC,WAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,mXADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CANF,CALF,CADD,GAmBC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,gCADZ;AAC4C,mBAC9B,aAFd;AAGE,IAAA,OAAO,EAAE,mBAAA;AAAM,aAAA,YAAY,CAAC,KAAD,CAAZ;AAAmB;AAHpC,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,IADT;AAEE,IAAA,OAAO,EAAC,WAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,0fADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CANF,CALF,CApBJ,CADF,EAwCG,SAAS,IAAI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,GAAG,EAAE,KAAG,WAAb;AAA4B,IAAA,GAAG,EAAE;AAAjC,GAAA,CAxChB,CAJF,EA8CE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EAAS,KAAT,CADF,CADF,EAIE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EAAsD,IAAtD,CAJF,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,mBACc,gBADd;AAEE,IAAA,KAAK,EAAE;AAAE,MAAA,KAAK,EAAK,QAAQ,GAAA;AAApB;AAFT,GAAA,CADF,CALF,CA9CF,CADF,CADF;AA+DD,CArGD;;IAuGa,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,eAAX,C;;ACnGrB,IAAM,oBAAoB,GAA8B,SAAlD,oBAAkD,CAAC,KAAD,EAAM;AACpD,MAAA,QAAQ,GAA6C,KAAK,CAAlD,QAAR;AAAA,MAAU,SAAS,GAAkC,KAAK,CAAvC,SAAnB;AAAA,MAAqB,QAAQ,GAAwB,KAAK,CAA7B,QAA7B;AAAA,MAA+B,IAAI,GAAkB,KAAK,CAAvB,IAAnC;AAAA,MAAqC,GAAG,GAAa,KAAK,CAAlB,GAAxC;AAAA,MAA0C,MAAM,GAAK,KAAK,CAAV,MAAhD;AACR,MAAI,CAAC,IAAL,EAAW,OAAO,IAAP;AACX,MAAM,SAAS,GAAG,WAAW,CAAC,IAAD,CAA7B;AACA,SACE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACE,IAAA,SAAS,EAAE,SADb;AAEE,IAAA,QAAQ,EAAE,QAFZ;AAGE,IAAA,IAAI,EAAE,SAHR;AAIE,IAAA,GAAG,EAAE,GAJP;AAKE,IAAA,MAAM,EAAE;AALV,GAAA,EAOG,QAPH,CADF;AAWD,CAfD;;IAiBa,UAAU,GAAG,KAAK,CAAC,IAAN,CACxB,oBADwB,C;ACrC1B,IAAA,SAAA,GAAe,o9DAAf;;ACEO,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAC5B,SAD4B,EACK;AAC9B,SAAA,SAAS,CAAC,WAAV,IAAyB,SAAS,CAAC,IAAnC,IAA2C,WAA3C;AAAsD,CAFpD;;ACWP,KAAK,CAAC,MAAN,CAAa,QAAb;AACA,KAAK,CAAC,MAAN,CAAa,eAAb;;IAEa,aAAa,GAAG,SAAhB,aAAgB,CAC3B,MAD2B,EACE;AAE7B,SAAC,MAA+B,CAAC,MAAhC,IAA0C,IAA3C;AAAA,C;;IAEW,MAAM,GAAG,SAAT,MAAS,CAAC,MAAD,EAA8B;AAClD,SAAC,MAAe,CAAC,QAAhB,IAA4B,IAA7B;AAAA,C;;IAEW,gBAAgB,GAAG,SAAnB,gBAAmB,CAC9B,MAD8B,EACD;AAE7B,SAAA,OAAO,MAAP,KAAkB,QAAlB,IAA8B,OAAO,MAAP,KAAkB,QAAhD;AAAA,C;;IAqBW,kBAAkB,GAAG,KAAK,CAAC,aAAN,CAA6C;AAC7E,EAAA,CAAC,EAAE,WAAC,GAAD,EAAY;AAAK,WAAA,GAAA;AAAG,GADsD;AAE7E,EAAA,eAAe,EAAE,yBAAC,KAAD,EAAM;AAAK,WAAA,KAAK,CAAC,KAAD,CAAL;AAAY,GAFqC;AAG7E,EAAA,YAAY,EAAE;AAH+D,CAA7C,C;;IAMrB,mBAAmB,GAE3B,SAFQ,mBAER,CAAC,EAAD,EAAoB;MAAjB,QAAQ,GAAA,EAAA,CAAA,Q;MAAE,KAAK,GAAA,EAAA,CAAA,K;AAAO,SAC5B,KAAA,CAAA,aAAA,CAAC,kBAAkB,CAAC,QAApB,EAA4B;AAAC,IAAA,KAAK,EAAE;AAAR,GAA5B,EACG,QADH,CAD4B;AAAA,C;;IAMjB,qBAAqB,GAAG,SAAxB,qBAAwB,GAAA;AAAM,SAAA,UAAU,CAAC,kBAAD,CAAV;AAA8B,C;;IAE5D,sBAAsB,GAAG,SAAzB,sBAAyB,CACpC,SADoC,EACH;AAEjC,MAAM,+BAA+B,GAAG,SAAlC,+BAAkC,CACtC,KADsC,EACO;AAE7C,QAAM,kBAAkB,GAAG,qBAAqB,EAAhD;AAEA,WAAO,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,OAAA,CAAA,EAAA,EAAM,KAAN,EAAuB,kBAAvB,CAAV,CAAP;AACD,GAND;;AAQA,EAAA,+BAA+B,CAAC,WAAhC,GAA8C,2BAAyB,cAAc,CACnF,SADmF,CAArF;AAIA,SAAO,+BAAP;AACF,C;;ACvDA,IAAM,cAAc,GAAwB,SAAtC,cAAsC,CAAC,KAAD,EAAM;AAE9C,MAAA,SAAS,GAOP,KAAK,CAPE,SAAT;AAAA,MACA,aAAa,GAMX,KAAK,CANM,aADb;AAAA,MAEA,IAAI,GAKF,KAAK,CALH,IAFJ;AAAA,MAGA,SAAS,GAIP,KAAK,CAJE,SAHT;AAAA,MAIA,KAAK,GAGH,KAAK,CAHF,KAJL;AAAA,MAKA,UAAU,GAER,KAAK,CAFG,UALV;AAAA,MAMA,IAAI,GACF,KAAK,CADH,IANJ;AASM,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,KAAK,GAAG,SAAS,IAAI,SAA3B;;AAEA,MAAM,OAAO,GAAG,SAAV,OAAU,CAAC,GAAD,EAAoB;AAClC,QAAI,GAAG,KAAK,SAAR,IAAqB,GAAG,KAAK,IAAjC,EAAuC;AAC9B,UAAA,UAAU,GAAI,GAAG,CACrB,OADkB,CACV,8BADU,EACsB,EADtB,EAElB,KAFkB,CAEZ,GAFY,EAAJ,CAAI,CAAd;AAIP,aAAO,UAAP;AACD;;AACD,WAAO,IAAP;AACD,GATD;;AAWA,MAAI,CAAC,KAAD,IAAU,CAAC,UAAX,IAAyB,CAAC,KAA9B,EAAqC;AACnC,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,0EAAwE;AADrF,KAAA,EAGE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACG,CAAC,CAAC,qCAAD,CADJ,CADF,CAHF,CADF;AAWD;;AAED,MAAI,CAAC,UAAD,IAAe,CAAC,aAApB,EAAmC;AACjC,WAAO,IAAP;AACD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,0EAAwE;AADrF,GAAA,EAGG,KAAK,IACJ,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,GAAG,EAAE,KAAV;AAAiB,IAAA,GAAG,EAAE;AAAtB,GAAA,CADF,CAJJ,EAQE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,KAAK,IACJ,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,KADH,CAFJ,EAMG,IAAI,IACH,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,IADH,CAPJ,EAWG,CAAC,UAAU,IAAI,aAAf,KACC,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW;AACT,IAAA,SAAS,EAAC,wCADD;AAET,IAAA,IAAI,EAAE,UAAU,IAAI,aAFX;AAGT,IAAA,GAAG,EAAC,qBAHK;AAIT,IAAA,MAAM,EAAC;AAJE,GAAX,EAMG,OAAO,CAAC,UAAU,IAAI,aAAf,CANV,CAZJ,CADF,EAuBG,IAAI,KAAK,OAAT,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,GAAG,EAAC,YADN;AAEE,IAAA,SAAS,EAAC,+CAFZ;AAE2D,mBAC7C,YAHd;AAIE,IAAA,GAAG,EAAE;AAJP,GAAA,CAxBJ,CARF,CADF;AA2CD,CAvFD;AAyFA;;;;;;IAIa,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,cAAX,C;;ACtGpB,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAG/B,KAH+B,EAGD;AAEtB,MAAA,UAAU,GAAK,KAAK,CAAV,UAAV;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,yCADZ;AACqD,mBACvC;AAFd,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AACP,IAAA,GAAG,EAAE,IADE;AAEP,IAAA,QAAQ,EAAE,UAAU,CAAC,KAFd;AAGP,IAAA,QAAQ,EAAE,UAAU,CAAC,SAHd;AAIP,IAAA,IAAI,EAAE;AAJC,GAAT,CAJF,EAUE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW;AAAC,IAAA,QAAQ,EAAA,IAAT;AAAU,IAAA,IAAI,EAAE,UAAU,CAAC,SAA3B;AAAsC,IAAA,MAAM,EAAC;AAA7C,GAAX,EACG,UAAU,CAAC,KADd,CADF,EAIG,UAAU,CAAC,SAAX,IACC,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,UAAU,CAAC,SAAZ,CAAtB,CADD,IAEG,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAO,WAAW,CAAC,UAAU,CAAC,SAAZ,CAAlB,CANN,CAVF,CADF;AAsBD,CA7BD;;IA+Ba,cAAc,GAAG,KAAK,CAAC,IAAN,CAC5B,wBAD4B,C;ICrCjB,uBAAuB,GAAG,CACrC,WADqC,EAErC,WAFqC,EAGrC,YAHqC,EAIrC,iBAJqC,C;;IAO1B,iBAAiB,GAAG,SAApB,iBAAoB,CAG/B,UAH+B,EAGG;AAC/B,SAAA,UAAU,CAAC,IAAX,KAAoB,OAApB;AAA2B,C;;IAEnB,gBAAgB,GAAG,SAAnB,gBAAmB,CAG9B,UAH8B,EAGI;AAElC,SAAA,UAAU,CAAC,IAAX,KAAoB,MAApB,IACC,UAAU,CAAC,SAAX,IACC,uBAAuB,CAAC,OAAxB,CAAgC,UAAU,CAAC,SAA3C,MAA0D,CAAC,CAD5D,IAEC,UAAU,CAAC,IAAX,KAAoB,OAHtB;AAAA,C;;IAKW,mBAAmB,GAAG,SAAtB,mBAAsB,CAGjC,UAHiC,EAGC;AAC/B,SAAA,UAAU,CAAC,IAAX,KAAoB,SAApB;AAA6B,C;;IAErB,iBAAiB,GAAG,SAApB,iBAAoB,CAG/B,UAH+B,EAGG;AAElC,SAAA,UAAU,CAAC,IAAX,KAAoB,OAApB,IACA,CAAC,UAAU,CAAC,UADZ,IAEA,CAAC,UAAU,CAAC,aAFZ;AAAA,C;;IAIW,iBAAiB,GAAG,SAApB,iBAAoB,CAG/B,UAH+B,EAGG;AAElC,SAAC,UAAU,CAAC,SAAX,IACC,uBAAuB,CAAC,OAAxB,CAAgC,UAAU,CAAC,SAA3C,MAA0D,CAAC,CAD7D,IAEA,UAAU,CAAC,IAAX,KAAoB,OAFpB;AAAA,C;;IAIW,+BAA+B,GAAG,SAAlC,+BAAkC,CAG7C,KAH6C,EAGgB;AAErD,MAAA,UAAU,GAA8B,KAAK,CAAnC,UAAV;AAAA,MAAY,QAAQ,GAAoB,KAAK,CAAzB,QAApB;AAAA,MAAsB,aAAa,GAAK,KAAK,CAAV,aAAnC;AAER,MAAM,KAAK,GACT,aAAa,KAAK,MAAlB,IAA4B,EAAC,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,SAAb,CAA5B,IAAsD,EAAC,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,SAAb,CAAtD,GACI,UADJ,GAEI,UAAU,IAAI,UAAU,CAAC,OAAzB,IAAoC,UAAU,CAAC,OAAX,CAAmB,MAAvD,GACA,SADA,GAEA,EALN;AAOA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,gEAA8D,aAA9D,GAA2E,iCAA3E,IACT,CAAA,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,IAAZ,KAAoB,EADX,IACa,iCADb,GAEuB,aAFvB,GAEoC,IAFpC,GAEyC,KAHtD;AAIE,IAAA,GAAG,EAAE,CAAG,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,EAAf,IAAiB,GAAjB,IAAqB,CAAA,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,IAAZ,KAAoB,MAAzC,IAA+C;AAJtD,GAAA,EAMG,QANH,CADF;AAUF,C;;IAEa,uBAAuB,GAAG,SAA1B,uBAA0B,CAGrC,KAHqC,EAGK;AAElC,MAAA,cAAa,GAAoC,KAAK,CAAzC,aAAb;AAAA,MAAe,UAAU,GAAwB,KAAK,CAA7B,UAAzB;AAAA,MAA2B,iBAAiB,GAAK,KAAK,CAAV,iBAA5C;;AAER,MAAI,CAAC,iBAAD,IAAsB,CAAC,UAAU,CAAC,OAAlC,IAA6C,CAAC,UAAU,CAAC,OAAX,CAAmB,MAArE,EAA6E;AAC3E,WAAO,IAAP;AACD;;AAED,SACE,KAAA,CAAA,aAAA,CAAC,iBAAD,EAAkB,OAAA,CAAA,EAAA,EACZ,UADY,EACF;AACd,IAAA,aAAa,EAAE,uBAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAmB;AAAA,aAChC,cAAa,KAAA,IAAb,IAAA,cAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,cAAa,CAAG,IAAH,EAAS,KAAT,EAAgB,KAAhB,CADmB;AACG,KAFvB;AAId,IAAA,OAAO,EAAE,UAAU,CAAC,OAAX,IAAsB,EAJjB;AAKd,IAAA,EAAE,EAAE,UAAU,CAAC,EAAX,IAAiB,EALP;AAMd,IAAA,GAAG,EAAE,iBAAe,UAAU,CAAC,EANjB;AAOd,IAAA,IAAI,EAAE,UAAU,CAAC,IAAX,IAAmB;AAPX,GADE,CAAlB,CADF;AAYF,C;;IAEa,aAAa,GAAG,SAAhB,aAAgB,CAG3B,KAH2B,EAGe;AAElC,MAAA,UAAU,GAAc,KAAK,CAAnB,UAAV;AAAA,MAAY,OAAO,GAAK,KAAK,CAAV,OAAnB;AAER,MAAI,CAAC,OAAL,EAAc,OAAO,IAAP;AAEd,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EAAE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ;AAAC,MAAA,MAAM,EAAE,UAAU,CAAC,MAAX,IAAqB,EAA9B;AAAkC,MAAA,GAAG,EAAC;AAAtC,KAAR,CAF2B;AAGrC,IAAA,aAAa,EAAE;AAHsB,GAAD,CAAtC;AAKF,C;;IAEa,WAAW,GAAG,SAAd,WAAc,CAGzB,KAHyB,EAGiB;AAElC,MAAA,UAAU,GAAY,KAAK,CAAjB,UAAV;AAAA,MAAY,KAAK,GAAK,KAAK,CAAV,KAAjB;AAER,MAAI,CAAC,KAAL,EAAY,OAAO,IAAP;;AAEZ,MAAI,UAAU,CAAC,OAAX,IAAsB,UAAU,CAAC,OAAX,CAAmB,MAA7C,EAAqD;AACnD,WAAO,+BAA+B,CAAC;AACrC,MAAA,UAAU,EAAA,UAD2B;AAErC,MAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,SAAS,EAAC,sBADZ;AAEE,QAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAF/B,OAAA,EAIG,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM,OAAA,CAAA,EAAA,EAAK,UAAL,CAAN,CAJH,EAKG,uBAAuB,CAAC,KAAD,CAL1B,CAHmC;AAWrC,MAAA,aAAa,EAAE;AAXsB,KAAD,CAAtC;AAaD;;AAED,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EAAE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM,OAAA,CAAA,EAAA,EAAK,UAAL,EAAe;AAAE,MAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAA/B,KAAf,CAAN,CAF2B;AAGrC,IAAA,aAAa,EAAE;AAHsB,GAAD,CAAtC;AAKF,C;;IAEa,UAAU,GAAG,SAAb,UAAa,CAGxB,KAHwB,EAGkB;AAElC,MAAY,UAAU,GAAW,KAAK,CAAhB,UAAtB;AAAA,MAAwB,IAAI,GAAK,KAAK,CAAV,IAA5B;AAER,MAAI,CAAC,IAAL,EAAW,OAAO,IAAP;;AAEX,MAAI,UAAU,CAAC,OAAX,IAAsB,UAAU,CAAC,OAAX,CAAmB,MAA7C,EAAqD;AACnD,WAAO,+BAA+B,CAAC;AACrC,MAAA,UAAU,EAAA,UAD2B;AAErC,MAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,SAAS,EAAC,sBADZ;AAEE,QAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAF/B,OAAA,EAIE,KAAA,CAAA,aAAA,CAAC,IAAD,EAAK,OAAA,CAAA,EAAA,EAAK,UAAL,EAAe;AAAE,QAAA,GAAG,EAAE,cAAY,UAAU,CAAC;AAA9B,OAAf,CAAL,CAJF,EAKG,uBAAuB,CAAC,KAAD,CAL1B,CAHmC;AAWrC,MAAA,aAAa,EAAE;AAXsB,KAAD,CAAtC;AAaD;;AAED,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EAAE,KAAA,CAAA,aAAA,CAAC,IAAD,EAAK,OAAA,CAAA,EAAA,EAAK,UAAL,EAAe;AAAE,MAAA,GAAG,EAAE,cAAY,UAAU,CAAC;AAA9B,KAAf,CAAL,CAF2B;AAGrC,IAAA,aAAa,EAAE;AAHsB,GAAD,CAAtC;AAKF,C;;IAEa,UAAU,GAAG,SAAb,UAAa,CAGxB,KAHwB,EAGkB;AAElC,MAAY,UAAU,GAAW,KAAK,CAAhB,UAAtB;AAAA,MAAwB,IAAI,GAAK,KAAK,CAAV,IAA5B;AAER,MAAI,CAAC,IAAD,IAAS,CAAC,UAAU,CAAC,SAAzB,EAAoC,OAAO,IAAP;AAEpC,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAC,IAAD,EAAK;AAAC,MAAA,UAAU,EAAE,UAAb;AAAyB,MAAA,GAAG,EAAE,cAAY,UAAU,CAAC;AAArD,KAAL,CAHmC;AAKrC,IAAA,aAAa,EAAE;AALsB,GAAD,CAAtC;AAOF,C;;IAEa,WAAW,GAAG,SAAd,WAAc,CAGzB,KAHyB,EAGiB;AAElC,MAAY,UAAU,GAAY,KAAK,CAAjB,UAAtB;AAAA,MAAwB,KAAK,GAAK,KAAK,CAAV,KAA7B;AACR,MAAI,CAAC,KAAL,EAAY,OAAO,IAAP;AAEZ,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAsC,MAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAAnE,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM;AAAC,MAAA,EAAE,EAAE;AAAL,KAAN,CADF,CAHmC;AAOrC,IAAA,aAAa,EAAE;AAPsB,GAAD,CAAtC;AASF,C;;IAEa,WAAW,GAA8C,SAAzD,WAAyD,CACpE,KADoE,EAC/D;AAEG,MAAA,UAAU,GAAY,KAAK,CAAjB,UAAV;AAAA,MAAY,KAAK,GAAK,KAAK,CAAV,KAAjB;AAER,MAAI,CAAC,KAAL,EAAY,OAAO,IAAP;;AAEZ,MAAI,UAAU,CAAC,OAAX,IAAsB,UAAU,CAAC,OAAX,CAAmB,MAA7C,EAAqD;AACnD,WAAO,+BAA+B,CAAC;AACrC,MAAA,UAAU,EAAA,UAD2B;AAErC,MAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,SAAS,EAAC,iDADZ;AAEE,QAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAF/B,OAAA,EAIE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EACE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM;AACJ,QAAA,SAAS,EAAC,cADN;AAEJ,QAAA,QAAQ,EAAA,IAFJ;AAGJ,QAAA,MAAM,EAAC,MAHH;AAIJ,QAAA,GAAG,EAAE,UAAU,CAAC,SAJZ;AAKJ,QAAA,KAAK,EAAC;AALF,OAAN,CADF,CAJF,EAaG,uBAAuB,CAAC,KAAD,CAb1B,CAHmC;AAmBrC,MAAA,aAAa,EAAE;AAnBsB,KAAD,CAAtC;AAqBD;;AAED,SAAO,+BAA+B,CAAC;AACrC,IAAA,UAAU,EAAA,UAD2B;AAErC,IAAA,QAAQ,EACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAC,0BADZ;AAEE,MAAA,GAAG,EAAE,eAAa,UAAU,CAAC;AAF/B,KAAA,EAIG,GAJH,EAKE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM;AACJ,MAAA,SAAS,EAAC,cADN;AAEJ,MAAA,QAAQ,EAAA,IAFJ;AAGJ,MAAA,MAAM,EAAC,MAHH;AAIJ,MAAA,GAAG,EAAE,UAAU,CAAC,SAJZ;AAKJ,MAAA,KAAK,EAAC;AALF,KAAN,CALF,CAHmC;AAiBrC,IAAA,aAAa,EAAE;AAjBsB,GAAD,CAAtC;AAmBF,C;;ICzQa,UAAU,GAA8B,SAAxC,UAAwC,CAAC,KAAD,EAAM;AACjD,MAAA,IAAI,GAAK,KAAK,CAAV,IAAJ;AACR,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,gCAAf;AAA+C,mBAAa;AAA5D,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,8BAAf;AAA8C,IAAA,GAAG,EAAE,IAAI,CAAC;AAAxD,GAAA,CADF,CADF;AAKF,C;;ICEa,cAAc,GAAgC,SAA9C,cAA8C,CAAC,KAAD,EAAM;AACvD,MAAA,MAAM,GAAsC,KAAK,CAA3C,MAAN;AAAA,MAAQ,KAAK,GAA+B,KAAK,CAApC,KAAb;AAAA,MAAe,WAAW,GAAkB,KAAK,CAAvB,WAA1B;AAAA,MAA4B,WAAW,GAAK,KAAK,CAAV,WAAvC;AAER,SACE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,EACG,WAAW,GACV,KAAA,CAAA,aAAA,CAACA,OAAD,EAAM;AAAC,IAAA,OAAO,EAAE;AAAV,GAAN,EACE,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AACP,IAAA,UAAU,EAAE;;AAEV,MAAA,IAAI,EAAE;AAFI,KADL;AAKP,IAAA,YAAY,EAAE,KALP;AAMP,IAAA,KAAK,EAAE;AANA,GAAT,CADF,CADU,GAWR,IAZN,CADF;AAgBF,C;;ACtBA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAGxB,KAHwB,EAGD;AAEf,MAAA,MAAM,GAAK,KAAK,CAAV,MAAN;;AAEF,MAAA,EAAA,GAAoB,QAAQ,CAAC,CAAD,CAA5B;AAAA,MAAC,KAAK,GAAA,EAAA,CAAA,CAAA,CAAN;AAAA,MAAQ,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAhB;;AACA,MAAA,EAAA,GAA4B,QAAQ,CAAC,KAAD,CAApC;AAAA,MAAC,SAAS,GAAA,EAAA,CAAA,CAAA,CAAV;AAAA,MAAY,YAAY,GAAA,EAAA,CAAA,CAAA,CAAxB;;AAEE,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAER,MAAM,WAAW,GAAG,SAAd,WAAc,CAAC,aAAD,EAAsB;AACxC,QAAI,SAAJ,EAAe;AACb,MAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAFD,MAEO;AACL,MAAA,QAAQ,CAAC,aAAD,CAAR;AACA,MAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,GAPD;;AASA,MAAM,cAAc,GAAG,OAAO,CAC5B,YAAA;AACE,WAAA,MAAM,CAAC,GAAP,CAAW,UAAC,KAAD,EAAM;AAAK,aAAC;AACrB,QAAA,MAAM,EAAE,KAAK,CAAC,SAAN,IAAmB,KAAK,CAAC,SAAzB,IAAsC;AADzB,OAAD;AAEpB,KAFF,CAAA;AAEG,GAJuB,EAK5B,CAAC,MAAD,CAL4B,CAA9B;AAQA,MAAM,YAAY,GAAG,MAAM,CAAC,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,GAAnB,CAAuB,UAAC,KAAD,EAAQ,CAAR,EAAS;AAAK,WACxD,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAC,yBADZ;AACqC,qBACvB,eAFd;AAGE,MAAA,GAAG,EAAE,mBAAiB,CAHxB;AAIE,MAAA,OAAO,EAAE,mBAAA;AAAM,eAAA,WAAW,CAAC,CAAD,CAAX;AAAc;AAJ/B,KAAA,EAME,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,GAAG,EAAE,KAAK,CAAC,SAAN,IAAmB,KAAK,CAAC;AAAnC,KAAA,CANF,CADwD;AASzD,GAToB,CAArB;AAWA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,wBACT,MAAM,CAAC,MAAP,GAAgB,CAAhB,GAAoB,2BAApB,GAAkD,EADzC;AADb,GAAA,EAKG,YALH,EAMG,MAAM,CAAC,MAAP,GAAgB,CAAhB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,+BADZ;AAEE,IAAA,OAAO,EAAE,mBAAA;AAAM,aAAA,WAAW,CAAC,CAAD,CAAX;AAAc,KAF/B;AAGE,IAAA,KAAK,EAAE;AACL,MAAA,eAAe,EAAE,SAAO,MAAM,CAAC,CAAD,CAAN,CAAU,SAAjB,GAA0B;AADtC;AAHT,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EACG,CAAC,CAAC,uBAAD,EAA0B;AAC1B,IAAA,UAAU,EAAE,MAAM,CAAC,MAAP,GAAgB;AADF,GAA1B,CADJ,CAPF,CAPJ,EAqBE,KAAA,CAAA,aAAA,CAACC,cAAD,EAAa;AACX,IAAA,MAAM,EAAE,cADG;AAEX,IAAA,KAAK,EAAE,KAFI;AAGX,IAAA,WAAW,EAAE,SAHF;AAIX,IAAA,WAAW,EAAE,uBAAA;AAAM,aAAA,YAAY,CAAC,CAAC,SAAF,CAAZ;AAAwB;AAJhC,GAAb,CArBF,CADF;AA8BD,CAtED;AAwEA;;;;;;IAIa,OAAO,GAAG,KAAK,CAAC,IAAN,CACrB,iBADqB,C;AC9EvB;;;;;IAIa,cAAc,GAAyB,SAAvC,cAAuC,CAAC,KAAD,EAAM;AAClD,MAAA,EAAA,GAAgC,QAAQ,CAAC,KAAD,CAAxC;AAAA,MAAC,WAAW,GAAA,EAAA,CAAA,CAAA,CAAZ;AAAA,MAAc,cAAc,GAAA,EAAA,CAAA,CAAA,CAA5B;;AAEE,MAAA,QAAQ,GAA2B,KAAK,CAAhC,QAAR;AAAA,MAAU,SAAS,GAAgB,KAAK,CAArB,SAAnB;AAAA,MAAqB,SAAS,GAAK,KAAK,CAAV,SAA9B;AACR,MAAM,QAAQ,GAAG,WAAW,CAAC,SAAS,IAAI,SAAd,CAA5B;AACA,MAAM,cAAc,GAAG,CAAC;AAAE,IAAA,MAAM,EAAE;AAAV,GAAD,CAAvB;;AAEA,MAAM,WAAW,GAAG,SAAd,WAAc,GAAA;AAAM,WAAA,cAAc,CAAC,CAAC,WAAF,CAAd;AAA4B,GAAtD;;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,GAAG,EAAE,QADP;AAEE,IAAA,SAAS,EAAC,mCAFZ;AAE+C,mBACjC,YAHd;AAIE,IAAA,OAAO,EAAE,WAJX;AAKE,IAAA,GAAG,EAAE;AALP,GAAA,CADF,EASE,KAAA,CAAA,aAAA,CAACA,cAAD,EAAa;AACX,IAAA,MAAM,EAAE,cADG;AAEX,IAAA,KAAK,EAAE,CAFI;AAGX,IAAA,WAAW,EAAE,WAHF;AAIX,IAAA,WAAW,EAAE;AAJF,GAAb,CATF,CADF;AAkBF,C;ACiFA;;;;;;;;;;;;;;;IAaa,UAAU,GAAG,SAAb,UAAa,CAGxB,KAHwB,EAGE;;;AAGxB,MAAA,EAAA,GASE,KAAK,CATqC,iBAA5C;AAAA,MAAA,mBAAiB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,iBAAH,GAA2B,EAA5C;AAAA,MACA,WAAW,GAQT,KAAK,CARI,WADX;AAAA,MAEA,EAAA,GAOE,KAAK,CAPa,KAFpB;AAAA,MAEA,OAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,KAAH,GAAe,EAFpB;AAAA,MAGA,EAAA,GAME,KAAK,CANW,IAHlB;AAAA,MAGA,MAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,IAAH,GAAc,EAHlB;AAAA,MAIA,EAAA,GAKE,KAAK,CALW,IAJlB;AAAA,MAIA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAc,EAJlB;AAAA,MAKA,EAAA,GAIE,KAAK,CAJiB,OALxB;AAAA,MAKA,SAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,OAAH,GAAiB,EALxB;AAAA,MAMA,EAAA,GAGE,KAAK,CAHa,KANpB;AAAA,MAMA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAe,EANpB;AAAA,MAOA,EAAA,GAEE,KAAK,CAFY,KAPnB;AAAA,MAOA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,WAAH,GAAc,EAPnB;AAAA,MAQG,IAAI,GAAA,MAAA,CACL,KADK,EATH,CAAA,mBAAA,EAAA,aAAA,EAAA,OAAA,EAAA,MAAA,EAAA,MAAA,EAAA,SAAA,EAAA,OAAA,EAAA,OAAA,CASG,CARP;;AAWF,MAAM,OAAO,GAAG;AACd,IAAA,MAAM,EAAE,WAAW,KAAA,IAAX,IAAA,WAAW,KAAA,KAAA,CAAX,GAAW,KAAA,CAAX,GAAA,WAAW,CAAE,MAAb,CACN,UAAC,UAAD,EAAW;AACT,aAAA,UAAU,CAAC,IAAX,KAAoB,OAApB,IACA,EAAE,UAAU,CAAC,aAAX,IAA4B,UAAU,CAAC,UAAzC,CADA;AACoD,KAHhD,CADM;AAMd,IAAA,IAAI,EAAE;AANQ,GAAhB;AASA,MAAI,cAAJ;;AAEA,MAAI,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,MAAR,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,MAAhB,KAA0B,CAA9B,EAAiC;AAC/B,IAAA,cAAc,GAAA,cAAA,CACT,WAAW,CAAC,MAAZ,CACD,UAAC,UAAD,EAAW;AACT,aAAA,EACE,UAAU,CAAC,IAAX,KAAoB,OAApB,IACA,EAAE,UAAU,CAAC,aAAX,IAA4B,UAAU,CAAC,UAAzC,CAFF,CAAA;AAGC,KALF,CADS,EAOX,CACD,OADC,CAPW,CAAd;AAUD,GAXD,MAWO;AACL,IAAA,cAAc,GAAG,WAAjB;AACD;;AAED,MAAM,gBAAgB,GAAA,OAAA,CAAA;AACpB,IAAA,iBAAiB,EAAA,mBADG;AAEpB,IAAA,KAAK,EAAA,OAFe;AAGpB,IAAA,IAAI,EAAA,MAHgB;AAIpB,IAAA,IAAI,EAAA,IAJgB;AAKpB,IAAA,OAAO,EAAA,SALa;AAMpB,IAAA,KAAK,EAAA,KANe;AAOpB,IAAA,KAAK,EAAA;AAPe,GAAA,EAQjB,IARiB,CAAtB;;AAWA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,cAAc,KAAA,IAAd,IAAA,cAAc,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAA,cAAc,CAAE,GAAhB,CAAoB,UAAC,UAAD,EAAW;AAC9B,QAAI,mBAAmB,CAAC,UAAD,CAAvB,EAAqC;AACnC,aAAO,aAAa,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACf,gBADe,CAAA,EACC;AACnB,QAAA,UAAU,EAAA;AADS,OADD,CAAA,CAApB;AAID;;AAED,QAAI,iBAAiB,CAAC,UAAD,CAArB,EAAmC;AACjC,aAAO,WAAW,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACb,gBADa,CAAA,EACG;AACnB,QAAA,UAAU,EAAA;AADS,OADH,CAAA,CAAlB;AAID;;AAED,QAAI,gBAAgB,CAAC,UAAD,CAApB,EAAkC;AAChC,aAAO,UAAU,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACZ,gBADY,CAAA,EACI;AACnB,QAAA,UAAU,EAAA;AADS,OADJ,CAAA,CAAjB;AAID;;AAED,QAAI,iBAAiB,CAAC,UAAD,CAArB,EAAmC;AACjC,aAAO,WAAW,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACb,gBADa,CAAA,EACG;AACnB,QAAA,UAAU,EAAA;AADS,OADH,CAAA,CAAlB;AAID;;AAED,QAAI,iBAAiB,CAAC,UAAD,CAArB,EAAmC;AACjC,aAAO,WAAW,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACb,gBADa,CAAA,EACG;AACnB,QAAA,UAAU,EAAA;AADS,OADH,CAAA,CAAlB;AAID;;AAED,WAAO,UAAU,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACZ,gBADY,CAAA,EACI;AACnB,MAAA,UAAU,EAAA;AADS,KADJ,CAAA,CAAjB;AAID,GAxCA,CADH,CADF;AA6CF,C;;IC3OMC,IAAI,GAAA,aAAG,KAAK,CAAL,UAAA,CAAiB,UAAA,KAAA,EAAA,QAAA,EAAqB;AAAA,MAE/CC,SAF+C,GAS7CO,KAT6C,CAAA,SAAA;AAAA,MAGpCN,SAHoC,GAS7CM,KAT6C,CAAA,SAAA;AAAA,MAI/CL,IAJ+C,GAS7CK,KAT6C,CAAA,IAAA;AAAA,MAK/CJ,cAL+C,GAS7CI,KAT6C,CAAA,cAAA;AAAA,MAM/CH,eAN+C,GAS7CG,KAT6C,CAAA,eAAA;AAAA,MAO/CF,QAP+C,GAS7CE,KAT6C,CAAA,QAAA;AAAA,MAQ/CD,KAR+C,GAS7CC,KAT6C,CAAA,KAAA;;AAWjD,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAA;AAAA,WAAMJ,eAAe,CAArB,IAAqB,CAArB;AAAnB,GAAA;;AAEA,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAA,aAAA,MAAA,CAAeJ,SAAS,IAArC,EAAa,CAAb;AAA+C,IAAA,KAAK,EAAEM;AAAtD,GAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAA,eAAA,MAAA,CAAiBD,QAAQ,GAAA,uBAAA,GADpC,EACW,CADX;AAEE,IAAA,OAAO,EAFT,cAAA;AAGE,IAAA,OAAO,EAHT,UAAA;AAIE,IAAA,YAAY,EAJd,UAAA;AAKE,IAAA,GAAG,EALL,QAAA;AAME,IAAA,IAAI,EANN,QAAA;AAOE,IAAA,QAAQ,EAAE;AAPZ,GAAA,EAAA,aASE,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA;AAAW,IAAA,MAAM,EAAjB,IAAA;AAAyB,IAAA,QAAQ,EAAEA;AAAnC,GAAA,CATF,CADF,CADF;AAbW,CAAA,C;ACHb;;IACaI,SAAS,GAAG;AACvBC,EAAAA,GAAG,EADoB,EAAA;AAEvBC,EAAAA,EAAE,EAFqB,EAAA;AAGvBC,EAAAA,IAAI,EAHmB,EAAA;AAIvBC,EAAAA,KAAK,EAJkB,EAAA;AAKvBC,EAAAA,GAAG,EALoB,CAAA;AAMvBC,EAAAA,KAAK,EAAE;AANgB,C,EAAA;;IAUnBC,QAAAA,GACJ,SAAA,QAAA,GAAc;AAAA,MAAA,KAAA,GAAA,IAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,aAAA,EAaA,YAAM;AAClB,QAAI,CAAC,KAAI,CAAT,QAAA,EAAoB;AAClB;AACAM,MAAAA,QAAQ,CAARA,gBAAAA,CAAAA,SAAAA,EAAqC,KAAI,CAAzCA,CAAAA;AACD;;AACD,IAAA,KAAI,CAAJ,QAAA;AAlBY,GAAA,CAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,YAAA,EAqBD,YAAM;AACjB,IAAA,KAAI,CAAJ,QAAA;;AACA,QAAI,CAAC,KAAI,CAAT,QAAA,EAAoB;AAClB;AACAA,MAAAA,QAAQ,CAARA,mBAAAA,CAAAA,SAAAA,EAAwC,KAAI,CAA5CA,CAAAA;AACD;AA1BW,GAAA,CAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,KAAA,EA6BR,UAAA,QAAA,EAAA,EAAA,EAAkB;AACtB,QAAIF,OAAO,GAAX,QAAA;AAEA,QAAI,OAAA,CAAA,OAAA,CAAA,KAAJ,QAAA,EAAiCA,OAAO,GAAG,CAAVA,OAAU,CAAVA;AAEjC,IAAA,KAAI,CAAJ,SAAA,CAAe,KAAI,CAAnB,KAAA,IAA6B;AAC3BA,MAAAA,OAAO,EADoB,OAAA;AAE3BC,MAAAA,EAAE,EAAFA;AAF2B,KAA7B;AAKA,IAAA,KAAI,CAAJ,KAAA,IAAA,CAAA;AAEA,WAAO,KAAI,CAAX,KAAA;AAzCY,GAAA,CAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,QAAA,EA4CL,UAAA,EAAA,EAAQ;AACf,WAAO,KAAI,CAAJ,SAAA,CAAP,EAAO,CAAP;AA7CY,GAAA,CAAA;;AAAA,EAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAgDF,YAAM;AAChB,IAAA,KAAI,CAAJ,SAAA,GAAA,EAAA;AACA,IAAA,KAAI,CAAJ,KAAA,GAAA,CAAA;AAlDY,GAAA,CAAA;;AACZ,OAAA,KAAA,GAAA,CAAA;AACA,OAAA,SAAA,GAAA,EAAA;AACA,OAAA,QAAA,GAAA,CAAA;;AAEA,OAAA,CAAA,GAAS,UAAA,CAAA,EAAO;AACd,QAAMJ,IAAI,GAAGC,CAAC,CAADA,OAAAA,IAAaA,CAAC,CAA3B,KAAA;AACAC,IAAAA,MAAM,CAANA,MAAAA,CAAc,KAAI,CAAlBA,SAAAA,EAAAA,OAAAA,CAAsC,UAAA,IAAA,EAAqB;AAAA,UAAlBC,OAAkB,GAAA,IAAA,CAAlBA,OAAkB;AAAA,UAATC,EAAS,GAAA,IAAA,CAATA,EAAS;AACzD,UAAID,OAAO,CAAPA,QAAAA,CAAJ,IAAIA,CAAJ,EAA4BC,EAAE,CAAFA,CAAE,CAAFA;AAD9BF,KAAAA;AAFF,GAAA;AAMD,C;;AA2CH,IAAA,SAAA,GAAe,IAAf,QAAe,EAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC3DMI,IAAI,GAAG,SAAPA,IAAO,CAAA,KAAA,EAAW;AAAA,MAEpBvB,SAFoB,GAclBO,KAdkB,CAAA,SAAA;AAAA,MAGpBiB,SAHoB,GAclBjB,KAdkB,CAAA,SAAA;AAAA,MAIpBkB,cAJoB,GAclBlB,KAdkB,CAAA,cAAA;AAAA,MAKpBmB,eALoB,GAclBnB,KAdkB,CAAA,eAAA;AAAA,MAMpBoB,gBANoB,GAclBpB,KAdkB,CAAA,gBAAA;AAAA,MAOpBqB,aAPoB,GAclBrB,KAdkB,CAAA,aAAA;AAAA,MAQpBsB,SARoB,GAclBtB,KAdkB,CAAA,SAAA;AAAA,MASpBuB,QAToB,GAclBvB,KAdkB,CAAA,QAAA;AAAA,MAUpBD,KAVoB,GAclBC,KAdkB,CAAA,KAAA;AAAA,MAAA,qBAAA,GAclBA,KAdkB,CAAA,cAAA;AAAA,MAWpBwB,cAXoB,GAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,IAAA,GAAA,qBAAA;AAAA,MAYbC,SAZa,GAclBzB,KAdkB,CAAA,KAAA;AAAA,MAapB0B,MAboB,GAclB1B,KAdkB,CAAA,MAAA;;AAAA,MAAA,WAAA,GAgBR4B,UAAU,CAhBF,kBAgBE,CAhBF;AAAA,MAgBdD,CAhBc,GAAA,WAAA,CAAA,CAAA;;AAAA,MAAA,SAAA,GAkBkBI,QAAQ,CAlB1B,SAkB0B,CAlB1B;AAAA,MAAA,UAAA,GAAA,cAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAkBfF,YAlBe,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAkBDC,eAlBC,GAAA,UAAA,CAAA,CAAA,CAAA;;AAoBtB,MAAME,QAAQ,GAAd,EAAA;;AAEA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAAA,IAAA,EAAA;AAAA,WACjBJ,YAAY,KAAK,MAAM,CAAN,SAAA,CAAiB,UAAA,KAAA,EAAA;AAAA,aAAWK,KAAK,CAALA,EAAAA,KAAavC,IAAI,CAA5B,EAAA;AADjB,KACA,CADA;AAAnB,GAAA;;AAGA,MAAMwC,KAAK,GAAG,SAARA,KAAQ,CAAA,IAAA,EAAU;AACtB,QAAMC,aAAa,GAAGhB,gBAAgB,CAAtC,IAAsC,CAAtC;;AACA,QAAIgB,aAAa,CAAjB,GAAA,EAAuB;AACrB,aAAOA,aAAa,CAApB,GAAA;AACD;;AAED,QAAI,OAAA,IAAA,KAAA,QAAA,IAA4B,CAACzC,IAAI,CAArC,GAAA,EAA2C;AACzC,aAAOyC,aAAa,CAApB,IAAA;AACD;;AAED,WAAOzC,IAAI,CAAX,GAAA;AAVF,GAAA;;AAaA,MAAM0C,UAAU,GAAG,SAAbA,UAAa,CAAA,KAAA,EAAW;AAC5B,QAAI,CAAJ,KAAA,EAAY;AAEZd,IAAAA,QAAQ,CAACH,gBAAgB,CAAzBG,KAAyB,CAAjB,CAARA;AACA,QAAA,eAAA,EAAqBJ,eAAe,CAAfA,KAAe,CAAfA;AAJvB,GAAA;;AAOA,MAAMmB,WAAW,GAAG,SAAdA,WAAc,CAAA,CAAA,EAAO;AAAA,QAAA,iBAAA;;AACzB,QAAA,CAAA,EAAO,CAAA,iBAAA,GAAA,CAAC,CAAD,cAAA,MAAA,IAAA,IAAA,iBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,iBAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACPD,IAAAA,UAAU,CAACX,MAAM,CAAjBW,YAAiB,CAAP,CAAVA;AAFF,GAAA;;AAKA,MAAMpC,UAAU,GAAG,SAAbA,UAAa,CAAA,IAAA,EAAU;AAC3B6B,IAAAA,eAAe,CAAC,MAAM,CAAN,SAAA,CAAiB,UAAA,KAAA,EAAA;AAAA,aAAWI,KAAK,CAALA,EAAAA,KAAavC,IAAI,CAA5B,EAAA;AAAjCmC,KAAgB,CAAD,CAAfA;AADF,GAAA;;AAIA,MAAMS,aAAa,GAAGC,WAAW,CAC/B,UAAA,KAAA,EAAW;AACT,QAAIC,KAAK,CAALA,KAAAA,KAAgBvC,SAAS,CAA7B,EAAA,EAAkC;AAChC4B,MAAAA,eAAe,CAAC,UAAA,YAAA,EAAkB;AAChC,YAAIY,YAAY,KAAhB,SAAA,EAAgC,OAAA,CAAA;AAChC,YAAMC,KAAK,GACTD,YAAY,KAAZA,CAAAA,GAAqBhB,MAAM,CAANA,MAAAA,GAArBgB,CAAAA,GAAyCA,YAAY,GADvD,CAAA;AAEAxB,QAAAA,cAAc,CAACc,QAAQ,CAAvBd,KAAuB,CAAT,CAAdA;AACA,eAAA,KAAA;AALFY,OAAe,CAAfA;AAOD;;AAED,QAAIW,KAAK,CAALA,KAAAA,KAAgBvC,SAAS,CAA7B,IAAA,EAAoC;AAClC4B,MAAAA,eAAe,CAAC,UAAA,YAAA,EAAkB;AAChC,YAAIY,YAAY,KAAhB,SAAA,EAAgC,OAAA,CAAA;AAChC,YAAMC,KAAK,GACTD,YAAY,KAAKhB,MAAM,CAANA,MAAAA,GAAjBgB,CAAAA,GAAAA,CAAAA,GAAyCA,YAAY,GADvD,CAAA;AAEAxB,QAAAA,cAAc,CAACc,QAAQ,CAAvBd,KAAuB,CAAT,CAAdA;AACA,eAAA,KAAA;AALFY,OAAe,CAAfA;AAOD;;AAED,QACE,CAACW,KAAK,CAALA,KAAAA,KAAgBvC,SAAS,CAAzBuC,KAAAA,IAAmCA,KAAK,CAALA,KAAAA,KAAgBvC,SAAS,CAA7D,GAAA,KACA2B,YAAY,KAFd,SAAA,EAGE;AACAS,MAAAA,WAAW,CAAXA,KAAW,CAAXA;AACA,aAAOR,eAAe,CAAtB,SAAsB,CAAtB;AACD;;AAED,WAAA,IAAA;AA9B6B,GAAA,EAgC/B,CAAA,YAAA,EAhC+B,MAgC/B,CAhC+B,CAAA;AAAA,GAAjC;AAmCAc,EAAAA,SAAS,CAAC,YAAM;AACd7B,IAAAA,QAAQ,CAARA,gBAAAA,CAAAA,SAAAA,EAAAA,aAAAA,EAAAA,KAAAA;AACA,WAAO,YAAA;AAAA,aAAMA,QAAQ,CAARA,mBAAAA,CAAAA,SAAAA,EAAN,aAAMA,CAAN;AAAP,KAAA;AAFO,GAAA,EAGN,CAHH6B,aAGG,CAHM,CAATA;AAKAA,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIlB,MAAJ,KAAA,IAAIA,IAAAA,MAAJ,KAAA,KAAA,CAAIA,IAAAA,MAAM,CAAV,MAAA,EAAoBzB,UAAU,CAACyB,MAAM,CAAjBzB,CAAiB,CAAP,CAAVA;AADb,GAAA,EAEN,CAhGmB,MAgGnB,CAFM,CAAT2C,CA9FsB,CAAA;;AAkGtB,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAA,KAAA,EAAW;AAC9B,QAAIX,KAAK,CAALA,CAAK,CAALA,KAAJ,GAAA,EAAsB;AACpB,UAAMY,IAAI,GAAA,WAAA,MAAA,CAAcZ,KAAK,CAALA,OAAAA,CAAAA,GAAAA,EAAd,EAAcA,CAAd,EAAV,WAAU,CAAV;AACA,aAAA,GAAA,MAAA,CAAUP,CAAC,CAAX,mBAAW,CAAX,EAAA,GAAA,EAAA,MAAA,CAAA,IAAA,CAAA;AACD;;AAED,QAAIO,KAAK,CAALA,CAAK,CAALA,KAAJ,GAAA,EAAsB;AACpB,UAAMY,KAAI,GAAA,WAAA,MAAA,CAAcZ,KAAK,CAALA,OAAAA,CAAAA,GAAAA,EAAd,EAAcA,CAAd,EAAV,WAAU,CAAV;;AACA,aAAA,GAAA,MAAA,CAAUP,CAAC,CAAX,gBAAW,CAAX,EAAA,GAAA,EAAA,MAAA,CAAA,KAAA,CAAA;AACD;;AAED,QAAIO,KAAK,CAALA,CAAK,CAALA,KAAJ,GAAA,EAAsB;AACpB,UAAMY,MAAI,GAAA,WAAA,MAAA,CAAcZ,KAAK,CAALA,OAAAA,CAAAA,GAAAA,EAAd,EAAcA,CAAd,EAAV,WAAU,CAAV;;AACA,aAAA,GAAA,MAAA,CAAUP,CAAC,CAAX,iBAAW,CAAX,EAAA,GAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACD;;AAED,WAAA,IAAA;AAhBF,GAAA;;AAmBA,MAAMoB,eAAe,GAAG,SAAlBA,eAAkB,CAAA,IAAA,EAAU;AAChC,QAAMC,OAAO,GAAGrD,IAAI,CAAJA,IAAAA,IAAaA,IAAI,CAAjC,EAAA;AAEA,QAAMsD,eAAe,GAAGxB,SAAS,CAATA,KAAAA,CAAxB,CAAwBA,CAAxB;AACA,QAAMyB,KAAK,GAAGF,OAAO,CAAPA,KAAAA,CAAc,IAAA,MAAA,CAAA,IAAA,MAAA,CAAA,eAAA,EAAA,GAAA,CAAA,EAA5B,IAA4B,CAAdA,CAAd;AAEA,QAAMG,aAAa,GAAG;AAAEC,MAAAA,KAAK,EAAP,eAAA;AAA0BF,MAAAA,KAAK,EAALA;AAA1B,KAAtB;AAEA,WAAA,eAAA,CAAA,eAAA,CAAA,EAAA,EAAA,IAAA,CAAA,EAAA,EAAA,EAAA;AAAkBC,MAAAA,aAAa,EAAbA;AAAlB,KAAA,CAAA;AARF,GAAA;;AAWA,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAA,aAAA,MAAA,CAAe1D,SAAS,IAArC,EAAa,CAAb;AAA+C,IAAA,KAAK,EAAEM;AAAtD,GAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,IAAA,SAAS,EADX,kBAAA;AAEE,IAAA,uBAAuB,EAAE;AACvBsD,MAAAA,MAAM,EAAER,YAAY,CAAA,SAAA;AADG;AAF3B,GAAA,CADF,EAOG,MAAM,CAAN,GAAA,CAAW,UAAA,IAAA,EAAA,CAAA,EAAA;AAAA,WAAA,aACV,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA;AACE,MAAA,SAAS,EADX,aAAA;AAEE,MAAA,SAAS,EAFX,SAAA;AAGE,MAAA,IAAI,EAAEE,eAAe,CAHvB,IAGuB,CAHvB;AAIE,MAAA,GAAG,EAAEZ,KAAK,CAJZ,IAIY,CAJZ;AAKE,MAAA,cAAc,EALhB,WAAA;AAME,MAAA,eAAe,EANjB,UAAA;AAOE,MAAA,GAAG,EAAE,SAAA,GAAA,CAAA,IAAA,EAAS;AACZH,QAAAA,QAAQ,CAARA,CAAQ,CAARA,GAAAA,IAAAA;AARJ,OAAA;AAUE,MAAA,QAAQ,EAAEC,UAAU,CAVtB,IAUsB,CAVtB;AAWE,MAAA,KAAK,EAAEX;AAXT,KAAA,CADU;AARhB,GAQK,CAPH,CADF;AAyBD,C;;AC9JM,IAAMgC,sBAAsB,GAA5B,MAAA;;AAEA,SAAA,mBAAA,CAAA,SAAA,EAAA,IAAA,EAA8C;AACnD,MAAI,CAAJ,IAAA,EAAW;AAEX,MAAMC,UAAU,GAAGC,QAAQ,CACzBC,gBAAgB,CAAhBA,IAAgB,CAAhBA,CAAAA,gBAAAA,CADyB,QACzBA,CADyB,EAA3B,EAA2B,CAA3B;AAKA,MAAMC,cAAc,GAClBF,QAAQ,CAACC,gBAAgB,CAAhBA,SAAgB,CAAhBA,CAAAA,gBAAAA,CAAD,QAACA,CAAD,EAARD,EAAQ,CAARA,GADF,UAAA;AAIA,MAAMG,eAAe,GAAGC,SAAS,CAAjC,SAAA;AACA,MAAMC,aAAa,GAAGlE,IAAI,CAA1B,SAAA;;AAEA,MACEkE,aAAa,GAAGF,eAAe,GAA/BE,cAAAA,IACAF,eAAe,GAFjB,aAAA,EAGE;AACA;AAnBiD,GAAA,CAAA;;;AAuBnDC,EAAAA,SAAS,CAATA,SAAAA,GAAAA,aAAAA;AACD;;AAEM,IAAME,YAAY,GAAG,SAAfA,YAAe,CAAA,OAAA,EAAA;AAAA,SAC1BC,OAAO,CAAPA,KAAAA,CAAAA,4BAAAA,MAAAA,CAAAA,OAAAA,EAD0B,yIAC1BA,CAAAA,CAD0B;AAArB,CAAA;;AAMA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,IAAA,EAAiB;AAAA,MAAdC,OAAc,GAAA,IAAA,CAAdA,OAAc;AAChD,MAAI,CAAJ,OAAA,EAAc,OAAOC,KAAK,CAAZ,qCAAY,CAAZ;AAEd,MAAMC,QAAQ,GAAGvD,MAAM,CAANA,OAAAA,CAAjB,OAAiBA,CAAjB;;AAEA,OAAK,IAAIwD,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGD,QAAQ,CAA5B,MAAA,EAAqCC,CAAC,IAAtC,CAAA,EAA6C;AAAA,QAAA,WAAA,GAAA,cAAA,CACXD,QAAQ,CADG,CACH,CADG,EAAA,CAAA,CAAA;AAAA,QACpCE,WADoC,GAAA,WAAA,CAAA,CAAA,CAAA;AAAA,QACvBC,QADuB,GAAA,WAAA,CAAA,CAAA,CAAA;;AAG3C,QAAI,OAAA,WAAA,KAAA,QAAA,IAAmCD,WAAW,CAAXA,MAAAA,KAAvC,CAAA,EAAiE;AAC/D,aAAOH,KAAK,CAAZ,4EAAY,CAAZ;AAJyC,KAAA,CAAA;;;AAU3C,QAAMK,cAAc,GAApB,QAAA;AAV2C,QAYnCC,QAZmC,GAYWD,cAZX,CAAA,QAAA;AAAA,QAYzBtD,SAZyB,GAYWsD,cAZX,CAAA,SAAA;AAAA,QAYdE,YAZc,GAYWF,cAZX,CAAA,YAAA;AAAA,QAYAG,MAZA,GAYWH,cAZX,CAAA,MAAA;;AAc3C,QAAI,CAACI,kBAAkB,CAAvB,SAAuB,CAAvB,EAAoC;AAClC,aAAOT,KAAK,CAAZ,oDAAY,CAAZ;AACD;;AAED,QAAI,CAAA,YAAA,IAAiB,OAAA,YAAA,KAArB,UAAA,EAAyD;AACvD,aAAOA,KAAK,CAAZ,uDAAY,CAAZ;AACD;;AAED,QAAIQ,MAAM,IAAI,OAAA,MAAA,KAAd,UAAA,EAA4C;AAC1C,aAAOR,KAAK,CAAZ,oDAAY,CAAZ;AACD;;AAED,QAAIM,QAAQ,IAAI,OAAA,QAAA,KAAhB,UAAA,EAAgD;AAC9C,aAAON,KAAK,CAAZ,sDAAY,CAAZ;AACD;AACF;;AAED,SAAA,IAAA;AApCK,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICpBDU,yBAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;;;AAUJ,WAAA,yBAAA,CAAA,MAAA,EAAmB;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,yBAAA,CAAA;;AACjB,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AADiB,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,sBAAA,EAwDI,YAAM;AAC3B,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB,OAAA,IAAA;AAEvB,aAAO;AACLc,QAAAA,YAAY,EAAE,KAAA,CAAA,WAAA,CADT,YAAA;AAELC,QAAAA,cAAc,EAAE,KAAA,CAAA,WAAA,CAAiBA;AAF5B,OAAP;AA3DiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,iBAAA,EAiED,YAAM;AACtB,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB,OAAA,IAAA;AADD,UAAA,iBAAA,GAEmB,KAAA,CAFnB,WAAA;AAAA,UAEdD,YAFc,GAAA,iBAAA,CAAA,YAAA;AAAA,UAEAC,cAFA,GAAA,iBAAA,CAAA,cAAA;AAItB,UAAIA,cAAc,KAAlB,YAAA,EAAqC,OAAA,IAAA;AAErC,aAAO,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAA,cAAA,EAELD,YAAY,GAFd,cAAO,CAAP;AAvEiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,EA6EA,YAAkB;AAAA,UAAjBI,QAAiB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAN,CAAM;AACnC,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB;;AAEvB,MAAA,KAAA,CAAA,WAAA,CAAA,KAAA;;AACA,MAAA,KAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,QAAA,EAAA,QAAA;AAjFiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,EAoFA,YAAM;AACvB,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB,OAAA,CAAA;AAEvB,aAAO,KAAA,CAAA,WAAA,CAAP,YAAA;AAvFiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EA0FR,UAAA,KAAA,EAAW;AACpB,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB;AAEvB,UAAM7B,OAAO,GAAG,KAAA,CAAA,KAAA,CAAhB,cAAA;;AACA,UAAM8B,QAAQ,GAAG,KAAA,CAAA,WAAA,CAAA,OAAA,CAJG,QAIH,CAAjB,CAJoB,CAAA;;;AAOpB,UAAI,CAAA,QAAA,IAAatD,KAAK,CAALA,QAAAA,KAAjB,IAAA,EAA0C;;AAE1C,UAAI,CAAA,OAAA,IAAY,CAAC,KAAA,CAAA,KAAA,CAAjB,IAAA,EAAkC;AAChC;AACA,QAAA,KAAA,CAAA,YAAA;;AACA,YAAI,KAAA,CAAJ,WAAA,EAAsB;AACpB,UAAA,KAAA,CAAA,WAAA,CAAA,YAAA,GAAA,CAAA;AACD;;AACD,QAAA,KAAA,CAAA,KAAA,CAAA,YAAA,CAAA,KAAA;AACD;AA1GgB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EA6GR,YAAM;AACf,UAAI,CAAC,KAAA,CAAA,KAAA,CAAD,WAAA,IAA2B,CAAC,KAAA,CAAhC,WAAA,EADe,OAAA,CAAA;;AAIf,UAAMsD,QAAQ,GAAG,KAAA,CAAA,WAAA,CAAA,OAAA,CAAjB,QAAiB,CAAjB;;AACA,UAAI,CAAJ,QAAA,EAAe;;AAEf,MAAA,KAAA,CAAA,YAAA;AApHiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,cAAA,EAuHJ,YAAM;AAAA,UACX7D,KADW,GACD,KAAA,CADC,KACD,CADC,KAAA;AAGnB,UAAM8D,aAAa,GAAnB,gBAAA;AACA,UAAM5C,KAAK,GAAG4C,aAAa,CAAbA,IAAAA,CAAmB9D,KAAK,CAALA,KAAAA,CAAAA,CAAAA,EAAe,KAAA,CAAhD,gBAAgD,EAAfA,CAAnB8D,CAAd;AACA,UAAMC,QAAQ,GAAG7C,KAAK,IAAIA,KAAK,CAA/B,CAA+B,CAA/B;AAEA,UAAI,CAAJ,QAAA,EAAe;AAEf,UAAM8C,MAAM,GAAG9C,KAAK,CAApB,CAAoB,CAApB;;AAEA,UAAM+C,OAAO,GAAG,KAAA,CAAA,KAAA,CAAA,WAAA,CAAhB,QAAgB,CAAhB;;AACA,UAAIA,OAAO,IAAX,IAAA,EAAqB;AAErB,UAAMC,cAAc,GAAGlE,KAAK,CAALA,KAAAA,CAAAA,CAAAA,EAErB,KAAA,CAAA,gBAAA,KAA0BkB,KAAK,CAALA,CAAK,CAALA,CAF5B,MAAuBlB,CAAvB;AAIA,UAAMmE,cAAc,GAAGnE,KAAK,CAALA,KAAAA,CAAY,KAAA,CAAZA,gBAAY,EAAZA,EAAqC,CAA5D,CAAuBA,CAAvB;AACA,UAAMoE,OAAO,GAAGF,cAAc,GAAdA,OAAAA,GAAAA,MAAAA,GAAhB,cAAA;;AAEA,MAAA,KAAA,CAAA,QAAA,CACE;AACElE,QAAAA,KAAK,EAAEoE;AADT,OADF,EAIE,YAAM;AACJ;AACA,YAAM3F,CAAC,GAAG,IAAA,WAAA,CAAA,QAAA,EAA0B;AAAE4F,UAAAA,OAAO,EAAE;AAAX,SAA1B,CAAV;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,aAAA,CAAA,CAAA;;AACA,YAAI,KAAA,CAAA,KAAA,CAAJ,QAAA,EAAyB,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,CAAA;AAR7B,OAAA;AA5IiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,WAAA,EAyJP,UAAA,QAAA,EAAc;AAAA,UAChBC,QADgB,GACH,KAAA,CADG,KACH,CADG,QAAA;AAAA,UAAA,WAAA,GAEuC,KAAA,CAFvC,KAAA;AAAA,UAEhBnB,cAFgB,GAAA,WAAA,CAAA,cAAA;AAAA,UAEAK,YAFA,GAAA,WAAA,CAAA,YAAA;AAAA,UAEqBe,aAFrB,GAAA,WAAA,CAAA,KAAA;AAIxB,UAAI,CAAJ,cAAA,EAAqB;;AAErB,UAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA,QAAA,EAAA,KAAA,EAAA,UAAA,EAAiC;AAC5D,gBAAA,QAAA;AACE,eAAA,OAAA;AACE,mBAAA,UAAA;;AACF,eAAA,MAAA;AACA,eAAA,KAAA;AACE,mBAAOC,UAAU,GAAGC,KAAK,CAAzB,MAAA;;AACF;AACE,gBAAI,CAACC,MAAM,CAANA,SAAAA,CAAL,QAAKA,CAAL,EAAiC;AAC/B,oBAAM,IAAA,KAAA,CAAN,gEAAM,CAAN;AAGD;;AAED,mBAAA,QAAA;AAbJ;AADF,OAAA;;AAkBA,UAAMC,YAAY,GAAGL,aAAa,CAAbA,KAAAA,CAAAA,CAAAA,EAArB,YAAqBA,CAArB;AAEA,UAAMM,oBAAoB,GAAGD,YAAY,CAAZA,MAAAA;AAC3B;AACN;AACA;AACM,UAAA,MAAA,CAAA,KAAA,MAAA,CAAA,cAAA,EAAA,OAAA,MAAA,CAAA,cAAA,EAAA,KAAA,EAAA,GAAA,CAAA,EA9BsB,IA8BtB,CAAA,CAJ2BA,CAA7B,CA1BwB,CAAA;;AAkCxB,UAAME,cAAc,GAClBC,QAAQ,CAARA,aAAAA,KAAAA,MAAAA,GAAAA,GAAAA,MAAAA,CAAuCA,QAAQ,CAA/CA,IAAAA,EAAAA,GAAAA,CAAAA,GAA0DA,QAAQ,CADpE,IAAA;AAGA,UAAMC,gBAAgB,GAAGR,oBAAoB,CAC3CO,QAAQ,CADmC,aAAA,EAAA,cAAA,EAA7C,oBAA6C,CAA7C;AAMA,UAAME,YAAY,GAChBL,YAAY,CAAZA,SAAAA,CAAAA,CAAAA,EAAAA,oBAAAA,IA5CsB,cA2CxB,CA3CwB,CAAA;;AA+CxB,MAAA,KAAA,CAAA,QAAA,CACE;AACEvB,QAAAA,WAAW,EADb,KAAA;AAEErD,QAAAA,KAAK,EAAEuE,aAAa,CAAbA,OAAAA,CAAAA,YAAAA,EAAAA,YAAAA;AAFT,OADF,EAKE,YAAM;AACJ;AACA,YAAM9F,CAAC,GAAG,IAAA,WAAA,CAAA,QAAA,EAA0B;AAAE4F,UAAAA,OAAO,EAAE;AAAX,SAA1B,CAAV;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,aAAA,CAAA,CAAA;;AACA,YAAA,QAAA,EAAcC,QAAQ,CAARA,CAAQ,CAARA;;AAEd,QAAA,KAAA,CAAA,gBAAA,CAAA,gBAAA;AAXJ,OAAA;;AAcA,MAAA,KAAA,CAAA,kBAAA;AAtNiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,EAyNA,YAAM;AAAA,UACfnB,cADe,GACI,KAAA,CADJ,KACI,CADJ,cAAA;;AAEvB,UAAM+B,eAAe,GAAG,KAAA,CAAxB,0BAAwB,EAAxB;;AAEA,UAAI,CAAA,cAAA,IAAmB,CAAvB,eAAA,EAAyC,OAAA,IAAA;AAJlB,UAMf5C,QANe,GAMF4C,eANE,CAAA,QAAA;AAQvB,UAAI,CAAJ,QAAA,EAAe,OAAA,IAAA;AAEf,aAAO,UAAA,IAAA,EAAU;AACf,YAAI,OAAA,QAAA,KAAJ,UAAA,EAAoC;AAClC,gBAAM,IAAA,KAAA,CAAN,6IAAM,CAAN;AAGD;;AACD,YAAA,QAAA,EAAc;AACZ,iBAAO5C,QAAQ,CAAA,IAAA,EAAf,cAAe,CAAf;AACD;;AACD,eAAA,IAAA;AATF,OAAA;AAnOiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,mBAAA,EAgPC,YAAM;AAAA,UAAA,YAAA,GACgB,KAAA,CADhB,KAAA;AAAA,UAChBY,WADgB,GAAA,YAAA,CAAA,WAAA;AAAA,UACHC,cADG,GAAA,YAAA,CAAA,cAAA;;AAExB,UAAM+B,eAAe,GAAG,KAAA,CAAxB,0BAAwB,EAAxB;;AAEA,UAAI,CAAA,cAAA,IAAmB,CAAvB,eAAA,EAAyC,OAAA,IAAA;AAJjB,UAMhB1C,MANgB,GAML0C,eANK,CAAA,MAAA;AAQxB,aAAO,UAAA,IAAA,EAAU;AACf,YACE,OAAA,CAAA,IAAA,CAAA,KAAA,QAAA,KACC,CAAA,MAAA,IAAW,OAAA,MAAA,KAFd,UACE,CADF,EAGE;AACA,gBAAM,IAAA,KAAA,CAAN,8KAAM,CAAN;AAGD;;AAED,YAAA,MAAA,EAAY;AACV,cAAMhF,aAAa,GAAGsC,MAAM,CAAA,IAAA,EAA5B,cAA4B,CAA5B;;AAEA,cAAI,CAAA,aAAA,IAAkB,OAAA,aAAA,KAAtB,QAAA,EAAyD;AACvD,kBAAM,IAAA,KAAA,CAAA,iHAAA,MAAA,CAC4G2C,MAAM,CADlH,aACkH,CADlH,EAAA,6CAAA,EAAA,MAAA,CAAA,cAAA,EAAA,qBAAA,EAAA,MAAA,CAAA,WAAA,EAAN,2GAAM,CAAA,CAAN;AAKD;;AAED,cAAI,OAAA,aAAA,KAAJ,QAAA,EAAuC;AACrC,mBAAO;AACLC,cAAAA,aAAa,EADR,sBAAA;AAELC,cAAAA,IAAI,EAAEnF;AAFD,aAAP;AAID;;AAED,cAAI,CAACA,aAAa,CAAlB,IAAA,EAAyB;AACvB,kBAAM,IAAA,KAAA,CAAA,kJAAA,MAAA,CAAA,cAAA,EAAA,qBAAA,EAAA,MAAA,CAAA,WAAA,EAAN,MAAM,CAAA,CAAN;AAGD;;AAED,cAAI,CAACA,aAAa,CAAlB,aAAA,EAAkC;AAChC,kBAAM,IAAA,KAAA,CAAA,2JAAA,MAAA,CAAA,cAAA,EAAA,qBAAA,EAAA,MAAA,CAAA,WAAA,EAAN,MAAM,CAAA,CAAN;AAGD;;AAED,iBAAA,aAAA;AACD;;AAED,YAAI,OAAA,IAAA,KAAJ,QAAA,EAA8B;AAC5B,gBAAM,IAAA,KAAA,CAAN,gCAAM,CAAN;AACD;;AAED,eAAO;AACLkF,UAAAA,aAAa,EADR,sBAAA;AAELC,UAAAA,IAAI,EAAA,GAAA,MAAA,CAAA,cAAA,EAAA,MAAA,CAAA,IAAA,EAAA,MAAA,CAAA,cAAA;AAFC,SAAP;AA/CF,OAAA;AAxPiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,4BAAA,EA8SU,YAAM;AAAA,UACzBlC,cADyB,GACN,KAAA,CADM,KACN,CADM,cAAA;AAGjC,UAAI,CAAJ,cAAA,EAAqB,OAAA,IAAA;AAErB,aAAO,KAAA,CAAA,KAAA,CAAA,OAAA,CAAP,cAAO,CAAP;AAnTiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,wBAAA,EAsTM,YAAM;AAAA,UACrBmC,KADqB,GACX,KAAA,CADW,KACX,CADW,KAAA;AAAA,UAAA,YAAA,GAEW,KAAA,CAFX,KAAA;AAAA,UAErBpC,WAFqB,GAAA,YAAA,CAAA,WAAA;AAAA,UAERC,cAFQ,GAAA,YAAA,CAAA,cAAA;;AAG7B,UAAM+B,eAAe,GAAG,KAAA,CAAxB,0BAAwB,EAAxB;;AAEA,UAAI,CAAA,cAAA,IAAmB,CAAvB,eAAA,EAAyC;AALZ,UAOrBnG,SAPqB,GAOOmG,eAPP,CAAA,SAAA;AAAA,UAOV3C,YAPU,GAOO2C,eAPP,CAAA,YAAA;;AAS7B,UAAI,OAAA,YAAA,KAAJ,UAAA,EAAwC;AACtC,cAAM,IAAA,KAAA,CAAN,wCAAM,CAAN;AACD;;AAED,MAAA,KAAA,CAAA,QAAA,CAAc;AAAE7B,QAAAA,WAAW,EAAE;AAAf,OAAd,EAb6B,CAAA;;;AAgB7Bd,MAAAA,YAAY,CAAA,WAAA,EAAc,KAAA,CAAA,KAAA,CAAd,KAAA,EAAgC,UAAA,IAAA,EAAA,KAAA,EAAiB;AAC3D;AACA,YAAImC,KAAK,KAAK,KAAA,CAAA,KAAA,CAAd,WAAA,EAAsC;;AAEtC,YAAI,CAACa,KAAK,CAALA,OAAAA,CAAL,IAAKA,CAAL,EAA0B;AACxB,gBAAM,IAAA,KAAA,CAAN,2CAAM,CAAN;AACD;;AAED,YAAI,CAAC9C,kBAAkB,CAAvB,SAAuB,CAAvB,EAAoC;AAClC,gBAAM,IAAA,KAAA,CAAN,8BAAM,CAAN;AATyD,SAAA,CAAA;;;AAa3D,YAAIU,cAAc,KAAK,KAAA,CAAA,KAAA,CAAvB,cAAA,EAb2D,OAAA,CAAA;;AAgB3D,YAAI,CAACC,IAAI,CAAT,MAAA,EAAkB;AAChB,UAAA,KAAA,CAAA,kBAAA;;AACA;AACD;;AAED,YAAID,cAAc,KAAdA,GAAAA,IAA0BmC,KAAK,CAAnC,MAAA,EAA4C;AAC1ClC,UAAAA,IAAI,GAAG,IAAI,CAAJ,MAAA,CAAY,UAAA,UAAA,EAAgB;AACjC,gBAAMoC,SAAS,GAAG,KAAK,CAAL,IAAA,CAChB,UAAA,IAAA,EAAA;AAAA,qBAAUC,IAAI,CAAJA,MAAAA,CAAAA,EAAAA,KAAmBC,UAAU,CAAvC,EAAA;AADF,aAAkB,CAAlB;AAIA,gBAAA,SAAA,EAAe,OAAA,KAAA;AACf,mBAAA,IAAA;AANFtC,WAAO,CAAPA;AAQD;;AAED,QAAA,KAAA,CAAA,QAAA,CAAc;AACZrE,UAAAA,SAAS,EADG,SAAA;AAEZqE,UAAAA,IAAI,EAFQ,IAAA;AAGZC,UAAAA,WAAW,EAAE;AAHD,SAAd;AAhCFd,OAAY,CAAZA;AAtUiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,iBAAA,EA8WD,YAAM;AAAA,UAAA,YAAA,GACW,KAAA,CADX,KAAA;AAAA,UACdY,cADc,GAAA,YAAA,CAAA,cAAA;AAAA,UACEC,IADF,GAAA,YAAA,CAAA,IAAA;AAGtB,UAAI,CAAA,cAAA,IAAmB,CAAnB,IAAA,IAA6BA,IAAI,IAAI,CAACA,IAAI,CAA9C,MAAA,EAAwD,OAAA,IAAA;AAExD,aAAA,IAAA;AAnXiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,eAAA,EAsXH,YAAM;AAAA,UACZrB,OADY,GACA,KAAA,CADA,KACA,CADA,OAAA,CAAA,CAAA;AAIpB;;AACA,MAAA,KAAA,CAAA,WAAA,GAAmB,IAAA,MAAA,CAAA,KAAA,MAAA,CACZrD,MAAM,CAANA,IAAAA,CAAAA,OAAAA,EAAAA,IAAAA,CADY,EACZA,CADY,EAAnB,uBAAmB,CAAA,CAAnB;AA3XiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,oBAAA,EAiZE,YAAM;AACzB,MAAA,KAAA,CAAA,QAAA,CAAc;AACZyE,QAAAA,cAAc,EADF,IAAA;AAEZC,QAAAA,IAAI,EAFQ,IAAA;AAGZC,QAAAA,WAAW,EAHC,KAAA;AAIZC,QAAAA,IAAI,EAJQ,IAAA;AAKZI,QAAAA,GAAG,EAAE;AALO,OAAd;AAlZiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,eAAA,EA2ZH,YAAM;AACpB,UAAM5F,KAAK,GAAA,aAAA,CAAA,EAAA,EAAQ,KAAA,CAAnB,KAAW,CAAX;;AACA,UAAM+H,OAAO,GAAG,CAAA,yBAAA,EAAA,WAAA,EAAA,qBAAA,EAAA,oBAAA,EAAA,gBAAA,EAAA,iBAAA,EAAA,mBAAA,EAAA,eAAA,EAAA,MAAA,EAAA,cAAA,EAAA,UAAA,EAAA,eAAA,EAAA,WAAA,EAAA,eAAA,EAAA,WAAA,EAAA,iBAAA,EAAA,aAAA,EAAA,kBAAA,EAAA,SAAA,EAAA,oBAAA,EAAA,uBAAA,EAAA,UAAA,EAAA,KAAA,EAAA,aAAA,EAAA,cAAA,EAAA,gBAAA,EAAA,gBAAA,EAAA,SAAA,EAFI,OAEJ,CAAhB,CAFoB,CAAA;;AAmCpB,WAAK,IAAL,IAAA,IAAA,KAAA,EAA0B;AACxB,YAAIA,OAAO,CAAPA,QAAAA,CAAJ,IAAIA,CAAJ,EAA4B,OAAO/H,KAAK,CAAZ,IAAY,CAAZ;AAC7B;;AAED,aAAA,KAAA;AAlciB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,YAAA,EAqcN,UAAA,IAAA,EAAU;AACrB,UAAIuH,IAAI,CAAJA,CAAI,CAAJA,KAAJ,GAAA,EAAqB,OAAA,KAAA;AAErB,UAAMS,MAAM,GAAGT,IAAI,CAAJA,KAAAA,CAAf,GAAeA,CAAf;AAEA,UAAIS,MAAM,CAANA,MAAAA,GAAJ,CAAA,EAAuB,OAAA,KAAA;AAEvB,aAAA,IAAA;AA5ciB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,gBAAA,EA+cF,UAAA,CAAA,EAAO;AAAA,UAAA,WAAA,GAOlB,KAAA,CAPkB,KAAA;AAAA,UAEpBhD,OAFoB,GAAA,WAAA,CAAA,OAAA;AAAA,UAGpBC,kBAHoB,GAAA,WAAA,CAAA,kBAAA;AAAA,UAIpBgD,qBAJoB,GAAA,WAAA,CAAA,qBAAA;AAAA,UAKpBzB,QALoB,GAAA,WAAA,CAAA,QAAA;AAAA,UAMpBvC,OANoB,GAAA,WAAA,CAAA,OAAA;AAAA,UAAA,YAAA,GAQA,KAAA,CARA,KAAA;AAAA,UAQduB,IARc,GAAA,YAAA,CAAA,IAAA;AAAA,UAQRI,GARQ,GAAA,YAAA,CAAA,GAAA;AAUtB,UAAMsC,QAAQ,GAAGvH,CAAC,CAAlB,MAAA;AAVsB,UAWd+E,YAXc,GAW0BwC,QAX1B,CAAA,YAAA;AAAA,UAWAvC,cAXA,GAW0BuC,QAX1B,CAAA,cAAA;AAAA,UAWgBhG,KAXhB,GAW0BgG,QAX1B,CAAA,KAAA;;AAatB,UAAA,QAAA,EAAc;AACZvH,QAAAA,CAAC,CAADA,OAAAA;AACA6F,QAAAA,QAAQ,CAARA,CAAQ,CAARA;AACD;;AAED,UAAA,qBAAA,EAA2ByB,qBAAqB,CAAC,KAAA,CAAtBA,gBAAsB,EAAD,CAArBA;;AAE3B,MAAA,KAAA,CAAA,QAAA,CAAc;AAAE/F,QAAAA,KAAK,EAALA;AAAF,OAAd;;AAEA,UAAA,cAAA;AACA,UAAA,SAAA;;AAEA,UAAI,KAAA,CAAA,UAAA,CAAJ,KAAI,CAAJ,EAA4B;AAC1BmD,QAAAA,cAAc,GAAdA,GAAAA;AACA8C,QAAAA,SAAS,GAATA,KAAAA;AAFF,OAAA,MAGO;AACL,YAAMC,UAAU,GAAGlG,KAAK,CAALA,KAAAA,CAAAA,CAAAA,EAAAA,YAAAA,EAAAA,KAAAA,CAAnB,gCAAmBA,CAAnB;AAIAiG,QAAAA,SAAS,GAAGC,UAAU,IAAIA,UAAU,CAACA,UAAU,CAAVA,MAAAA,GAAXA,CAAU,CAAVA,CAA1BD,IAA0BC,EAA1BD;AAEA9C,QAAAA,cAAc,GACX8C,SAAS,IAAI,MAAM,CAAN,IAAA,CAAA,OAAA,EAAA,IAAA,CAA0B,UAAA,CAAA,EAAA;AAAA,iBAAOE,CAAC,KAAKF,SAAS,CAAtB,CAAsB,CAAtB;AAAxC,SAAc,CAAbA,IADH9C,IAAAA;AAGD;AAED;AACJ;AACA;AACA;;;AACI,UAAI,CAAA,SAAA,IAAc8C,SAAS,CAATA,MAAAA,IAAlB,OAAA,EAA+C;AAC7C,QAAA,KAAA,CAAA,kBAAA;;AACA;AACD;;AAED,UAAM/C,WAAW,GAAG+C,SAAS,CAATA,KAAAA,CAjDE,CAiDFA,CAApB,CAjDsB,CAAA;;AAoDtB,UAAI,CAAJ,cAAA,EAAqB;;AAErB,UACElD,kBAAkB,IACjBW,GAAG,KAAHA,IAAAA,IAAgBJ,IAAI,KADrBP,IAAAA,IAAAA;AAGAkD,MAAAA,SAAS,CAATA,MAAAA,KAJF,CAAA,EAKE;AAAA,YAAA,oBAAA,GACuCK,mBAAmB,CAAA,QAAA,EAD1D,YAC0D,CAD1D;AAAA,YACcF,OADd,GAAA,oBAAA,CAAA,IAAA;AAAA,YAC4BC,MAD5B,GAAA,oBAAA,CAAA,GAAA;;AAMA,QAAA,KAAA,CAAA,QAAA,CAAc;AACZ;AACA/C,UAAAA,IAAI,EAFQ,OAAA;AAGZI,UAAAA,GAAG,EAAE2C,MAAM,GAAG,KAAA,CAAA,WAAA,CAATA,SAAAA,IAAuC;AAHhC,SAAd;AAKD;;AAED,MAAA,KAAA,CAAA,QAAA,CACE;AACEnD,QAAAA,WAAW,EADb,WAAA;AAEEC,QAAAA,cAAc,EAFhB,cAAA;AAGEK,QAAAA,YAAY,EAHd,YAAA;AAIEC,QAAAA,cAAc,EAAdA;AAJF,OADF,EAOE,YAAM;AACJ,YAAI;AACF,UAAA,KAAA,CAAA,sBAAA;AADF,SAAA,CAEE,OAAA,GAAA,EAAY;AACZ7B,UAAAA,YAAY,CAAC2E,GAAG,CAAhB3E,OAAY,CAAZA;AACD;AAZL,OAAA;AAvhBiB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,gBAAA,EAwiBF,UAAA,CAAA,EAAO;AAAA,UAAA,YAAA,GACsB,KAAA,CADtB,KAAA;AAAA,UACdmE,qBADc,GAAA,YAAA,CAAA,qBAAA;AAAA,UACS1G,QADT,GAAA,YAAA,CAAA,QAAA;AAGtB,UAAA,qBAAA,EAA2B0G,qBAAqB,CAAC,KAAA,CAAtBA,gBAAsB,EAAD,CAArBA;;AAE3B,UAAA,QAAA,EAAc;AACZtH,QAAAA,CAAC,CAADA,OAAAA;AACAY,QAAAA,QAAQ,CAARA,CAAQ,CAARA;AACD;AAhjBgB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,wBAAA,EAojBM,UAAA,CAAA,EAAO;AAAA,UAAA,YAAA,GACU,KAAA,CADV,KAAA;AAAA,UACtBuD,mBADsB,GAAA,YAAA,CAAA,mBAAA;AAAA,UACD4D,MADC,GAAA,YAAA,CAAA,MAAA,CAAA,CAAA;AAI9B;AACA;;AACA,UAAMC,EAAE,GAAGhI,CAAC,CAAZ,aAAA;;AACA,UACE,KAAA,CAAA,WAAA,IACAgI,EAAE,YADF,IAAA,IAEA,KAAA,CAAA,WAAA,CAAA,QAAA,CAHF,EAGE,CAHF,EAIE;AACA;AACD;;AAED,UAAA,mBAAA,EAAyB,KAAA,CAAA,kBAAA;;AAEzB,UAAA,MAAA,EAAY;AACVhI,QAAAA,CAAC,CAADA,OAAAA;AACA+H,QAAAA,MAAM,CAANA,CAAM,CAANA;AACD;AAxkBgB,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,EA2kBA,YAAA;AAAA,aAAM,KAAA,CAAN,kBAAM,EAAN;AA3kBA,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,iBAAA,EA6kBD,UAAA,IAAA,EAAU;AAAA,UAClBxD,YADkB,GACD,KAAA,CADC,KACD,CADC,YAAA;AAG1B,UAAI,CAAJ,YAAA,EAAmB;;AAEnB,UAAIA,YAAY,KAAhB,IAAA,EAA2B;AACzB0D,QAAAA,mBAAmB,CAAC,KAAA,CAAD,WAAA,EAAnBA,IAAmB,CAAnBA;AACA;AACD;;AAED,UAAI,OAAA,YAAA,KAAA,UAAA,IAAsC1D,YAAY,CAAZA,MAAAA,KAA1C,CAAA,EAAqE;AACnE,cAAM,IAAA,KAAA,CAAN,sHAAM,CAAN;AAGD;;AAEDA,MAAAA,YAAY,CAAC,KAAA,CAAD,WAAA,EAAZA,IAAY,CAAZA;AA7lBiB,KAAA,CAAA;;AAAA,QAAA,YAAA,GAG4B,KAAA,CAH5B,KAAA;AAAA,QAGTC,gBAHS,GAAA,YAAA,CAAA,gBAAA;AAAA,QAGSlB,QAHT,GAAA,YAAA,CAAA,OAAA;AAAA,QAGkB/B,MAHlB,GAAA,YAAA,CAAA,KAAA,CAAA,CAAA;AAMjB;;AAEA,IAAA,KAAA,CAAA,aAAA;;AAEA,QAAI,CAAJ,gBAAA,EAAuB;AACrB,YAAM,IAAA,KAAA,CAAN,sCAAM,CAAN;AACD;;AAED,QAAI,CAAJ,QAAA,EAAc;AACZ,YAAM,IAAA,KAAA,CAAN,6BAAM,CAAN;AACD;;AACD,IAAA,KAAA,CAAA,KAAA,GAAa;AACXkD,MAAAA,WAAW,EADA,EAAA;AAEXnE,MAAAA,SAAS,EAFE,IAAA;AAGXoE,MAAAA,cAAc,EAHH,IAAA;AAIXC,MAAAA,IAAI,EAJO,IAAA;AAKXC,MAAAA,WAAW,EALA,KAAA;AAMXC,MAAAA,IAAI,EANO,IAAA;AAOXC,MAAAA,aAAa,EAPF,CAAA;AAQXC,MAAAA,YAAY,EARD,CAAA;AASXC,MAAAA,cAAc,EATH,CAAA;AAUXC,MAAAA,GAAG,EAVQ,IAAA;AAWX1D,MAAAA,KAAK,EAAEA,MAAK,IAAI;AAXL,KAAb;AAjBiB,WAAA,KAAA;AA8BlB;;;;WAED,SAAA,iBAAA,GAAoB;AAAA,UAAA,MAAA,GAAA,IAAA;;AAClB2D,MAAAA,SAAS,CAATA,GAAAA,CAAc3F,SAAS,CAAvB2F,GAAAA,EAA6B,YAAA;AAAA,eAAM,MAAI,CAAV,kBAAM,EAAN;AAA7BA,OAAAA;AACAA,MAAAA,SAAS,CAATA,GAAAA,CAAc3F,SAAS,CAAvB2F,KAAAA,EAA+B,YAAA;AAAA,eAAM,MAAI,CAAV,QAAM,EAAN;AAA/BA,OAAAA;AAEA,UAAMJ,aAAa,GAAG,SAAS,CAAT,GAAA,CAAcvF,SAAS,CAAvB,KAAA,EAA+B,UAAA,CAAA,EAAA;AAAA,eACnD,MAAI,CAAJ,QAAA,CADmD,CACnD,CADmD;AAArD,OAAsB,CAAtB;AAIA,WAAA,QAAA,CAAc;AACZuF,QAAAA,aAAa,EAAbA;AADY,OAAd;AAIAI,MAAAA,SAAS,CAATA,WAAAA;AACD;;;WAED,SAAA,gCAAA,CAAA,SAAA,EAA4C;AAC1C,WAAA,OAAA,CAAA,SAAA;AACD;;;WAED,SAAA,oBAAA,GAAuB;AACrBA,MAAAA,SAAS,CAATA,UAAAA;AACAA,MAAAA,SAAS,CAATA,MAAAA,CAAiB,KAAA,KAAA,CAAjBA,aAAAA;AACD;;;;AA2UD,aAAA,OAAA,CAAA,IAAA,EAA4B;AAAA,UAAlB5B,OAAkB,GAAA,IAAA,CAAlBA,OAAkB;AAAA,UAAT/B,KAAS,GAAA,IAAA,CAATA,KAAS;AAAA,UACX2F,QADW,GACE,KADF,KACE,CADF,KAAA;AAAA,UAETC,UAFS,GAEM,KAFN,KAEM,CAFN,OAAA;AAI1B,UAAI5F,KAAK,KAALA,QAAAA,IAAsB,CAA1B,QAAA,EAAqC,KAAA,QAAA,CAAc;AAAEA,QAAAA,KAAK,EAALA;AAAF,OAAd;AACrC;AACJ;AACA;;AACI,UAAItB,MAAM,CAANA,IAAAA,CAAAA,OAAAA,EAAAA,IAAAA,CAAAA,EAAAA,MAAkCA,MAAM,CAANA,IAAAA,CAAAA,UAAAA,EAAAA,IAAAA,CAAtC,EAAsCA,CAAtC,EAAwE;AACtE,aAAA,aAAA;AACD;AACF;AAED;AACF;AACA;;;;WAgNE,SAAA,6BAAA,GAAgC;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UAAA,YAAA,GAU1B,KAV0B,KAAA;AAAA,UAE5BiI,eAF4B,GAAA,YAAA,CAAA,eAAA;AAAA,UAG5BC,iBAH4B,GAAA,YAAA,CAAA,iBAAA;AAAA,UAI5BC,aAJ4B,GAAA,YAAA,CAAA,aAAA;AAAA,UAK5B1H,aAL4B,GAAA,YAAA,CAAA,aAAA;AAAA,UAM5BC,SAN4B,GAAA,YAAA,CAAA,SAAA;AAAA,UAO5B0H,aAP4B,GAAA,YAAA,CAAA,aAAA;AAAA,UAQ5BxH,cAR4B,GAAA,YAAA,CAAA,cAAA;AAAA,UAAA,qBAAA,GAAA,YAAA,CAAA,cAAA;AAAA,UAS5ByH,cAT4B,GAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,IAAA,GAAA,qBAAA;AAAA,UAAA,YAAA,GAY4B,KAZ5B,KAAA;AAAA,UAYtBhI,SAZsB,GAAA,YAAA,CAAA,SAAA;AAAA,UAYXoE,cAZW,GAAA,YAAA,CAAA,cAAA;AAAA,UAYKE,WAZL,GAAA,YAAA,CAAA,WAAA;AAAA,UAYkBrD,KAZlB,GAAA,YAAA,CAAA,KAAA;;AAc9B,UAAML,YAAY,GAAG,KAArB,gBAAqB,EAArB;;AACA,UAAMqH,cAAc,GAAG,KAAvB,eAAuB,EAAvB;;AACA,UAAM9G,aAAa,GAAG,KAAtB,iBAAsB,EAAtB;;AAEA,UACE,CAACmD,WAAW,IAAZ,cAAA,KAAA,cAAA,IAEA,EAAEsD,eAAe,IAAIxD,cAAc,KAHrC,GAGE,CAHF,EAIE;AACA,eAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,UAAA,SAAS,EAAA,qBAAA,MAAA,CAAuByD,iBAAiB,IADnD,EACW,CADX;AAEE,UAAA,GAAG,EAAE,SAAA,GAAA,CAAA,KAAA,EAAS;AACZ,YAAA,MAAI,CAAJ,WAAA,GAAA,KAAA;AAHJ,WAAA;AAKE,UAAA,KAAK,EAAEC;AALT,SAAA,EAOG9H,SAAS,IAATA,cAAAA,IAAAA,aAAAA,IAAAA,aACC,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA;AACE,UAAA,SAAS,EADX,aAAA;AAEE,UAAA,SAAS,EAFX,SAAA;AAGE,UAAA,cAAc,EAAE,KAHlB,eAAA;AAIE,UAAA,eAAe,EAJjB,YAAA;AAKE,UAAA,gBAAgB,EALlB,aAAA;AAME,UAAA,aAAa,EANf,aAAA;AAOE,UAAA,SAAS,EAPX,SAAA;AAQE,UAAA,QAAQ,EAAE,KARZ,SAAA;AASE,UAAA,cAAc,EAThB,cAAA;AAUE,UAAA,KAAK,EAVP,KAAA;AAWE,UAAA,MAAM,EAAEiI;AAXV,SAAA,CARJ,CADF;AAyBD;;AACD,aAAA,IAAA;AACD;;;WAED,SAAA,MAAA,GAAS;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UAAA,YAAA,GAC0D,KAD1D,KAAA;AAAA,UACCzJ,SADD,GAAA,YAAA,CAAA,SAAA;AAAA,UACY0J,kBADZ,GAAA,YAAA,CAAA,kBAAA;AAAA,UACgCC,cADhC,GAAA,YAAA,CAAA,cAAA;AAAA,UACgDrJ,KADhD,GAAA,YAAA,CAAA,KAAA;AAAA,UAGDgF,OAHC,GAGW,KAHX,KAGW,CAHX,OAAA;AAAA,UAAA,YAAA,GAKwB,KALxB,KAAA;AAAA,UAKCQ,WALD,GAAA,YAAA,CAAA,WAAA;AAAA,UAKcrD,KALd,GAAA,YAAA,CAAA,KAAA;AAOP,UAAI,CAAC,KAAA,KAAA,CAAL,IAAA,EAAsB6C,OAAO,GAAPA,CAAAA;AAEtB,aAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,SAAS,EAAA,OAAA,MAAA,CAASQ,WAAW,KAAXA,IAAAA,GAAAA,cAAAA,GAAT,EAAA,EAAA,GAAA,EAAA,MAAA,CACP4D,kBAAkB,IAFtB,EACW,CADX;AAIE,QAAA,KAAK,EAAEC;AAJT,OAAA,EAMG,KANH,6BAMG,EANH,EAAA,aAOE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,QAAA,CAAA,EAAA,EACM,KADN,aACM,EADN,EAAA;AAEE,QAAA,SAAS,EAAA,iBAAA,MAAA,CAAmB3J,SAAS,IAFvC,EAEW,CAFX;AAGE,QAAA,OAAO,EAHT,OAAA;AAIE,QAAA,MAAM,EAAE,KAJV,sBAAA;AAKE,QAAA,QAAQ,EAAE,KALZ,cAAA;AAME,QAAA,OAAO,EAAE,KANX,sBAAA;AAOE,QAAA,OAAO,EAAE,KAAA,KAAA,CAPX,OAAA;AAQE,QAAA,QAAQ,EAAE,KARZ,gBAAA;AASE,QAAA,QAAQ,EAAE,KATZ,cAAA;AAUE,QAAA,GAAG,EAAE,SAAA,GAAA,CAAA,KAAA,EAAS;AACZ,cAAI,MAAI,CAAJ,KAAA,CAAJ,QAAA,EAAyB,MAAI,CAAJ,KAAA,CAAA,QAAA,CAAA,KAAA;AACzB,UAAA,MAAI,CAAJ,WAAA,GAAA,KAAA;AAZJ,SAAA;AAcE,QAAA,KAAK,EAdP,KAAA;AAeE,QAAA,KAAK,EAAEyC;AAfT,OAAA,EAgBM,KAAA,KAAA,CAxBV,uBAQI,CAAA,CAPF,CADF;AA4BD;;;;CAnsBG0C,CAAkCC,KAAK,CAACnF,SAAxCkF,C;;gBAAAA,yB,EAAAA,c,EACkB;AACpBE,EAAAA,mBAAmB,EADC,IAAA;AAEpBC,EAAAA,OAAO,EAFa,EAAA;AAGpBC,EAAAA,OAAO,EAHa,CAAA;AAIpBC,EAAAA,kBAAkB,EAJE,KAAA;AAKpBC,EAAAA,YAAY,EALQ,IAAA;AAMpBhD,EAAAA,KAAK,EAAE;AANa,C;;AAqsBxB0C,yBAAyB,CAAzBA,SAAAA,GAAsC;AACpCnF,EAAAA,SAAS,EAAE4J,SAAS,CADgB,MAAA;AAEpCvE,EAAAA,mBAAmB,EAAEuE,SAAS,CAFM,IAAA;AAGpCF,EAAAA,kBAAkB,EAAEE,SAAS,CAHO,MAAA;AAIpCD,EAAAA,cAAc,EAAEC,SAAS,CAJW,MAAA;AAKpCR,EAAAA,eAAe,EAAEQ,SAAS,CALU,IAAA;AAMpCP,EAAAA,iBAAiB,EAAEO,SAAS,CANQ,MAAA;AAOpCN,EAAAA,aAAa,EAAEM,SAAS,CAPY,MAAA;AAQpChI,EAAAA,aAAa,EAAEgI,SAAS,CARY,MAAA;AASpC/H,EAAAA,SAAS,EAAE+H,SAAS,CATgB,MAAA;AAUpCL,EAAAA,aAAa,EAAEK,SAAS,CAVY,MAAA;AAWpCC,EAAAA,SAAS,EAAED,SAAS,CAXgB,MAAA;AAYpCE,EAAAA,eAAe,EAAEF,SAAS,CAZU,MAAA;AAapCG,EAAAA,WAAW,EAAEH,SAAS,CAbc,MAAA;AAcpClE,EAAAA,gBAAgB,EAAEkE,SAAS,CAdS,WAAA;AAepCrE,EAAAA,OAAO,EAAEqE,SAAS,CAfkB,MAAA;AAgBpCX,EAAAA,MAAM,EAAEW,SAAS,CAhBmB,IAAA;AAiBpCpB,EAAAA,qBAAqB,EAAEoB,SAAS,CAjBI,IAAA;AAkBpC7C,EAAAA,QAAQ,EAAE6C,SAAS,CAlBiB,IAAA;AAmBpC9H,EAAAA,QAAQ,EAAE8H,SAAS,CAnBiB,IAAA;AAoBpCtJ,EAAAA,KAAK,EAAEsJ,SAAS,CApBoB,MAAA;AAqBpCJ,EAAAA,cAAc,EAAEI,SAAS,CArBW,WAAA;AAsBpCpF,EAAAA,OAAO,EAtB6B,iBAAA;AAuBpC/B,EAAAA,KAAK,EAAEmH,SAAS,CAACI;AAvBmB,CAAtC7E;ACjsBA;;;;;IAIa,MAAM,GAA0B,SAAhC,MAAgC,CAAC,KAAD,EAAM;AAE/C,MAAA,KAAK,GAMH,KAAK,CANF,KAAL;AAAA,MACA,IAAI,GAKF,KAAK,CALH,IADJ;AAAA,MAEA,EAAA,GAIE,KAAK,CAJkB,OAFzB;AAAA,MAEA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,YAAA;AAAM,WAAA,SAAA;AAAS,GAAlB,GAAkB,EAFzB;AAAA,MAGA,EAAA,GAGE,KAAK,CAHsB,WAH7B;AAAA,MAGA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,YAAA;AAAM,WAAA,SAAA;AAAS,GAAlB,GAAkB,EAH7B;AAAA,MAIA,EAAA,GAEE,KAAK,CAFS,KAJhB;AAAA,MAIA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,QAAH,GAAW,EAJhB;AAAA,MAKA,EAAA,GACE,KAAK,CADE,IALT;AAAA,MAKA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EALT;;AAQI,MAAA,EAAA,GAAoB,QAAQ,CAAC,KAAD,CAA5B;AAAA,MAAC,KAAK,GAAA,EAAA,CAAA,CAAA,CAAN;AAAA,MAAQ,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAhB;;AACA,MAAA,EAAA,GAAsB,QAAQ,CAAC,KAAD,CAA9B;AAAA,MAAC,MAAM,GAAA,EAAA,CAAA,CAAA,CAAP;AAAA,MAAS,SAAS,GAAA,EAAA,CAAA,CAAA,CAAlB;;AAEN,EAAA,SAAS,CAAC,YAAA;AACR,IAAA,QAAQ,CAAC,KAAD,CAAR;AACA,IAAA,SAAS,CAAC,KAAD,CAAT;AACD,GAHQ,EAGN,CAAC,KAAD,CAHM,CAAT;AAKA,MAAM,QAAQ,GAAG,CAAC,IAAI,IAAI,EAAT,EAAa,MAAb,CAAoB,CAApB,CAAjB;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,wCAAsC,KADnD;AAC0D,mBAC5C,QAFd;AAGE,IAAA,OAAO,EAAE,OAHX;AAIE,IAAA,WAAW,EAAE,WAJf;AAKE,IAAA,KAAK,EAAE;AACL,MAAA,SAAS,EAAK,IAAI,GAAA,IADb;AAEL,MAAA,QAAQ,EAAK,IAAI,GAAG,CAAP,GAAQ,IAFhB;AAGL,MAAA,MAAM,EAAK,IAAI,GAAA,IAHV;AAIL,MAAA,UAAU,EAAK,IAAI,GAAA,IAJd;AAKL,MAAA,KAAK,EAAK,IAAI,GAAA;AALT,KALT;AAYE,IAAA,KAAK,EAAE;AAZT,GAAA,EAcG,KAAK,IAAI,CAAC,KAAV,GACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,GAAG,EAAE,QADP;AAEE,IAAA,SAAS,EAAE,4BACT,MAAM,GAAG,iCAAH,GAAuC,EADpC,CAFb;AAII,mBACU,YALd;AAME,IAAA,OAAO,EAAE,mBAAA;AAAM,aAAA,QAAQ,CAAC,IAAD,CAAR;AAAc,KAN/B;AAOE,IAAA,MAAM,EAAE,kBAAA;AAAM,aAAA,SAAS,CAAC,IAAD,CAAT;AAAe,KAP/B;AAQE,IAAA,GAAG,EAAE,KARP;AASE,IAAA,KAAK,EAAE;AACL,MAAA,SAAS,EAAK,IAAI,GAAA,IADb;AAEL,MAAA,MAAM,EAAK,IAAI,GAAA,IAFV;AAGL,MAAA,SAAS,EAAE,OAHN;AAIL,MAAA,KAAK,EAAK,IAAI,GAAA;AAJT;AATT,GAAA,CADD,GAkBC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,2BADZ;AACuC,mBACzB;AAFd,GAAA,EAIG,QAJH,CAhCJ,CADF;AA0CF,C;;ACUO,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAS5B,KAT4B,EAU5B,MAV4B,EAUiC;;;AAE7D,UAAQ,MAAM,CAAC,IAAf;AACE,SAAK,sBAAL;AAA6B;AACnB,YAAA,OAAO,GAAK,MAAM,CAAX,OAAP;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,OAAO,EAAE,KADD;AAER,UAAA,OAAO,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,OAArB,CAFC;AAGR,UAAA,QAAQ,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,QAApB,CAHA;AAIR,UAAA,cAAc,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,cAApB,CAJN;AAKR,UAAA,IAAI,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,IAArB,CALI;AAMR,UAAA,YAAY,EAAE,OAAO,CAAC,KAAR,CAAc,aANpB;AAOR,UAAA,QAAQ,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,QAArB;AAPA,SADV,CAAA;AAUD;;AAED,SAAK,6BAAL;AAAoC;AAC1B,YAAA,OAAO,GAAK,MAAM,CAAX,OAAP;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,OAAO,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,OAArB,CADC;AAER,UAAA,QAAQ,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,QAApB,CAFA;AAGR,UAAA,cAAc,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,cAApB,CAHN;AAIR,UAAA,IAAI,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,IAArB,CAJI;AAKR,UAAA,MAAM,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,MAArB,CALE;AAMR,UAAA,YAAY,EAAE,OAAO,CAAC,KAAR,CAAc,aANpB;AAOR,UAAA,QAAQ,EAAA,OAAA,CAAA,EAAA,EAAO,OAAO,CAAC,KAAR,CAAc,QAArB;AAPA,SADV,CAAA;AAUD;;AAED,SAAK,WAAL;AAAkB;AACR,YAAA,OAAO,GAAK,MAAM,CAAX,OAAP;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,UAAA,MAAM,EAAE;AAAV,SAAjB,CAAA;AACD;;AAED,SAAK,kBAAL;AAAyB;AACf,YAAA,OAAO,GAAe,MAAM,CAArB,OAAP;AAAA,YAAS,QAAQ,GAAK,MAAM,CAAX,QAAjB;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,OAAO,EAAA,OADC;AAER,UAAA,WAAW,EAAE,KAFL;AAGR,UAAA,QAAQ,EAAA;AAHA,SADV,CAAA;AAMD;;AAED,SAAK,gBAAL;AAAuB;AACb,YAAA,WAAW,GAAK,MAAM,CAAX,WAAX;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,UAAA,WAAW,EAAA;AAAb,SAAjB,CAAA;AACD;;AAED,SAAK,yBAAL;AAAgC;AACtB,YAAA,OAAO,GAAe,MAAM,CAArB,OAAP;AAAA,YAAS,QAAQ,GAAK,MAAM,CAAX,QAAjB;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,QAAQ,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,QAApB,CADA;AAER,UAAA,cAAc,EAAA,cAAA,CAAM,OAAO,CAAC,KAAR,CAAc,cAApB,CAFN;AAGR,UAAA,cAAc,EAAE,QAAQ,GACpB,OAAA,CAAA,EAAA,EAAK,OAAO,CAAC,KAAR,CAAc,OAAnB,CAAA,CAA6B,QAA7B,KAA0C,EADtB,GAEpB,KAAK,CAAC;AALF,SADV,CAAA;AAQD;;AAED,SAAK,qBAAL;AAA4B;AAClB,YAAA,OAAO,GAAc,MAAM,CAApB,OAAP;AAAA,YAAS,OAAO,GAAK,MAAM,CAAX,OAAhB;AACR,YAAI,CAAC,KAAK,CAAC,MAAX,EAAmB,OAAO,KAAP;AACnB,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,MAAM,EACJ,CAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,EAAT,MAAgB,KAAK,CAAC,MAAN,CAAa,EAA7B,GACI,OAAO,CAAC,KAAR,CAAc,aAAd,CAA4B,OAA5B,CADJ,GAEI,KAAK,CAAC,MAJJ;AAKR,UAAA,cAAc,EAAE,CAAA,CAAA,EAAA,GAAA,KAAK,CAAC,MAAN,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,EAAd,IACZ,OAAA,CAAA,EAAA,EAAK,OAAO,CAAC,KAAR,CAAc,OAAnB,CAAA,CAA6B,KAAK,CAAC,MAAN,CAAa,EAA1C,KAAiD,EADrC,GAEZ;AAPI,SADV,CAAA;AAUD;;AAED,SAAK,YAAL;AAAmB;AACT,YAAA,OAAO,GAAc,MAAM,CAApB,OAAP;AAAA,YAAS,OAAO,GAAK,MAAM,CAAX,OAAhB;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,MAAM,EAAE,OADA;AAER,UAAA,cAAc,EAAE,OAAO,CAAC,EAAR,GACZ,OAAA,CAAA,EAAA,EAAK,OAAO,CAAC,KAAR,CAAc,OAAnB,CAAA,CAA6B,OAAO,CAAC,EAArC,KAA4C,EADhC,GAEZ;AAJI,SADV,CAAA;AAOD;;AAED,SAAK,oBAAL;AAA2B;AACzB,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,iBAAiB,EAAE;AADX,SADV,CAAA;AAID;;AAED,SAAK,wBAAL;AAA+B;AACrB,YAAA,aAAa,GAAqB,MAAM,CAA3B,aAAb;AAAA,YAAe,cAAc,GAAK,MAAM,CAAX,cAA7B;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,aAAa,EAAA,aADL;AAER,UAAA,iBAAiB,EAAE,KAFX;AAGR,UAAA,cAAc,EAAA;AAHN,SADV,CAAA;AAMD;;AAED,SAAK,aAAL;AAAoB;AAClB,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,MAAM,EAAE,IADA;AAER,UAAA,iBAAiB,EAAE,KAFX;AAGR,UAAA,cAAc,EAAE;AAHR,SADV,CAAA;AAMD;;AAED,SAAK,UAAL;AAAiB;AACP,YAAA,KAAK,GAAK,MAAM,CAAX,KAAL;AACR,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,UAAA,KAAK,EAAA;AAAP,SAAjB,CAAA;AACD;;AACD;AACE,aAAO,KAAP;AAtHJ;AAwHD,CApIM;;AAsIA,IAAM,YAAY,GAAG;AAC1B,EAAA,KAAK,EAAE,IADmB;AAE1B,EAAA,OAAO,EAAE,IAFiB;AAG1B,EAAA,OAAO,EAAE,IAHiB;AAI1B,EAAA,WAAW,EAAE,KAJa;AAK1B,EAAA,OAAO,EAAE,EALiB;AAM1B,EAAA,QAAQ,EAAE,EANgB;AAO1B,EAAA,cAAc,EAAE,EAPU;AAQ1B,EAAA,IAAI,EAAE,EARoB;AAS1B,EAAA,MAAM,EAAE,IATkB;AAU1B,EAAA,aAAa,EAAE,IAVW;AAW1B,EAAA,iBAAiB,EAAE,KAXO;AAY1B,EAAA,cAAc,EAAE,EAZU;AAa1B,EAAA,MAAM,EAAE,EAbkB;AAc1B,EAAA,YAAY,EAAE,CAdY;AAe1B,EAAA,QAAQ,EAAE;AAfgB,CAArB;AC/NA,IAAM,WAAW,GAAgB;AACtC,EAAA,MAAM,EAAE,IAD8B;AAEtC,EAAA,SAAS,EAAE,EAF2B;AAGtC,EAAA,WAAW,EAAE;AAHyB,CAAjC;AAMA,IAAM,WAAW,GAAgB;AACtC,EAAA,YAAY,EAAE,CADwB;AAEtC,EAAA,SAAS,EAAE,CAF2B;AAGtC,EAAA,SAAS,EAAE,EAH2B;AAItC,EAAA,IAAI,EAAE,EAJgC;AAKtC,EAAA,SAAS,EAAE;AAL2B,CAAjC;AAQA,IAAM,oBAAoB,GAAmB,C;AAEhD,EAAA,MAAM,EAAE,M;AACR,EAAA,EAAE,EAAE,M;AACJ,EAAA,IAAI,EAAE,M;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CAR6C,E;AAWhD,EAAA,MAAM,EAAE,S;AACR,EAAA,EAAE,EAAE,M;AACJ,EAAA,IAAI,EAAE,M;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CAjB6C,E;AAoBhD,EAAA,MAAM,EAAE,O;AACR,EAAA,EAAE,EAAE,M;AACJ,EAAA,IAAI,EAAE,M;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CA1B6C,E;AA6BhD,EAAA,MAAM,EAAE,c;AACR,EAAA,EAAE,EAAE,K;AACJ,EAAA,IAAI,EAAE,K;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CAnC6C,E;AAsChD,EAAA,MAAM,EAAE,W;AACR,EAAA,EAAE,EAAE,K;AACJ,EAAA,IAAI,EAAE,K;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CA5C6C,E;AA+ChD,EAAA,MAAM,EAAE,S;AACR,EAAA,EAAE,EAAE,O;AACJ,EAAA,IAAI,EAAE,O;AACN,EAAA,OAAO,EAAE,C;AACT,EAAA,OAAO,EAAE;GACN,W,GACA,W,CArD6C,CAA7C,C,CAyDP;;AACO,IAAM,oBAAoB,GAAG,SAAvB,oBAAuB,CAAC,IAAD,EAAiB;AAAK,SAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACrD,IADqD,CAAA,EACjD;AACP,IAAA,MAAM,EAAE;AADD,GADiD,CAAA;AAGxD,CAHK;;ICxCM,WAAW,GAAG,KAAK,CAAC,aAAN,CAAoB,EAApB,C;;IAEd,YAAY,GAAG,SAAf,YAAe,CAQ1B,EAR0B,EAa1B;MAJA,QAAQ,GAAA,EAAA,CAAA,Q;MACR,KAAK,GAAA,EAAA,CAAA,K;AAGA,SACL,KAAA,CAAA,aAAA,CAAC,WAAW,CAAC,QAAb,EAAqB;AAAC,IAAA,KAAK,EAAG;AAAT,GAArB,EACG,QADH,CADK;AAAA,C;;IAMM,cAAc,GAAG,SAAjB,cAAiB,GAAA;AAS5B,SAAC,UAAU,CAAC,WAAD,CAAX;AAAA,C;AAUF;;;;;;;IAKa,eAAe,GAAG,SAAlB,eAAkB,CAU7B,SAV6B,EAUI;AAEjC,MAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAC/B,KAD+B,EACmC;AAElE,QAAM,WAAW,GAAG,cAAc,EAAlC;AAEA,WAAO,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,OAAA,CAAA,EAAA,EAAM,KAAN,EAAuB,WAAvB,CAAV,CAAP;AACD,GAND;;AAOA,EAAA,wBAAwB,CAAC,WAAzB,GAAuC,oBAAkB,cAAc,CACrE,SADqE,CAAvE;AAGA,SAAO,wBAAP;AACF,C;;ICjFa,qBAAqB,GAAG,SAAxB,qBAAwB,CASnC,sBATmC,EAS+B;AAE5D,MAAA,EAAA,GAAsB,cAAc,EAApC;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,MAAM,GAAA,EAAA,CAAA,MAAjB;;AAEN,SAAO,UAAC,cAAD,EAAuD;AAC5D,QAAI,sBAAsB,IAAI,OAA9B,EAAuC;AACrC,aAAO,OAAO,CAAC,OAAR,CACL,sBAAsB,CAAC,OAAO,CAAC,GAAT,EAAc,cAAd,CADjB,CAAP;AAGD;;AACD,WAAO,MAAM,CAAC,aAAP,CAAqB,cAArB,CAAP;AACD,GAPD;AAQF,C;;AC9CO,IAAM,YAAY,GAAG,SAAf,YAAe,GAAA;AAC1B,MAAM,SAAS,GAAG,MAAM,CAAC,IAAD,CAAxB;AAEA,EAAA,SAAS,CACP,YAAA;AAAM,WAAA,YAAA;AACJ,MAAA,SAAS,CAAC,OAAV,GAAoB,KAApB;AACD,KAFK;AAEL,GAHM,EAIP,EAJO,CAAT;AAOA,SAAO,SAAP;AACD,CAXM;;ICQM,mBAAmB,GAAG,SAAtB,mBAAsB,CAGjC,eAHiC,EAIjC,eAJiC,EAII;AAErC,SAAA,WAAW,CACT,UAAC,KAAD,EAAiC,eAAjC,EAAoE;AAClE,QACG,CAAC,eAAD,IAAoB,CAAC,eAAtB,IACA,EAAE,KAAK,CAAC,MAAN,YAAwB,WAA1B,CAFF,EAGE;AACA;AACD;;AAED,QAAM,MAAM,GAAG,KAAK,CAAC,MAArB;AACA,QAAM,OAAO,GAAG,MAAM,CAAC,OAAP,CAAe,WAAf,EAAhB;AACA,QAAM,WAAW,GAAG,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,GAAzB,EAA8B,EAA9B,CAApB;;AAEA,QAAI,OAAO,KAAK,QAAZ,IAAwB,WAAW,CAAC,CAAD,CAAX,KAAmB,GAA/C,EAAoD;AAClD,UAAM,UAAQ,GAAG,WAAW,CAAC,OAAZ,CAAoB,GAApB,EAAyB,EAAzB,CAAjB;AACA,UAAM,IAAI,GAAG,eAAe,CAAC,IAAhB,CACX,UAAC,EAAD,EAAa;YAAV,EAAE,GAAA,EAAA,CAAA,E;YAAE,IAAI,GAAA,EAAA,CAAA,I;AAAO,eAAA,IAAI,KAAK,UAAT,IAAqB,EAAE,KAAK,UAA5B;AAAoC,OAD3C,CAAb;;AAIA,UACE,eAAe,IACf,OAAO,eAAP,KAA2B,UAD3B,IAEA,KAAK,CAAC,IAAN,KAAe,WAHjB,EAIE;AACA,QAAA,eAAe,CAAC,KAAD,EAAQ,IAAR,CAAf;AACD;;AAED,UACE,eAAe,IACf,KAAK,CAAC,IAAN,KAAe,OADf,IAEA,OAAO,eAAP,KAA2B,UAH7B,EAIE;AACA,QAAA,eAAe,CAAC,KAAD,EAAQ,IAAR,CAAf;AACD;AACF;AACF,GAnCQ,EAoCT,CAAC,eAAD,EAAkB,eAAlB,CApCS,CAAX;AAAA,C;;ACdF,IAAM,YAAY,GAAa,SAAzB,YAAyB,GAAA;AAAM,SACnC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,CAFF,CAFF,CADmC;AAQpC,CARD;;AAUA,IAAM,yBAAyB,GAAa,SAAtC,yBAAsC,GAAA;AAAM,SAChD,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CADF,EAEE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CAFF,EAGE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CAHF,CADgD;AAMjD,CAND;AAQA;;;;;;IAIa,eAAe,GAAG,KAAK,CAAC,IAAN,CAC7B,yBAD6B,C;ACf/B;;;;;;AAKA,IAAM,+BAA+B,GAAyC,SAAxE,+BAAwE,CAAC,EAAD,EAE7E;MADC,KAAK,GAAA,EAAA,CAAA,K;AAEG,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAI,CAAC,KAAL,EAAY,OAAO,IAAP;AAEZ,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,IAAA,EAAM,CAAC,CAAC,2BAAD,EAA8B;AAAE,IAAA,YAAY,EAAE,KAAK,CAAC;AAAtB,GAA9B,CAAP,CADF;AAGD,CAVD;;IAYa,qBAAqB,GAAG,KAAK,CAAC,IAAN,CACnC,+BADmC,EAEnC,UAAC,SAAD,EAAY,SAAZ,EAAqB;AAAA,MAAA,EAAA,EAAA,EAAA;;AACnB,SAAA,CAAA,CAAA,EAAA,GAAA,SAAS,CAAC,KAAV,MAAe,IAAf,IAAe,EAAA,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAe,EAAA,CAAE,OAAjB,OAAwB,CAAA,EAAA,GAAK,SAAS,CAAC,KAAf,MAAoB,IAApB,IAAoB,EAAA,KAAA,KAAA,CAApB,GAAoB,KAAA,CAApB,GAAoB,EAAA,CAAE,OAA9C,CAAA;AAAqD,CAHpB,C;;ACfrC,IAAM,0BAA0B,GAAoC,SAA9D,0BAA8D,CAAC,KAAD,EAAM;AAChE,MAAA,EAAA,GAAiC,KAAK,CAArB,KAAjB;AAAA,MAAA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,SAAH,GAAY,EAAjB;AAAA,MAAmB,EAAA,GAAc,KAAK,CAAV,IAA5B;AAAA,MAAmB,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,iCAA+B,KAD5C;AACmD,mBACrC,2BAFd;AAGE,IAAA,KAAK,EAAE;AAAE,MAAA,MAAM,EAAE,IAAV;AAAgB,MAAA,KAAK,EAAE;AAAvB;AAHT,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAE,IADV;AAEE,IAAA,OAAO,EAAE,WAFX;AAGE,IAAA,KAAK,EAAE,IAHT;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA;AAAgB,IAAA,EAAE,EAAC,GAAnB;AAAuB,IAAA,EAAE,EAAC,KAA1B;AAAgC,IAAA,EAAE,EAAC,KAAnC;AAAyC,IAAA,EAAE,EAAC,IAA5C;AAAiD,IAAA,EAAE,EAAC;AAApD,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,MAAM,EAAC,IAAb;AAAkB,IAAA,SAAS,EAAC,MAA5B;AAAmC,IAAA,WAAW,EAAC;AAA/C,GAAA,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,mBACc,0BADd;AAEE,IAAA,MAAM,EAAC,MAFT;AAGE,IAAA,SAAS,EAAE,KAHb;AAIE,IAAA,WAAW,EAAC,GAJd;AAKE,IAAA,KAAK,EAAE;AAAE,MAAA,SAAS,EAAE;AAAb;AALT,GAAA,CAFF,CADF,CANF,EAkBE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,wKADJ;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,QAAQ,EAAC;AAHX,GAAA,CAlBF,CALF,CADF;AAgCD,CAnCD;AAqCA;;;;;;IAIa,gBAAgB,GAAG,KAAK,CAAC,IAAN,CAC9B,0BAD8B,EAE9B,UAAC,SAAD,EAAY,SAAZ,EAAqB;AACnB,SAAA,SAAS,CAAC,KAAV,KAAoB,SAAS,CAAC,KAA9B,IAAuC,SAAS,CAAC,IAAV,KAAmB,SAAS,CAAC,IAApE;AAAwE,CAH5C,C;ICgJnB,cAAc,GAAG,KAAK,CAAC,aAAN,CAC5B,EAD4B,C;;IAIjB,eAAe,GAAG,SAAlB,eAAkB,CAQ7B,EAR6B,EAa7B;MAJA,QAAQ,GAAA,EAAA,CAAA,Q;MACR,KAAK,GAAA,EAAA,CAAA,K;AAGA,SACL,KAAA,CAAA,aAAA,CAAC,cAAc,CAAC,QAAhB,EAAwB;AAAC,IAAA,KAAK,EAAG;AAAT,GAAxB,EACG,QADH,CADK;AAAA,C;;IAMM,iBAAiB,GAAG,SAApB,iBAAoB,GAAA;AAS/B,SAAC,UAAU,CAAC,cAAD,CAAX;AAAA,C;AAUF;;;;;;;IAKa,kBAAkB,GAAG,SAArB,kBAAqB,CAUhC,SAVgC,EAUC;AAEjC,MAAM,2BAA2B,GAAG,SAA9B,2BAA8B,CAClC,KADkC,EACmC;AAErE,QAAM,cAAc,GAAG,iBAAiB,EAAxC;AAEA,WAAO,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,OAAA,CAAA,EAAA,EAAM,KAAN,EAAuB,cAAvB,CAAV,CAAP;AACD,GAND;;AAQA,EAAA,2BAA2B,CAAC,WAA5B,GAA0C,CACxC,SAAS,CAAC,WAAV,IACA,SAAS,CAAC,IADV,IAEA,WAHwC,EAIxC,OAJwC,CAIhC,MAJgC,EAIxB,EAJwB,CAA1C;AAMA,SAAO,2BAAP;AACF,C;;ICrPa,mBAAmB,GAAG,2L;;SAGnB,gB,CASd,O,EAAmD;AATrD,MAAA,KAAA,GAAA,IAAA;;AAWQ,MAAA,EAAA,GAA4C,iBAAiB,EAA7D;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,aAAa,GAAA,EAAA,CAAA,aAAxB;AAAA,MAA0B,aAAa,GAAA,EAAA,CAAA,aAAvC;;AAUN,SAAO,UAAO,UAAP,EAAmB,KAAnB,EAA0B,KAA1B,EAA+B;AAAA,WAAA,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACpC,gBAAI,KAAJ,EAAW,KAAK,CAAC,cAAN;;AAEX,gBAAI,CAAC,OAAD,IAAY,CAAC,aAAb,IAA8B,CAAC,aAA/B,IAAgD,CAAC,OAArD,EAA8D;AAC5D,cAAA,OAAO,CAAC,IAAR,CAAa,mBAAb;AACA,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;AAEK,YAAA,SAAS,GAAG,OAAO,CAAC,EAApB;AACF,YAAA,QAAQ,GAAa,EAArB,C;;AAGJ,gBAAI,OAAO,UAAP,KAAsB,QAA1B,EAAoC;AAClC,cAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,cAAA,QAAQ,GAAA,OAAA,CAAA,EAAA,EAAQ,UAAR,CAAR;AACD;;iBAEG,S,EAAA,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;AACW,mBAAA,CAAA;AAAA;AAAA,cAAM,OAAO,CAAC,UAAR,CAAmB,SAAnB,EAA8B,QAA9B,CAAN,CAAA;;;AAAP,YAAA,IAAI,GAAG,EAAA,CAAA,IAAA,EAAP;;AAEN,gBAAI,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,OAAV,EAAmB;AACjB,cAAA,aAAa,CAAC,IAAI,CAAC,OAAN,CAAb;AACD,aAFD,MAEO;AACL,cAAA,aAAa,CAAC,OAAD,CAAb;AACD;;;;;;;;;;KAzBiC,CAAA;AA2BrC,GA3BD;AA4BF;;ACrEA,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAAC,KAAD,EAAc;AACnC,MAAI,KAAK,GAAG,GAAZ,EAAiB,OAAO;AAAE,IAAA,MAAM,EAAE,QAAV;AAAoB,IAAA,KAAK,EAAA;AAAzB,GAAP;AACjB,MAAI,KAAK,GAAG,IAAZ,EAAkB,OAAO;AAAE,IAAA,MAAM,EAAE,QAAV;AAAoB,IAAA,KAAK,EAAA;AAAzB,GAAP;AAClB,SAAO;AAAE,IAAA,MAAM,EAAE,MAAV;AAAkB,IAAA,KAAK,EAAA;AAAvB,GAAP;AACD,CAJD;;IAMa,aAAa,GAAG,SAAhB,aAAgB,GAAA;AACrB,MAAA,EAAA,GAA8B,QAAQ,CAC1C,cAAc,CAAC,MAAM,CAAC,UAAR,CAD4B,CAAtC;AAAA,MAAC,UAAU,GAAA,EAAA,CAAA,CAAA,CAAX;AAAA,MAAa,aAAa,GAAA,EAAA,CAAA,CAAA,CAA1B;;AAIN,EAAA,SAAS,CAAC,YAAA;AACR,QAAM,aAAa,GAAG,QAAQ,CAC5B,YAAA;AAAM,aAAA,aAAa,CAAC,cAAc,CAAC,MAAM,CAAC,UAAR,CAAf,CAAb;AAAgD,KAD1B,EAE5B,GAF4B,CAA9B;AAKA,IAAA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,aAAlC;AACA,WAAO,YAAA;AAAM,aAAA,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,aAArC,CAAA;AAAmD,KAAhE;AACD,GARQ,EAQN,EARM,CAAT;AAUA,SAAO,UAAP;AACF,C;;ICba,gBAAgB,GAAG,SAAnB,gBAAmB,CAS9B,OAT8B,EASqB;AAE7C,MAAA,EAAA,GAA4B,iBAAiB,EAA7C;AAAA,MAAE,MAAM,GAAA,EAAA,CAAA,MAAR;AAAA,MAAU,aAAa,GAAA,EAAA,CAAA,aAAvB;;AAUN,SAAO,UAAO,KAAP,EAAY;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACjB,YAAA,KAAK,CAAC,cAAN;;AACA,gBAAI,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,EAAV,KAAgB,CAAC,MAAjB,IAA2B,CAAC,aAAhC,EAA+C;AAC7C,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;AAEY,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,aAAP,CAAqB,OAAO,CAAC,EAA7B,CAAN,CAAA;;;AAAP,YAAA,IAAI,GAAG,EAAA,CAAA,IAAA,EAAP;AACN,YAAA,aAAa,CAAC,IAAI,CAAC,OAAN,CAAb;;;;;;KAPiB,CAAA;AAQlB,GARD;AASF,C;;ICrCa,cAAc,GAAG,SAAjB,cAAiB,CAC5B,kBAD4B,EAE5B,gBAF4B,EAG5B,yBAH4B,EAG+C;AAF3E,MAAA,kBAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,kBAAA,GAAA,KAAA;AAA0B;;AAIpB,MAAA,EAAA,GAAwB,QAAQ,CAAC,kBAAD,CAAhC;AAAA,MAAC,OAAO,GAAA,EAAA,CAAA,CAAA,CAAR;AAAA,MAAU,UAAU,GAAA,EAAA,CAAA,CAAA,CAApB;;AAEN,MAAM,OAAO,GACX,gBAAgB,IACf,UAAC,KAAD,EAAM;AACL,QAAI,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,cAAX,EAA2B;AACzB,MAAA,KAAK,CAAC,cAAN;AACD;;AACD,IAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAPH;;AASA,MAAM,SAAS,GACb,yBAAyB,IACxB,UAAC,KAAD,EAAM;AACL,QAAI,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,cAAX,EAA2B;AACzB,MAAA,KAAK,CAAC,cAAN;AACD;;AACD,IAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAPH;;AASA,SAAO;AAAE,IAAA,SAAS,EAAA,SAAX;AAAa,IAAA,OAAO,EAAA,OAApB;AAAsB,IAAA,OAAO,EAAA;AAA7B,GAAP;AACF,C;ACXA;;;;;;IAIa,qBAAqB,GAAG,SAAxB,qBAAwB,CACnC,IADmC,EAEnC,IAFmC,EAE5B;AAEP,MAAI,CAAC,IAAD,IAAS,OAAO,IAAP,KAAgB,UAA7B,EAAyC,OAAO,IAAP,CAFlC,C;;;AAMP,MAAI,EAAE,IAAI,YAAY,KAAlB,CAAJ,EAA8B;;AAE5B,IAAA,IAAI,GAAG,CAAC,IAAD,CAAP;AACD;;AAED,MAAM,WAAW,GAAG,IAAI,CAAA,KAAJ,CAAI,KAAA,CAAJ,EAAQ,IAAR,CAApB;AAEA,MAAI,OAAO,WAAP,KAAuB,QAA3B,EAAqC,OAAO,IAAP;AAErC,SAAO,WAAP;AACF,C;AAEA;;;;;IAGa,WAAW,GAAG,SAAd,WAAc,CASzB,OATyB,EAUzB,KAVyB,EAUP;AAElB,MAAI,CAAC,KAAD,IAAU,CAAC,OAAf,EAAwB,OAAO,KAAP;AAExB,MAAM,SAAS,GAAG,KAAK,CAAC,MAAN,CAAa,UAAC,EAAD,EAAG;AAAA,QAAA,EAAA;;AAAK,WAAA,EAAE,CAAC,MAAH,CAAU,EAAV,MAAY,CAAA,EAAA,GAAK,OAAO,CAAC,IAAb,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,EAA/B,CAAA;AAAiC,GAAtD,CAAlB;AACA,SAAO,CAAC,CAAC,SAAS,CAAC,MAAnB;AACF,C;;IAEa,eAAe,GAAG;AAC7B,EAAA,MAAM,EAAE,QADqB;AAE7B,EAAA,IAAI,EAAE,MAFuB;AAG7B,EAAA,IAAI,EAAE,MAHuB;AAI7B,EAAA,IAAI,EAAE,MAJuB;AAK7B,EAAA,GAAG,EAAE,KALwB;AAM7B,EAAA,KAAK,EAAE,OANsB;AAO7B,EAAA,KAAK,EAAE;AAPsB,C;IAclB,qBAAqB,GAAmB;AACnD,EAAA,QAAQ,EAAE;AACR,IAAA,KAAK,EAAE,IADC;AAER,IAAA,SAAS,EAAE,KAFH;AAGR,IAAA,cAAc,EAAE,KAHR;AAIR,IAAA,iBAAiB,EAAE,IAJX;AAKR,IAAA,KAAK,EAAE,KALC;AAMR,IAAA,MAAM,EAAE,KANA;AAOR,IAAA,SAAS,EAAE,IAPH;AAQR,IAAA,KAAK,EAAE,KARC;AASR,IAAA,IAAI,EAAE;AATE,GADyC;AAYnD,EAAA,MAAM,EAAE;AACN,IAAA,KAAK,EAAE,IADD;AAEN,IAAA,SAAS,EAAE,KAFL;AAGN,IAAA,cAAc,EAAE,KAHV;AAIN,IAAA,iBAAiB,EAAE,IAJb;AAKN,IAAA,KAAK,EAAE,KALD;AAMN,IAAA,MAAM,EAAE,KANF;AAON,IAAA,SAAS,EAAE,IAPL;AAQN,IAAA,KAAK,EAAE,KARD;AASN,IAAA,IAAI,EAAE;AATA,GAZ2C;AAuBnD,EAAA,UAAU,EAAE;AACV,IAAA,KAAK,EAAE,IADG;AAEV,IAAA,SAAS,EAAE,KAFD;AAGV,IAAA,cAAc,EAAE,KAHN;AAIV,IAAA,iBAAiB,EAAE,IAJT;AAKV,IAAA,KAAK,EAAE,KALG;AAMV,IAAA,MAAM,EAAE,KANE;AAOV,IAAA,SAAS,EAAE,IAPD;AAQV,IAAA,KAAK,EAAE,IARG;AASV,IAAA,IAAI,EAAE;AATI,GAvBuC;AAkCnD,EAAA,SAAS,EAAE;AACT,IAAA,KAAK,EAAE,IADE;AAET,IAAA,SAAS,EAAE,KAFF;AAGT,IAAA,cAAc,EAAE,IAHP;AAIT,IAAA,iBAAiB,EAAE,IAJV;AAKT,IAAA,KAAK,EAAE,KALE;AAMT,IAAA,MAAM,EAAE,IANC;AAOT,IAAA,SAAS,EAAE,IAPF;AAQT,IAAA,KAAK,EAAE,IARE;AAST,IAAA,IAAI,EAAE;AATG,GAlCwC;AA6CnD,EAAA,IAAI,EAAE;AACJ,IAAA,KAAK,EAAE,IADH;AAEJ,IAAA,SAAS,EAAE,KAFP;AAGJ,IAAA,cAAc,EAAE,IAHZ;AAIJ,IAAA,iBAAiB,EAAE,IAJf;AAKJ,IAAA,KAAK,EAAE,KALH;AAMJ,IAAA,MAAM,EAAE,IANJ;AAOJ,IAAA,SAAS,EAAE,IAPP;AAQJ,IAAA,KAAK,EAAE,IARH;AASJ,IAAA,IAAI,EAAE;AATF;AA7C6C,C;;IAoExC,iBAAiB,GAAG,SAApB,iBAAoB,CAC/B,OAD+B,EAE/B,EAF+B,EAUhB;MAPb,SAAS,GAAA,EAAA,CAAA,S;MACT,OAAO,GAAA,EAAA,CAAA,O;MACP,OAAO,GAAA,EAAA,CAAA,O;MACP,OAAO,GAAA,EAAA,CAAA,O;MACP,MAAM,GAAA,EAAA,CAAA,M;MACN,QAAQ,GAAA,EAAA,CAAA,Q;MACR,QAAQ,GAAA,EAAA,CAAA,Q;AAGV,MAAM,6BAA6B,GAAG,EAAtC;AACA,MAAI,cAAc,GAAG,EAArB;;AAEA,MAAI,OAAO,IAAI,OAAO,OAAP,KAAmB,SAAlC,EAA6C;;AAE3C,IAAA,cAAc,GAAG,MAAM,CAAC,IAAP,CAAY,eAAZ,CAAjB;AACD,GAHD,MAGO,IAAI,OAAO,IAAI,OAAO,CAAC,MAAR,GAAiB,CAAhC,EAAmC;AACxC,IAAA,cAAc,GAAA,cAAA,CAAO,OAAP,CAAd;AACD,GAFM,MAEA;AACL,WAAO,EAAP;AACD;;AAED,MAAI,SAAS,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,MAAvC,IAAiD,CAAC,CAAnE,EAAsE;AACpE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,MAAnD;AACD;;AAED,MAAI,OAAO,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAA/D,EAAkE;AAChE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,IAAnD;AACD;;AAED,MAAI,OAAO,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAA/D,EAAkE;AAChE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,IAAnD;AACD;;AAED,MAAI,OAAO,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAA/D,EAAkE;AAChE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,IAAnD;AACD;;AAED,MAAI,MAAM,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,GAAvC,IAA8C,CAAC,CAA7D,EAAgE;AAC9D,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,GAAnD;AACD;;AAED,MAAI,QAAQ,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,KAAvC,IAAgD,CAAC,CAAjE,EAAoE;AAClE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,KAAnD;AACD;;AAED,MAAI,QAAQ,IAAI,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,KAAvC,IAAgD,CAAC,CAAjE,EAAoE;AAClE,IAAA,6BAA6B,CAAC,IAA9B,CAAmC,eAAe,CAAC,KAAnD;AACD;;AAED,SAAO,6BAAP;AACF,C;;IAEa,qBAAqB,GAAG,SAAxB,qBAAwB,CAAC,OAAD,EAA6B;AAChE,MAAI,OAAO,CAAC,MAAR,KAAmB,CAAvB,EAA0B;AACxB,WAAO,KAAP;AACD;;AAED,MACE,OAAO,CAAC,MAAR,KAAmB,CAAnB,KACC,OAAO,CAAC,QAAR,CAAiB,OAAjB,KAA6B,OAAO,CAAC,QAAR,CAAiB,OAAjB,CAD9B,CADF,EAGE;AACA,WAAO,KAAP;AACD;;AAED,MACE,OAAO,CAAC,MAAR,KAAmB,CAAnB,IACA,OAAO,CAAC,QAAR,CAAiB,OAAjB,CADA,IAEA,OAAO,CAAC,QAAR,CAAiB,OAAjB,CAHF,EAIE;AACA,WAAO,KAAP;AACD;;AAED,SAAO,IAAP;AACF,C;;IAEa,oBAAoB,GAAG,SAAvB,oBAAuB,CASlC,SATkC,EAUlC,SAVkC,EAUiB;;;AAE3C,MAAS,WAAW,GAAK,SAAS,CAAd,OAApB;AACA,MAAS,WAAW,GAAK,SAAS,CAAd,OAApB;AAER,MAAM,gBAAgB,GACpB,WAAW,CAAC,UAAZ,KAA2B,WAAW,CAAC,UAAvC,IACA,CAAA,CAAA,EAAA,GAAA,WAAW,CAAC,gBAAZ,MAA4B,IAA5B,IAA4B,EAAA,KAAA,KAAA,CAA5B,GAA4B,KAAA,CAA5B,GAA4B,EAAA,CAAE,MAA9B,OAAoC,CAAA,EAAA,GAClC,WAAW,CAAC,gBADsB,MACN,IADM,IACN,EAAA,KAAA,KAAA,CADM,GACN,KAAA,CADM,GACN,EAAA,CAAE,MADhC,CADA,IAGA,CAAA,CAAA,EAAA,GAAA,WAAW,CAAC,aAAZ,MAAyB,IAAzB,IAAyB,EAAA,KAAA,KAAA,CAAzB,GAAyB,KAAA,CAAzB,GAAyB,EAAA,CAAE,MAA3B,OAAiC,CAAA,EAAA,GAAK,WAAW,CAAC,aAAjB,MAA8B,IAA9B,IAA8B,EAAA,KAAA,KAAA,CAA9B,GAA8B,KAAA,CAA9B,GAA8B,EAAA,CAAE,MAAjE,CAHA,IAIA,WAAW,CAAC,MAAZ,KAAuB,WAAW,CAAC,MAJnC,IAKA,WAAW,CAAC,WAAZ,KAA4B,WAAW,CAAC,WALxC,IAMA,WAAW,CAAC,MAAZ,KAAuB,WAAW,CAAC,MANnC,IAOA,WAAW,CAAC,IAAZ,KAAqB,WAAW,CAAC,IAPjC,IAQA,WAAW,CAAC,IAAZ,KAAqB,WAAW,CAAC,IARjC,IASA,WAAW,CAAC,UAAZ,KAA2B,WAAW,CAAC,UAVzC;AAYA,MAAI,CAAC,gBAAL,EAAuB,OAAO,KAAP;AAEvB,MAAM,cAAc,GAClB,SAAS,CAAC,SAAS,CAAC,MAAX,EAAmB,SAAS,CAAC,MAA7B,CAAT,IACA,SAAS,CAAC,SAAS,CAAC,WAAX,EAAwB,SAAS,CAAC,WAAlC,CADT,IACuD;AACvD,EAAA,SAAS,CAAC,SAAS,CAAC,KAAX,EAAkB,SAAS,CAAC,KAA5B,CAFT,IAGA,SAAS,CAAC,SAAS,CAAC,cAAX,EAA2B,SAAS,CAAC,cAArC,CAJX;AAMA,MAAI,CAAC,cAAL,EAAqB,OAAO,KAAP;AAErB,SACE,SAAS,CAAC,eAAV,KAA8B,SAAS,CAAC,eAD1C,CACyD;AADzD;AAGF,C;;IAEa,sBAAsB,GAAG,SAAzB,sBAAyB,CASpC,SAToC,EAYpC,SAZoC,EAcnC;;;AAGC,MAAgB,kBAAkB,GAEhC,SAAS,CAFuB,cAAlC;AAAA,MACS,WAAW,GAClB,SAAS,CADS,OADpB;AAIA,MAAgB,kBAAkB,GAEhC,SAAS,CAFuB,cAAlC;AAAA,MACS,WAAW,GAClB,SAAS,CADS,OADpB;AAIF,MAAI,SAAS,CAAC,OAAV,KAAsB,SAAS,CAAC,OAApC,EAA6C,OAAO,KAAP;;AAE7C,MAAI,SAAS,CAAC,qBAAV,KAAoC,SAAS,CAAC,qBAAlD,EAAyE;AACvE,WAAO,KAAP;AACD;;AAED,MACE,CAAC,WAAW,CAAC,EAAZ,KAAmB,kBAAnB,IACC,WAAW,CAAC,EAAZ,KAAmB,kBADrB,KAEA,kBAAkB,KAAK,kBAHzB,EAIE;AACA,WAAO,KAAP;AACD;;AAED,MAAM,gBAAgB,GACpB,WAAW,CAAC,UAAZ,KAA2B,WAAW,CAAC,UAAvC,IACA,CAAA,CAAA,EAAA,GAAA,WAAW,CAAC,gBAAZ,MAA4B,IAA5B,IAA4B,EAAA,KAAA,KAAA,CAA5B,GAA4B,KAAA,CAA5B,GAA4B,EAAA,CAAE,MAA9B,OAAoC,CAAA,EAAA,GAClC,WAAW,CAAC,gBADsB,MACN,IADM,IACN,EAAA,KAAA,KAAA,CADM,GACN,KAAA,CADM,GACN,EAAA,CAAE,MADhC,CADA,IAGA,CAAA,CAAA,EAAA,GAAA,WAAW,CAAC,aAAZ,MAAyB,IAAzB,IAAyB,EAAA,KAAA,KAAA,CAAzB,GAAyB,KAAA,CAAzB,GAAyB,EAAA,CAAE,MAA3B,OAAiC,CAAA,EAAA,GAAK,WAAW,CAAC,aAAjB,MAA8B,IAA9B,IAA8B,EAAA,KAAA,KAAA,CAA9B,GAA8B,KAAA,CAA9B,GAA8B,EAAA,CAAE,MAAjE,CAHA,IAIA,WAAW,CAAC,MAAZ,KAAuB,WAAW,CAAC,MAJnC,IAKA,WAAW,CAAC,WAAZ,KAA4B,WAAW,CAAC,WALxC,IAMA,WAAW,CAAC,MAAZ,KAAuB,WAAW,CAAC,MANnC,IAOA,WAAW,CAAC,IAAZ,KAAqB,WAAW,CAAC,IAPjC,IAQA,WAAW,CAAC,IAAZ,KAAqB,WAAW,CAAC,IARjC,IASA,WAAW,CAAC,UAAZ,KAA2B,WAAW,CAAC,UAVzC;AAYA,MAAI,CAAC,gBAAL,EAAuB,OAAO,KAAP;AAEvB,SAAO,IAAP;AACF,C;;IAEa,mBAAmB,GAAG,SAAtB,mBAAsB,CASjC,OATiC,EASkB;AAChD,SAAA,CAAC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,gBAAV,CAAD,IAA+B,CAAC,CAAC,OAAO,CAAC,gBAAR,CAAyB,MAA1D;AAAgE,C;;IAExD,qBAAqB,GAAG,SAAxB,qBAAwB,CASnC,OATmC,EASgB;AAChD,SAAA,CAAC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,WAAV,CAAD,IAA0B,CAAC,CAAC,OAAO,CAAC,WAAR,CAAoB,MAAhD;AAAsD,C;;IAE9C,SAAS,GAAG,SAAZ,SAAY,CAQvB,OARuB,EAQ0B;AAEjD,MAAI,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,WAAV,CAAJ,EAA2B;AACzB,WAAO,EAAP;AACD;;AACD,SAAO,OAAO,CAAC,WAAR,CAAoB,MAApB,CAA2B,UAAC,IAAD,EAAK;AAAK,WAAA,IAAI,CAAC,IAAL,KAAc,OAAd;AAAqB,GAA1D,CAAP;AACF,C;;IAEa,sBAAsB,GAAG,SAAzB,sBAAyB,CAQpC,OARoC,EAQa;AAEjD,MAAI,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,WAAV,CAAJ,EAA2B;AACzB,WAAO,EAAP;AACD;;AACD,SAAO,OAAO,CAAC,WAAR,CAAoB,MAApB,CAA2B,UAAC,IAAD,EAAK;AAAK,WAAA,IAAI,CAAC,IAAL,KAAc,OAAd;AAAqB,GAA1D,CAAP;AACF,C;;IAEa,oBAAoB,GAAG,SAAvB,oBAAuB,CASlC,KATkC,EAUlC,CAVkC,EAWlC,MAXkC,EAWY;AAE9C,MAAI,MAAM,GAAG,EAAb;;AAEA,MAAI,CAAC,CAAL,EAAQ;AACN,UAAM,IAAI,KAAJ,CACJ,8EADI,CAAN;AAGD,GAR6C,C;;;AAW9C,MAAM,UAAU,GAAG,KAAK,CACrB,MADgB,CACT,UAAC,IAAD,EAAK;AAAK,WAAA,IAAI,KAAI,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IAAZ,CAAJ,IAAwB,IAAI,CAAC,EAAL,KAAY,MAAM,CAAC,IAAP,CAAY,EAAhD;AAAkD,GADnD,EAEhB,GAFgB,CAEZ,UAAC,IAAD,EAAK;AAAK,WAAA,IAAI,CAAC,IAAL,IAAa,IAAI,CAAC,EAAlB;AAAoB,GAFlB,CAAnB;AAIA,MAAM,SAAS,GAAG,UAAU,CAAC,KAAX,CAAiB,CAAjB,EAAoB,CAApB,CAAlB;AACA,MAAM,UAAU,GAAG,UAAU,CAAC,MAAX,GAAoB,SAAS,CAAC,MAAjD;;AAEA,MAAI,SAAS,CAAC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,IAAA,MAAM,GAAM,SAAS,CAAC,CAAD,CAAT,GAAY,GAAxB;AACD,GAFD,MAEO,IAAI,SAAS,CAAC,MAAV,KAAqB,CAAzB,EAA4B;;;AAGjC,IAAA,MAAM,GAAG,CAAC,CAAC,sCAAD,EAAyC;AACjD,MAAA,SAAS,EAAE,SAAS,CAAC,CAAD,CAD6B;AAEjD,MAAA,UAAU,EAAE,SAAS,CAAC,CAAD;AAF4B,KAAzC,CAAV;AAID,GAPM,MAOA,IAAI,SAAS,CAAC,MAAV,GAAmB,CAAvB,EAA0B;;;AAG/B,QAAI,UAAU,KAAK,CAAnB,EAAsB;;AAEpB,UAAM,QAAQ,GAAG,SAAS,CAAC,MAAV,CAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC,EAAuC,CAAvC,CAAjB;AACA,MAAA,MAAM,GAAG,CAAC,CAAC,+CAAD,EAAkD;AAC1D,QAAA,mBAAmB,EAAE,SAAS,CAAC,IAAV,CAAe,IAAf,CADqC;AAE1D,QAAA,QAAQ,EAAA;AAFkD,OAAlD,CAAV;AAID,KAPD,MAOO;AACL,MAAA,MAAM,GAAG,CAAC,CAAC,oDAAD,EAAuD;AAC/D,QAAA,mBAAmB,EAAE,SAAS,CAAC,IAAV,CAAe,IAAf,CAD0C;AAE/D,QAAA,SAAS,EAAE;AAFoD,OAAvD,CAAV;AAID;AACF;;AAED,SAAO,MAAP;AACF,C;;ICtaa,qCAAqC,GAChD,+E;;IAoBW,cAAc,GAAG,SAAjB,cAAiB,CAS5B,OAT4B,EAU5B,aAV4B,EAU4C;AAAxE,MAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,aAAA,GAAA,EAAA;AAAwE;;AAEhE,MAAA,MAAM,GAAK,cAAc,GAAnB,MAAN;AACA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SAAO,UAAO,KAAP,EAAY;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACjB,YAAA,KAAK,CAAC,cAAN;AAGE,YAAA,oBAAoB,GAGlB,aAAa,CAHK,oBAApB,EACA,sBAAsB,GAEpB,aAAa,CAFO,sBADtB,EAEA,MAAM,GACJ,aAAa,CADT,MAFN;;AAKF,gBAAI,CAAC,MAAD,IAAW,CAAC,CAAZ,IAAiB,CAAC,MAAlB,IAA4B,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,EAAV,CAAhC,EAA8C;AAC5C,cAAA,OAAO,CAAC,IAAR,CAAa,qCAAb;AACA,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;;;;;;AAGC,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,WAAP,CAAmB,OAAO,CAAC,EAA3B,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AAEM,YAAA,cAAc,GAClB,sBAAsB,IACtB,qBAAqB,CAAC,sBAAD,EAAyB,CAAC,OAAD,CAAzB,CAFjB;AAIN,YAAA,MAAM,CACJ,cAAc,IAAI,CAAC,CAAC,uCAAD,CADf,EAEJ,SAFI,CAAN;;;;;;;;AAKM,YAAA,YAAY,GAChB,oBAAoB,IACpB,qBAAqB,CAAC,oBAAD,EAAuB,CAAC,OAAD,CAAvB,CAFjB;AAIN,YAAA,MAAM,CACJ,YAAY,IACV,CAAC,CACC,gGADD,CAFC,EAKJ,OALI,CAAN;;;;;;;;;;;KA9Be,CAAA;AAsClB,GAtCD;AAuCF,C;;AC/DA,SAAS,kBAAT,CASE,EATF,EAUE,OAVF,EAUqD;AAEnD,SAAO,UAAC,KAAD,EAAM;AACX,QAAI,OAAO,EAAP,KAAc,UAAd,IAA4B,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,eAAV,CAAhC,EAA2D;AACzD;AACD;;AACD,IAAA,EAAE,CAAC,KAAD,EAAQ,OAAO,CAAC,eAAhB,CAAF;AACD,GALD;AAMD;;IAEY,kBAAkB,GAAG,SAArB,kBAAqB,CAShC,OATgC,EAUhC,oBAVgC,EAa/B;AAEK,MAAA,EAAA,GAGF,iBAAiB,EAHf;AAAA,MACa,sBAAsB,GAAA,EAAA,CAAA,eADnC;AAAA,MAEa,sBAAsB,GAAA,EAAA,CAAA,eAFnC;;AAKN,MAAM,eAAe,GACnB,CAAA,oBAAoB,KAAA,IAApB,IAAA,oBAAoB,KAAA,KAAA,CAApB,GAAoB,KAAA,CAApB,GAAA,oBAAoB,CAAE,eAAtB,KACA,sBADA,IAEC,YAAA;AAAM,WAAA,IAAA;AAAI,GAHb;;AAKA,MAAM,eAAe,GACnB,CAAA,oBAAoB,KAAA,IAApB,IAAA,oBAAoB,KAAA,KAAA,CAApB,GAAoB,KAAA,CAApB,GAAA,oBAAoB,CAAE,eAAtB,KACA,sBADA,IAEC,YAAA;AAAM,WAAA,IAAA;AAAI,GAHb;;AAKA,SAAO;AACL,IAAA,eAAe,EAAE,kBAAkB,CAAC,eAAD,EAAkB,OAAlB,CAD9B;AAEL,IAAA,eAAe,EAAE,kBAAkB,CAAC,eAAD,EAAkB,OAAlB;AAF9B,GAAP;AAIF,C;;IAEa,oBAAoB,GAAG,SAAvB,oBAAuB,CASlC,OATkC,EAUlC,aAVkC,EAajC;AAEK,MAAA,EAAA,GAAuC,iBAAiB,EAAxD;AAAA,MAAE,eAAe,GAAA,EAAA,CAAA,eAAjB;AAAA,MAAmB,eAAe,GAAA,EAAA,CAAA,eAAlC;;AAUN,SAAO;AACL,IAAA,eAAe,EACb,CAAA,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,eAAf,KACA,kBAAkB,CAAC,eAAD,EAAkB,OAAlB,CAHf;AAIL,IAAA,eAAe,EACb,CAAA,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,eAAf,KACA,kBAAkB,CAAC,eAAD,EAAkB,OAAlB;AANf,GAAP;AAQF,C;;IClHa,cAAc,GAAG,SAAjB,cAAiB,GAAA;AACtB,MAAA,EAAA,GAAoC,QAAQ,CAAiB,IAAjB,CAA5C;AAAA,MAAC,aAAa,GAAA,EAAA,CAAA,CAAA,CAAd;AAAA,MAAgB,gBAAgB,GAAA,EAAA,CAAA,CAAA,CAAhC;;AAEN,MAAM,UAAU,GAAG,aAAa,EAAhC;;AAEA,MAAM,iBAAiB,GAAsB,SAAvC,iBAAuC,CAAC,KAAD,EAAM;AACjD,QAAI,KAAK,CAAC,MAAN,YAAwB,WAAxB,IAAuC,UAAU,CAAC,MAAX,KAAsB,QAAjE,EAA2E;AACzE,UAAM,cAAc,GAAG,KAAK,CAAC,MAAN,CAAa,OAAb,CAAqB,2BAArB,CAAvB;AAEA,UAAI,CAAC,cAAL,EAAqB;AAErB,MAAA,gBAAgB,CAAC,cAAD,CAAhB;;AAEA,UAAI,cAAc,CAAC,SAAf,CAAyB,QAAzB,CAAkC,cAAlC,CAAJ,EAAuD;AACrD,QAAA,cAAc,CAAC,SAAf,CAAyB,MAAzB,CAAgC,cAAhC;AACD,OAFD,MAEO;AACL,QAAA,cAAc,CAAC,SAAf,CAAyB,GAAzB,CAA6B,cAA7B;AACD;AACF;AACF,GAdD;;AAgBA,EAAA,SAAS,CAAC,YAAA;AACR,aAAS,WAAT,CAAqB,KAArB,EAAiD;AAC/C,UAAM,aAAa,GAAG,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,QAAf,CACpB,KAAK,CAAC,MADc,CAAtB;;AAIA,UAAI,CAAC,aAAD,IAAkB,aAAtB,EAAqC;AACnC,QAAA,aAAa,CAAC,SAAd,CAAwB,MAAxB,CAA+B,cAA/B;AACD;AACF;;AAED,QAAI,UAAU,CAAC,MAAX,KAAsB,QAA1B,EAAoC;AAClC,MAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,WAAnC;AACD;;AACD,WAAO,YAAA;AAAM,aAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC,CAAA;AAAkD,KAA/D;AACD,GAfQ,EAeN,CAAC,UAAD,EAAa,aAAb,CAfM,CAAT;AAiBA,SAAO;AAAE,IAAA,iBAAiB,EAAA;AAAnB,GAAP;AACF,C;;ICvBa,kCAAkC,GAC7C,8E;;IAUW,cAAc,GAAG,SAAjB,cAAiB,CAS5B,OAT4B,EAU5B,aAV4B,EAUiB;AAA7C,MAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,aAAA,GAAA,EAAA;AAA6C;;AAErC,MAAA,KAAK,GAAK,iBAAiB,GAAtB,KAAL;AACA,MAAA,MAAM,GAAK,cAAc,GAAnB,MAAN;AACA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SAAO,UAAO,KAAP,EAAY;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACjB,YAAA,KAAK,CAAC,cAAN;AAGE,YAAA,oBAAoB,GAGlB,aAAa,CAHK,oBAApB,EACA,sBAAsB,GAEpB,aAAa,CAFO,sBADtB,EAEA,MAAM,GACJ,aAAa,CADT,MAFN;;AAKF,gBAAI,CAAC,CAAD,IAAM,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IAAV,CAAN,IAAwB,CAAC,MAAzB,IAAmC,CAAC,MAAxC,EAAgD;AAC9C,cAAA,OAAO,CAAC,IAAR,CAAa,kCAAb;AACA,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;iBAEG,CAAC,WAAW,CAAC,OAAD,EAAU,KAAV,C,EAAZ,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;;;;;;AAEA,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,QAAP,CAAgB,OAAO,CAAC,IAAR,CAAa,EAA7B,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AAEM,YAAA,cAAc,GAClB,sBAAsB,IACtB,qBAAqB,CAAC,sBAAD,EAAyB,CAAC,OAAO,CAAC,IAAT,CAAzB,CAFjB;AAIN,YAAA,MAAM,CACJ,cAAc,IACZ,CAAC,CAAC,2BAAD,EAA8B;AAC7B,cAAA,IAAI,EAAE,OAAO,CAAC,IAAR,CAAa,IAAb,IAAqB,OAAO,CAAC,IAAR,CAAa;AADX,aAA9B,CAFC,EAKJ,SALI,CAAN;;;;;;;;AAQM,YAAA,YAAY,GAChB,oBAAoB,IACpB,qBAAqB,CAAC,oBAAD,EAAuB,CAAC,OAAO,CAAC,IAAT,CAAvB,CAFjB;AAIN,YAAA,MAAM,CAAC,YAAY,IAAI,CAAC,CAAC,yBAAD,CAAlB,EAA+C,OAA/C,CAAN;;;;;;;;;;;;;AAIA,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,UAAP,CAAkB,OAAO,CAAC,IAAR,CAAa,EAA/B,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AAEM,YAAA,eAAe,GAAG,CAAC,CAAC,6BAAD,EAAgC;AACvD,cAAA,IAAI,EAAE,OAAO,CAAC,IAAR,CAAa,IAAb,IAAqB,OAAO,CAAC,IAAR,CAAa;AADe,aAAhC,CAAnB;AAIA,YAAA,cAAc,GACjB,sBAAsB,IACrB,qBAAqB,CAAC,sBAAD,EAAyB,CAAC,OAAO,CAAC,IAAT,CAAzB,CADvB,IAEA,eAHI;;AAKN,gBAAI,OAAO,cAAP,KAA0B,QAA9B,EAAwC;AACtC,cAAA,MAAM,CAAC,cAAD,EAAiB,SAAjB,CAAN;AACD;;;;;;;;;AAEK,YAAA,YAAY,GACf,oBAAoB,IACnB,qBAAqB,CAAC,oBAAD,EAAuB,CAAC,OAAO,CAAC,IAAT,CAAvB,CADvB,IAEA,CAAC,CAAC,2BAAD,CAHG;;AAKN,gBAAI,OAAO,YAAP,KAAwB,QAA5B,EAAsC;AACpC,cAAA,MAAM,CAAC,YAAD,EAAe,OAAf,CAAN;AACD;;;;;;;;;;;;KA5DY,CAAA;AA+DlB,GA/DD;AAgEF,C;;IChGa,oBAAoB,GAAG,SAAvB,oBAAuB,CASlC,OATkC,EAUlC,gBAVkC,EAazB;AAED,MAAY,iBAAiB,GAAK,iBAAiB,GAAtB,UAA7B;AAUR,MAAM,UAAU,GAAG,gBAAgB,IAAI,iBAAvC;AAEA,SAAO,UAAC,KAAD,EAAM;AACX,QAAI,CAAC,UAAD,IAAe,CAAC,OAApB,EAA6B;AAC3B,MAAA,OAAO,CAAC,IAAR,CACE,wEADF;AAGA;AACD;;AAED,IAAA,UAAU,CAAC,OAAD,EAAU,KAAV,CAAV;AACD,GATD;AAUF,C;;ICQa,aAAa,GAAG,SAAhB,aAAgB,CAS3B,OAT2B,EAU3B,WAV2B,EAW3B,aAX2B,EAW4C;AAAvE,MAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,aAAA,GAAA,EAAA;AAAuE;;AAE/D,MAAA,oBAAoB,GAAa,aAAa,CAA1B,oBAApB;AAAA,MAAsB,MAAM,GAAK,aAAa,CAAlB,MAA5B;;AAEF,MAAA,EAAA,GAAsB,iBAAiB,EAAvC;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,MAAM,GAAA,EAAA,CAAA,MAAjB;;AACE,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAER,MAAM,MAAM,GAAG,SAAT,MAAS,GAAA;;;AACb,QACE,EAAC,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,MAAT,KACA,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAV,CADA,IAEA,CAAC,WAFD,IAGA,CAAC,WAAW,CAAC,OAAO,CAAC,IAAT,CAJd,EAKE;AACA,aAAO,KAAP;AACD;;AAED,QAAM,yBAAyB,GAAG,WAAW,CAAC,OAAO,CAAC,IAAT,CAA7C;AACA,QAAM,oBAAoB,GAAG,OAAO,CAAC,KAAR,CAAc,OAAd,CAAsB,MAAM,CAAC,MAA7B,CAA7B;AACA,QAAM,qBAAqB,GAAG,OAAO,CAAC,KAAR,CAAc,QAAd,CAAuB,MAAM,CAAC,MAA9B,CAA9B;;AAEA,QACE,yBAAyB,IACzB,QAAA,CAAA,EAAA,GAAO,MAAM,CAAC,IAAd,MAAkB,IAAlB,IAAkB,EAAA,KAAA,KAAA,CAAlB,GAAkB,KAAA,CAAlB,GAAkB,EAAA,CAAE,IAApB,MAA6B,QAD7B,IAEA,yBAAyB,CAAC,MAAM,CAAC,IAAP,CAAY,IAAb,CAH3B,EAIE;AACA,aAAO,IAAP;AACD;;AAED,QACE,oBAAoB,IACpB,OAAO,oBAAoB,CAAC,IAA5B,KAAqC,QADrC,IAEA,yBAFA,IAGA,yBAAyB,CAAC,oBAAoB,CAAC,IAAtB,CAJ3B,EAKE;AACA,aAAO,IAAP;AACD;;AAED,QACE,qBAAqB,IACrB,OAAO,qBAAqB,CAAC,IAA7B,KAAsC,QADtC,IAEA,yBAFA,IAGA,yBAAyB,CAAC,qBAAqB,CAAC,IAAvB,CAJ3B,EAKE;AACA,aAAO,IAAP;AACD;;AAED,WAAO,KAAP;AACD,GAzCD;;AA2CA,MAAM,SAAS,GAAsB,SAA/B,SAA+B,CAAO,KAAP,EAAY;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AAC/C,YAAA,KAAK,CAAC,cAAN;AAEA,gBAAI,CAAC,OAAL,EAAc,OAAA,CAAA;AAAA;AAAA,aAAA;iBAEV,CAAC,OAAO,CAAC,M,EAAT,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;;;;;;AAEA,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,UAAP,CACJ,OADI,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;;;;;;;;AAIM,YAAA,YAAY,GAChB,oBAAoB,IACpB,qBAAqB,CAAC,oBAAD,EAAuB,CAAC,OAAD,CAAvB,CAFjB;AAIN,gBAAI,MAAJ,EAAY,MAAM,CAAC,YAAY,IAAI,CAAC,CAAC,uBAAD,CAAlB,EAA6C,OAA7C,CAAN;;;;;;;;;;;;;AAIZ,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,YAAP,CACJ,OADI,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;;;;;;;;AAIM,YAAA,YAAY,GAChB,oBAAoB,IACpB,qBAAqB,CAAC,oBAAD,EAAuB,CAAC,OAAD,CAAvB,CAFjB;AAIN,gBAAI,MAAJ,EACE,MAAM,CAAC,YAAY,IAAI,CAAC,CAAC,4BAAD,CAAlB,EAAkD,OAAlD,CAAN;;;;;;;;;;;KA5ByC,CAAA;AA+BhD,GA/BD;;AAiCA,SAAO;AAAE,IAAA,MAAM,EAAE,MAAM,EAAhB;AAAoB,IAAA,SAAS,EAAA;AAA7B,GAAP;AACF,C;;IC5Ha,sBAAsB,GAAG,6L;;IAGzB,kBAAkB,GAAG,SAArB,kBAAqB,CAShC,OATgC,EASmB;AAE7C,MAAA,EAAA,GAA6B,iBAAiB,EAA9C;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,aAAa,GAAA,EAAA,CAAA,aAAxB;;AASE,MAAA,MAAM,GAAK,cAAc,GAAnB,MAAN;AAER,SAAO,UAAO,YAAP,EAA6B,KAA7B,EAA2D;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AAChE,gBAAI,KAAK,IAAI,KAAK,CAAC,cAAnB,EAAmC;AACjC,cAAA,KAAK,CAAC,cAAN;AACD;;AAED,gBAAI,CAAC,aAAD,IAAkB,CAAC,OAAnB,IAA8B,CAAC,OAA/B,IAA0C,CAAC,MAA/C,EAAuD;AACrD,cAAA,OAAO,CAAC,IAAR,CAAa,sBAAb;AACA,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;AAEG,YAAA,oBAAoB,GAAI,IAAxB;AAEE,YAAA,WAAW,GAAG,MAAM,CAAC,MAArB;;AAEN,gBAAI,OAAO,CAAC,aAAZ,EAA2B;AACzB,cAAA,OAAO,CAAC,aAAR,CAAsB,OAAtB,CAA8B,UAAC,QAAD,EAAS;;;AAGrC,oBACE,QAAQ,CAAC,IAAT,IACA,WAAW,KAAK,QAAQ,CAAC,IAAT,CAAc,EAD9B,IAEA,QAAQ,CAAC,IAAT,KAAkB,YAHpB,EAIE;AACA,kBAAA,oBAAoB,GAAG,QAAvB;AACD,iBAND,MAMO,IAAI,QAAQ,CAAC,IAAT,IAAiB,WAAW,KAAK,QAAQ,CAAC,IAAT,CAAc,EAAnD,EAAuD;AAC5D,kBAAA,OAAO,CAAC,IAAR,CACE,uFADF;AAGD;AACF,eAdD;AAeD;;AAEK,YAAA,eAAe,GAAG,OAAlB;iBAOF,OAAO,CAAC,E,EAAR,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;;AACF,gBAAI,oBAAJ,EAA0B;AACxB,cAAA,qBAAqB,GAAG,OAAO,CAAC,cAAR,CACtB,OAAO,CAAC,EADc,EAEtB,oBAAoB,CAAC,IAFC,CAAxB;AAID,aALD,MAKO;AAEC,cAAA,SAAS,GAAG,OAAO,CAAC,EAApB;AAEA,cAAA,QAAQ,GAAG;AAAE,gBAAA,IAAI,EAAE;AAAR,eAAX,CAJD,C;;AAOL,cAAA,qBAAqB,GAAG,OAAO,CAAC,YAAR,CAAqB,SAArB,EAAgC,QAAhC,CAAxB;AACD;;;;;;;;AAIC,mBAAA,CAAA;AAAA;AAAA,cAAM,qBAAN,CAAA;;;;AAAA,YAAA,EAAA,CAAA,IAAA;;;;;;;;;;AAGA,YAAA,aAAa,CAAC,eAAD,CAAb;;;;;;;;;;;KA5D4D,CAAA;AA+DjE,GA/DD;AAgEF,C;;IAEa,gBAAgB,GAAG,SAAnB,gBAAmB,CAS9B,OAT8B,EAU9B,mBAV8B,EAW9B,iBAX8B,EAWsB;;;AAE5C,MAAA,OAAO,GAAK,iBAAiB,GAAtB,OAAP;;AAEF,MAAA,EAAA,GAAoD,QAAQ,CAAC,KAAD,CAA5D;AAAA,MAAC,qBAAqB,GAAA,EAAA,CAAA,CAAA,CAAtB;AAAA,MAAwB,wBAAwB,GAAA,EAAA,CAAA,CAAA,CAAhD;;AAEN,MAAM,WAAW,GAAG,MAAM,CAAC,KAAD,CAA1B;AAEA,MAAM,iBAAiB,GAAG,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAT,MAAkB,IAAlB,IAAkB,EAAA,KAAA,KAAA,CAAlB,GAAkB,KAAA,CAAlB,GAAkB,EAAA,CAAA,IAAA,CAAlB,OAAkB,CAAlB,MAAO,IAAP,IAAO,EAAA,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAO,EAAA,CAAiB,SAAxB,MAAsC,KAAhE;AACA,MAAM,cAAc,GAAG,CAAC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,UAAV,CAAxB;AAEA,MAAM,sBAAsB,GAAkB,WAAW,CACvD,UAAC,KAAD,EAAM;;;AACJ,QACE,KAAK,CAAC,MAAN,YAAwB,WAAxB,KAAmC,CAAA,EAAA,GACnC,mBAAmB,KAAA,IAAnB,IAAA,mBAAmB,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAA,mBAAmB,CAAE,OADc,MACP,IADO,IACP,EAAA,KAAA,KAAA,CADO,GACP,KAAA,CADO,GACP,EAAA,CAAE,QAAF,CAAW,KAAK,CAAC,MAAjB,CAD5B,CADF,EAGE;AACA;AACD;;AAED,IAAA,wBAAwB,CAAC,KAAD,CAAxB;AACD,GAVsD,EAWvD,CAAC,wBAAD,EAA2B,mBAA3B,CAXuD,CAAzD;AAcA,EAAA,SAAS,CAAC,YAAA;AACR,QAAM,cAAc,GAAG,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,OAA1C;;AAEA,QAAI,qBAAqB,IAAI,CAAC,WAAW,CAAC,OAA1C,EAAmD;AACjD,MAAA,WAAW,CAAC,OAAZ,GAAsB,IAAtB;AACA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,sBAAnC;AACA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,UAA1B,EAAsC,sBAAtC;;AAEA,UAAI,cAAJ,EAAoB;AAClB,QAAA,cAAc,CAAC,gBAAf,CAAgC,YAAhC,EAA8C,sBAA9C;AACD;AACF;;AAED,QAAI,CAAC,qBAAD,IAA0B,WAAW,CAAC,OAA1C,EAAmD;AACjD,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,sBAAtC;AACA,MAAA,QAAQ,CAAC,mBAAT,CAA6B,UAA7B,EAAyC,sBAAzC;;AAEA,UAAI,cAAJ,EAAoB;AAClB,QAAA,cAAc,CAAC,mBAAf,CACE,YADF,EAEE,sBAFF;AAID;;AAED,MAAA,WAAW,CAAC,OAAZ,GAAsB,KAAtB;AACD;;AAED,WAAO,YAAA;AACL,UAAI,WAAW,CAAC,OAAhB,EAAyB;AACvB,QAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,sBAAtC;AACA,QAAA,QAAQ,CAAC,mBAAT,CAA6B,UAA7B,EAAyC,sBAAzC;;AAEA,YAAI,cAAJ,EAAoB;AAClB,UAAA,cAAc,CAAC,mBAAf,CACE,YADF,EAEE,sBAFF;AAID;;AAED,QAAA,WAAW,CAAC,OAAZ,GAAsB,KAAtB;AACD;AACF,KAdD;AAeD,GA1CQ,EA0CN,CAAC,qBAAD,EAAwB,sBAAxB,EAAgD,iBAAhD,CA1CM,CAAT;AA4CA,EAAA,SAAS,CAAC,YAAA;AACR,QAAM,cAAc,GAAG,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,OAA1C;;AAEA,QAAI,cAAc,IAAI,WAAW,CAAC,OAAlC,EAA2C;AACzC,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,sBAAtC;AACA,MAAA,QAAQ,CAAC,mBAAT,CAA6B,UAA7B,EAAyC,sBAAzC;;AAEA,UAAI,cAAJ,EAAoB;AAClB,QAAA,cAAc,CAAC,mBAAf,CACE,YADF,EAEE,sBAFF;AAID;;AAED,MAAA,WAAW,CAAC,OAAZ,GAAsB,KAAtB;AACD;AACF,GAhBQ,EAgBN,CAAC,cAAD,EAAiB,sBAAjB,EAAyC,iBAAzC,CAhBM,CAAT;;AAkBA,MAAM,mBAAmB,GAAsB,SAAzC,mBAAyC,CAAC,KAAD,EAAM;AACnD,QAAI,KAAK,IAAI,KAAK,CAAC,eAAnB,EAAoC;AAClC,MAAA,KAAK,CAAC,eAAN;AACD;;AACD,IAAA,wBAAwB,CAAC,IAAD,CAAxB;AACD,GALD;;AAOA,SAAO;AACL,IAAA,iBAAiB,EAAA,iBADZ;AAEL,IAAA,mBAAmB,EAAA,mBAFd;AAGL,IAAA,qBAAqB,EAAA;AAHhB,GAAP;AAKF,C;;IC3Na,eAAe,GAAG,SAAlB,eAAkB,CAS7B,sBAT6B,EASwC;AAE7D,MAAkB,uBAAuB,GAAK,iBAAiB,GAAtB,gBAAzC;AAUR,MAAM,gBAAgB,GAAG,sBAAsB,IAAI,uBAAnD;AAEA,SAAO,UAAO,OAAP,EAAc;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;kBACf,gBAAgB,IAAI,O,GAApB,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;AACF,mBAAA,CAAA;AAAA;AAAA,cAAM,gBAAgB,CAAC,OAAD,CAAtB,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;;;;;;;;;KAFiB,CAAA;AAIpB,GAJD;AAKF,C;;ICtBa,cAAc,GAAG,SAAjB,cAAiB,CAS5B,OAT4B,EAU5B,aAV4B,EAa3B;AAIE,SAAC;AACJ,IAAA,WAAW,EAAE,qBAAC,KAAD,EAAM;AACjB,UACE,QAAO,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,kBAAtB,MAA6C,UAA7C,IACA,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IAAV,CAFF,EAGE;AACA;AACD;;AACD,MAAA,aAAa,CAAC,kBAAd,CAAiC,KAAjC,EAAwC,OAAO,CAAC,IAAhD;AACD,KATG;AAUJ,IAAA,WAAW,EAAE,qBAAC,KAAD,EAAM;AACjB,UACE,QAAO,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,kBAAtB,MAA6C,UAA7C,IACA,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IAAV,CAFF,EAGE;AACA;AACD;;AAED,MAAA,aAAa,CAAC,kBAAd,CAAiC,KAAjC,EAAwC,OAAO,CAAC,IAAhD;AACD;AAnBG,GAAD;AAoBJ,C;;IC3CY,WAAW,GAAG,SAAd,WAAc,CASzB,OATyB,EAS0B;;;AAE7C,MAAA,EAAA,GAAsB,iBAAiB,EAAvC;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,MAAM,GAAA,EAAA,CAAA,MAAjB,CAF6C,CAEyB;;;AAE5E,MAAM,WAAW,GACf,CAAC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IAAV,CAAD,IAAmB,CAAC,EAAC,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IAAT,CAApB,IAAqC,MAAM,CAAC,IAAP,CAAY,EAAZ,KAAmB,OAAO,CAAC,IAAR,CAAa,EADvE;AAGA,MAAM,OAAO,GACX,CAAA,CAAA,EAAA,GAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAuB,OAAvB,IACA,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAT,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,UAAhB,MAA0B,IAA1B,IAA0B,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0B,EAAA,CAAE,IAA5B,MAAqC,OAFvC;AAIA,MAAM,OAAO,GAAG,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAT,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,UAAhB,MAA0B,IAA1B,IAA0B,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0B,EAAA,CAAE,IAA5B,MAAqC,OAArD;AAEA,MAAM,WAAW,GACf,CAAA,CAAA,EAAA,GAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAuB,mBAAvB,IACA,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAT,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,UAAhB,MAA0B,IAA1B,IAA0B,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0B,EAAA,CAAE,IAA5B,MAAqC,mBADrC,IAEA,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAT,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,UAAhB,MAA0B,IAA1B,IAA0B,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0B,EAAA,CAAE,IAA5B,MAAqC,WAHvC;AAKA,MAAM,cAAc,GAAG,WAAW,IAAI,WAAf,IAA8B,OAA9B,IAAyC,OAAhE;AAEA,MAAM,gBAAgB,GAAG,cAAzB;AAEA,SAAO;AACL,IAAA,gBAAgB,EAAA,gBADX;AAEL,IAAA,cAAc,EAAA,cAFT;AAGL,IAAA,OAAO,EAAA,OAHF;AAIL,IAAA,WAAW,EAAA,WAJN;AAKL,IAAA,WAAW,EAAA,WALN;AAML,IAAA,OAAO,EAAA;AANF,GAAP;AAQF,C;;AC/BO,IAAM,sBAAsB,GAAG,OAA/B;AAEA,IAAM,mBAAmB,GAC9B,wFADK;AAGA,IAAM,wBAAwB,GACnC,iFADK;;AAGP,SAAS,aAAT,CACE,gBADF,EAEE,UAFF,EAGE,QAHF,EAIE,eAJF,EAKE,MALF,EAKiB;AAEf,MAAI,CAAC,gBAAD,IAAqB,CAAC,IAAI,CAAC,KAAL,CAAW,gBAAX,CAA1B,EAAwD;AACtD,IAAA,OAAO,CAAC,IAAR,CAAa,mBAAb;AACA,WAAO,IAAP;AACD;;AAED,MAAI,OAAO,UAAP,KAAsB,UAA1B,EAAsC;AACpC,WAAO,UAAU,CAAC,IAAI,IAAJ,CAAS,gBAAT,CAAD,CAAjB;AACD;;AAED,MAAI,CAAC,eAAL,EAAsB;AACpB,IAAA,OAAO,CAAC,IAAR,CAAa,wBAAb;AACA,WAAO,IAAP;AACD;;AAED,MAAM,UAAU,GAAG,eAAe,CAAC,gBAAD,CAAlC;;AAEA,MAAI,aAAa,CAAC,UAAD,CAAjB,EAA+B;;;;;AAK7B,WAAO,QAAQ,IAAI,UAAU,CAAC,QAAvB,GACH,UAAU,CAAC,QAAX,EADG,GAEH,UAAU,CAAC,MAAX,CAAkB,MAAlB,CAFJ;AAGD;;AAED,MAAI,MAAM,CAAC,UAAD,CAAV,EAAwB;AACtB,WAAO,UAAU,CAAC,YAAX,EAAP;AACD;;AAED,MAAI,gBAAgB,CAAC,UAAD,CAApB,EAAkC;AAChC,WAAO,UAAP;AACD;;AAED,SAAO,IAAP;AACD;;AAmBD,IAAM,0BAA0B,GAAG,SAA7B,0BAA6B,CASjC,KATiC,EASuB;AAGtD,MAAA,EAAA,GAKE,KAAK,CALS,QAAhB;AAAA,MAAA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAAhB;AAAA,MACA,EAAA,GAIE,KAAK,CAJS,WADhB;AAAA,MACA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EADhB;AAAA,MAEA,EAAA,GAGE,KAAK,CAHwB,MAF/B;AAAA,MAEA,MAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,sBAAH,GAAyB,EAF/B;AAAA,MAGA,UAAU,GAER,KAAK,CAFG,UAHV;AAAA,MAIA,OAAO,GACL,KAAK,CADA,OAJP;AAOM,MAAA,eAAe,GAAK,qBAAqB,GAA1B,eAAf;AAER,MAAM,SAAS,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,UAA3B;AAEA,MAAM,IAAI,GAAG,OAAO,CAClB,YAAA;AACE,WAAA,aAAa,CAAC,SAAD,EAAY,UAAZ,EAAwB,QAAxB,EAAkC,eAAlC,EAAmD,MAAnD,CAAb;AAAuE,GAFvD,EAGlB,CAAC,UAAD,EAAa,QAAb,EAAuB,eAAvB,EAAwC,MAAxC,EAAgD,SAAhD,CAHkB,CAApB;AAMA,MAAI,CAAC,IAAL,EAAW,OAAO,IAAP;AAEX,SACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAE,WAAjB;AAA8B,IAAA,QAAQ,EAAE,SAAxC;AAAmD,IAAA,KAAK,EAAE;AAA1D,GAAA,EACG,IADH,CADF;AAKD,CApCD;;AAsCO,IAAM,gBAAgB,GAAG,KAAK,CAAC,IAAN,CAC9B,0BAD8B,CAAzB;;ACrFP,IAAM,2BAA2B,GAAG,SAA9B,2BAA8B,CASlC,KATkC,EASuB;AAGvD,MAAA,iBAAiB,GAWf,KAAK,CAXU,iBAAjB;AAAA,MACA,YAAY,GAUV,KAAK,CAVK,YADZ;AAAA,MAEA,UAAU,GASR,KAAK,CATG,UAFV;AAAA,MAGA,UAAU,GAQR,KAAK,CARG,UAHV;AAAA,MAIA,UAAU,GAOR,KAAK,CAPG,UAJV;AAAA,MAKA,SAAS,GAMP,KAAK,CANE,SALT;AAAA,MAMA,WAAW,GAKT,KAAK,CALI,WANX;AAAA,MAOA,OAAO,GAIL,KAAK,CAJA,OAPP;AAAA,MAQA,eAAe,GAGb,KAAK,CAHQ,eARf;AAAA,MASA,IAAI,GAEF,KAAK,CAFH,IATJ;AAAA,MAUA,EAAA,GACE,KAAK,CADK,IAVZ;AAAA,MAUA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAVZ;AAaM,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAEF,MAAA,EAAA,GAAwB,QAAQ,CAAC,KAAD,CAAhC;AAAA,MAAC,OAAO,GAAA,EAAA,CAAA,CAAA,CAAR;AAAA,MAAU,UAAU,GAAA,EAAA,CAAA,CAAA,CAApB;;AAEN,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AAEA,MAAM,cAAc,GAAG,WAAW,CAChC,UAAC,gBAAD,EAAiC;AAC/B,QAAI,CAAC,gBAAL,EAAuB;AACrB,MAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACD;;AAED,QAAI,IAAJ,EAAU;AACR,UAAM,aAAa,GAAG,gBAAgB,CAAC,qBAAjB,EAAtB;;AAEA,UAAI,IAAJ,EAAU;AACR,QAAA,UAAU,CACR,CAAC,CAAC,eAAF,IAAqB,aAAa,CAAC,IAAd,GAAqB,eAAe,CAAC,IADlD,CAAV;AAGD,OAJD,MAIO;AACL,QAAA,UAAU,CACR,CAAC,CAAC,eAAF,IACE,aAAa,CAAC,KAAd,GAAsB,CAAtB,GAA0B,eAAe,CAAC,KAFpC,CAAV;AAID;AACF;AACF,GArB+B,EAsBhC,CAAC,eAAD,EAAkB,IAAlB,EAAwB,IAAxB,CAtBgC,CAAlC;AAyBA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,6CACP,IAAI,GAAG,qCAAH,GAA2C,EADxC,IAC0C,YAD1C,IAEP,IAAI,GAAG,qCAAH,GAA2C,EAFxC,IAE0C,YAF1C,IAGP,OAAO,GAAG,wCAAH,GAA8C,EAH9C,IAGgD,UAJ7D;AAKG,mBACW,qBANd;AAOE,IAAA,GAAG,EAAE;AAPP,GAAA,EASE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,GAAvC,IAA8C,CAAC,CAA/C,IACC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAV,CADD,IAEG,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,OAAO,EAAE;AAAjB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,MAAV,IAAmB,CAAC,CAAC,KAAD,CAApB,GAA8B,CAAC,CAAC,OAAD,CADlC,CADF,CAHN,EASG,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAAhD,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,OAAO,EAAE;AAAjB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EAAqD,CAAC,CAAC,MAAD,CAAtD,CADF,CAVJ,EAcG,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAAhD,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,OAAO,EAAE;AAAjB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,WAAW,IAAI,WAAW,EAA1B,GAA+B,CAAC,CAAC,QAAD,CAAhC,GAA6C,CAAC,CAAC,MAAD,CADjD,CADF,CAfJ,EAqBG,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,IAAvC,IAA+C,CAAC,CAAhD,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,OAAO,EAAE;AAAjB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,CAAC,CAAC,cAAD,CADJ,CADF,CAtBJ,EA4BG,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,MAAvC,IAAiD,CAAC,CAAlD,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,OAAO,EAAE;AAAjB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,CAAC,CAAC,QAAD,CADJ,CADF,CA7BJ,CATF,CADF;AAgDD,CAxGD;AA0GA;;;;;;IAIa,iBAAiB,GAAG,KAAK,CAAC,IAAN,CAC/B,2BAD+B,C;;IC1GpB,cAAc,GAAG,SAAjB,cAAiB,CAS5B,KAT4B,EAS0B;AAGpD,MAAA,eAAe,GAkBb,KAAK,CAlBQ,eAAf;AAAA,MACA,kBAAkB,GAiBhB,KAAK,CAjBW,kBADlB;AAAA,MAEA,iBAAiB,GAgBf,KAAK,CAhBU,iBAFjB;AAAA,MAGA,+BAA+B,GAe7B,KAAK,CAfwB,+BAH/B;AAAA,MAIA,iCAAiC,GAc/B,KAAK,CAd0B,iCAJjC;AAAA,MAKA,4BAA4B,GAa1B,KAAK,CAbqB,4BAL5B;AAAA,MAMA,8BAA8B,GAY5B,KAAK,CAZuB,8BAN9B;AAAA,MAOA,8BAA8B,GAW5B,KAAK,CAXuB,8BAP9B;AAAA,MAQc,gBAAgB,GAU5B,KAAK,CAVuB,YAR9B;AAAA,MASY,cAAc,GASxB,KAAK,CATmB,UAT1B;AAAA,MAUY,cAAc,GAQxB,KAAK,CARmB,UAV1B;AAAA,MAWW,aAAa,GAOtB,KAAK,CAPiB,SAXxB;AAAA,MAYA,MAAM,GAMJ,KAAK,CAND,MAZN;AAAA,MAaA,OAAO,GAKL,KAAK,CALA,OAbP;AAAA,MAcA,eAAe,GAIb,KAAK,CAJQ,eAdf;AAAA,MAeA,iBAAiB,GAGf,KAAK,CAHU,iBAfjB;AAAA,MAgBA,EAAA,GAEE,KAAK,CAF+B,cAhBtC;AAAA,MAgBA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,qBAAH,GAAwB,EAhBtC;AAAA,MAiBA,eAAe,GACb,KAAK,CADQ,eAjBf;AAoBM,MAAA,KAAK,GAAK,cAAc,GAAnB,KAAL;;AAEF,MAAA,EAAA,GAAsC,QAAQ,CAAC,KAAD,CAA9C;AAAA,MAAC,cAAc,GAAA,EAAA,CAAA,CAAA,CAAf;AAAA,MAAiB,iBAAiB,GAAA,EAAA,CAAA,CAAA,CAAlC;;AAEE,MAAA,WAAW,GAAK,WAAW,CAAC,OAAD,CAAX,CAAL,WAAX;AAER,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAD,CAArC;AAEA,MAAM,UAAU,GAAG,cAAc,CAAC,OAAD,EAAU;AACzC,IAAA,oBAAoB,EAAE,iCADmB;AAEzC,IAAA,sBAAsB,EAAE,+BAFiB;AAGzC,IAAA,MAAM,EAAE;AAHiC,GAAV,CAAjC;AAMA,MAAM,UAAU,GAAG,cAAc,CAAC,OAAD,EAAU;AACzC,IAAA,oBAAoB,EAAE,8BADmB;AAEzC,IAAA,sBAAsB,EAAE,4BAFiB;AAGzC,IAAA,MAAM,EAAE;AAHiC,GAAV,CAAjC;AAMQ,MAAA,SAAS,GAAK,aAAa,CAAC,OAAD,EAAU,cAAV,EAA0B;AAC3D,IAAA,oBAAoB,EAAE,8BADqC;AAE3D,IAAA,MAAM,EAAE;AAFmD,GAA1B,CAAb,CAAL,SAAT;AAKR,MAAM,OAAO,GAAG,WAAW,CAAC,YAAA;AAAM,WAAA,WAAW,CAAC,OAAD,EAAU,KAAV,CAAX;AAA2B,GAAlC,EAAoC,CAC7D,OAD6D,EAE7D,KAF6D,CAApC,CAA3B;AAKA,MAAM,WAAW,GAAG,WAAW,CAAC,YAAA;AAAM,WAAA,iBAAiB,CAAC,KAAD,CAAjB;AAAwB,GAA/B,EAAiC,EAAjC,CAA/B;AAEA,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AACA,MAAM,gBAAgB,GAAG,CAAC,EAAC,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,UAAV,CAA1B;AAEA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,OAAvB,EAAgC;AAC9B,MAAA,iBAAiB,CAAC,OAAlB,CAA0B,gBAA1B,CAA2C,cAA3C,EAA2D,WAA3D;AACD;AACF,GAJQ,EAIN,CAAC,WAAD,EAAc,iBAAd,CAJM,CAAT;AAMA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,gBAAJ,EAAsB;AACpB,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC;AACD;AACF,GAJQ,EAIN,CAAC,WAAD,EAAc,gBAAd,CAJM,CAAT;AAMA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,cAAJ,EAAoB;AAClB,MAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,WAAnC;AACD,KAFD,MAEO;AACL,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC;AACD;;AAED,WAAO,YAAA;AAAM,aAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC,CAAA;AAAkD,KAA/D;AACD,GARQ,EAQN,CAAC,cAAD,EAAiB,WAAjB,CARM,CAAT;AAUA,MAAI,cAAc,CAAC,MAAf,KAA0B,CAA9B,EAAiC,OAAO,IAAP;AAEjC,SACE,KAAA,CAAA,aAAA,CAAC,qBAAD,EAAsB;AACpB,IAAA,kBAAkB,EAAE,kBADA;AAEpB,IAAA,MAAM,EAAE,MAFY;AAGpB,IAAA,iBAAiB,EAAE;AAHC,GAAtB,EAKE,KAAA,CAAA,aAAA,CAAC,iBAAD,EAAkB;AAChB,IAAA,iBAAiB,EAAE,iBADH;AAEhB,IAAA,YAAY,EAAE,gBAAgB,IAAI,YAFlB;AAGhB,IAAA,UAAU,EAAE,eAHI;AAIhB,IAAA,UAAU,EAAE,cAAc,IAAI,UAJd;AAKhB,IAAA,UAAU,EAAE,cAAc,IAAI,UALd;AAMhB,IAAA,SAAS,EAAE,aAAa,IAAI,SANZ;AAOhB,IAAA,WAAW,EAAE,OAPG;AAQhB,IAAA,OAAO,EAAE,OARO;AAShB,IAAA,eAAe,EAAE,eATD;AAUhB,IAAA,IAAI,EAAE,WAVU;AAWhB,IAAA,IAAI,EAAE;AAXU,GAAlB,CALF,EAkBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,GADT;AAEE,IAAA,OAAO,EAAC,UAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,+HADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CANF,CAlBF,CADF;AAgCF,C;;AAQA,IAAM,qBAAqB,GAAyC,SAA9D,qBAA8D,CAAC,KAAD,EAAM;AAChE,MAAA,QAAQ,GAAoD,KAAK,CAAzD,QAAR;AAAA,MAAU,kBAAkB,GAAgC,KAAK,CAArC,kBAA5B;AAAA,MAA8B,MAAM,GAAwB,KAAK,CAA7B,MAApC;AAAA,MAAsC,iBAAiB,GAAK,KAAK,CAAV,iBAAvD;AAER,MAAM,mBAAmB,GACvB,8FADF;AAGA,MAAM,YAAY,GAChB,OAAO,kBAAP,KAA8B,QAA9B,GACI,kBADJ,GAEI,mBAHN;;AAKA,MAAM,oBAAoB,GAAG,SAAvB,oBAAuB,CAAC,KAAD,EAAwB;AACnD,IAAA,KAAK,CAAC,eAAN;AACA,IAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD,GAHD;;AAKA,MAAM,YAAY,GAAG;AACnB,IAAA,SAAS,EAAE,YADQ;AAEnB,mBAAe,iBAFI;AAGnB,IAAA,OAAO,EAAE;AAHU,GAArB;AAMA,MAAI,MAAJ,EAAY,OAAO,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,OAAA,CAAA,EAAA,EAAU,YAAV,CAAA,EAAyB,QAAzB,CAAP;AAEZ,SAAO,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,OAAA,CAAA,EAAA,EAAS,YAAT,CAAA,EAAwB,QAAxB,CAAP;AACD,CAzBD;AClKA;;;;;AAGO,IAAM,GAAG,GAAuB,SAA1B,GAA0B,CAAC,KAAD,EAAM;AACnC,MAAA,aAAa,GAA8B,KAAK,CAAnC,aAAb;AAAA,MAAe,EAAA,GAA4B,KAAK,CAAlB,KAA9B;AAAA,MAAe,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,OAAH,GAAU,EAA9B;AAAA,MAAgC,MAAM,GAAK,KAAK,CAAV,MAAtC;AAEA,MAAA,KAAK,GAAK,cAAc,GAAnB,KAAL;AAER,MAAI,CAAC,MAAL,EAAa,OAAO,IAAP;AAEb,SACE,KAAA,CAAA,aAAA,CAAC8E,KAAD,EAAS;AACP,IAAA,SAAS,EAAE,eAAa,KADjB;AAEP,IAAA,OAAO,EAAE,IAFF;AAGP,IAAA,QAAQ,EAAE,aAHH;AAIP,IAAA,MAAM,EAAE,MAJD;AAKP,IAAA,OAAO,EAAE,IALF;AAMP,IAAA,KAAK,EAAE,CAAC,KAAK,IAAI,EAAV,EAAc,OAAd,CAAsB,GAAtB,EAA2B,GAA3B;AANA,GAAT,CADF;AAUD,CAjBM;;ICTM,YAAY,GAAG,SAAf,YAAe,CAAC,IAAD,EAAc;AACxC,MAAI,CAAC,IAAL,EAAW,OAAO,KAAP;AAEX,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAL,CAAa,UAAU,EAAvB,EAA2B,EAA3B,CAAjB;AACA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAT,CAAiB,UAAjB,EAA6B,EAA7B,CAAhB;AAEA,SAAO,CAAC,OAAR;AACF,C;;AAEA,IAAM,cAAc,GAAe,CACjC,MADiC,E;AAGjC,MAHiC,EAIjC,MAJiC,EAKjC,OALiC,EAMjC,WANiC,EAOjC,UAPiC,EAQjC,QARiC,EASjC,MATiC,EAUjC,MAViC,EAWjC,UAXiC,EAYjC,MAZiC,EAajC,YAbiC,EAcjC,YAdiC,EAejC,QAfiC,CAAnC;;AAkBA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,CAAC,OAAD,EAAgB;AACzC,MAAM,YAAY,GAAG,uBAArB;AACA,MAAM,OAAO,GAAG,OAAO,CAAC,KAAR,CAAc,YAAd,CAAhB;AACA,MAAM,WAAW,GAAG,qBAApB;AAEA,MAAM,KAAK,GAAG,OAAO,GACjB,OAAO,CAAC,GAAR,CAAY,UAAC,KAAD,EAAM;AAChB,QAAM,CAAC,GAAG,WAAW,CAAC,IAAZ,CAAiB,KAAjB,CAAV;AACA,WAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAD,CAAF,EAAO,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,GAHD,CADiB,GAKjB,EALJ;AAOA,SAAO,KAAK,CAAC,IAAN,EAAP;AACD,CAbD;;AAeA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,OAAD,EAAgB;AACxC,MAAM,SAAS,GAAG,6CAAlB;AACA,MAAM,OAAO,GAAG,OAAO,CAAC,KAAR,CAAc,SAAd,CAAhB;AACA,SAAO,OAAO,IAAI,EAAlB;AACD,CAJD;;IAMa,QAAQ,GAAG,SAAX,QAAW,CAAC,KAAD,EAAiB,MAAjB,EAAkC,GAAlC,EAA6C;AAAX,MAAA,GAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,GAAA,GAAA,KAAA;AAAW;;AACnE,MAAI,CAAC,KAAD,IAAU,CAAC,MAAf,EAAuB,OAAO,EAAP;;AACvB,MAAI,KAAK,CAAC,MAAN,GAAe,MAAnB,EAA2B;AACzB,WAAO,KAAG,KAAK,CAAC,SAAN,CAAgB,CAAhB,EAAmB,MAAM,GAAG,GAAG,CAAC,MAAhC,CAAH,GAA6C,GAApD;AACD;;AACD,SAAO,KAAP;AACF,C;;AAOA,IAAM,iBAAiB,GAA8C;;AAEnE,EAAA,IAAI,EAAE,cAAC,KAAD,EAAyB;AACrB,QAAA,QAAQ,GAAW,KAAK,CAAhB,QAAR;AAAA,QAAU,IAAI,GAAK,KAAK,CAAV,IAAd;AAER,QAAM,OAAO,GAAG,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,UAAN,CAAiB,SAAjB,CAAhB;AACA,QAAM,KAAK,GAAG,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,UAAN,CAAiB,MAAjB,CAAd;;AAEA,QAAI,CAAC,IAAD,IAAU,CAAC,OAAD,IAAY,CAAC,KAA3B,EAAmC;AACjC,aAAO,QAAP;AACD;;AAED,WACE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACE,MAAA,SAAS,EAAE,MAAG,KAAK,GAAG,4BAAH,GAAkC,EAA1C,CADb;AAEE,MAAA,IAAI,EAAE,IAFR;AAGE,MAAA,GAAG,EAAC,8BAHN;AAIE,MAAA,MAAM,EAAC;AAJT,KAAA,EAMG,QANH,CADF;AAUD,GAtBkE;AAuBnE,EAAA,IAAI,EAAE;AAvB6D,CAArE;;AA0BA,IAAM,mBAAmB,GAAG,SAAtB,mBAAsB,GAAA;AAC1B,WAAS,OAAT,CAAiB,KAAjB,EAA+C;AAC7C,WAAO;AACL,MAAA,QAAQ,EAAE,CAAC;AAAE,QAAA,IAAI,EAAE,MAAR;AAAgB,QAAA,KAAK,EAAE;AAAvB,OAAD,CADL;AAEL,MAAA,SAAS,EAAE,mBAFN;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP;AAKD;;AAED,MAAM,SAAS,GAAG,SAAZ,SAAY,CAAoB,WAApB,EAAkC;AAClD,IAAA,cAAc,CAAC,WAAD,EAAc,UAAU,EAAxB,EAA4B,OAA5B,CAAd;AACA,WAAO,WAAP;AACD,GAHD;;AAKA,SAAO,SAAP;AACD,CAfD;;AAiBA,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CAG7B,eAH6B,EAGM;AAChC,SAAA,YAAA;AACH,QAAM,mBAAmB,GAAG,eAAe,CACxC,GADyB,CACrB,UAAC,IAAD,EAAK;AAAK,aAAA,IAAI,CAAC,IAAL,IAAa,IAAI,CAAC,EAAlB;AAAoB,KADT,EAEzB,MAFyB,CAElB,OAFkB,EAGzB,GAHyB,CAGrB,YAHqB,CAA5B;;AAKA,aAAS,OAAT,CAAiB,KAAjB,EAA8B;AAC5B,UAAM,YAAY,GAAG,KAAK,CAAC,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAArB;AACA,UAAM,IAAI,GAAG,eAAe,CAAC,IAAhB,CACX,UAAC,EAAD,EAAa;YAAV,EAAE,GAAA,EAAA,CAAA,E;YAAE,IAAI,GAAA,EAAA,CAAA,I;AAAO,eAAA,IAAI,KAAK,YAAT,IAAyB,EAAE,KAAK,YAAhC;AAA4C,OADnD,CAAb;AAGA,aAAO;AACL,QAAA,QAAQ,EAAE,CAAC;AAAE,UAAA,IAAI,EAAE,MAAR;AAAgB,UAAA,KAAK,EAAE;AAAvB,SAAD,CADL;AAEL,QAAA,cAAc,EAAE,IAFX;AAGL,QAAA,IAAI,EAAE;AAHD,OAAP;AAKD;;AAED,QAAM,SAAS,GAAG,SAAZ,SAAY,CAAoB,WAApB,EAAkC;AAClD,UAAI,CAAC,mBAAmB,CAAC,MAAzB,EAAiC;AAC/B,eAAO,WAAP;AACD;;AACD,UAAM,mBAAmB,GAAG,IAAI,MAAJ,CAC1B,mBAAmB,CAAC,GAApB,CAAwB,UAAC,QAAD,EAAS;AAAK,eAAA,MAAI,QAAJ;AAAc,OAApD,EAAsD,IAAtD,CAA2D,GAA3D,CAD0B,EAE1B,GAF0B,CAA5B;AAIA,MAAA,cAAc,CAAC,WAAD,EAAc,mBAAd,EAAmC,OAAnC,CAAd;AACA,aAAO,WAAP;AACD,KAVD;;AAYA,WAAO,SAAP;AACD,GA/BI;AA+BJ,CAnCD;;AAyCA,IAAM,OAAO,GAAG,SAAV,OAAU,CACd,KADc,EACc;AACzB,SAAA,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EAA6C,KAAK,CAAC,QAAnD,CAAA;AAAmE,CAFxE;;IAUa,UAAU,GAAG,SAAb,UAAa,CACxB,IADwB,EAExB,eAFwB,EAGxB,OAHwB,EAGO;AAA/B,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,EAAA;AAA+B,GAAA,C;;;;AAI/B,MAAI,CAAC,IAAL,EAAW,OAAO,IAAP;AAEX,MAAI,OAAO,GAAG,IAAd;AACA,MAAM,aAAa,GAAG,kBAAkB,CAAC,OAAD,CAAxC;AACA,MAAM,UAAU,GAAG,iBAAiB,CAAC,OAAD,CAApC;AACA,MAAM,UAAU,GAAG,0BAAnB,CAT+B,C;;AAY/B,EAAA,OAAO,CAAC,IAAR,CAAa,OAAb,EAAsB,OAAtB,CAA8B,UAAC,EAAD,EAAsB;QAAnB,IAAI,GAAA,EAAA,CAAA,I;QAAE,IAAI,GAAA,EAAA,CAAA,I;QAAE,KAAK,GAAA,EAAA,CAAA,K;AAChD,QAAM,aAAa,GAAG,UAAU,CAAC,IAAX,CAAgB,UAAC,KAAD,EAAM;AAAA,aAAK,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,QAAP,CAAgB,KAAhB,CAAL;AAA2B,KAAjD,CAAtB,CADkD,C;;AAIlD,QAAM,eAAe,GACnB,aAAa,IACb,aAAa,CAAC,MAAd,CAAqB,UAAC,IAAD,EAAK;AACxB,UAAM,YAAY,GAAG,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,OAAN,CAAc,UAAd,EAA0B,EAA1B,CAArB;AACA,UAAM,YAAY,GAAG,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,OAAN,CAAc,UAAd,EAA0B,EAA1B,CAArB;AAEA,UAAI,CAAC,YAAD,IAAiB,CAAC,YAAtB,EAAoC,OAAO,KAAP;AAEpC,aACE,YAAY,CAAC,QAAb,CAAsB,YAAtB,KACA,YAAY,CAAC,QAAb,CAAsB,YAAtB,CAFF;AAID,KAVD,CAFF;AAcA,QAAI,eAAe,CAAC,MAAhB,GAAyB,CAAzB,IAA8B,aAAlC,EAAiD;AAEjD,QAAM,WAAW,GACf,IAAI,KAAK,OAAT,GAAmB,KAAnB,GAA2B,KAAK,CAAC,OAAN,CAAc,UAAd,EAA0B,EAA1B,CAD7B;AAGA,IAAA,OAAO,GAAG,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,MAAI,WAAJ,GAAe,IAAf,GAAoB,SAAS,CAAC,IAAD,CAA7B,GAAmC,GAA1D,CAAV;AACD,GAxBD;AA0BA,MAAM,OAAO,GAAG,CAAC,mBAAD,CAAhB;;AAEA,MAAI,eAAe,KAAA,IAAf,IAAA,eAAe,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAA,eAAe,CAAE,MAArB,EAA6B;AAC3B,IAAA,OAAO,CAAC,IAAR,CAAa,sBAAsB,CAAC,eAAD,CAAnC;AACD;;AAED,MAAM,SAAS,GAAA,OAAA,CAAA,OAAA,CAAA;AACb,IAAA,OAAO,EAAE;AADI,GAAA,EAEV,iBAFU,CAAA,EAGV,OAAO,CAAC,uBAHE,CAAf;;AAMA,SACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,YAAY,EAAE,cADF;AAEZ,IAAA,UAAU,EAAE,IAFA;AAGZ,IAAA,OAAO,EAAE,OAHG;AAIZ,IAAA,SAAS,EAAE,SAJC;AAKZ,IAAA,MAAM,EAAE,OALI;AAMZ,IAAA,gBAAgB,EAAE,0BAAC,GAAD,EAAI;AACpB,aAAA,GAAG,CAAC,UAAJ,CAAe,QAAf,IAA2B,GAA3B,GAAiC,iBAAiB,CAAC,cAAlB,CAAiC,GAAjC,CAAjC;AAAsE,KAP5D;AASZ,IAAA,gBAAgB,EAAE;AATN,GAAd,CADF;AAaF,C;;AAEA,SAAS,YAAT,CAAsB,IAAtB,EAAkC;AAChC,SAAO,IAAI,CAAC,OAAL,CAAa,wBAAb,EAAuC,MAAvC,CAAP;AACD;;AAED,SAAS,EAAT,GAAW;AACT,SAAO,CAAE,CAAC,IAAI,IAAI,CAAC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsC,QAAtC,CAA+C,EAA/C,EAAmD,SAAnD,CAA6D,CAA7D,CAAP;AACD,C,CAED;;;SACgB,gB,GAAgB;;AAE9B,SAAQ,EAAE,KAAG,EAAE,EAAP,GAAU,GAAV,GAAc,EAAE,EAAhB,GAAmB,GAAnB,GAAuB,EAAE,EAAzB,GAA4B,GAA5B,GAAgC,EAAE,EAAlC,GAAqC,GAArC,GAAyC,EAAE,EAA3C,GAA8C,EAAE,EAAhD,GAAmD,EAAE,EAA7D;AACD;;IAEY,WAAW,GAAG,SAAd,WAAc,CACzB,2BADyB,EAEzB,KAFyB,EAGzB,QAHyB,EAGY;AAErC,MAAI,2BAA2B,KAAK,SAAhC,IAA6C,QAAjD,EAA2D;AACzD,IAAA,2BAA2B,GAAG,QAA9B;AACD;;AAED,MAAI,KAAK,CAAC,cAAN,CAAqB,2BAArB,CAAJ,EAAuD;;AAErD,QAAM,OAAO,GAAG,2BAAhB;AACA,WAAO,OAAP;AACD,GAVoC,C;;;AAarC,MAAM,kBAAkB,GAAG,2BAA3B;;AAEA,MACE,OAAO,kBAAP,KAA8B,QAA9B,IACA,OAAO,kBAAP,KAA8B,QAD9B,IAEA,OAAO,kBAAP,KAA8B,SAF9B,IAGA,kBAAkB,IAAI,IAJxB,EAKE;AACA,WAAO,kBAAP;AACD;;AAED,SAAO,KAAA,CAAA,aAAA,CAAC,kBAAD,EAAmB,OAAA,CAAA,EAAA,EAAK,KAAL,CAAnB,CAAP;AACF,C;;ACxPA,IAAM,WAAW,GAAG,SAAd,WAAc,CAAC,MAAD,EAAiB,IAAjB,EAA8B;AAChD,MAAM,GAAG,GAAG,MAAM,GAAG,OAArB,CADgD,CACnB;;AAC7B,SAAO,SAAO,GAAP,GAAU,GAAV,IAAc,IAAI,GAAG,KAAH,GAAW,KAA7B,IAAkC,IAAlC,IAAuC,IAAI,GAAG,KAAH,GAAW,KAAtD,IAA2D,GAAlE;AACD,CAHD;;AAKA,IAAM,UAAU,GAAG,SAAb,UAAa,CAAC,MAAD,EAAe;AAChC,MAAM,IAAI,GAAG,MAAM,CAAC,KAAP,CAAa,EAAb,EAAiB,MAAjB,CAAwB,UAAC,GAAD,EAAM,CAAN,EAAO;AAC1C,IAAA,GAAG,GAAG,CAAC,GAAG,IAAI,CAAR,IAAa,GAAb,GAAmB,CAAC,CAAC,UAAF,CAAa,CAAb,CAAzB,CAD0C,CACD;;AACzC,WAAO,GAAG,GAAG,GAAb,CAF0C,CAEzB;AAClB,GAHY,EAGV,CAHU,CAAb;AAIA,SAAO,IAAI,CAAC,GAAL,CAAS,IAAT,IAAiB,IAAA,CAAA,GAAA,CAAA,EAAA,EAAM,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,GAAL,CAAS,IAAT,IAAiB,CAA5B,CAAV,CAAN,CAAxB;AACD,CAND;;AAQA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAC,KAAD,EAAgB,MAAhB,EAA8B;AACjD,SAAA,WAAW,CAAC,UAAU,CAAC,MAAD,CAAX,EAAqB,KAAK,CAAC,QAAN,CAAe,MAAf,CAArB,CAAX;AAAuD,CADzD;AAgBA;;;;;;AAIA,IAAM,4BAA4B,GAAG,SAA/B,4BAA+B,CASnC,KATmC,EASuB;;;AAElD,MAAA,aAAa,GAAc,KAAK,CAAnB,aAAb;AAAA,MAAe,OAAO,GAAK,KAAK,CAAV,OAAtB;AAEA,MAAA,KAAK,GAAK,cAAc,GAAnB,KAAL;AACA,MAAA,YAAY,GAAK,qBAAqB,GAA1B,YAAZ;AAER,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAD,CAArC;AACA,MAAM,IAAI,GAAG,WAAW,CAAC,OAAD,CAAxB;AAEA,MAAM,mBAAmB,GACvB,CAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IAAT,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAM,YAAY,GAAA,OAAlB,CAAb,MACA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,IADT,CADF;AAIA,MAAM,YAAY,GAAG,OAAO,CAC1B,YAAA;AAAM,WAAA,UAAU,CAAC,mBAAD,EAAsB,OAAO,CAAC,eAA9B,CAAV;AAAwD,GADpC,EAE1B,CAAC,OAAO,CAAC,eAAT,EAA0B,mBAA1B,CAF0B,CAA5B;AAKA,MAAM,MAAM,GAAG,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,EAAd,KAAoB,EAAnC;AACA,MAAM,SAAS,GAAG,OAAO,CAAC,YAAA;AAAM,WAAA,YAAY,CAAC,KAAD,EAAQ,MAAR,CAAZ;AAA2B,GAAlC,EAAoC,CAAC,MAAD,EAAS,KAAT,CAApC,CAAzB;AAEA,MAAM,qBAAqB,GAAG,WAAW,CACvC,YAAA;AAAM,WAAA,iBAAiB,CAAC,CAAC,QAAD,CAAD,EAAa;AAAE,MAAA,SAAS,EAAE,IAAI,CAAC;AAAlB,KAAb,CAAjB;AAAmE,GADlC,EAEvC,CAAC,IAAD,CAFuC,CAAzC;AAKA,MAAM,MAAM,GAAA,CAAA,EAAA,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,WAAZ,MAAuB,IAAvB,IAAuB,EAAA,KAAA,KAAA,CAAvB,GAAuB,KAAA,CAAvB,GAAuB,EAAA,CAAE,MAAF,CAAS,UAAC,EAAD,EAAS;QAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,WAAA,IAAI,KAAK,OAAT;AAAgB,GAAvC,CAAnC;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,yCACT,IAAI,CAAC,WAAL,GAAmB,wCAAnB,GAA8D,EADrD,IACuD,GADvD,IAEP,aAAa,GAAG,2CAAH,GAAiD,EAFvD,CADb;AAIE,IAAA,GAAG,EAAE,OAAO,CAAC;AAJf,GAAA,EAME,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO;AACL,IAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,IAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,IAAA,KAAK,EAAC,SAHD;AAIL,IAAA,IAAI,EAAE;AAJD,GAAP,CANF,EAYE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,mCADZ;AAEE,IAAA,KAAK,EAAE;AAAE,MAAA,KAAK,EAAE;AAAT;AAFT,GAAA,EAIE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EAAS,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,KAAsB,SAA/B,CAJF,CADF,CADF,EASG,MAAM,IAAI,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ;AAAC,IAAA,MAAM,EAAE;AAAT,GAAR,CATb,EAUE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,iCAAf;AAAgD,mBAAa;AAA7D,GAAA,EACG,YADH,EAEG,OAAO,CAAC,GAAR,IACC,KAAA,CAAA,aAAA,CAAC,GAAD,EAAI;AACF,IAAA,aAAa,EAAE,YADb;AAEF,IAAA,KAAK,EAAC,MAFJ;AAGF,IAAA,MAAM,EAAE,OAAO,CAAC;AAHd,GAAJ,CAHJ,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,IAAA,kBAAkB,EAAC,oCADN;AAEb,IAAA,iBAAiB,EAAE,qBAFN;AAGb,IAAA,OAAO,EAAE;AAHI,GAAf,CADF,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,WAAW,EAAC,oCADG;AAEf,IAAA,OAAO,EAAE;AAFM,GAAjB,CADF,CANF,CATF,CAVF,CAZF,CADF;AAiDD,CAvFD;;IAyFa,kBAAkB,GAAG,KAAK,CAAC,IAAN,CAChC,4BADgC,C;;ICzHrB,cAAc,GAAG,SAAjB,cAAiB,CAS5B,KAT4B,EAS0B;AAE9C,MAAA,OAAO,GAAK,KAAK,CAAV,OAAP;AAEA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAEA,MAAA,WAAW,GAAK,WAAW,CAAC,OAAD,CAAX,CAAL,WAAX;AAER,MAAM,cAAc,GAAG,WAAW,GAC9B,+FAD8B,GAE9B,4CAFJ;AAIA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAK,cAAc,GAAA,8BAAd,GAA6C,OAAO,CAAC,IAArD,GAAyD,GADzE;AAC4E,mBAC7D,2BAFf;AAGE,IAAA,GAAG,EAAE,OAAO,CAAC;AAHf,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,CAAC,6BAAD,CADJ,CALF,CADF;AAWF,C;;AChDO,IAAM,SAAS,GAAG,SAAZ,SAAY,GAAA;AAAM,SAC7B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,6FADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CADF,CAD6B;AAO9B,CAPM;;AASA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,GAAA;AAAM,SACtC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,2KADJ;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,QAAQ,EAAC;AAHX,GAAA,CADF,CADsC;AAQvC,CARM;;AAUA,IAAM,YAAY,GAAG,SAAf,YAAe,GAAA;AAAM,SAChC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,IADT;AAEE,IAAA,OAAO,EAAC,WAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AAAG,IAAA,QAAQ,EAAC,SAAZ;AAAsB,IAAA,QAAQ,EAAC;AAA/B,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,CAAC,EAAC;AAAR,GAAA,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,CAAC,EAAC;AAAR,GAAA,CAFF,CANF,CADgC;AAYjC,CAZM;;AAcA,IAAM,UAAU,GAAG,SAAb,UAAa,GAAA;AAAM,SAC9B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,4JADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CADF,CAD8B;AAO/B,CAPM;;AASA,IAAM,SAAS,GAAG,SAAZ,SAAY,GAAA;AAAM,SAC7B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,0SADJ;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,QAAQ,EAAC;AAHX,GAAA,CADF,CAD6B;AAQ9B,CARM;;AAUA,IAAM,OAAO,GAAG,SAAV,OAAU,GAAA;AAAM,SAC3B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,IADT;AAEE,IAAA,OAAO,EAAC,WAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,kYADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CANF,CAD2B;AAY5B,CAZM;;AAcA,IAAM,YAAY,GAAG,SAAf,YAAe,CAQ1B,EAR0B,EAWoB;;;MAF9C,OAAO,GAAA,EAAA,CAAA,O;MACP,CAAC,GAAA,EAAA,CAAA,C;AAED,MAAI,CAAC,OAAD,IAAY,CAAC,CAAjB,EAAoB,OAAO,IAAP;AAEpB,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,KAAK,EAAE;AAAE,MAAA,UAAU,EAAE,QAAd;AAAwB,MAAA,OAAO,EAAE;AAAjC;AAAZ,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,KAAK,EAAE;AACL,MAAA,QAAQ,EAAE,MADL;AAEL,MAAA,YAAY,EAAE,GAFT;AAGL,MAAA,UAAU,EAAE,KAHP;AAIL,MAAA,SAAS,EAAE;AAJN;AADT,GAAA,EAQG,OAAO,CAAC,SAAR,GACM,CAAC,CAAC,WAAD,CAAD,GAAc,GAAd,IACD,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,SAAR,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,IAAnB,MAAuB,CAAA,EAAA,GAAI,OAAO,CAAC,SAAZ,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqB,EAAA,CAAE,EAA9C,CADC,CADN,GAIG,CAAC,CAAC,gBAAD,CAZP,CAFF,CADF;AAmBD,CAjCM;;ACzCP,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAS/B,KAT+B,EASuB;;;AAGpD,MAAA,EAAA,GAWE,KAAK,CAXc,cAArB;AAAA,MAAA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAArB;AAAA,MACA,EAAA,GAUE,KAAK,CAVW,WADlB;AAAA,MACA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EADlB;AAAA,MAEA,EAAA,GASE,KAAK,CATc,cAFrB;AAAA,MAEA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAFrB;AAAA,MAGA,iBAAiB,GAQf,KAAK,CARU,iBAHjB;AAAA,MAIkB,oBAAoB,GAOpC,KAAK,CAP+B,gBAJtC;AAAA,MAKA,cAAc,GAMZ,KAAK,CANO,cALd;AAAA,MAMA,OAAO,GAKL,KAAK,CALA,OANP;AAAA,MAOA,iBAAiB,GAIf,KAAK,CAJU,iBAPjB;AAAA,MAQA,mBAAmB,GAGjB,KAAK,CAHY,mBARnB;AAAA,MASA,EAAA,GAEE,KAAK,CAFS,KAThB;AAAA,MASA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,QAAH,GAAW,EAThB;AAAA,MAUA,UAAU,GACR,KAAK,CADG,UAVV;AAaM,MAAA,OAAO,GAAK,iBAAiB,GAAtB,OAAP;AAER,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,OAAD,CAA7C;AACQ,MAAA,WAAW,GAAK,WAAW,CAAC,OAAD,CAAX,CAAL,WAAX;AAER,MAAM,aAAa,GAAA,CAAA,EAAA,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAZ,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqB,EAAA,CAAA,IAAA,CAAlB,OAAkB,CAAxC;AACA,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AAEA,MAAM,mBAAmB,GACvB,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,KAAvC,IAAgD,CAAC,CAAjD,IACA,aADA,IAEA,aAAa,CAAC,SAHhB;AAKA,MAAM,iBAAiB,GACrB,cAAc,CAAC,OAAf,CAAuB,eAAe,CAAC,KAAvC,IAAgD,CAAC,CAAjD,IACA,cADA,IAEA,CAAC,UAFD,IAGA,aAHA,IAIA,aAAa,CAAC,OALhB;;AAOA,MACE,CAAC,OAAD,IACA,OAAO,CAAC,IAAR,KAAiB,OADjB,IAEA,OAAO,CAAC,IAAR,KAAiB,QAFjB,IAGA,OAAO,CAAC,IAAR,KAAiB,WAHjB,IAIA,OAAO,CAAC,MAAR,KAAmB,QAJnB,IAKA,OAAO,CAAC,MAAR,KAAmB,SALnB,IAMA,cAPF,EAQE;AACA,WAAO,IAAP;AACD;;AAED,MAAI,WAAW,IAAI,WAAnB,EAAgC;AAC9B,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,WADvC;AACkD,qBACpC;AAFd,KAAA,EAIG,cAAc,IACb,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,KAAL,EAAU;AAAE,MAAA,iBAAiB,EAAE;AAArB,KAAV,CAAf,CALJ,EAOG,iBAAiB,IAChB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,sCAA1B,GAAiE,KAAjE,GAAsE,2BADnF;AAC8G,qBAChG,eAFd;AAGE,MAAA,OAAO,EAAE,oBAAoB,IAAI;AAHnC,KAAA,EAKE,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW,IAAX,CALF,CARJ,EAgBG,mBAAmB,IAClB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,sCAA1B,GAAiE,KAAjE,GAAsE,8BADnF;AACiH,qBACnG,yBAFd;AAGE,MAAA,OAAO,EAAE;AAHX,KAAA,EAKE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CALF,CAjBJ,CADF;AA4BD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,WADvC;AACkD,mBACpC;AAFd,GAAA,EAIG,mBAAmB,IAClB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,sCAA1B,GAAiE,KAAjE,GAAsE,8BADnF;AACiH,mBACnG,yBAFd;AAGE,IAAA,OAAO,EAAE;AAHX,GAAA,EAKE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CALF,CALJ,EAaG,iBAAiB,IAChB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,uBAAqB,KAArB,GAA0B,sCAA1B,GAAiE,KAAjE,GAAsE,2BADnF;AAC8G,mBAChG,eAFd;AAGE,IAAA,OAAO,EAAE,oBAAoB,IAAI;AAHnC,GAAA,EAKE,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW,IAAX,CALF,CAdJ,EAsBG,cAAc,IACb,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,KAAL,EAAU;AAAE,IAAA,iBAAiB,EAAE;AAArB,GAAV,CAAf,CAvBJ,CADF;AA4BD,CApHD;;IAsHa,cAAc,GAAG,KAAK,CAAC,IAAN,CAC5B,wBAD4B,C;;AC9I9B,IAAM,mCAAmC,GAA6C,SAAhF,mCAAgF,CACpF,KADoF,EAC/E;AAEG,MAAA,WAAW,GAA4C,KAAK,CAAjD,WAAX;AAAA,MAAa,WAAW,GAA+B,KAAK,CAApC,WAAxB;AAAA,MAA0B,OAAO,GAAsB,KAAK,CAA3B,OAAjC;AAAA,MAAmC,EAAA,GAAoB,KAAK,CAAV,WAAlD;AAAA,MAAmC,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAH,GAAI,EAAlD;AAEA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAI,eAAJ;AACA,MAAI,eAAJ;;AAEA,MAAI,WAAW,KAAK,CAApB,EAAuB;AACrB,QAAI,WAAJ,EAAiB;AACf,MAAA,eAAe,GAAG,OAAK,WAAvB;AACD,KAFD,MAEO;AACL,MAAA,eAAe,GAAG,CAAC,CAAC,SAAD,CAAnB;AACD;AACF;;AAED,MAAI,WAAW,IAAI,WAAW,GAAG,CAAjC,EAAoC;AAClC,QAAI,WAAJ,EAAiB;AACf,MAAA,eAAe,GAAM,WAAW,GAAA,GAAX,GAAe,WAApC;AACD,KAFD,MAEO;AACL,MAAA,eAAe,GAAG,CAAC,CAAC,0BAAD,EAA6B;AAC9C,QAAA,UAAU,EAAE;AADkC,OAA7B,CAAnB;AAGD;AACF;;AAED,MAAI,WAAW,IAAI,WAAW,KAAK,CAAnC,EAAsC;AACpC,WACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,MAAA,SAAS,EAAC,wCADZ;AACoD,qBACtC,sBAFd;AAGE,MAAA,OAAO,EAAE;AAHX,KAAA,EAKE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CALF,EAMG,WAAW,KAAK,CAAhB,GAAoB,eAApB,GAAsC,eANzC,CADF;AAUD;;AAED,SAAO,IAAP;AACD,CA1CD;;IA4Ca,yBAAyB,GAAG,KAAK,CAAC,IAAN,CACvC,mCADuC,C;;AC3DlC,IAAM,YAAY,GAAG,SAAf,YAAe,CAC1B,GAD0B,EACO;AAEjC,MAAI,GAAJ,EAAS;AACP,WAAQ,GAAiC,CAAC,OAAlC,KAA8C,SAAtD;AACD;;AACD,SAAO,KAAP;AACD,CAPM;ACmEP;;;;;AAGA,IAAM,0BAA0B,GAAG,KAAK,CAAC,UAAN,CACjC,UASE,KATF,EAUE,GAVF,EAUgD;;;AAG5C,MAAA,EAAA,GAOE,KAAK,CAPe,MAAtB;AAAA,MAAA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,MAAH,GAAgB,EAAtB;AAAA,MACA,EAAA,GAME,KAAK,CANY,YADnB;AAAA,MACA,YAAY,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EADnB;AAAA,MAEA,cAAc,GAKZ,KAAK,CALO,cAFd;AAAA,MAGA,gBAAgB,GAId,KAAK,CAJS,gBAHhB;AAAA,MAIA,eAAe,GAGb,KAAK,CAHQ,eAJf;AAAA,MAKiB,mBAAmB,GAElC,KAAK,CAF6B,eALpC;AAAA,MAMA,EAAA,GACE,KAAK,CADQ,OANf;AAAA,MAMA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EANf;AASM,MAAA,WAAW,GAAK,iBAAiB,GAAtB,WAAX;;AAEF,MAAA,EAAA,GAKF,WAAW,IAAI,EALb;AAAA,MACJ,oBAAoB,GAAA,EAAA,CAAA,oBADhB;AAAA,MAEJ,KAAK,GAAA,EAAA,CAAA,KAFD;AAAA,MAGO,aAAa,GAAA,EAAA,CAAA,SAHpB;AAAA,MAIJ,WAAW,GAAA,EAAA,CAAA,WAJP;;AAON,MAAM,SAAS,GAAG,oBAAoB,CAAC,aAAD,CAAtC;AACA,MAAM,eAAe,GAAG,mBAAmB,IAAI,oBAA/C;;AAEM,MAAA,EAAA,GAAgD,QAAQ,CAE5D,IAF4D,CAAxD;AAAA,MAAC,mBAAmB,GAAA,EAAA,CAAA,CAAA,CAApB;AAAA,MAAsB,sBAAsB,GAAA,EAAA,CAAA,CAAA,CAA5C;;AAGA,MAAA,EAAA,GAA0C,QAAQ,CAG9C,IAH8C,CAAlD;AAAA,MAAC,gBAAgB,GAAA,EAAA,CAAA,CAAA,CAAjB;AAAA,MAAmB,mBAAmB,GAAA,EAAA,CAAA,CAAA,CAAtC;;AAKN,MAAM,SAAS,GAAG,MAAM,CAAwB,IAAxB,CAAxB;AACA,MAAM,UAAU,GAAG,MAAM,CAAwB,IAAxB,CAAzB;AAEA,MAAM,WAAW,GAAG,WAAW,CAAC,UAAC,CAAD,EAAI,YAAJ,EAAwB;AACtD,IAAA,SAAS,CAAC,OAAV,GAAoB,CAAC,CAAC,MAAtB;AACA,IAAA,sBAAsB,CAAC,YAAD,CAAtB;AACD,GAH8B,EAG5B,EAH4B,CAA/B;AAKA,MAAM,WAAW,GAAG,WAAW,CAAC,YAAA;AAC9B,IAAA,sBAAsB,CAAC,IAAD,CAAtB;AACA,IAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,GAH8B,EAG5B,EAH4B,CAA/B;AAKA,EAAA,SAAS,CAAC,YAAA;;;AACR,QAAI,mBAAJ,EAAyB;AACvB,UAAM,OAAO,GAAA,CAAA,EAAA,GAAG,UAAU,CAAC,OAAd,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqB,EAAA,CAAE,qBAAF,EAAlC;AACA,UAAM,MAAM,GAAA,CAAA,EAAA,GAAG,SAAS,CAAC,OAAb,MAAoB,IAApB,IAAoB,EAAA,KAAA,KAAA,CAApB,GAAoB,KAAA,CAApB,GAAoB,EAAA,CAAE,qBAAF,EAAhC;AAEA,UAAM,SAAS,GAAG,YAAY,CAAC,GAAD,CAAZ,G,MACd,GAAG,CAAC,O,MAAO,I,IAAA,EAAA,KAAA,KAAA,C,GAAA,KAAA,C,GAAA,EAAA,CAAE,qBAAF,EADG,GAEd,IAFJ;AAIA,UAAI,CAAC,OAAD,IAAY,CAAC,MAAb,IAAuB,CAAC,SAA5B,EAAuC;AAEvC,UAAM,eAAe,GACnB,OAAO,CAAC,KAAR,KAAkB,SAAS,CAAC,KAA5B,IAAqC,OAAO,CAAC,CAAR,GAAY,SAAS,CAAC,CAA3D,GACI,CADJ,GAEI,MAAM,CAAC,IAAP,GACA,MAAM,CAAC,KAAP,GAAe,CADf,GAEA,SAAS,CAAC,IAFV,GAGA,OAAO,CAAC,KAAR,GAAgB,CANtB;AAQA,UAAM,aAAa,GACjB,MAAM,CAAC,CAAP,GAAW,OAAO,CAAC,CAAnB,GAAuB,MAAM,CAAC,KAAP,GAAe,CAAtC,GAA0C,eAD5C;AAGA,MAAA,mBAAmB,CAAC;AAClB,QAAA,KAAK,EAAE,aADW;AAElB,QAAA,OAAO,EAAE;AAFS,OAAD,CAAnB;AAID;AACF,GA3BQ,EA2BN,CAAC,mBAAD,EAAsB,GAAtB,CA3BM,CAAT;;AA6BA,MAAM,uBAAuB,GAAG,SAA1B,uBAA0B,CAAC,IAAD,EAAoB;AAAA,WAClD,gBAAgB,KAAA,IAAhB,IAAA,gBAAgB,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAA,gBAAgB,CACZ,GADJ,CACQ,UAAC,QAAD,EAAS;;;AACb,UAAI,QAAQ,CAAC,IAAT,KAAkB,IAAtB,EAA4B;AAC1B,eAAO,CAAA,CAAA,EAAA,GAAA,QAAQ,CAAC,IAAT,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAE,IAAf,MAAmB,CAAA,EAAA,GAAI,QAAQ,CAAC,IAAb,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,EAAtC,CAAP;AACD;;AACD,aAAO,IAAP;AACD,KANH,EAOG,MAPH,CAOU,OAPV,CADkD;AAQhC,GARpB;;AAUA,MAAM,4BAA4B,GAAG,SAA/B,4BAA+B,CAAC,IAAD,EAAoB;;;AACvD,WAAA,CAAA,CAAA,EAAA,GAAA,gBAAgB,KAAA,IAAhB,IAAA,gBAAgB,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAA,gBAAgB,CAAE,IAAlB,CACE,UAAC,QAAD,EAAS;AAAK,aAAA,QAAQ,CAAC,IAAT,KAAkB,IAAlB,IAA0B,CAAC,CAAC,QAAQ,CAAC,IAArC;AAAyC,KADzD,CAAA,MACyD,IADzD,IACyD,EAAA,KAAA,KAAA,CADzD,GACyD,KAAA,CADzD,GACyD,EAAA,CACtD,IAFH,KAEW,SAFX;AAEoB,GAHtB;;AAKA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,kCACT,OAAO,GAAG,sCAAH,GAA4C,EAD1C,CADb;AAGI,mBACU,mBAJd;AAKE,IAAA,GAAG,EAAE;AALP,GAAA,EAOG,CAAC,CAAC,mBAAF,IAAyB,YAAzB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,qCADZ;AAEE,IAAA,GAAG,EAAE,UAFP;AAGE,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,gBAAgB,KAAA,IAAhB,IAAA,gBAAgB,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAA,gBAAgB,CAAE,OADnB;AAEL,MAAA,UAAU,EAAE,gBAAgB,GAAG,SAAH,GAAe;AAFtC;AAHT,GAAA,EAQE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,OAAf;AAAuB,IAAA,KAAK,EAAE;AAAE,MAAA,IAAI,EAAE,gBAAgB,KAAA,IAAhB,IAAA,gBAAgB,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAA,gBAAgB,CAAE;AAA1B;AAA9B,GAAA,CARF,EAQqE,CAAA,EAAA,GAClE,uBAAuB,CAAC,mBAAD,CAD2C,MACtB,IADsB,IACtB,EAAA,KAAA,KAAA,CADsB,GACtB,KAAA,CADsB,G,GACpB,G,CAC7C,UAAC,IAAD,EAAO,CAAP,EAAU,KAAV,EAAe;AAAK,WAClB,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAC,sBAAhB;AAAuC,MAAA,GAAG,EAAE,SAAO,CAAP,GAAQ,GAAR,GAAY;AAAxD,KAAA,EACG,KAAG,IAAH,IAAU,CAAC,GAAG,KAAK,CAAC,MAAN,GAAe,CAAnB,GAAuB,IAAvB,GAA8B,EAAxC,CADH,CADkB;AAInB,G,CAdL,CARJ,EA0BE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,eAAe,KAAA,IAAf,IAAA,eAAe,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAA,eAAe,CAAE,GAAjB,CAAqB,UAAC,cAAD,EAAe;AACnC,QAAM,UAAU,GAAG,4BAA4B,CAAC,cAAc,CAAC,EAAhB,CAA/C;AACA,QAAM,KAAK,GAAG,eAAe,IAAI,eAAe,CAAC,cAAc,CAAC,EAAhB,CAAhD;AAEA,WACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,MAAA,SAAS,EAAC,uCADZ;AACmD,mBACtC,cAAc,CAAC,EAF5B;AAGE,MAAA,GAAG,EAAE,UAAQ,cAAc,CAAC,EAH9B;AAIE,MAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AACb,eAAA,cAAc,IAAI,cAAc,CAAC,cAAc,CAAC,EAAhB,EAAoB,KAApB,CAAhC;AAA0D;AAL9D,KAAA,EAQG,CAAC,CAAC,KAAF,IAAW,YAAX,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,OAAO,EAAE,WAFX;AAGE,MAAA,YAAY,EAAE,sBAAC,CAAD,EAAE;AAAK,eAAA,WAAW,CAAC,CAAD,EAAI,cAAc,CAAC,EAAnB,CAAX;AAAiC,OAHxD;AAIE,MAAA,YAAY,EAAE;AAJhB,KAAA,EAMG,UAAU,GACT,KAAA,CAAA,aAAA,CAACC,QAAD,EAAO;AACL,MAAA,KAAK,EAAE,UAAU,CAAC,KADb;AAEL,MAAA,IAAI,EAAE,UAAU,CAAC,IAFZ;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP,CADS,GAOT,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,CAbJ,CADF,CATJ,EA4BG,KAAK,IACJ,KAAA,CAAA,aAAA,CAAC,KAAD,C;AAAA,M;;AAEE,MAAA,KAAK,EAAE;OACH,W,EAAW;;AAEf,MAAA,IAAI,EAAE;AAFS,K,CAHjB,CA7BJ,EAqCG,OAAO,CAAC,KAAD,CAAP,IAAkB,YAAlB,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAC;AAAhB,KAAA,EACG,KAAK,IAAI,EADZ,CAtCJ,CADF;AA6CD,GAjDA,CADH,CA1BF,CADF;AAiFD,CArLgC,CAAnC;AAwLA;;;;IAGa,gBAAgB,GAAG,KAAK,CAAC,IAAN,CAC9B,0BAD8B,C;;AC1NhC,IAAM,uBAAuB,GAAG,SAA1B,uBAA0B,CAS9B,KAT8B,EASG;AAG/B,MAAA,OAAO,GAKL,KAAK,CALA,OAAP;AAAA,MACA,eAAe,GAIb,KAAK,CAJQ,eADf;AAAA,MAEiB,mBAAmB,GAGlC,KAAK,CAH6B,eAFpC;AAAA,MAGA,SAAS,GAEP,KAAK,CAFE,SAHT;AAAA,MAIA,EAAA,GACE,KAAK,CADQ,OAJf;AAAA,MAIA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAJf;AAOM,MAAA,WAAW,GAAK,iBAAiB,GAAtB,WAAX;;AAEF,MAAA,EAAA,GACJ,WAAW,IAAI,EADX;AAAA,MAAE,oBAAoB,GAAA,EAAA,CAAA,oBAAtB;AAAA,MAAwB,KAAK,GAAA,EAAA,CAAA,KAA7B;AAAA,MAA0C,aAAa,GAAA,EAAA,CAAA,SAAvD;AAAA,MAAyD,WAAW,GAAA,EAAA,CAAA,WAApE;;AAGN,MAAM,SAAS,GAAG,OAAO,CAAC,YAAA;AAAM,WAAA,oBAAoB,CAAC,aAAD,CAApB;AAAmC,GAA1C,EAA4C,CACnE,aADmE,CAA5C,CAAzB;AAIA,MAAM,eAAe,GAAG,mBAAmB,IAAI,oBAAvB,IAA+C,EAAvE;;AAEA,MAAM,qBAAqB,GAAG,SAAxB,qBAAwB,GAAA;AAC5B,WAAA,MAAM,CAAC,MAAP,CAAc,eAAe,IAAI,EAAjC,EAAqC,MAArC,CACE,UAAC,KAAD,EAAQ,KAAR,EAAa;AAAK,aAAA,KAAK,GAAG,KAAR;AAAa,KADjC,EAEE,CAFF,CAAA;AAGC,GAJH;;AAMA,MAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,IAAD,EAAa;AACpC,WAAA,eAAe,CAAC,IAAhB,CAAqB,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,EAAP,KAAc,IAAd;AAAkB,KAAnD,CAAA;AAAoD,GADtD;;AAGA,MAAM,gBAAgB,GAAG,SAAnB,gBAAmB,GAAA;AACvB,QAAI,CAAC,SAAL,EAAgB,OAAO,EAAP;AAChB,QAAM,QAAQ,GAAG,IAAI,GAAJ,CAAQ,SAAS,CAAC,GAAV,CAAc,UAAC,EAAD,EAAS;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,IAAA;AAAI,KAAhC,CAAR,CAAjB;AAEA,WAAO,KAAK,CAAC,IAAN,CAAW,QAAX,CAAP;AACD,GALD;;AAOA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,8BACT,OAAO,GAAG,kCAAH,GAAwC,EADtC,CADb;AAGI,mBACU,eAJd;AAKE,IAAA,OAAO,EAAE;AALX,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,EACG,gBAAgB,GAAG,GAAnB,CAAuB,UAAC,YAAD,EAAa;AACnC,QAAM,eAAe,GAAG,gBAAgB,CAAC,YAAD,CAAxC;AACA,WAAO,eAAe,GACpB,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,MAAA,GAAG,EAAE,eAAe,CAAC;AAAzB,KAAA,EACG,KAAK,IACJ,KAAA,CAAA,aAAA,CAAC,KAAD,C;AAAA,M;;AAEE,MAAA,KAAK,EAAE;OACH,W,EAAW;;AAEf,MAAA,IAAI,EAAE,SAFS;AAGf,MAAA,IAAI,EAAE;AAHS,K,CAHjB,CAFJ,EAYK,MAZL,CADoB,GAclB,IAdJ;AAeD,GAjBA,CADH,EAmBE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACG,qBAAqB,EADxB,CADF,CAnBF,CAPF,CADF;AAmCD,CAjFD;;IAmFa,aAAa,GAAG,KAAK,CAAC,IAAN,CAC3B,uBAD2B,C;;ACpF7B,IAAM,6BAA6B,GAAG,SAAhC,6BAAgC,CASpC,KAToC,EASG;AAGrC,MAAA,cAAc,GAIZ,KAAK,CAJO,cAAd;AAAA,MACA,eAAe,GAGb,KAAK,CAHQ,eADf;AAAA,MAEiB,mBAAmB,GAElC,KAAK,CAF6B,eAFpC;AAAA,MAGA,SAAS,GACP,KAAK,CADE,SAHT;AAMM,MAAA,WAAW,GAAK,iBAAiB,GAAtB,WAAX;;AAEF,MAAA,EAAA,GAKF,WAAW,IAAI,EALb;AAAA,MACJ,oBAAoB,GAAA,EAAA,CAAA,oBADhB;AAAA,MAEJ,KAAK,GAAA,EAAA,CAAA,KAFD;AAAA,MAGO,gBAAgB,GAAA,EAAA,CAAA,SAHvB;AAAA,MAIJ,WAAW,GAAA,EAAA,CAAA,WAJP;;AAOA,MAAA,EAAA,GAAgD,QAAQ,CAE5D,SAF4D,CAAxD;AAAA,MAAC,mBAAmB,GAAA,EAAA,CAAA,CAAA,CAApB;AAAA,MAAsB,sBAAsB,GAAA,EAAA,CAAA,CAAA,CAA5C;;AAIN,MAAM,SAAS,GAAG,oBAAoB,CAAC,gBAAD,CAAtC;AAEA,MAAM,eAAe,GAAG,mBAAmB,IAAI,oBAAvB,IAA+C,EAAvE;;AAEA,MAAI,CAAC,SAAD,IAAc,SAAS,CAAC,MAAV,KAAqB,CAAvC,EAA0C;AACxC,WAAO,IAAP;AACD;;AAED,MAAM,uBAAuB,GAAG,SAA1B,uBAA0B,CAAC,IAAD,EAAc;AAAA,WAC5C,SAAS,KAAA,IAAT,IAAA,SAAS,KAAA,KAAA,CAAT,GAAS,KAAA,CAAT,GAAA,SAAS,CACL,GADJ,CACQ,UAAC,QAAD,EAAS;;;AACb,UAAI,QAAQ,CAAC,IAAT,KAAkB,IAAtB,EAA4B;AAC1B,eAAO,CAAA,CAAA,EAAA,GAAA,QAAQ,CAAC,IAAT,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAE,IAAf,MAAmB,CAAA,EAAA,GAAI,QAAQ,CAAC,IAAb,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,EAAtC,CAAP;AACD;;AACD,aAAO,IAAP;AACD,KANH,EAOG,MAPH,CAOU,OAPV,CAD4C;AAQ1B,GARpB;;AAUA,MAAM,qBAAqB,GAAG,SAAxB,qBAAwB,GAAA;AAC5B,WAAA,MAAM,CAAC,MAAP,CAAc,eAAe,IAAI,EAAjC,EAAqC,MAArC,CACE,UAAC,KAAD,EAAQ,KAAR,EAAa;AAAK,aAAA,KAAK,GAAG,KAAR;AAAa,KADjC,EAEE,CAFF,CAAA;AAGC,GAJH;;AAMA,MAAM,gBAAgB,GAAG,SAAnB,gBAAmB,GAAA;AACvB,QAAI,CAAC,SAAL,EAAgB,OAAO,EAAP;AAChB,QAAM,QAAQ,GAAG,IAAI,GAAJ,CAAQ,SAAS,CAAC,GAAV,CAAc,UAAC,EAAD,EAAS;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,IAAA;AAAI,KAAhC,CAAR,CAAjB;AAEA,WAAO,KAAK,CAAC,IAAN,CAAW,QAAX,CAAP;AACD,GALD;;AAOA,MAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,IAAD,EAAa;AACpC,WAAA,eAAe,CAAC,IAAhB,CAAqB,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,EAAP,KAAc,IAAd;AAAkB,KAAnD,CAAA;AAAoD,GADtD;;AAGA,SACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,IAAA,SAAS,EAAC,iCADZ;AAC6C,mBAC/B,sBAFd;AAGE,IAAA,YAAY,EAAE,wBAAA;AAAM,aAAA,sBAAsB,CAAC,SAAD,CAAtB;AAAiC;AAHvD,GAAA,EAKG,gBAAgB,GAAG,GAAnB,CAAuB,UAAC,YAAD,EAAe,CAAf,EAAgB;;;AACtC,QAAM,eAAe,GAAG,gBAAgB,CAAC,YAAD,CAAxC;AACA,WAAO,eAAe,GACpB,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,MAAA,SAAS,EAAC,sCADZ;AAEE,MAAA,GAAG,EAAE,CAAG,eAAe,KAAA,IAAf,IAAA,eAAe,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAA,eAAe,CAAE,EAApB,IAAsB,GAAtB,GAA0B,CAFjC;AAGE,MAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AAAK,eAAA,cAAc,CAAC,YAAD,EAAe,KAAf,CAAd;AAAmC;AAHzD,KAAA,EAKE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,YAAY,EAAE,wBAAA;AAAM,eAAA,sBAAsB,CAAC,YAAD,CAAtB;AAAoC;AAA9D,KAAA,EACG,KAAK,IACJ,KAAA,CAAA,aAAA,CAAC,KAAD,C;AAAA,M;;AAEE,MAAA,KAAK,EAAE;OACH,W,EAAW;;AAEf,MAAA,IAAI,EAAE,SAFS;AAGf,MAAA,IAAI,EAAE;AAHS,K,CAHjB,CAFJ,EAYO,MAZP,CALF,EAkBG,mBAAmB,MAAA,CAAA,EAAA,GAAK,gBAAgB,CAAC,YAAD,CAArB,MAAmC,IAAnC,IAAmC,EAAA,KAAA,KAAA,CAAnC,GAAmC,KAAA,CAAnC,GAAmC,EAAA,CAAE,EAArC,CAAnB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,CADF,EAC2B,CAAA,EAAA,GACxB,uBAAuB,CAAC,mBAAD,CADC,MACoB,IADpB,IACoB,EAAA,KAAA,KAAA,CADpB,GACoB,KAAA,CADpB,G,GACsB,I,CAAK,I,CAFtD,CAnBJ,CADoB,GA0BlB,IA1BJ;AA2BD,GA7BA,CALH,EAmCG,CAAA,SAAS,KAAA,IAAT,IAAA,SAAS,KAAA,KAAA,CAAT,GAAS,KAAA,CAAT,GAAA,SAAS,CAAE,MAAX,MAAsB,CAAtB,IACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,IAAA,SAAS,EAAC;AAAd,GAAA,EACG,qBAAqB,EADxB,CApCJ,CADF;AA2CD,CA5GD;;IA8Ga,mBAAmB,GAAG,KAAK,CAAC,IAAN,CACjC,6BADiC,C;;AChGnC,IAAM,8BAA8B,GAAG,SAAjC,8BAAiC,CASrC,KATqC,EASc;;;AAGjD,MAAA,gBAAgB,GAYd,KAAK,CAZS,gBAAhB;AAAA,MACA,iBAAiB,GAWf,KAAK,CAXU,iBADjB;AAAA,MAEA,kBAAkB,GAUhB,KAAK,CAVW,kBAFlB;AAAA,MAGA,OAAO,GASL,KAAK,CATA,OAHP;AAAA,MAIwB,mBAAmB,GAQzC,KAAK,CARoC,sBAJ3C;AAAA,MAKwB,mBAAmB,GAOzC,KAAK,CAPoC,sBAL3C;AAAA,MAMA,EAAA,GAME,KAAK,CAN4B,aANnC;AAAA,MAMA,eAAa,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,aAAH,GAAsB,EANnC;AAAA,MAOA,EAAA,GAKE,KAAK,CALmC,gBAP1C;AAAA,MAOA,kBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,gBAAH,GAA0B,EAP1C;AAAA,MAQA,mBAAmB,GAIjB,KAAK,CAJY,mBARnB;AAAA,MASA,EAAA,GAGE,KAAK,CAHuB,UAT9B;AAAA,MASA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,UAAH,GAAoB,EAT9B;AAAA,MAUA,EAAA,GAEE,KAAK,CAFS,KAVhB;AAAA,MAUA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,QAAH,GAAW,EAVhB;AAAA,MAWA,UAAU,GACR,KAAK,CADG,UAXV;;AAcI,MAAA,EAAA,GAAsB,qBAAqB,EAA3C;AAAA,MAAE,CAAC,GAAA,EAAA,CAAA,CAAH;AAAA,MAAK,YAAY,GAAA,EAAA,CAAA,YAAjB;;AAEE,MAAA,iBAAiB,GAAK,cAAc,GAAnB,iBAAjB;;AAEF,MAAA,EAAA,GAAuC,oBAAoB,CAAC,OAAD,EAAU;AACzE,IAAA,eAAe,EAAE,mBADwD;AAEzE,IAAA,eAAe,EAAE;AAFwD,GAAV,CAA3D;AAAA,MAAE,eAAe,GAAA,EAAA,CAAA,eAAjB;AAAA,MAAmB,eAAe,GAAA,EAAA,CAAA,eAAlC;;AAKA,MAAA,EAAA,GAIF,gBAAgB,CAAC,OAAD,EAAU,mBAAV,CAJd;AAAA,MACJ,iBAAiB,GAAA,EAAA,CAAA,iBADb;AAAA,MAEJ,mBAAmB,GAAA,EAAA,CAAA,mBAFf;AAAA,MAGJ,qBAAqB,GAAA,EAAA,CAAA,qBAHjB;;AAMN,MAAM,YAAY,GAAG,mBAAmB,CAAC,OAAD,CAAxC;AACA,MAAM,aAAa,GAAG,qBAAqB,CAAC,OAAD,CAA3C;AACA,MAAM,cAAc,GAAG,kBAAkB,CAAC,OAAD,CAAzC;AAEA,MAAM,mBAAmB,GACvB,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAM,YAAY,GAAA,OAAlB,CAAZ,KACA,OAAO,CAAC,IAFV;AAIA,MAAM,WAAW,GAAG,OAAO,CACzB,YAAA;AAAM,WAAA,YAAU,CAAC,mBAAD,EAAsB,OAAO,CAAC,eAA9B,CAAV;AAAwD,GADrC,EAEzB,CAAC,OAAO,CAAC,eAAT,EAA0B,mBAA1B,CAFyB,CAA3B;AAKA,MAAM,YAAY,GAAG,kBAAkB,IAAI,wBAA3C;AACA,MAAM,UAAU,GACd,gBAAgB,IAChB,oDAAkD,KAAlD,GAAuD,aAFzD;AAIA,MAAI,CAAC,mBAAL,EAA0B,OAAO,IAAP;AAE1B,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAE;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,CAAA,iBACP,UADO,GACG,cADH,IAGP,aAAa,GACT,wBAAsB,KAAtB,GAA2B,6BADlB,GAET,EALG,IAKD,cALC,IAQP,YAAY,CAAC,OAAO,CAAC,IAAT,CAAZ,GACI,wBAAsB,KAAtB,GAA2B,uBAD/B,GAEI,EAVG,IAUD,YAVC,EAYT,IAZS,EADb;AAaU,mBACI,4BAdd;AAeE,IAAA,OAAO,EAAE,eAfX;AAgBE,IAAA,WAAW,EAAE;AAhBf,GAAA,EAkBG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAE,eAAa,KAAb,GAAkB;AAAlC,GAAA,EACG,CAAC,CAAC,gBAAD,CADJ,CAnBJ,EAuBG,OAAO,CAAC,MAAR,KAAmB,QAAnB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAE,eAAa,KAAb,GAAkB;AAAlC,GAAA,EACG,OAAO,CAAC,eAAR,KAA4B,GAA5B,GACG,CAAC,CAAC,qCAAD,CADJ,GAEG,CAAC,CAAC,+BAAD,CAHP,CAxBJ,EA8BG,UAAU,IAAI,OAAO,CAAC,IAAtB,GACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,uBAAuB,EAAE;AAAE,MAAA,MAAM,EAAE,OAAO,CAAC;AAAlB;AAA9B,GAAA,CADD,GAGC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,OAAO,EAAE;AAAd,GAAA,EAAkC,WAAlC,CAjCJ,EAmCG,YAAY,IAAI,CAAC,qBAAjB,IAA0C,iBAA1C,IACC,KAAA,CAAA,aAAA,CAACC,eAAD,EAAc;AACZ,IAAA,OAAO,EAAE,mBADG;AAEZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAFX;AAGZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAHhC;AAIZ,IAAA,SAAS,EAAE,OAAO,CAAC,gBAJP;AAKZ,IAAA,OAAO,EAAE;AALG,GAAd,CApCJ,EA4CG,qBAAqB,IAAI,iBAAzB,IACC,KAAA,CAAA,aAAA,CAACC,kBAAD,EAAiB;AACf,IAAA,YAAY,EAAA,IADG;AAEf,IAAA,cAAc,EAAE,cAFD;AAGf,IAAA,gBAAgB,EAAE,OAAO,CAAC,gBAHX;AAIf,IAAA,aAAa,EAAE,OAAO,CAAC,aAJR;AAKf,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAL7B;AAMf,IAAA,GAAG,EAAE;AANU,GAAjB,CA7CJ,CADF,EAwDE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EACT,KADS,EAET,iBAFS,EAEQ;AACrB,IAAA,mBAAmB,EAAE;AADA,GAFR,CAAf,CAxDF,CADF;AAgED,CA7HD;;IA+Ha,WAAW,GAAG,KAAK,CAAC,IAAN,CACzB,8BADyB,C;;AChK3B,IAAM,WAAW,GAAG,SAAd,WAAc,CAAC,KAAD,EAAiB;AACnC,MACE,KAAK,CAAC,IAAN,KAAe,oBAAf,IACA,KAAK,CAAC,IAAN,KAAe,qBAFjB,EAGE;AACA,WAAO,KAAP;AACD;;AACD,SAAO,IAAP;AACD,CARD;;IAmBa,WAAW,GAAG,SAAd,WAAc,CASzB,KATyB,EASkB;AAEnC,MAAA,iBAAiB,GAA2C,KAAK,CAAhD,iBAAjB;AAAA,MAAmB,cAAc,GAA2B,KAAK,CAAhC,cAAjC;AAAA,MAAmC,aAAa,GAAY,KAAK,CAAjB,aAAhD;AAAA,MAAkD,KAAK,GAAK,KAAK,CAAV,KAAvD;AAEA,MAAA,WAAW,GAAK,iBAAiB,GAAtB,WAAX;AACA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAEF,MAAA,EAAA,GAAqC,WAAW,IAAI,EAApD;AAAA,MAAE,SAAS,GAAA,EAAA,CAAA,SAAX;AAAA,MAA0B,MAAM,GAAA,EAAA,CAAA,WAAhC;;AAEN,MAAI,iBAAiB,IAAI,SAAzB,EAAoC;AAClC,QAAM,SAAS,GAAG,KAAK,GACnB,2CADmB,GAEnB,8BAFJ;AAIA,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAE,SAAhB;AAA2B,MAAA,GAAG,EAAE;AAAhC,KAAA,EACG,MAAM,IACL,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO;AACL,MAAA,KAAK,EAAC,SADD;AAEL,MAAA,IAAI,EAAE,SAFD;AAGL,MAAA,KAAK,EAAC,UAHD;AAIL,MAAA,kBAAkB,EAAE,WAJf;AAKL,MAAA,MAAM,EAAA,IALD;AAML,MAAA,QAAQ,EAAE,aANL;AAOL,MAAA,GAAG,EAAC,UAPC;AAQL,MAAA,WAAW,EAAE,KARR;AASL,MAAA,aAAa,EAAE,KATV;AAUL,MAAA,KAAK,EAAE,CAAC,CAAC,iBAAD,CAVH;AAWL,MAAA,SAAS,EAAA;AAXJ,KAAP,CAFJ,CADF;AAmBD;;AACD,SAAO,IAAP;AACF,C;ACwFA;;;;;AAGA,IAAM,yBAAyB,GAAG,SAA5B,yBAA4B,CAAC,IAAD,EAAa;AAC7C,MAAI,IAAI,CAAC,QAAL,CAAc,QAAd,CAAJ,EAA6B,OAAO,OAAP;AAC7B,MAAI,IAAI,CAAC,QAAL,CAAc,QAAd,CAAJ,EAA6B,OAAO,OAAP;AAC7B,SAAO,MAAP;AACD,CAJD;;AAMA,IAAM,mBAAmB,GAAG,EAA5B;AACA,IAAM,gBAAgB,GAA+B,EAArD;AACA,IAAM,iBAAiB,GAAgC,EAAvD;AAEA;;;;AAGA,IAAM,SAAS,GAAG,SAAZ,SAAY,CAShB,OATgB,EASmC;;;AAEnD,MAAI,CAAC,OAAL,EAAc;AACZ,WAAO;AACL,MAAA,WAAW,EAAE,EADR;AAEL,MAAA,iBAAiB,EAAE,KAFd;AAGL,MAAA,SAAS,EAAE,EAHN;AAIL,MAAA,WAAW,EAAA,OAAA,CAAA,EAAA,EAAO,gBAAP,CAJN;AAKL,MAAA,UAAU,EAAE,EALP;AAML,MAAA,YAAY,EAAA,OAAA,CAAA,EAAA,EAAO,iBAAP,CANP;AAOL,MAAA,eAAe,EAAE,EAPZ;AAQL,MAAA,eAAe,EAAE,CARZ;AASL,MAAA,IAAI,EAAE;AATD,KAAP;AAWD,GAdkD,C;;;AAiBnD,MAAM,YAAY,GAChB,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,WAAR,MAAmB,IAAnB,IAAmB,EAAA,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAmB,EAAA,CACf,MADe,CACR,UAAC,EAAD,EAAS;QAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,WAAA,IAAI,KAAK,OAAT;AAAgB,GADtB,EAEhB,MAFgB,CAET,UAAC,GAAD,EAAM,UAAN,EAAgB;AACtB,QAAM,EAAE,GAAG,gBAAgB,EAA3B;AACA,IAAA,GAAG,CAAC,EAAD,CAAH,GAAU;AACR,MAAA,IAAI,EAAE;AACJ,QAAA,IAAI,EAAE,UAAU,CAAC;AADb,OADE;AAIR,MAAA,EAAE,EAAA,EAJM;AAKR,MAAA,KAAK,EAAE,UALC;AAMR,MAAA,GAAG,EAAE,UAAU,CAAC;AANR,KAAV;AAQA,WAAO,GAAP;AACD,GAbgB,EAad,EAbc,CAAnB,KAa2C,EAd7C;AAeA,MAAM,UAAU,GAAG,MAAM,CAAC,IAAP,CAAY,YAAZ,CAAnB;AAEA,MAAM,WAAW,GACf,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,WAAR,MAAmB,IAAnB,IAAmB,EAAA,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAmB,EAAA,CACf,MADe,CACR,UAAC,EAAD,EAAS;QAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,WAAA,IAAI,KAAK,MAAT;AAAe,GADrB,EAEhB,MAFgB,CAET,UAAC,GAAD,EAAM,UAAN,EAAgB;AACtB,QAAM,EAAE,GAAG,gBAAgB,EAA3B;AACA,IAAA,GAAG,CAAC,EAAD,CAAH,GAAU;AACR,MAAA,IAAI,EAAE;AACJ,QAAA,IAAI,EAAE,UAAU,CAAC,KAAX,IAAoB,EADtB;AAEJ,QAAA,IAAI,EAAE,UAAU,CAAC,SAFb;AAGJ,QAAA,IAAI,EAAE,UAAU,CAAC;AAHb,OADE;AAMR,MAAA,EAAE,EAAA,EANM;AAOR,MAAA,KAAK,EAAE,UAPC;AAQR,MAAA,GAAG,EAAE,UAAU,CAAC;AARR,KAAV;AAUA,WAAO,GAAP;AACD,GAfgB,EAed,EAfc,CAAnB,KAe0C,EAhB5C;AAiBA,MAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,WAAZ,CAAlB;AAEA,MAAM,eAAe,GAAG,SAAS,CAAC,MAAV,GAAmB,UAAU,CAAC,MAAtD;AAEA,MAAM,WAAW,GACf,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,WAAR,MAAmB,IAAnB,IAAmB,EAAA,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAmB,EAAA,CAAE,MAAF,CACjB,UAAC,EAAD,EAAS;QAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,WAAA,IAAI,KAAK,MAAT,IAAmB,IAAI,KAAK,OAA5B;AAAmC,GADhC,CAAnB,KAEK,EAHP;AAKA,MAAM,eAAe,GAAG,OAAO,CAAC,eAAR,IAA2B,EAAnD;AAEA,SAAO;AACL,IAAA,WAAW,EAAA,WADN;AAEL,IAAA,iBAAiB,EAAE,KAFd;AAGL,IAAA,SAAS,EAAA,SAHJ;AAIL,IAAA,WAAW,EAAA,WAJN;AAKL,IAAA,UAAU,EAAA,UALL;AAML,IAAA,YAAY,EAAA,YANP;AAOL,IAAA,eAAe,EAAA,eAPV;AAQL,IAAA,eAAe,EAAA,eARV;AASL,IAAA,IAAI,EAAE,OAAO,CAAC,IAAR,IAAgB;AATjB,GAAP;AAWD,CAlFD;AAoFA;;;;;AAGA,IAAM,mBAAmB,GAAG,SAAtB,mBAAsB,CAI1B,KAJ0B,EAK1B,MAL0B,EAKW;;;AAErC,UAAQ,MAAM,CAAC,IAAf;AACE,SAAK,sBAAL;AACE,aAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,QAAA,iBAAiB,EAAE,MAAM,CAAC;AAA5B,OAAjB,CAAA;;AACF,SAAK,SAAL;AACE,aAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,QAAA,IAAI,EAAE,MAAM,CAAC,UAAP,CAAkB,KAAK,CAAC,IAAxB;AAAR,OAAjB,CAAA;;AACF,SAAK,OAAL;AACE,aAAO;AACL,QAAA,WAAW,EAAE,EADR;AAEL,QAAA,iBAAiB,EAAE,KAFd;AAGL,QAAA,SAAS,EAAE,EAHN;AAIL,QAAA,WAAW,EAAA,OAAA,CAAA,EAAA,EAAO,gBAAP,CAJN;AAKL,QAAA,UAAU,EAAE,EALP;AAML,QAAA,YAAY,EAAA,OAAA,CAAA,EAAA,EAAO,iBAAP,CANP;AAOL,QAAA,eAAe,EAAE,EAPZ;AAQL,QAAA,eAAe,EAAE,CARZ;AASL,QAAA,IAAI,EAAE;AATD,OAAP;;AAWF,SAAK,gBAAL;AAAuB;AACrB,YAAM,kBAAkB,GAAG,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,EAA1B,CAA3B;AACA,YAAI,CAAC,kBAAD,IAAuB,CAAC,MAAM,CAAC,IAAnC,EAAyC,OAAO,KAAP;AACzC,YAAM,UAAU,GAAG,kBAAkB,GACjC,KAAK,CAAC,UAD2B,GAEjC,KAAK,CAAC,UAAN,CAAiB,MAAjB,CAAwB,MAAM,CAAC,EAA/B,CAFJ;;AAGA,YAAM,eAAe,GAAG,OAAA,CAAA,EAAA,EAAK,MAAL,CAAxB;;AACA,eAAO,eAAe,CAAC,IAAvB;AACA,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,UAAU,EAAA,UADF;AAER,UAAA,YAAY,EAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACP,KAAK,CAAC,YADC,CAAA,GACW,EAAA,GAAA,EAAA,EAAA,EAAA,CACpB,MAAM,CAAC,EADa,CAAA,GACX,OAAA,CAAA,OAAA,CAAA,EAAA,EAAQ,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,EAA1B,CAAR,CAAA,EAA0C,eAA1C,CADW,EAC8C,EAFzD,EAFJ;AAMR,UAAA,eAAe,EAAE,kBAAkB,GAC/B,KAAK,CAAC,eADyB,GAE/B,KAAK,CAAC,eAAN,GAAwB;AARpB,SADV,CAAA;AAWD;;AACD,SAAK,eAAL;AAAsB;AACpB,YAAM,iBAAiB,GAAG,KAAK,CAAC,WAAN,CAAkB,MAAM,CAAC,EAAzB,CAA1B;AACA,YAAI,CAAC,iBAAD,IAAsB,CAAC,MAAM,CAAC,IAAlC,EAAwC,OAAO,KAAP;AACxC,YAAM,SAAS,GAAG,iBAAiB,GAC/B,KAAK,CAAC,SADyB,GAE/B,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,MAAM,CAAC,EAA9B,CAFJ;;AAGA,YAAM,eAAe,GAAG,OAAA,CAAA,EAAA,EAAK,MAAL,CAAxB;;AACA,eAAO,eAAe,CAAC,IAAvB;AACA,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,SAAS,EAAA,SADD;AAER,UAAA,WAAW,EAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACN,KAAK,CAAC,WADA,CAAA,GACW,EAAA,GAAA,EAAA,EAAA,EAAA,CACnB,MAAM,CAAC,EADY,CAAA,GACV,OAAA,CAAA,OAAA,CAAA,EAAA,EAAQ,KAAK,CAAC,WAAN,CAAkB,MAAM,CAAC,EAAzB,CAAR,CAAA,EAAyC,eAAzC,CADU,EAC8C,EAFzD,EAFH;AAMR,UAAA,eAAe,EAAE,iBAAiB,GAC9B,KAAK,CAAC,eADwB,GAE9B,KAAK,CAAC,eAAN,GAAwB;AARpB,SADV,CAAA;AAWD;;AACD,SAAK,mBAAL;AAA0B;AACxB,YAAI,CAAC,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,EAA1B,CAAL,EAAoC,OAAO,KAAP,CADZ,CACyB;;AACjD,YAAM,eAAe,GAAA,OAAA,CAAA,EAAA,EAAQ,KAAK,CAAC,YAAd,CAArB;;AACA,eAAO,eAAe,CAAC,MAAM,CAAC,EAAR,CAAtB;AACA,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,UAAU,EAAE,KAAK,CAAC,UAAN,CAAiB,MAAjB,CAAwB,UAAC,GAAD,EAAI;AAAK,mBAAA,GAAG,KAAK,MAAM,CAAC,EAAf;AAAiB,WAAlD,CADJ;AAER,UAAA,YAAY,EAAE,eAFN;AAGR,UAAA,eAAe,EAAE,KAAK,CAAC,eAAN,GAAwB;AAHjC,SADV,CAAA;AAMD;;AACD,SAAK,kBAAL;AAAyB;AACvB,YAAI,CAAC,KAAK,CAAC,WAAN,CAAkB,MAAM,CAAC,EAAzB,CAAL,EAAmC,OAAO,KAAP,CADZ,CACyB;;AAChD,YAAM,cAAc,GAAA,OAAA,CAAA,EAAA,EAAQ,KAAK,CAAC,WAAd,CAApB;;AACA,eAAO,cAAc,CAAC,MAAM,CAAC,EAAR,CAArB;AACA,eAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,UAAA,SAAS,EAAE,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,UAAC,GAAD,EAAI;AAAK,mBAAA,GAAG,KAAK,MAAM,CAAC,EAAf;AAAiB,WAAjD,CADH;AAER,UAAA,WAAW,EAAE,cAFL;AAGR,UAAA,eAAe,EAAE,KAAK,CAAC,eAAN,GAAwB;AAHjC,SADV,CAAA;AAMD;;AACD,SAAK,uBAAL;AAA4B;AAC1B,aAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAAY,KAAZ,CAAA,EAAiB;AAAE,QAAA,eAAe,EAAE,KAAK,CAAC,eAAN,GAAwB;AAA3C,OAAjB,CAAA;;AACF,SAAK,kBAAL;AACE,aAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,QAAA,eAAe,EAAE,KAAK,CAAC,eAAN,CAAsB,MAAtB,CAA6B,MAAM,CAAC,IAApC;AADT,OADV,CAAA;;AAIF;AACE,aAAO,KAAP;AAvFJ;AAyFD,CAhGD;AAkGA;;;;;IAGa,eAAe,GAAG,SAAlB,eAAkB,CAU7B,KAV6B,EAU0B;;;AAGrD,MAAA,uBAAuB,GAWrB,KAAK,CAXgB,uBAAvB;AAAA,MACA,iBAAiB,GAUf,KAAK,CAVU,iBADjB;AAAA,MAEA,mBAAmB,GASjB,KAAK,CATY,mBAFnB;AAAA,MAGA,oBAAoB,GAQlB,KAAK,CARa,oBAHpB;AAAA,MAIA,YAAY,GAOV,KAAK,CAPK,YAJZ;AAAA,MAKA,KAAK,GAMH,KAAK,CANF,KALL;AAAA,MAMA,OAAO,GAKL,KAAK,CALA,OANP;AAAA,MAOA,OAAO,GAIL,KAAK,CAJA,OAPP;AAAA,MAQA,qBAAqB,GAGnB,KAAK,CAHc,qBARrB;AAAA,MASA,MAAM,GAEJ,KAAK,CAFD,MATN;AAAA,MAUA,kBAAkB,GAChB,KAAK,CADW,kBAVlB;;AAaI,MAAA,EAAA,GAMF,iBAAiB,EANf;AAAA,MACJ,OAAO,GAAA,EAAA,CAAA,OADH;AAAA,MAEJ,WAAW,GAAA,EAAA,CAAA,WAFP;AAAA,MAGJ,gBAAgB,GAAA,EAAA,CAAA,gBAHZ;AAAA,MAIJ,eAAe,GAAA,EAAA,CAAA,eAJX;AAAA,MAKJ,WAAW,GAAA,EAAA,CAAA,WALP;;AAQA,MAAA,EAAA,GAAoB,UAAU,CAClC,mBADkC,EAKlC,OALkC,EAMlC,SANkC,CAA9B;AAAA,MAAC,KAAK,GAAA,EAAA,CAAA,CAAA,CAAN;AAAA,MAAQ,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAhB;;AAUJ,MAAA,WAAW,GAQT,KAAK,CARI,WAAX;AAAA,MACA,SAAS,GAOP,KAAK,CAPE,SADT;AAAA,MAEA,WAAW,GAMT,KAAK,CANI,WAFX;AAAA,MAGA,UAAU,GAKR,KAAK,CALG,UAHV;AAAA,MAIA,YAAY,GAIV,KAAK,CAJK,YAJZ;AAAA,MAKA,eAAe,GAGb,KAAK,CAHQ,eALf;AAAA,MAMA,eAAe,GAEb,KAAK,CAFQ,eANf;AAAA,MAOA,IAAI,GACF,KAAK,CADH,IAPJ;AAUF,MAAM,cAAc,GAAG,MAAM,CAAiB,IAAjB,CAA7B;AACA,MAAM,WAAW,GAAG,MAAM,EAA1B,CA7CuD,C;;AAgDvD,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,KAAK,IAAI,WAAW,CAAC,OAAzB,EAAkC;AAChC,MAAA,WAAW,CAAC,OAAZ,CAAoB,KAApB;AACD;AACF,GAJQ,EAIN,CAAC,KAAD,CAJM,CAAT,CAhDuD,C;;AAuDvD,MAAM,iBAAiB,GAAG,MAAM,EAAhC;AAEA,MAAM,UAAU,GAAG,WAAW,CAC5B,UAAC,YAAD,EAAqB;AACX,QAAA,SAAS,GAAK,CAAA,uBAAuB,IAAI,EAA3B,EAAL,SAAT;;AAER,QAAI,CAAC,WAAW,CAAC,OAAjB,EAA0B;AACxB,MAAA,QAAQ,CAAC;AACP,QAAA,UAAU,EAAE,oBAAC,IAAD,EAAK;AACf,cAAM,WAAW,GAAG,IAAI,GAAG,YAA3B;;AACA,cAAI,SAAS,IAAI,WAAW,CAAC,MAAZ,GAAqB,SAAtC,EAAiD;AAC/C,mBAAO,WAAW,CAAC,KAAZ,CAAkB,CAAlB,EAAqB,SAArB,CAAP;AACD;;AACD,iBAAO,WAAP;AACD,SAPM;AAQP,QAAA,IAAI,EAAE;AARC,OAAD,CAAR;AAUA;AACD;;AAEK,QAAA,EAAA,GAAmC,WAAW,CAAC,OAA/C;AAAA,QAAE,YAAY,GAAA,EAAA,CAAA,YAAd;AAAA,QAAgB,cAAc,GAAA,EAAA,CAAA,cAA9B;AACN,IAAA,iBAAiB,CAAC,OAAlB,GAA4B,cAAc,GAAG,YAAY,CAAC,MAA1D;AAEA,IAAA,QAAQ,CAAC;AACP,MAAA,UAAU,EAAE,oBAAC,QAAD,EAAS;AACnB,YAAM,WAAW,GACf,QAAQ,CAAC,KAAT,CAAe,CAAf,EAAkB,cAAlB,IACA,YADA,GAEA,QAAQ,CAAC,KAAT,CAAe,YAAf,CAHF;;AAKA,YAAI,SAAS,IAAI,WAAW,CAAC,MAAZ,GAAqB,SAAtC,EAAiD;AAC/C,iBAAO,WAAW,CAAC,KAAZ,CAAkB,CAAlB,EAAqB,SAArB,CAAP;AACD;;AAED,eAAO,WAAP;AACD,OAZM;AAaP,MAAA,IAAI,EAAE;AAbC,KAAD,CAAR;AAeD,GApC2B,EAqC5B,CAAC,uBAAD,EAA0B,iBAA1B,EAA6C,WAA7C,CArC4B,CAA9B;AAwCA,EAAA,SAAS,CAAC,YAAA;AACR,QAAM,eAAe,GAAG,WAAW,CAAC,OAApC;;AACA,QAAI,eAAe,IAAI,iBAAiB,CAAC,OAAlB,KAA8B,SAArD,EAAgE;AAC9D,MAAA,eAAe,CAAC,cAAhB,GAAiC,iBAAiB,CAAC,OAAnD;AACA,MAAA,eAAe,CAAC,YAAhB,GAA+B,iBAAiB,CAAC,OAAjD;AACA,MAAA,iBAAiB,CAAC,OAAlB,GAA4B,SAA5B;AACD;AACF,GAPQ,EAON,CAAC,IAAD,EAAO,iBAAP,CAPM,CAAT;AASA,MAAM,YAAY,GAAkD,WAAW,CAC7E,UAAC,KAAD,EAAM;AACJ,IAAA,KAAK,CAAC,cAAN;;AACA,QAAI,CAAC,KAAD,IAAU,CAAC,KAAK,CAAC,MAArB,EAA6B;AAC3B;AACD;;AAED,QAAM,OAAO,GAAG,KAAK,CAAC,MAAN,CAAa,KAA7B;AACA,IAAA,QAAQ,CAAC;AACP,MAAA,UAAU,EAAE,sBAAA;AAAM,eAAA,OAAA;AAAO,OADlB;AAEP,MAAA,IAAI,EAAE;AAFC,KAAD,CAAR;;AAIA,QAAI,kBAAkB,IAAI,OAAtB,IAAiC,OAArC,EAA8C;AAC5C,MAAA,uBAAuB,CACrB,OAAO,CAAC,SAAR,CAAkB,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,EAA1B,CADqB,EAErB,oBAFqB,CAAvB;AAID;AACF,GAlB4E,EAmB7E,CAAC,OAAD,EAAU,MAAV,EAAkB,kBAAlB,CAnB6E,CAA/E,CA1GuD,C;;AAkIvD,MAAM,gBAAgB,GAAG,WAAW,CAClC,UAAC,KAAD,EAAkB;AAChB,QACE,cAAc,CAAC,OAAf,IACA,CAAC,cAAc,CAAC,OAAf,CAAuB,QAAvB,CAAgC,KAAK,CAAC,MAAtC,CAFH,EAGE;AACA,MAAA,QAAQ,CAAC;AACP,QAAA,IAAI,EAAE,sBADC;AAEP,QAAA,KAAK,EAAE;AAFA,OAAD,CAAR;AAID;AACF,GAXiC,EAYlC,CAAC,cAAD,CAZkC,CAApC;AAeA,MAAM,eAAe,GAA6C,WAAW,CAC3E,UAAC,KAAD,EAAM;AACJ,IAAA,QAAQ,CAAC;AACP,MAAA,IAAI,EAAE,sBADC;AAEP,MAAA,KAAK,EAAE;AAFA,KAAD,CAAR,CADI,C;;AAOJ,IAAA,KAAK,CAAC,eAAN;AACD,GAT0E,EAU3E,EAV2E,CAA7E;;AAaA,MAAM,kBAAkB,GAAgD,SAAlE,kBAAkE,CACtE,KADsE,EACjE;AAEL,QACE,KAAK,CAAC,GAAN,KAAc,GAAd,IACA,KAAK,CAAC,GAAN,KAAc,OADd,IAEA,KAAK,CAAC,GAAN,KAAc,UAHhB,EAIE;AACA,MAAA,KAAK,CAAC,cAAN;;;;;;AAKA,MAAA,eAAe,CACZ,KADY,CAAf;AAGD;AACF,GAjBD;;AAmBA,MAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,KAAD,EAAqB;AAC7C,QAAI,KAAK,CAAC,GAAN,KAAc,QAAlB,EAA4B;AAC1B,MAAA,QAAQ,CAAC;AACP,QAAA,IAAI,EAAE,sBADC;AAEP,QAAA,KAAK,EAAE;AAFA,OAAD,CAAR;AAID;AACF,GAPD;;AASA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,KAAK,CAAC,iBAAV,EAA6B;AAC3B,MAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,gBAAnC,EAAqD,KAArD;AACA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC,iBAArC;AACD;;AACD,WAAO,YAAA;AACL,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,gBAAtC,EAAwD,KAAxD;AACA,MAAA,QAAQ,CAAC,mBAAT,CAA6B,SAA7B,EAAwC,iBAAxC;AACD,KAHD;AAID,GATQ,EASN,CAAC,gBAAD,EAAmB,KAAK,CAAC,iBAAzB,CATM,CAAT;AAWA,MAAM,aAAa,GAAG,WAAW,CAC/B,UAAC,KAAD,EAAiB;AAAK,WAAA,UAAU,CAAE,KAAmB,CAAC,MAAtB,CAAV;AAAuC,GAD9B,EAE/B,CAAC,UAAD,CAF+B,CAAjC,CArMuD,C;;AA4MvD,MAAM,WAAW,GAAG,WAAW,CAAC,YAAA;AAAA,QAAA,EAAA,EAAA,EAAA;;AAAA,WAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAM,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAf,MAAwB,IAAxB,IAAwB,EAAA,KAAA,KAAA,CAAxB,GAAwB,KAAA,CAAxB,GAAwB,EAAA,CAAA,IAAA,CAAlB,OAAkB,CAAxB,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAiB,QAA9B;AAAsC,GAAvC,EAAyC,CACtE,OADsE,CAAzC,CAA/B;AAIA,MAAM,QAAQ,GAAG,WAAW,CAAC,YAAA;AAC3B,QAAI,CAAC,OAAL,EAAc,OAAO,EAAP;AACd,WAAO,cAAA,CACF,MAAM,CAAC,MAAP,CAAc,OAAO,CAAC,KAAR,CAAc,OAA5B,EAAqC,GAArC,CAAyC,UAAC,EAAD,EAAS;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,IAAA;AAAI,KAA3D,CADE,EAEF,MAAM,CAAC,MAAP,CAAc,OAAO,CAAC,KAAR,CAAc,QAA5B,CAFE,CAAA,CAGL,MAHK,CAIL,UAAC,KAAD,EAAQ,KAAR,EAAe,IAAf,EAAmB;AACjB,aAAA,IAAI,CAAC,SAAL,CAAe,UAAC,IAAD,EAAK;AAAK,eAAA,CAAA,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,EAAN,OAAa,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,EAApB,CAAA;AAAsB,OAA/C,MAAqD,KAArD;AAA0D,KALvD,CAAP;AAOD,GAT2B,EASzB,CAAC,OAAD,CATyB,CAA5B;AAWA,MAAM,YAAY,GAAG,WAAW,CAAC,UAAC,IAAD,EAAuB;AACtD,IAAA,QAAQ,CAAC;AAAE,MAAA,IAAI,EAAE,kBAAR;AAA4B,MAAA,IAAI,EAAE;AAAlC,KAAD,CAAR;AACD,GAF+B,EAE7B,EAF6B,CAAhC,CA3NuD,C;;AAiOvD,MAAM,yBAAyB,GAAG,WAAW,CAAC,YAAA;AAC5C,QAAM,gBAAgB,GAAG,UAAU,CAChC,GADsB,CAClB,UAAC,EAAD,EAAG;AAAK,aAAA,YAAY,CAAC,EAAD,CAAZ;AAAgB,KADN,EAEtB,MAFsB,CAEf,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,KAAP,KAAiB,QAAjB;AAAyB,KAFtB,EAGtB,MAHsB,CAGf,UACN,EADM,EAEN,CAFM,EAGN,IAHM,EAGF;UAFF,EAAE,GAAA,EAAA,CAAA,E;UAAE,GAAG,GAAA,EAAA,CAAA,G;AAGN,aAAA,IAAI,CAAC,KAAL,CAAW,UAAC,MAAD,EAAO;AAAK,eAAA,MAAM,CAAC,EAAP,KAAc,EAAd,IAAoB,MAAM,CAAC,GAAP,KAAe,GAAnC;AAAsC,OAA7D,CAAA;AAA8D,KAP5C,EAQtB,GARsB,CASrB,UAAC,MAAD,EAAO;AACL,aAAC;AACC,QAAA,QAAQ,EAAE,MAAM,CAAC,IAAP,CAAY,IADvB;AAEC,QAAA,SAAS,EAAE,MAAM,CAAC,GAFnB;AAGC,QAAA,IAAI,EAAE;AAHP,OAAD;AAIoB,KAdD,CAAzB;AAiBA,QAAM,eAAe,GAAG,SAAS,CAC9B,GADqB,CACjB,UAAC,EAAD,EAAG;AAAK,aAAA,WAAW,CAAC,EAAD,CAAX;AAAe,KADN,EAErB,MAFqB,CAEd,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,KAAP,KAAiB,QAAjB;AAAyB,KAFvB,EAGrB,GAHqB,CAIpB,UAAC,MAAD,EAAO;AACL,aAAC;AACC,QAAA,SAAS,EAAE,MAAM,CAAC,GADnB;AAEC,QAAA,SAAS,EAAE,MAAM,CAAC,IAAP,CAAY,IAFxB;AAGC,QAAA,SAAS,EAAE,MAAM,CAAC,IAAP,CAAY,IAHxB;AAIC,QAAA,KAAK,EAAE,MAAM,CAAC,IAAP,CAAY,IAJpB;AAKC,QAAA,IAAI,EAAE,yBAAyB,CAAC,MAAM,CAAC,IAAP,CAAY,IAAZ,IAAoB,EAArB;AALhC,OAAD;AAMoB,KAXF,CAAxB;AAcA,WAAA,cAAA,CACK,WADL,EAEK,gBAFL,EAGK,eAHL,CAAA;AAKD,GArC4C,EAqC1C,CAAC,UAAD,EAAa,YAAb,EAA2B,SAA3B,EAAsC,WAAtC,EAAmD,WAAnD,CArC0C,CAA7C;;AAuCA,MAAM,YAAY,GAA4C,SAAxD,YAAwD,CAAC,KAAD,EAAM;AAClE,IAAA,KAAK,CAAC,cAAN;AACA,QAAM,cAAc,GAAG,IAAI,CAAC,IAAL,EAAvB;AACA,QAAM,cAAc,GAClB,cAAc,KAAK,EAAnB,IACA,cAAc,KAAK,GADnB,IAEA,cAAc,KAAK,QAFnB,IAGA,cAAc,KAAK,IAHnB,IAIA,cAAc,KAAK,IAJnB,IAKA,cAAc,KAAK,MALnB,IAMA,cAAc,KAAK,IANnB,IAOA,cAAc,KAAK,MARrB;;AASA,QAAI,cAAc,IAAI,eAAe,KAAK,CAA1C,EAA6C;AAC3C;AACD,KAdiE,C;;;AAgBlE,QAAM,wBAAwB,GAC5B,MAAM,CAAC,MAAP,CAAc,YAAd,EAA4B,IAA5B,CACE,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,KAAP,KAAiB,WAAjB;AAA4B,KAD1C,KAGA,MAAM,CAAC,MAAP,CAAc,WAAd,EAA2B,IAA3B,CAAgC,UAAC,MAAD,EAAO;AAAK,aAAA,MAAM,CAAC,KAAP,KAAiB,WAAjB;AAA4B,KAAxE,CAJF;;AAKA,QAAI,wBAAJ,EAA8B;;AAE5B;AACD;;AAED,QAAM,cAAc,GAAG,yBAAyB,EAAhD,CA1BkE,C;;;;AA+BlE,QAAM,oBAAoB,GAAG,KAAK,CAAC,IAAN,CAC3B,IAAI,GAAJ,CACE,eAAe,CAAC,MAAhB,CACE,UAAC,EAAD,EAAa;UAAV,EAAE,GAAA,EAAA,CAAA,E;UAAE,IAAI,GAAA,EAAA,CAAA,I;AACT,aAAA,IAAI,CAAC,QAAL,CAAc,MAAI,EAAlB,KAA2B,IAAI,CAAC,QAAL,CAAc,MAAI,IAAlB,CAA3B;AAAoD,KAFxD,CADF,CAD2B,CAA7B;AASA,QAAM,cAAc,GAAG;AACrB,MAAA,WAAW,EAAE,cADQ;AAErB,MAAA,eAAe,EAAE,oBAFI;AAGrB,MAAA,IAAI,EAAA;AAHiB,KAAvB;;AAMA,QAAI,CAAC,CAAC,OAAF,IAAa,WAAjB,EAA8B;;AAE5B,UAAI,iBAAJ,EAAuB;AACrB,QAAA,iBAAiB;AAClB;;AAED,UAAM,oBAAoB,GAAG,WAAW,CAAE,OAAA,CAAA,OAAA,CAAA,EAAA,EACrC,cADqC,CAAA,EACvB;AACjB,QAAA,EAAE,EAAE,OAAO,CAAC;AADK,OADuB,CAAF,CAAX,CAG4B,IAH5B,CAI3B,iBAJ2B,CAA7B;AAOA,MAAA,uBAAuB,CAAC,oBAAD,EAAuB,gBAAvB,CAAvB;AACA,MAAA,QAAQ,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACD,KAfD,MAeO,IAAI,qBAAqB,IAAI,OAA7B,EAAsC;AAC3C,MAAA,qBAAqB,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAEd,cAFc,CAAA,EAEA;AACjB,QAAA,MAAM,EAAA;AADW,OAFA,CAAA,EAKnB,OAAO,CAAC,GALW,CAArB;AAOA,MAAA,QAAQ,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACD,KATM,MASA,IAAI,WAAJ,EAAiB;AACtB,UAAM,kBAAkB,GAAG,WAAW,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACjC,cADiC,CAAA,EACnB;AACjB,QAAA,MAAM,EAAE;AADS,OADmB,CAAA,CAAtC;AAIA,MAAA,uBAAuB,CAAC,kBAAD,EAAqB,cAArB,CAAvB;AACA,MAAA,QAAQ,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACD;;AACD,QAAI,OAAO,IAAI,kBAAf,EACE,uBAAuB,CAAC,OAAO,CAAC,UAAR,EAAD,EAAuB,aAAvB,CAAvB;AACH,GAhFD,CAxQuD,C;;;;AA8VvD,MAAM,UAAU,GAAG,WAAW,CAAC,UAAC,EAAD,EAAG;AAChC,IAAA,QAAQ,CAAC;AAAE,MAAA,EAAE,EAAA,EAAJ;AAAM,MAAA,KAAK,EAAE,WAAb;AAA0B,MAAA,IAAI,EAAE;AAAhC,KAAD,CAAR;AACD,GAF6B,EAE3B,EAF2B,CAA9B;AAIA,MAAM,UAAU,GAAG,WAAW,CAAC,UAAC,EAAD,EAAG;;AAEhC,IAAA,QAAQ,CAAC;AAAE,MAAA,EAAE,EAAA,EAAJ;AAAM,MAAA,IAAI,EAAE;AAAZ,KAAD,CAAR;AACD,GAH6B,EAG3B,EAH2B,CAA9B;AAKA,EAAA,SAAS,CAAC,YAAA;AACR,KAAC,YAAA;AAAA,aAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACC,kBAAI,CAAC,OAAL,EAAc,OAAA,CAAA;AAAA;AAAA,eAAA;AACR,cAAA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,WAAd,EAA2B,IAA3B,CACb,UAAC,UAAD,EAAW;AAAK,uBAAA,UAAU,CAAC,KAAX,KAAqB,WAArB,IAAoC,UAAU,CAAC,IAA/C;AAAmD,eADtD,CAAT;AAGN,kBAAI,CAAC,MAAL,EAAa,OAAA,CAAA;AAAA;AAAA,eAAA;AAEL,cAAA,IAAI,GAAS,MAAM,CAAf,IAAJ,EAAM,EAAE,GAAK,MAAM,CAAX,EAAR;;;;;;mBAIF,mB,EAAA,OAAA,CAAA;AAAA;AAAA,gBAAA,CAAA,CAAA;AACS,qBAAA,CAAA;AAAA;AAAA,gBAAM,mBAAmB,CAAC,IAAD,EAAO,OAAP,CAAzB,CAAA;;;AAAX,cAAA,QAAQ,GAAG,EAAA,CAAA,IAAA,EAAX;;;;;;AAEW,qBAAA,CAAA;AAAA;AAAA,gBAAM,OAAO,CAAC,QAAR,CAAiB,IAAjB,CAAN,CAAA;;;AAAX,cAAA,QAAQ,GAAG,EAAA,CAAA,IAAA,EAAX;;;;;;;;;;AAGF,cAAA,OAAO,CAAC,IAAR,CAAa,OAAb;AACI,cAAA,cAAc,GAAG,KAAjB;AAEJ,cAAA,QAAQ,CAAC;AAAE,gBAAA,IAAI,EAAE;AAAR,eAAD,CAAR;;AACA,kBAAI,CAAC,WAAW,CAAC,EAAD,CAAhB,EAAsB;AACpB,gBAAA,cAAc,GAAG,IAAjB;AACD,eAFD,MAEO;AACL,gBAAA,QAAQ,CAAC;AAAE,kBAAA,EAAE,EAAA,EAAJ;AAAM,kBAAA,KAAK,EAAE,QAAb;AAAuB,kBAAA,IAAI,EAAE;AAA7B,iBAAD,CAAR;AACD;;AACD,kBAAI,CAAC,cAAD,IAAmB,YAAvB,EAAqC;;AAEnC,gBAAA,YAAY,CAAC,OAAD,EAAQ,aAAR,EAAuB,IAAvB,CAAZ;AACD;;AACD,qBAAA,CAAA;AAAA;AAAA,eAAA;;;;;AAKF,kBAAI,CAAC,QAAL,EAAe;AACb,gBAAA,UAAU,CAAC,EAAD,CAAV;AACA,uBAAA,CAAA;AAAA;AAAA,iBAAA;AACD;;AAED,cAAA,QAAQ,CAAC;AACP,gBAAA,EAAE,EAAA,EADK;AAEP,gBAAA,KAAK,EAAE,UAFA;AAGP,gBAAA,IAAI,EAAE,eAHC;AAIP,gBAAA,GAAG,EAAE,QAAQ,CAAC;AAJP,eAAD,CAAR;;;;;;OAxCD,CAAA;AA8CA,KA9CD;AA+CD,GAhDQ,EAgDN,CAAC,WAAD,EAAc,OAAd,EAAuB,mBAAvB,EAA4C,YAA5C,EAA0D,UAA1D,CAhDM,CAAT,CAvWuD,C;;AA2ZvD,MAAM,WAAW,GAAG,WAAW,CAAC,UAAC,EAAD,EAAG;AACjC,IAAA,QAAQ,CAAC;AAAE,MAAA,EAAE,EAAA,EAAJ;AAAM,MAAA,IAAI,EAAE;AAAZ,KAAD,CAAR,CADiC,C;AAGlC,GAH8B,EAG5B,EAH4B,CAA/B;AAKA,MAAM,WAAW,GAAG,WAAW,CAC7B,UAAO,EAAP,EAAS;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACD,YAAA,GAAG,GAAG,YAAY,CAAC,EAAD,CAAlB;AACN,gBAAI,CAAC,GAAD,IAAQ,CAAC,OAAb,EAAsB,OAAA,CAAA;AAAA;AAAA,aAAA;AACd,YAAA,IAAI,GAAK,GAAG,CAAR,IAAJ;;AACR,gBAAI,GAAG,CAAC,KAAJ,KAAc,WAAlB,EAA+B;AAC7B,cAAA,QAAQ,CAAC;AAAE,gBAAA,EAAE,EAAA,EAAJ;AAAM,gBAAA,KAAK,EAAE,WAAb;AAA0B,gBAAA,IAAI,EAAE;AAAhC,eAAD,CAAR;AACD;;;;;;;iBAGK,oB,EAAA,OAAA,CAAA;AAAA;AAAA,cAAA,CAAA,CAAA;AACS,mBAAA,CAAA;AAAA;AAAA,cAAM,oBAAoB,CAAC,IAAD,EAAO,OAAP,CAA1B,CAAA;;;AAAX,YAAA,QAAQ,GAAG,EAAA,CAAA,IAAA,EAAX;;;;;;AAEW,mBAAA,CAAA;AAAA;AAAA,cAAM,OAAO,CAAC,SAAR,CAAkB,IAAlB,CAAN,CAAA;;;AAAX,YAAA,QAAQ,GAAG,EAAA,CAAA,IAAA,EAAX;;;;;;;;;;AAGF,YAAA,OAAO,CAAC,IAAR,CAAa,OAAb;AACI,YAAA,cAAc,GAAG,KAAjB;AACJ,YAAA,QAAQ,CAAC;AAAE,cAAA,IAAI,EAAE;AAAR,aAAD,CAAR;;AACA,gBAAI,CAAC,YAAY,CAAC,EAAD,CAAjB,EAAuB;AACrB,cAAA,cAAc,GAAG,IAAjB;AACD,aAFD,MAEO;AACL,cAAA,QAAQ,CAAC;AAAE,gBAAA,EAAE,EAAA,EAAJ;AAAM,gBAAA,KAAK,EAAE,QAAb;AAAuB,gBAAA,IAAI,EAAE;AAA7B,eAAD,CAAR;AACD;;AACD,gBAAI,CAAC,cAAD,IAAmB,YAAvB,EAAqC;;AAEnC,cAAA,YAAY,CAAC,OAAD,EAAQ,cAAR,EAAsB,OAAA,CAAA,OAAA,CAAA,EAAA,EAC7B,IAD6B,CAAA,EACzB;AACP,gBAAA,EAAE,EAAA;AADK,eADyB,CAAtB,CAAZ;AAID;;AACD,mBAAA,CAAA;AAAA;AAAA,aAAA;;;;;AAKF,gBAAI,CAAC,QAAL,EAAe;AACb,cAAA,WAAW,CAAC,EAAD,CAAX;AACA,qBAAA,CAAA;AAAA;AAAA,eAAA;AACD;;AAED,YAAA,QAAQ,CAAC;AACP,cAAA,EAAE,EAAA,EADK;AAEP,cAAA,KAAK,EAAE,UAFA;AAGP,cAAA,IAAI,EAAE,gBAHC;AAIP,cAAA,GAAG,EAAE,QAAQ,CAAC;AAJP,aAAD,CAAR;;;;;;KAxCO,CAAA;AA8CR,GA/C4B,EAgD7B,CAAC,YAAD,EAAe,OAAf,EAAwB,oBAAxB,EAA8C,YAA9C,EAA4D,WAA5D,CAhD6B,CAA/B;AAmDA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,UAAJ,EAAgB;AACd,UAAM,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,YAAd,EAA4B,IAA5B,CACb,UAAC,WAAD,EAAY;AACV,eAAA,WAAW,CAAC,KAAZ,KAAsB,WAAtB,IACA,CAAC,CAAC,WAAW,CAAC,IADd,IAEA,CAAC,WAAW,CAAC,UAFb;AAEuB,OAJZ,CAAf;;AAMA,UAAI,MAAJ,EAAY;AACF,YAAA,IAAI,GAAS,MAAM,CAAf,IAAJ;AAAA,YAAM,IAAE,GAAK,MAAM,CAAX,EAAR,CADE,C;;;AAIV,YAAM,QAAM,GAAG,IAAI,UAAJ,EAAf;;AACA,QAAA,QAAM,CAAC,MAAP,GAAgB,UAAC,KAAD,EAAM;;;AACpB,cAAI,QAAA,CAAA,EAAA,GAAO,KAAK,CAAC,MAAb,MAAmB,IAAnB,IAAmB,EAAA,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAmB,EAAA,CAAE,MAArB,MAAgC,QAApC,EAA8C;AAC9C,UAAA,QAAQ,CAAC;AACP,YAAA,EAAE,EAAA,IADK;AAEP,YAAA,UAAU,EAAE,KAAK,CAAC,MAAN,CAAa,MAFlB;AAGP,YAAA,IAAI,EAAE;AAHC,WAAD,CAAR;AAKD,SAPD;;AAQA,QAAA,QAAM,CAAC,aAAP,CAAqB,IAArB;AACA,QAAA,WAAW,CAAC,IAAD,CAAX;AACA,eAAO,YAAA;AACL,UAAA,QAAM,CAAC,MAAP,GAAgB,IAAhB;AACD,SAFD;AAGD;AACF;;AACD;AACD,GA7BQ,EA6BN,CAAC,YAAD,EAAe,WAAf,CA7BM,CAAT,CAnduD,C;;;AAofvD,MAAM,eAAe,GAAG,OAAO,CAC7B,YAAA;AAAM,WAAC,CAAC,eAAD,GAAmB,CAAnB,GAAuB,gBAAgB,IAAI,mBAA5C;AAAgE,GADzC,EAE7B,CAAC,gBAAD,EAAmB,eAAnB,CAF6B,CAA/B,CApfuD,C;;AA0fvD,MAAM,YAAY,GAAG,eAAe,GAAG,eAAvC;AAEA,MAAM,cAAc,GAAG,WAAW,CAChC,UAAC,KAAD,EAAsC;AACpC,IAAA,KAAK,CAAC,IAAN,CAAW,KAAX,EACG,KADH,CACS,CADT,EACY,YADZ,EAEG,OAFH,CAEW,UAAC,IAAD,EAAK;AACZ,UAAM,EAAE,GAAG,gBAAgB,EAA3B;;AACA,UACE,IAAI,CAAC,IAAL,CAAU,UAAV,CAAqB,QAArB,KACA,CAAC,IAAI,CAAC,IAAL,CAAU,QAAV,CAAmB,YAAnB,CAFH,CAEmC;AAFnC,QAGE;AACA,UAAA,QAAQ,CAAC;AAAE,YAAA,IAAI,EAAA,IAAN;AAAQ,YAAA,EAAE,EAAA,EAAV;AAAY,YAAA,KAAK,EAAE,WAAnB;AAAgC,YAAA,IAAI,EAAE;AAAtC,WAAD,CAAR;AACD,SALD,MAKO,IAAI,IAAI,YAAY,IAAhB,IAAwB,CAAC,OAA7B,EAAsC;AAC3C,QAAA,QAAQ,CAAC;AAAE,UAAA,IAAI,EAAA,IAAN;AAAQ,UAAA,EAAE,EAAA,EAAV;AAAY,UAAA,KAAK,EAAE,WAAnB;AAAgC,UAAA,IAAI,EAAE;AAAtC,SAAD,CAAR;AACD;AACF,KAZH;AAaD,GAf+B,EAgBhC,CAAC,YAAD,EAAe,OAAf,CAhBgC,CAAlC;AAmBA,MAAM,OAAO,GAAG,WAAW,CACzB,UAAC,cAAD,EAA0D;AACxD,KAAC,UAAO,KAAP,EAAY;AAAA,aAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;;AAEH,cAAA,KAAK,GAAK,KAAK,CAAC,aAAN,CAAL,KAAL;AACR,kBAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,IAAN,CAAW,KAAX,CAAD,CAA/B,EAAoD,OAAA,CAAA;AAAA;AAAA,eAAA;AAEpD,cAAA,KAAK,CAAC,cAAN;AAII,cAAA,gBAAgB,GAAgC,SAAhD;;yCACK,C,EAAC;AACR,oBAAM,IAAI,GAAG,KAAK,CAAC,CAAD,CAAlB;;AACA,oBAAI,IAAI,CAAC,IAAL,KAAc,QAAd,IAA0B,IAAI,CAAC,IAAL,KAAc,YAA5C,EAA0D;AACxD,kBAAA,gBAAgB,GAAG,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAQ;AACrC,oBAAA,IAAI,CAAC,WAAL,CAAiB,UAAC,MAAD,EAAO;AACtB,sBAAA,OAAO,CAAC,MAAD,CAAP;AACD,qBAFD;AAGD,mBAJkB,CAAnB;;AAMD;;;AATH,mBAAS,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAC,MAA1B,EAAkC,CAAC,EAAnC,EAAqC;kCAA5B,C;;AAUR;;AAEiB,qBAAA,CAAA;AAAA;AAAA,gBAAM,wBAAwB,CAAC,KAAK,CAAC,IAAN,CAAW,KAAX,CAAD,CAA9B,CAAA;;;AAAZ,cAAA,SAAS,GAAG,EAAA,CAAA,IAAA,EAAZ;;AACN,kBAAI,SAAS,CAAC,MAAd,EAAsB;AACpB,gBAAA,cAAc,CAAC,SAAD,CAAd;AACA,uBAAA,CAAA;AAAA;AAAA,iBAAA;AACD;;mBAGG,gB,EAAA,OAAA,CAAA;AAAA;AAAA,gBAAA,CAAA,CAAA;AACiB,qBAAA,CAAA;AAAA;AAAA,gBAAM,gBAAN,CAAA;;;AAAb,cAAA,UAAU,GAAG,EAAA,CAAA,IAAA,EAAb;AACN,cAAA,UAAU,CAAC,UAAD,CAAV;;;;;;;;;OA/BS,CAAA;AAiCZ,KAjCD,EAiCG,cAjCH;AAkCD,GApCwB,EAqCzB,CAAC,UAAD,EAAa,cAAb,CArCyB,CAA3B;AAwCA,MAAM,eAAe,GAAG,CAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAT,MAAkB,IAAlB,IAAkB,EAAA,KAAA,KAAA,CAAlB,GAAkB,KAAA,CAAlB,GAAkB,EAAA,CAAA,IAAA,CAAlB,OAAkB,CAAlB,MAAO,IAAP,IAAO,EAAA,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAO,EAAA,CAAiB,OAAxB,MAAoC,KAA5D;AAEA,SAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;;;;;AAKR,IAAA,gBAAgB,EAAG,gBALX;AAMR,IAAA,cAAc,EAAA,cANN;AAOR,IAAA,WAAW,EAAA,WAPH;AAQR,IAAA,QAAQ,EAAA,QARA;AASR,IAAA,YAAY,EAAA,YATJ;AAUR,IAAA,kBAAkB,EAAA,kBAVV;AAWR,IAAA,YAAY,EAAA,YAXJ;AAYR,IAAA,UAAU,EAAA,UAZF;AAaR,IAAA,eAAe,EAAA,eAbP;AAcR,IAAA,YAAY,EAAA,YAdJ;AAeR,IAAA,OAAO,EAAA,OAfC;AAgBR,IAAA,aAAa,EAAA,aAhBL;AAiBR,IAAA,YAAY,EAAA,YAjBJ;AAkBR,IAAA,eAAe,EAAA,eAlBP;AAmBR,IAAA,UAAU,EAAA,UAnBF;AAoBR,IAAA,WAAW,EAAA,WApBH;AAqBR,IAAA,WAAW,EAAA,WArBH;AAsBR,IAAA,UAAU,EAAA,UAtBF;AAuBR,IAAA,WAAW,EAAA,WAvBH;AAwBR,IAAA,cAAc,EAAA;AAxBN,GADV,CAAA;AA2BF,C;;ICh9Ba,cAAc,GAAa,SAA3B,cAA2B,GAAA;AAC9B,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQ,CAAC,CAAC,mBAAD,CAAT,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,4mCADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CAFF,CADF;AASF,C;;IAEa,cAAc,GAAa,SAA3B,cAA2B,GAAA;AAC9B,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQ,CAAC,CAAC,mBAAD,CAAT,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,g8BADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CAFF,CADF;AASF,C;;IAEa,cAAc,GAAa,SAA3B,cAA2B,GAAA;AAC9B,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQ,CAAC,CAAC,cAAD,CAAT,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,+OADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CAFF,CADF;AASF,C;;IAEa,kBAAkB,GAAa,SAA/B,kBAA+B,GAAA;AAClC,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQ,CAAC,CAAC,cAAD,CAAT,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,sQADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CAFF,CADF;AASF,C;;IAOa,UAAU,GAA8B,SAAxC,UAAwC,CAAC,EAAD,EAAgB;MAAb,WAAW,GAAA,EAAA,CAAA,W;AACzD,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AACR,SACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,IAAA,SAAS,EAAC,uBADZ;AAEE,IAAA,OAAO;;;;;AAKJ,IAAA;AAPL,GAAA,EAUE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,MAAM,EAAC,IADT;AAEE,IAAA,OAAO,EAAC,WAFV;AAGE,IAAA,KAAK,EAAC,IAHR;AAIE,IAAA,KAAK,EAAC;AAJR,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQ,CAAC,CAAC,MAAD,CAAT,CANF,EAOE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,wDADJ;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,QAAQ,EAAC;AAHX,GAAA,CAPF,CAVF,CADF;AA0BF,C;;ICjEa,cAAc,GAAG,SAAjB,cAAiB,CAS5B,KAT4B,EASW;AAGrC,MAAA,SAAS,GAUP,KAAK,CAVE,SAAT;AAAA,MACA,WAAW,GAST,KAAK,CATI,WADX;AAAA,MAEA,UAAU,GAQR,KAAK,CARG,UAFV;AAAA,MAGA,YAAY,GAOV,KAAK,CAPK,YAHZ;AAAA,MAIA,eAAe,GAMb,KAAK,CANQ,eAJf;AAAA,MAKA,UAAU,GAKR,KAAK,CALG,UALV;AAAA,MAMA,WAAW,GAIT,KAAK,CAJI,WANX;AAAA,MAOA,UAAU,GAGR,KAAK,CAHG,UAPV;AAAA,MAQA,WAAW,GAET,KAAK,CAFI,WARX;AAAA,MASA,cAAc,GACZ,KAAK,CADO,cATd;AAYF,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AAEA,MAAM,eAAe,GAAG,UAAU,CAAC,GAAX,CAAe,UAAC,EAAD,EAAG;AAAK,WAAA,YAAY,CAAC,EAAD,CAAZ;AAAgB,GAAvC,CAAxB;AACA,MAAM,cAAc,GAAG,SAAS,CAAC,GAAV,CAAc,UAAC,EAAD,EAAG;AAAK,WAAA,WAAW,CAAC,EAAD,CAAX;AAAe,GAArC,CAAvB;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,UAAU,CAAC,MAAX,GAAoB,CAApB,IACC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,IAAA,QAAQ,EACN,cAAc,CAAC,gBAAf,KAAoC,SAApC,IACA,eAAe,IAAI,cAAc,CAAC,gBAHvB;AAKb,IAAA,WAAW,EAAE,cALA;AAMb,IAAA,YAAY,EAAE,WAND;AAOb,IAAA,WAAW,EAAE,WAPA;AAQb,IAAA,YAAY,EAAE,eARD;AASb,IAAA,QAAQ,EAAE,cAAc,CAAC;AATZ,GAAf,CAFJ,EAcG,SAAS,CAAC,MAAV,GAAmB,CAAnB,IACC,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,WAAW,EAAE,cADD;AAEZ,IAAA,YAAY,EAAE,UAFF;AAGZ,IAAA,WAAW,EAAE,UAHD;AAIZ,IAAA,OAAO,EAAE;AAJG,GAAd,CAfJ,CADF;AAyBF,C;;ACrEA,IAAM,qBAAqB,GAA+B,SAApD,qBAAoD,CAAC,KAAD,EAAM;AACtD,MAAA,MAAM,GAAK,KAAK,CAAV,MAAN;AAER,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EAAS,MAAM,CAAC,IAAhB,CADF,E,GAAA,EACkC,MAAM,CAAC,IADzC,CADF,EAIE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,CAJF,EAKE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACG,MAAM,CAAC,WADV,CALF,CADF;AAWD,CAdD;;IAgBa,WAAW,GAAG,KAAK,CAAC,IAAN,CACzB,qBADyB,C;;ACd3B,IAAM,sBAAsB,GAAgC,SAAtD,sBAAsD,CAAC,KAAD,EAAM;AACxD,MAAA,MAAM,GAAK,KAAK,CAAV,MAAN;AAER,MAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,MAAtC;AACA,MAAM,SAAS,GAAG,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,aAA1B;;AAEA,MAAM,UAAU,GAAG,SAAb,UAAa,GAAA;AACjB,QAAI,CAAC,SAAL,EAAgB,OAAO,IAAP;AAChB,WACE,SAAS,IACT,SAAS,CAAC,KAAV,CAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,CAAP,EAAQ;AAC1B,aAAA,IAAI,CAAC,WAAL,OAAuB,SAAS,CAAC,KAAV,CAAgB,WAAhB,EAAvB,GACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC,iCAAhB;AAAkD,QAAA,GAAG,EAAE,UAAQ;AAA/D,OAAA,EACG,IADH,CADF,GAKE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC,4BAAhB;AAA6C,QAAA,GAAG,EAAE,UAAQ;AAA1D,OAAA,EACG,IADH,CALF;AAQC,KATH,CAFF;AAcD,GAhBD;;AAkBA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EAAgD,MAAM,CAAC,MAAvD,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EAA8C,UAAU,EAAxD,CAFF,CADF;AAMD,CA9BD;;IAgCa,YAAY,GAAG,KAAK,CAAC,IAAN,CAC1B,sBAD0B,C;ACrB5B;;;;AAGA,IAAM,kBAAkB,GAA4B,SAA9C,kBAA8C,CAAC,KAAD,EAAM;AAChD,MAAA,EAAA,GAAmC,KAAK,CAAlB,MAAtB;AAAA,MAAA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGN,MAAH,GAAgB,EAAtB;AAAA,MAAwB,MAAM,GAAK,KAAK,CAAV,MAA9B;AAER,MAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,MAAtC;AACA,MAAM,SAAS,GAAG,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,aAA1B;;AAEA,MAAM,UAAU,GAAG,SAAb,UAAa,GAAA;AACjB,QAAI,CAAC,SAAL,EAAgB,OAAO,IAAP;AAEhB,WACE,SAAS,IACT,SAAS,CAAC,KAAV,CAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,CAAP,EAAQ;AAC1B,aAAA,IAAI,CAAC,WAAL,OAAuB,SAAS,CAAC,KAAV,CAAgB,WAAhB,EAAvB,GACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC,iCAAhB;AAAkD,QAAA,GAAG,EAAE,UAAQ;AAA/D,OAAA,EACG,IADH,CADF,GAKE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC,4BAAhB;AAA6C,QAAA,GAAG,EAAE,UAAQ;AAA1D,OAAA,EACG,IADH,CALF;AAQC,KATH,CAFF;AAcD,GAjBD;;AAmBA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAACC,QAAD,EAAO;AAAC,IAAA,KAAK,EAAE,MAAM,CAAC,KAAf;AAAsB,IAAA,IAAI,EAAE;AAA5B,GAAP,CADF,EAEE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,2BADZ;AACuC,mBACxB;AAFf,GAAA,EAIG,UAAU,EAJb,CAFF,CADF;AAWD,CApCD;;IAsCa,QAAQ,GAAG,KAAK,CAAC,IAAN,CACtB,kBADsB,C;;ACgJxB,IAAM,0BAA0B,GAAG,SAA7B,0BAA6B,CAUjC,KAViC,EAUM;;;AAGrC,MAAA,uBAAuB,GAoBrB,KAAK,CApBgB,uBAAvB;AAAA,MACA,QAAQ,GAmBN,KAAK,CAnBC,QADR;AAAA,MAEA,QAAQ,GAkBN,KAAK,CAlBC,QAFR;AAAA,MAGA,eAAe,GAiBb,KAAK,CAjBQ,eAHf;AAAA,MAIA,IAAI,GAgBF,KAAK,CAhBH,IAJJ;AAAA,MAKA,YAAY,GAeV,KAAK,CAfK,YALZ;AAAA,MAMA,QAAQ,GAcN,KAAK,CAdC,QANR;AAAA,MAOA,OAAO,GAaL,KAAK,CAbA,OAPP;AAAA,MAQA,EAAA,GAYE,KAAK,CAZmB,kBAR1B;AAAA,MAQA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAR1B;AAAA,MASA,EAAA,GAWE,KAAK,CAXgB,kBATvB;AAAA,MASA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EATvB;AAAA,MAUA,QAAQ,GAUN,KAAK,CAVC,QAVR;AAAA,MAWA,OAAO,GASL,KAAK,CATA,OAXP;AAAA,MAYA,OAAO,GAQL,KAAK,CARA,OAZP;AAAA,MAaA,YAAY,GAOV,KAAK,CAPK,YAbZ;AAAA,MAcA,WAAW,GAMT,KAAK,CANI,WAdX;AAAA,MAeA,EAAA,GAKE,KAAK,CALC,IAfR;AAAA,MAeA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAH,GAAI,EAfR;AAAA,MAgBA,cAAc,GAIZ,KAAK,CAJO,cAhBd;AAAA,MAiBA,cAAc,GAGZ,KAAK,CAHO,cAjBd;AAAA,MAkBA,QAAQ,GAEN,KAAK,CAFC,QAlBR;AAAA,MAmBA,KAAK,GACH,KAAK,CADF,KAnBL;;AAsBI,MAAA,EAAA,GAA2B,iBAAiB,EAA5C;AAAA,MAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,MAAW,WAAW,GAAA,EAAA,CAAA,WAAtB;;AASA,MAAA,EAAA,GAAoB,cAAc,EAAlC;AAAA,MAAE,MAAM,GAAA,EAAA,CAAA,MAAR;AAAA,MAAU,KAAK,GAAA,EAAA,CAAA,KAAf;;AAEA,MAAA,EAAA,GAA4B,QAAQ,CAAC,KAAD,CAApC;AAAA,MAAC,SAAS,GAAA,EAAA,CAAA,CAAA,CAAV;AAAA,MAAY,YAAY,GAAA,EAAA,CAAA,CAAA,CAAxB;;AAEN,MAAM,OAAO,GAAA,CAAA,EAAA,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAZ,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,OAAhC;AACA,MAAM,QAAQ,GAAA,CAAA,EAAA,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,KAAZ,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,QAAjC;;AACM,MAAA,EAAA,GAA4B,WAAW,IAAI,EAA3C;AAAA,MAAE,SAAS,GAAA,EAAA,CAAA,SAAX;AAAA,MAAa,UAAU,GAAA,EAAA,CAAA,UAAvB;;AAEN,MAAM,UAAU,GAA4B,OAAO,CAAC,YAAA;AAClD,QAAI,UAAJ,EAAgB;;AAEd,aAAO,IAAI,UAAJ,CAAe,SAAf,CAAP;AACD;;AACD,WAAO,IAAP;AACD,GANkD,EAMhD,CAAC,SAAD,EAAY,UAAZ,CANgD,CAAnD;;AAQA,MAAM,YAAY,GAAG,SAAf,YAAe,CAAC,IAAD,EAAa;AAChC,QAAM,KAAK,GAAG,CAAA,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,MAAZ,CAAmB,IAAnB,CAAA,KAA4B,EAA1C;AACA,QAAM,KAAK,GAAG,KAAK,CAChB,MADW,CACJ,OADI,EAEX,KAFW,CAEL,CAFK,EAEF,EAFE,EAGX,IAHW,CAGN,UAAC,EAAD,EAAyB;UAAtB,SAAS,GAAA,EAAA,CAAA,S;AAAkB,aAAA,CAAC,EAAC,SAAS,KAAA,IAAT,IAAA,SAAS,KAAA,KAAA,CAAT,GAAS,KAAA,CAAT,GAAA,SAAS,CAAE,QAAX,CAAoB,IAApB,CAAD,CAAD;AAA2B,KAHnD,CAAd;AAIA,QAAI,CAAC,KAAD,IAAU,EAAE,YAAY,KAAd,CAAd,EAAoC,OAAO,IAAP;AACpC,WAAO,KAAK,CAAC,MAAb;AACD,GARD;;AAUA,MAAM,qBAAqB,GAAG,WAAW,CAAC,YAAA;AACxC,QAAM,WAAW,GAAG,OAAO,GACvB,MAAM,CAAC,MAAP,CAAc,OAAd,EAAuB,GAAvB,CAA2B,UAAC,EAAD,EAAS;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,IAAA;AAAI,KAA7C,CADuB,GAEvB,EAFJ;AAGA,QAAM,YAAY,GAAG,QAAQ,GAAG,MAAM,CAAC,MAAP,CAAc,QAAd,CAAH,GAA6B,EAA1D;;AACA,QAAM,KAAK,GAAA,cAAA,CAAO,WAAP,EAAuB,YAAvB,CAAX,CALwC,C;;;AAQxC,QAAM,WAAW,GAAG,EAApB;AAEA,IAAA,KAAK,CAAC,OAAN,CAAc,UAAC,IAAD,EAAK;AACjB,UAAI,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAN,CAAxB,EAAmC;AACjC,QAAA,WAAW,CAAC,IAAI,CAAC,EAAN,CAAX,GAAuB,IAAvB;AACD;AACF,KAJD;AAMA,WAAO,MAAM,CAAC,MAAP,CAAc,WAAd,CAAP;AACD,GAjBwC,EAiBtC,CAAC,OAAD,EAAU,QAAV,CAjBsC,CAAzC;AAmBA,MAAM,qBAAqB,GAAG,WAAW,CACvC,QAAQ,CACN,UAAO,KAAP,EAAsB,OAAtB,EAAkE;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;;;AAG7C,mBAAA,CAAA;AAAA;AAAA,cAAM,OAAO,CAAC,YAAR,CAAqB;AAC1C,cAAA,IAAI,EAAE;AAAE,gBAAA,aAAa,EAAE;AAAjB;AADoC,aAArB,CAAN,CAAA;;;AAAX,YAAA,QAAQ,GAAG,EAAA,CAAA,IAAA,EAAX;AAIA,YAAA,KAAK,GAAG,QAAQ,CAAC,OAAT,CAAiB,GAAjB,CACZ,UAAC,MAAD,EAAO;AAAK,qBAAA,MAAM,CAAC,IAAP;AAAW,aADX,CAAR;;AAIN,gBAAI,OAAO,IAAI,KAAK,CAAC,MAArB,EAA6B;AAC3B,cAAA,OAAO,CAAC,KAAD,CAAP;AACD,aAFD,MAEO;AACL,cAAA,OAAO,CAAC,EAAD,CAAP;AACD;;;;;;;;AAED,YAAA,OAAO,CAAC,GAAR,CAAY;AAAE,cAAA,KAAK,EAAA;AAAP,aAAZ;;;;;;;;;;;KAjB8D,CAAA;AAmBjE,GApBK,EAqBN,GArBM,CAD+B,EAwBvC,CAAC,OAAD,CAxBuC,CAAzC;;AA2BA,MAAM,UAAU,GAAG,SAAb,UAAa,CACjB,KADiB,EAEjB,OAFiB,EAE2B;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AAE5C,gBAAI,CAAC,KAAD,IAAU,SAAd,EAAyB,OAAA,CAAA;AAAA;AAAA,aAAA;AACzB,YAAA,YAAY,CAAC,IAAD,CAAZ;;;;;;AAGoB,mBAAA,CAAA;AAAA;AAAA,cAAM,MAAM,CAAC,UAAP,CAAiB,OAAA,CAAA;AAGrC,cAAA,GAAG,EAAE,CACH;AAAE,gBAAA,EAAE,EAAE;AAAE,kBAAA,aAAa,EAAE;AAAjB;AAAN,eADG,EAEH;AAAE,gBAAA,IAAI,EAAE;AAAE,kBAAA,aAAa,EAAE;AAAjB;AAAR,eAFG,CAHgC;AAOrC,cAAA,EAAE,EAAE;AAAE,gBAAA,GAAG,EAAE,MAAM,CAAC;AAAd;AAPiC,aAAA,EAQlC,kBAAkB,CAAC,OARe,CAAjB,EAQS,OAAA,CAAA;AAE7B,cAAA,EAAE,EAAE;AAFyB,aAAA,EAEnB,kBAAkB,CAAC,IAFA,CART,EAUa,OAAA,CAAA;AACjC,cAAA,KAAK,EAAE;AAD0B,aAAA,EACnB,kBAAkB,CAAC,OADA,CAVb,CAAN,CAAA;;;AAAV,YAAA,KAAK,GAAK,EAAA,CAAA,IAAA,EAAA,CAAL,KAAL;;AAcR,gBAAI,OAAO,IAAI,KAAK,CAAC,MAArB,EAA6B;AAC3B,cAAA,OAAO,CAAC,KAAD,CAAP;AACD,aAFD,MAEO;AACL,cAAA,OAAO,CAAC,EAAD,CAAP;AACD;;;;;;;;AAED,YAAA,OAAO,CAAC,GAAR,CAAY;AAAE,cAAA,KAAK,EAAA;AAAP,aAAZ;;;;;;AAGF,YAAA,YAAY,CAAC,KAAD,CAAZ;;;;;;KA7B4C,CAAA;AA8B7C,GAhCD;;AAkCA,MAAM,mBAAmB,GAAG,QAAQ,CAAC,UAAD,EAAa,GAAb,CAApC;;;;;;;;;;;AAWA,MAAM,WAAW,GAAG,WAAW,CAC7B,YAAA;AACE,WAAA,QAAQ,IACP;AACC,WAAK;AACH,QAAA,SAAS,EAAE,WADR;AAEH,QAAA,YAAY,EAAE,sBAAC,KAAD,EAAQ,IAAR,EAAc,OAAd,EAAqB;AACjC,cAAI,IAAI,CAAC,OAAL,CAAa,GAAb,MAAsB,CAAtB,IAA2B,CAAC,QAAhC,EAA0C;AACxC,mBAAO,EAAP;AACD;;AACD,cAAM,gBAAgB,GAAG,QAAQ,CAAC,MAAT,CACvB,UAAC,OAAD,EAAQ;AAAA,gBAAA,EAAA;;AAAK,mBAAA,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,OAAF,CAAU,KAAV,CAAZ,MAAiC,CAAC,CAAlC;AAAmC,WADzB,CAAzB,CAJiC,C;;AASjC,UAAA,gBAAgB,CAAC,IAAjB,CAAsB,UAAC,CAAD,EAAI,CAAJ,EAAK;;;AACzB,gBAAI,KAAK,GAAA,CAAA,EAAA,GAAG,CAAC,CAAC,IAAL,MAAS,IAAT,IAAS,EAAA,KAAA,KAAA,CAAT,GAAS,KAAA,CAAT,GAAS,EAAA,CAAE,WAAF,EAAlB;AACA,gBAAI,KAAK,GAAA,CAAA,EAAA,GAAG,CAAC,CAAC,IAAL,MAAS,IAAT,IAAS,EAAA,KAAA,KAAA,CAAT,GAAS,KAAA,CAAT,GAAS,EAAA,CAAE,WAAF,EAAlB;;AACA,gBAAI,CAAA,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,OAAP,CAAe,KAAf,CAAA,MAA0B,CAA9B,EAAiC;AAC/B,cAAA,KAAK,GAAG,MAAI,KAAZ;AACD;;AACD,gBAAI,CAAA,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAE,OAAP,CAAe,KAAf,CAAA,MAA0B,CAA9B,EAAiC;AAC/B,cAAA,KAAK,GAAG,MAAI,KAAZ;AACD,aARwB,C;;;AAUzB,gBAAI,KAAK,IAAI,IAAT,IAAiB,KAAK,IAAI,IAA9B,EAAoC;AAClC,kBAAI,KAAK,GAAG,KAAZ,EAAmB;AACjB,uBAAO,CAAC,CAAR;AACD;;AACD,kBAAI,KAAK,GAAG,KAAZ,EAAmB;AACjB,uBAAO,CAAP;AACD;AACF;;AAED,mBAAO,CAAP;AACD,WApBD;AAsBA,cAAM,MAAM,GAAG,gBAAgB,CAAC,KAAjB,CAAuB,CAAvB,EAA0B,EAA1B,CAAf;AACA,cAAI,OAAJ,EAAa,OAAO,CAAC,MAAD,EAAS,KAAT,CAAP;AAEb,iBAAO,MAAP;AACD,SArCE;AAsCH,QAAA,MAAM,EAAE,gBAAC,MAAD,EAAO;AAAK,iBAAC;AACnB,YAAA,aAAa,EAAE,MADI;AAEnB,YAAA,GAAG,EAAE,MAAM,CAAC,IAFO;AAGnB,YAAA,IAAI,EAAE,MAAI,MAAM,CAAC;AAHE,WAAD;AAIlB;AA1CC,OADN;AA6CC,WAAK;AACH,QAAA,SAAS,EAAE,YADR;AAEH,QAAA,YAAY,EAAE,sBAAC,KAAD,EAAQ,CAAR,EAAW,OAAX,EAAkB;AAC9B,cAAI,KAAK,CAAC,MAAN,KAAiB,CAAjB,IAAsB,KAAK,CAAC,MAAN,CAAa,CAAb,EAAgB,KAAhB,CAAsB,gBAAtB,CAA1B,EAAmE;AACjE,mBAAO,EAAP;AACD;;AACD,cAAM,MAAM,GAAG,CAAA,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE,MAAZ,CAAmB,KAAnB,CAAA,KAA6B,EAA5C;AACA,cAAM,MAAM,GAAG,MAAM,CAAC,KAAP,CAAa,CAAb,EAAgB,EAAhB,CAAf;AAEA,cAAI,OAAJ,EAAa,OAAO,CAAC,MAAD,EAAS,KAAT,CAAP;AAEb,iBAAO,MAAP;AACD,SAZE;AAaH,QAAA,MAAM,EAAE,gBAAC,MAAD,EAAO;AAAK,iBAAC;AACnB,YAAA,aAAa,EAAE,MADI;AAEnB,YAAA,GAAG,EAAE,MAAM,CAAC,EAFO;AAGnB,YAAA,IAAI,EAAE,MAAG,YAAY,MAAZ,GAAqB,MAAM,CAAC,MAA5B,GAAqC,EAAxC;AAHa,WAAD;AAIlB;AAjBC,OA7CN;AAgEC,WAAK;AACH,QAAA,QAAQ,EAAE,kBAAC,IAAD,EAAK;AAAK,iBAAA,YAAY,IAAI,YAAY,CAAC,IAAD,CAA5B;AAAkC,SADnD;AAEH,QAAA,SAAS,EAAE,QAFR;AAGH,QAAA,YAAY,EAAE,sBAAC,KAAD,EAAQ,CAAR,EAAW,OAAX,EAAkB;AAC9B,cAAI,kBAAJ,EAAwB;AACtB,mBAAO,mBAAmB,CACxB,KADwB,EAExB,UAAC,IAAD,EAAuC;AACrC,kBAAI,OAAJ,EAAa,OAAO,CAAC,IAAD,EAAO,KAAP,CAAP;AACd,aAJuB,CAA1B;AAMD;;;;;;;;;AAQD,cAAI,CAAC,KAAD,IAAU,MAAM,CAAC,MAAP,CAAc,OAAO,IAAI,EAAzB,EAA6B,MAA7B,GAAsC,GAApD,EAAyD;AACvD,gBAAM,KAAK,GAAG,qBAAqB,EAAnC;AAEA,gBAAM,aAAa,GAAG,KAAK,CAAC,MAAN,CAAa,UAAC,IAAD,EAAK;AACtC,kBAAI,IAAI,CAAC,EAAL,KAAY,MAAM,CAAC,MAAvB,EAA+B,OAAO,KAAP;AAC/B,kBAAI,CAAC,KAAL,EAAY,OAAO,IAAP;;AAEZ,kBACE,IAAI,CAAC,IAAL,KAAc,SAAd,IACA,IAAI,CAAC,IAAL,CAAU,WAAV,GAAwB,QAAxB,CAAiC,KAAK,CAAC,WAAN,EAAjC,CAFF,EAGE;AACA,uBAAO,IAAP;AACD;;AAED,qBAAO,IAAI,CAAC,EAAL,CAAQ,WAAR,GAAsB,QAAtB,CAA+B,KAAK,CAAC,WAAN,EAA/B,CAAP;AACD,aAZqB,CAAtB;AAcA,gBAAM,IAAI,GAAG,aAAa,CAAC,KAAd,CAAoB,CAApB,EAAuB,EAAvB,CAAb;AAEA,gBAAI,OAAJ,EAAa,OAAO,CAAC,IAAD,EAAO,KAAP,CAAP;AAEb,mBAAO,IAAP;AACD;;AAED,iBAAO,qBAAqB,CAC1B,KAD0B,EAE1B,UAAC,IAAD,EAAuC;AACrC,gBAAI,OAAJ,EAAa,OAAO,CAAC,IAAD,EAAO,KAAP,CAAP;AACd,WAJyB,CAA5B;AAMD,SAjDE;AAkDH,QAAA,MAAM,EAAE,gBAAC,MAAD,EAAO;AAAK,iBAAC;AACnB,YAAA,aAAa,EAAE,MADI;AAEnB,YAAA,GAAG,EAAE,MAAM,CAAC,EAFO;AAGnB,YAAA,IAAI,EAAE,OAAI,MAAM,CAAC,IAAP,IAAe,MAAM,CAAC,EAA1B;AAHa,WAAD;AAIlB;AAtDC;AAhEN,KADD;AAyHgC,GA3HL,EA4H7B,CACE,QADF,EAEE,qBAFF,EAGE,OAHF,EAIE,YAJF,EAKE,qBALF,EAME,QANF,EAOE,UAPF,CA5H6B,CAA/B;AAuIA,MAAM,cAAc,GAAG,WAAW,CAChC,UAAC,GAAD,EAAI;AACF,QAAI,QAAJ,EAAc;AACZ,MAAA,QAAQ,CAAC,OAAT,GAAmB,GAAnB;AACD;AACF,GAL+B,EAMhC,CAAC,QAAD,CANgC,CAAlC;AASA,SACE,KAAA,CAAA,aAAA,CAACM,yBAAD,EAAqB;AACnB,IAAA,uBAAuB,EAAE,uBADN;AAEnB,IAAA,SAAS,EAAC,8BAFS;AAGnB,IAAA,kBAAkB,EAAC,oBAHA;AAInB,IAAA,QAAQ,EAAE,QAJS;AAKnB,IAAA,eAAe,EAAE,eALE;AAMnB,IAAA,iBAAiB,EAAC,uBANC;AAOnB,IAAA,IAAI,EAAE,IAPa;AAQnB,IAAA,YAAY,EAAE,YARK;AASnB,IAAA,QAAQ,EAAE,cATS;AAUnB,IAAA,aAAa,EAAC,6BAVK;AAWnB,IAAA,aAAa,EAAC,6BAXK;AAYnB,IAAA,gBAAgB,EAAE,gBAZC;AAanB,IAAA,OAAO,EAAE,OAbU;AAcnB,IAAA,OAAO,EAAE,CAdU;AAenB,IAAA,KAAK,EAAE,KAfY;AAgBnB,IAAA,QAAQ,EAAE,QAhBS;AAiBnB,IAAA,OAAO,EAAE,OAjBU;AAkBnB,IAAA,OAAO,EAAE,OAlBU;AAmBnB,IAAA,WAAW,EAAE,WAnBM;AAoBnB,IAAA,WAAW,EAAE,YApBM;AAqBnB,IAAA,IAAI,EAAE,IArBa;AAsBnB,IAAA,cAAc,EAAE,cAtBG;AAuBnB,IAAA,cAAc,EAAE,cAvBG;AAwBnB,IAAA,OAAO,EAAE,WAAW,EAxBD;AAyBnB,IAAA,KAAK,EAAE;AAzBY,GAArB,CADF;AA6BD,CA9UD;;IAgVa,gBAAgB,GAAG,KAAK,CAAC,IAAN,CAC9B,0BAD8B,C;;ICjiBnB,OAAO,GAAmD,SAA1D,OAA0D,CACrE,KADqE,EAChE;AAEG,MAAA,QAAQ,GAAc,KAAK,CAAnB,QAAR;AAAA,MAAa,IAAI,GAAA,MAAA,CAAK,KAAL,EAAnB,CAAA,UAAA,CAAmB,CAAjB;;AACR,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,OAAA,CAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EAAuC,IAAvC,CAAA,EACG,QADH,CADF;AAKF,C;;ICoBa,eAAe,GAAG,SAAlB,eAAkB,CAU7B,KAV6B,EAU0B;AAGrD,MAAA,EAAA,GAWE,KAAK,CAXqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,iBAAiB,GAUf,KAAK,CAVU,iBADjB;AAAA,MAEA,EAAA,GASE,KAAK,CATS,QAFhB;AAAA,MAEA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFhB;AAAA,MAGA,EAAA,GAQE,KAAK,CARqB,SAH5B;AAAA,MAGA,SAAS,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAmB,EAH5B;AAAA,MAIA,EAAA,GAOE,KAAK,CAP+B,cAJtC;AAAA,MAIA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAwB,EAJtC;AAAA,MAKA,EAAA,GAME,KAAK,CANM,KALb;AAAA,MAKA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EALb;AAAA,MAMA,EAAA,GAKE,KAAK,CALI,IANX;AAAA,MAMA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EANX;AAAA,MAOA,EAAA,GAIE,KAAK,CAJK,OAPZ;AAAA,MAOA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAPZ;AAAA,MAQA,kBAAkB,GAGhB,KAAK,CAHW,kBARlB;AAAA,MASA,kBAAkB,GAEhB,KAAK,CAFW,kBATlB;AAAA,MAUA,EAAA,GACE,KAAK,CADkB,kBAVzB;AAAA,MAUA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAVzB;AAaF,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AACQ,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,YAAY,GAAG,eAAe,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAC/B,KAD+B,CAAA,EAC1B;AACR,IAAA,uBAAuB,EAAA,uBADf;AAER,IAAA,QAAQ,EAAA,QAFA;AAGR,IAAA,KAAK,EAAA,KAHG;AAIR,IAAA,IAAI,EAAA,IAJI;AAKR,IAAA,OAAO,EAAA,OALC;AAMR,IAAA,kBAAkB,EAAA;AANV,GAD0B,CAAA,CAApC;AAUA,EAAA,SAAS,CAAC,YAAA;AACR,QAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,KAAD,EAAqB;AACrC,UAAI,KAAK,CAAC,OAAN,KAAkB,SAAS,CAAC,GAA5B,IAAmC,iBAAvC,EACE,iBAAiB;AACpB,KAHD;;AAKA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC,SAArC;AACA,WAAO,YAAA;AAAM,aAAA,QAAQ,CAAC,mBAAT,CAA6B,SAA7B,EAAwC,SAAxC,CAAA;AAAkD,KAA/D;AACD,GARQ,EAQN,CAAC,iBAAD,CARM,CAAT;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,MAAM,EAAE,cAAc,CAAC,aADX;AAEZ,IAAA,QAAQ,EACN,CAAC,YAAY,CAAC,eAAd,IAAiC,YAAY,CAAC,YAAb,KAA8B,CAHrD;AAKZ,IAAA,WAAW,EAAE,YAAY,CAAC,cALd;AAMZ,IAAA,gBAAgB,EAAE,YAAY,CAAC,YANnB;AAOZ,IAAA,QAAQ,EAAE,cAAc,CAAC;AAPb,GAAd,EASE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,QAAQ,EAAE,YAAY,CAAC;AAA7B,GAAA,EACG,YAAY,CAAC,eAAb,IAAgC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,YAAL,CAAf,CADnC,EAEE,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EAAK,YAAL,EAAiB;AAAE,IAAA,KAAK,EAAA;AAAP,GAAjB,CAAZ,CAFF,EAGE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,uBAAuB,EAAE,uBADV;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAAb,EAFK;AAGf,IAAA,IAAI,EAAE,IAHS;AAIf,IAAA,YAAY,EAAE,YAAY,CAAC,YAJZ;AAKf,IAAA,QAAQ,EAAE,YAAY,CAAC,WALR;AAMf,IAAA,OAAO,EAAE,OANM;AAOf,IAAA,kBAAkB,EAAE,kBAPL;AAQf,IAAA,kBAAkB,EAAE,kBARL;AASf,IAAA,QAAQ,EAAE,YAAY,CAAC,YATR;AAUf,IAAA,OAAO,EAAE,YAAY,CAAC,OAVP;AAWf,IAAA,YAAY,EAAE,YAAY,CAAC,YAXZ;AAYf,IAAA,WAAW,EAAE,CAAC,CAAC,mBAAD,CAZC;AAaf,IAAA,IAAI,EAAE,CAbS;AAcf,IAAA,KAAK,EAAE,YAAY,CAAC;AAdL,GAAjB,CAHF,EAmBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,6BADZ;AAEE,IAAA,OAAO,EAAE,YAAY,CAAC;AAFxB,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAJF,CADF,EAOG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,8BADZ;AAC0C,mBAC5B;AAFd,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,YAAb,GACG,CAAC,CAAC,cAAD,CADJ,GAEG,CAAC,CAAC,4CAAD,CAHP,CAJF,EASE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,OAAO,EAAE,cAAc,CAAC,aADT;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAAb,KAA8B,CAFzB;AAGf,IAAA,WAAW,EAAE,YAAY,CAAC,cAHX;AAIf,IAAA,QAAQ,EAAE,cAAc,CAAC;AAJV,GAAjB,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAACC,gBAAD,EAAe,IAAf,CADF,CANF,CATF,CARJ,CADF,EA+BE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,IAAA,OAAO,EAAE,mBAAA;AACP,UAAI,iBAAJ,EAAuB;AACrB,QAAA,iBAAiB;AAClB;AACF;AALH,GAAA,EAOG,CAAC,CAAC,QAAD,CAPJ,CADF,EAUE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,IAAA,IAAI,EAAC;AAAb,GAAA,EAAuB,CAAC,CAAC,MAAD,CAAxB,CAVF,CA/BF,CAnBF,CATF,CADF,CADF;AA8EF,C;;IC7Ha,iBAAiB,GAAG,SAApB,iBAAoB,CAU/B,KAV+B,EAUwB;AAGrD,MAAA,EAAA,GAeE,KAAK,CAfqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,oBAAoB,GAclB,KAAK,CAda,oBADpB;AAAA,MAEA,EAAA,GAaE,KAAK,CAbS,QAFhB;AAAA,MAEA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFhB;AAAA,MAGA,eAAe,GAYb,KAAK,CAZQ,eAHf;AAAA,MAIA,EAAA,GAWE,KAAK,CAXqB,SAJ5B;AAAA,MAIA,SAAS,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGF,cAAH,GAAmB,EAJ5B;AAAA,MAKA,EAAA,GAUE,KAAK,CAV+B,cALtC;AAAA,MAKA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAwB,EALtC;AAAA,MAMA,EAAA,GASE,KAAK,CATM,KANb;AAAA,MAMA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EANb;AAAA,MAOA,EAAA,GAQE,KAAK,CARI,IAPX;AAAA,MAOA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAPX;AAAA,MAQA,EAAA,GAOE,KAAK,CAPK,OARZ;AAAA,MAQA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EARZ;AAAA,MASA,kBAAkB,GAMhB,KAAK,CANW,kBATlB;AAAA,MAUA,kBAAkB,GAKhB,KAAK,CALW,kBAVlB;AAAA,MAWA,EAAA,GAIE,KAAK,CAJkB,kBAXzB;AAAA,MAWA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAXzB;AAAA,MAYA,EAAA,GAGE,KAAK,CAHuB,UAZ9B;AAAA,MAYA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGE,UAAH,GAAoB,EAZ9B;AAAA,MAaA,cAAc,GAEZ,KAAK,CAFO,cAbd;AAAA,MAcA,cAAc,GACZ,KAAK,CADO,cAdd;;AAiBI,MAAA,EAAA,GAMF,iBAAiB,EANf;AAAA,MACJ,aAAa,GAAA,EAAA,CAAA,aADT;AAAA,MAEJ,MAAM,GAAA,EAAA,CAAA,MAFF;AAAA,MAGJ,eAAe,GAAA,EAAA,CAAA,eAHX;AAAA,MAIJ,MAAM,GAAA,EAAA,CAAA,MAJF;AAAA,MAKJ,aAAa,GAAA,EAAA,CAAA,aALT;;AAOE,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,YAAY,GAAG,eAAe,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAC/B,KAD+B,CAAA,EAC1B;AACR,IAAA,uBAAuB,EAAA,uBADf;AAER,IAAA,KAAK,EAAA,KAFG;AAGR,IAAA,kBAAkB,EAAA;AAHV,GAD0B,CAAA,CAApC;;AAOA,MAAM,qBAAqB,GAAG,SAAxB,qBAAwB,CAC5B,WAD4B,EACkC;AAE9D,QAAM,gBAAgB,GAAG,MAAM,CAAC,MAAP,CAAc,WAAd,EACtB,MADsB,CACf,UAAC,EAAD,EAAS;;;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,CAAA,CAAA,EAAA,GAAA,MAAM,CAAC,IAAP,MAAW,IAAX,IAAW,EAAA,KAAA,KAAA,CAAX,GAAW,KAAA,CAAX,GAAW,EAAA,CAAE,EAAb,OAAoB,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,EAA1B,CAAA;AAA4B,KAD3B,EAEtB,GAFsB,CAElB,UAAC,EAAD,EAAS;UAAN,IAAI,GAAA,EAAA,CAAA,I;AAAO,aAAA,CAAA,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,IAAN,MAAc,IAAI,KAAA,IAAJ,IAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAA,IAAI,CAAE,EAApB,CAAA;AAAsB,KAFlB,CAAzB;AAGA,QAAI,gBAAgB,CAAC,MAAjB,KAA4B,CAAhC,EAAmC,OAAO,EAAP;;AACnC,QAAI,gBAAgB,CAAC,MAAjB,KAA4B,CAAhC,EAAmC;AACjC,aAAO,CAAC,CAAC,yBAAD,EAA4B;AAAE,QAAA,IAAI,EAAE,gBAAgB,CAAC,CAAD;AAAxB,OAA5B,CAAR;AACD;;AACD,QAAI,gBAAgB,CAAC,MAAjB,KAA4B,CAAhC,EAAmC;;;AAGjC,aAAO,CAAC,CAAC,oDAAD,EAAuD;AAC7D,QAAA,SAAS,EAAE,gBAAgB,CAAC,CAAD,CADkC;AAE7D,QAAA,UAAU,EAAE,gBAAgB,CAAC,CAAD;AAFiC,OAAvD,CAAR;AAID,KAhB6D,C;;;;AAmB9D,WAAO,CAAC,CAAC,4DAAD,EAA+D;AACrE,MAAA,mBAAmB,EAAE,gBAAgB,CAAC,KAAjB,CAAuB,CAAvB,EAA0B,CAAC,CAA3B,EAA8B,IAA9B,CAAmC,IAAnC,CADgD;AAErE,MAAA,QAAQ,EAAE,gBAAgB,CAAC,gBAAgB,CAAC,MAAjB,GAA0B,CAA3B;AAF2C,KAA/D,CAAR;AAID,GAxBD;;AA0BA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,MAAM,EAAE,aADI;AAEZ,IAAA,QAAQ,EACN,CAAC,YAAY,CAAC,eAAd,IAAiC,YAAY,CAAC,YAAb,KAA8B,CAHrD;AAKZ,IAAA,WAAW,EAAE,YAAY,CAAC,cALd;AAMZ,IAAA,gBAAgB,EAAE,YAAY,CAAC,YANnB;AAOZ,IAAA,QAAQ,EAAE;AAPE,GAAd,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,YAAL,CAAf,CAFJ,EAIE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,uBAAuB,EAAE,uBADV;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAAb,EAFK;AAGf,IAAA,QAAQ,EAAE,QAHK;AAIf,IAAA,eAAe,EAAE,eAJF;AAKf,IAAA,IAAI,EAAE,IALS;AAMf,IAAA,YAAY,EAAE,YAAY,CAAC,YANZ;AAOf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAPR;AAQf,IAAA,OAAO,EAAE,OARM;AASf,IAAA,kBAAkB,EAAE,kBATL;AAUf,IAAA,kBAAkB,EAAE,kBAVL;AAWf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAXR;AAYf,IAAA,OAAO,EAAE,YAAY,CAAC,OAZP;AAaf,IAAA,YAAY,EAAE,YAAY,CAAC,YAbZ;AAcf,IAAA,WAAW,EAAE,CAAC,CAAC,mBAAD,CAdC;AAef,IAAA,IAAI,EAAE,CAfS;AAgBf,IAAA,cAAc,EAAE,cAhBD;AAiBf,IAAA,cAAc,EAAE,cAjBD;AAkBf,IAAA,QAAQ,EAAE,oBAlBK;AAmBf,IAAA,KAAK,EAAE,YAAY,CAAC;AAnBL,GAAjB,CAJF,EAyBG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,8BADZ;AAC0C,mBAC5B;AAFd,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,YAAb,GACG,CAAC,CAAC,cAAD,CADJ,GAEG,CAAC,CAAC,4CAAD,CAHP,CAJF,EASE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,OAAO,EAAE,aADM;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAAb,KAA8B,CAFzB;AAGf,IAAA,WAAW,EAAE,YAAY,CAAC,cAHX;AAIf,IAAA,QAAQ,EAAE;AAJK,GAAjB,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAACD,gBAAD,EAAe,IAAf,CADF,CANF,CATF,CA1BJ,EA+CE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,iBAAb,GACG,CAAC,CAAC,oBAAD,CADJ,GAEG,CAAC,CAAC,mBAAD,CAHP,CADF,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,6BADZ;AAEE,IAAA,OAAO,EACL,YAAY,CAAC,iBAAb,GACI,YAAY,CAAC,gBADjB,GAEI,YAAY,CAAC,eALrB;AAOE,IAAA,SAAS,EAAE,YAAY,CAAC,kBAP1B;AAQE,IAAA,GAAG,EAAE,YAAY,CAAC,cARpB;AASE,IAAA,IAAI,EAAC,QATP;AAUE,IAAA,QAAQ,EAAE;AAVZ,GAAA,EAYE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAZF,CANF,CA/CF,EAoEE,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EAAK,YAAL,CAAZ,CApEF,CADF,EAuEE,KAAA,CAAA,aAAA,CAACE,YAAD,EAAW;AAAC,IAAA,WAAW,EAAE,YAAY,CAAC;AAA3B,GAAX,CAvEF,CATF,EAkFE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAE,oCACT,CAAC,aAAD,GAAiB,uCAAjB,GAA2D,EADlD;AADb,GAAA,EAKG,CAAC,CAAC,2BAAD,EAA8B;AAC9B,IAAA,YAAY,EAAE;AADgB,GAA9B,CALJ,CADF,EAUE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACG,qBAAqB,CAAC,MAAM,IAAI,EAAX,CADxB,CAVF,CADF,CAlFF,CADF,CADF;AAuGF,C;;ACzEA,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CAU7B,KAV6B,EAU0B;AAGrD,MAAA,EAAA,GAOE,KAAK,CAPqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,EAAA,GAME,KAAK,CANS,QADhB;AAAA,MACA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EADhB;AAAA,MAEA,EAAA,GAKE,KAAK,CALM,KAFb;AAAA,MAEA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFb;AAAA,MAGA,EAAA,GAIE,KAAK,CAJI,IAHX;AAAA,MAGA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAHX;AAAA,MAIA,EAAA,GAGE,KAAK,CAHkB,KAJzB;AAAA,MAIA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,iBAAH,GAAoB,EAJzB;AAAA,MAKA,EAAA,GAEE,KAAK,CAFK,OALZ;AAAA,MAKA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EALZ;AAAA,MAMA,EAAA,GACE,KAAK,CADkB,kBANzB;AAAA,MAMA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EANzB;AASF,SACE,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM,OAAA,CAAA,EAAA,EACA,KADA,EACK;AACT,IAAA,uBAAuB,EAAE,uBADhB;AAET,IAAA,QAAQ,EAAE,QAFD;AAGT,IAAA,KAAK,EAAE,KAHE;AAIT,IAAA,IAAI,EAAE,IAJG;AAKT,IAAA,OAAO,EAAE,OALA;AAMT,IAAA,kBAAkB,EAAE;AANX,GADL,CAAN,CADF;AAWD,CAjCD;AAmCA;;;;;;;;;IAOa,YAAY,GAAG,KAAK,CAAC,IAAN,CAC1B,sBAD0B,C;;IClJf,gBAAgB,GAAG,SAAnB,gBAAmB,CAU9B,KAV8B,EAUyB;AAGrD,MAAA,EAAA,GAeE,KAAK,CAfqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,oBAAoB,GAclB,KAAK,CAda,oBADpB;AAAA,MAEA,EAAA,GAaE,KAAK,CAbS,QAFhB;AAAA,MAEA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFhB;AAAA,MAGA,eAAe,GAYb,KAAK,CAZQ,eAHf;AAAA,MAIA,EAAA,GAWE,KAAK,CAXqB,SAJ5B;AAAA,MAIA,SAAS,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGJ,cAAH,GAAmB,EAJ5B;AAAA,MAKA,EAAA,GAUE,KAAK,CAV+B,cALtC;AAAA,MAKA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,kBAAH,GAAwB,EALtC;AAAA,MAMA,EAAA,GASE,KAAK,CATM,KANb;AAAA,MAMA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EANb;AAAA,MAOA,EAAA,GAQE,KAAK,CARI,IAPX;AAAA,MAOA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAPX;AAAA,MAQA,EAAA,GAOE,KAAK,CAPK,OARZ;AAAA,MAQA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EARZ;AAAA,MASA,kBAAkB,GAMhB,KAAK,CANW,kBATlB;AAAA,MAUA,kBAAkB,GAKhB,KAAK,CALW,kBAVlB;AAAA,MAWA,EAAA,GAIE,KAAK,CAJkB,kBAXzB;AAAA,MAWA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAXzB;AAAA,MAYA,EAAA,GAGE,KAAK,CAHuB,UAZ9B;AAAA,MAYA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGE,UAAH,GAAoB,EAZ9B;AAAA,MAaA,cAAc,GAEZ,KAAK,CAFO,cAbd;AAAA,MAcA,cAAc,GACZ,KAAK,CADO,cAdd;AAiBF,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AACQ,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,YAAY,GAAG,eAAe,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAC/B,KAD+B,CAAA,EAC1B;AACR,IAAA,uBAAuB,EAAA,uBADf;AAER,IAAA,QAAQ,EAAA,QAFA;AAGR,IAAA,KAAK,EAAA,KAHG;AAIR,IAAA,IAAI,EAAA,IAJI;AAKR,IAAA,OAAO,EAAA,OALC;AAMR,IAAA,kBAAkB,EAAA;AANV,GAD0B,CAAA,CAApC;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,2BACTC,YAAU,GAAG,0CAAH,GAAgD,IADjD;AADb,GAAA,EAKE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,MAAM,EAAE,cAAc,CAAC,aADX;AAEZ,IAAA,QAAQ,EACN,CAAC,YAAY,CAAC,eAAd,IAAiC,YAAY,CAAC,YAAb,KAA8B,CAHrD;AAKZ,IAAA,WAAW,EAAE,YAAY,CAAC,cALd;AAMZ,IAAA,gBAAgB,EAAE,YAAY,CAAC,YANnB;AAOZ,IAAA,QAAQ,EAAE,cAAc,CAAC;AAPb,GAAd,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,YAAL,CAAf,CAFJ,EAIE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,iBAAb,GACG,CAAC,CAAC,oBAAD,CADJ,GAEG,CAAC,CAAC,mBAAD,CAHP,CADF,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,kCADZ;AAEE,IAAA,OAAO,EACL,YAAY,CAAC,iBAAb,GACI,YAAY,CAAC,gBADjB,GAEI,YAAY,CAAC,eALrB;AAOE,IAAA,SAAS,EAAE,YAAY,CAAC,kBAP1B;AAQE,IAAA,IAAI,EAAC,QARP;AASE,IAAA,QAAQ,EAAE;AATZ,GAAA,EAWE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAXF,CANF,CAJF,EAwBE,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EAAK,YAAL,CAAZ,CAxBF,EAyBE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,uBAAuB,EAAE,uBADV;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAAb,EAFK;AAGf,IAAA,QAAQ,EAAE,QAHK;AAIf,IAAA,eAAe,EAAE,eAJF;AAKf,IAAA,IAAI,EAAE,IALS;AAMf,IAAA,YAAY,EAAE,YAAY,CAAC,YANZ;AAOf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAPR;AAQf,IAAA,OAAO,EAAE,OARM;AASf,IAAA,kBAAkB,EAAE,kBATL;AAUf,IAAA,kBAAkB,EAAE,kBAVL;AAWf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAXR;AAYf,IAAA,OAAO,EAAE,YAAY,CAAC,OAZP;AAaf,IAAA,YAAY,EAAE,YAAY,CAAC,YAbZ;AAcf,IAAA,WAAW,EAAE,CAAC,CAAC,mBAAD,CAdC;AAef,IAAA,IAAI,EAAE,CAfS;AAgBf,IAAA,cAAc,EAAE,cAhBD;AAiBf,IAAA,cAAc,EAAE,cAjBD;AAkBf,IAAA,QAAQ,EAAE,oBAlBK;AAmBf,IAAA,KAAK,EAAE,YAAY,CAAC;AAnBL,GAAjB,CAzBF,EA8CG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,8BADZ;AAC0C,mBAC5B;AAFd,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,YAAb,GACG,CAAC,CAAC,cAAD,CADJ,GAEG,CAAC,CAAC,4CAAD,CAHP,CAJF,EASE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,OAAO,EAAE,cAAc,CAAC,aADT;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAAb,KAA8B,CAFzB;AAGf,IAAA,WAAW,EAAE,YAAY,CAAC,cAHX;AAIf,IAAA,QAAQ,EAAE,cAAc,CAAC;AAJV,GAAjB,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,IAAf,CADF,CANF,CATF,CA/CJ,CADF,EAsEGA,YAAU,IAAI,KAAA,CAAA,aAAA,CAACA,YAAD,EAAW;AAAC,IAAA,WAAW,EAAE,YAAY,CAAC;AAA3B,GAAX,CAtEjB,CATF,CALF,CADF;AA0FF,C;;ICzIa,kBAAkB,GAAG,SAArB,kBAAqB,CAUhC,KAVgC,EAUuB;AAGrD,MAAA,EAAA,GAcE,KAAK,CAdqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,oBAAoB,GAalB,KAAK,CAba,oBADpB;AAAA,MAEA,EAAA,GAYE,KAAK,CAZS,QAFhB;AAAA,MAEA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFhB;AAAA,MAGA,eAAe,GAWb,KAAK,CAXQ,eAHf;AAAA,MAIA,EAAA,GAUE,KAAK,CAVqB,SAJ5B;AAAA,MAIA,SAAS,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGJ,cAAH,GAAmB,EAJ5B;AAAA,MAKA,EAAA,GASE,KAAK,CATM,KALb;AAAA,MAKA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EALb;AAAA,MAMA,EAAA,GAQE,KAAK,CARI,IANX;AAAA,MAMA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EANX;AAAA,MAOA,EAAA,GAOE,KAAK,CAPK,OAPZ;AAAA,MAOA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAPZ;AAAA,MAQA,kBAAkB,GAMhB,KAAK,CANW,kBARlB;AAAA,MASA,kBAAkB,GAKhB,KAAK,CALW,kBATlB;AAAA,MAUA,EAAA,GAIE,KAAK,CAJkB,kBAVzB;AAAA,MAUA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAVzB;AAAA,MAWA,EAAA,GAGE,KAAK,CAHuB,UAX9B;AAAA,MAWA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGG,UAAH,GAAoB,EAX9B;AAAA,MAYA,cAAc,GAEZ,KAAK,CAFO,cAZd;AAAA,MAaA,cAAc,GACZ,KAAK,CADO,cAbd;AAgBM,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,YAAY,GAAG,eAAe,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAC/B,KAD+B,CAAA,EAC1B;AACR,IAAA,uBAAuB,EAAA,uBADf;AAER,IAAA,QAAQ,EAAA,QAFA;AAGR,IAAA,KAAK,EAAA,KAHG;AAIR,IAAA,IAAI,EAAA,IAJI;AAKR,IAAA,OAAO,EAAA,OALC;AAMR,IAAA,kBAAkB,EAAA;AANV,GAD0B,CAAA,CAApC;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,2BACTC,YAAU,GAAG,0CAAH,GAAgD,IADjD;AADb,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,uBAAuB,EAAE,uBADV;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAAb,EAFK;AAGf,IAAA,QAAQ,EAAE,QAHK;AAIf,IAAA,eAAe,EAAE,eAJF;AAKf,IAAA,IAAI,EAAE,IALS;AAMf,IAAA,YAAY,EAAE,YAAY,CAAC,YANZ;AAOf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAPR;AAQf,IAAA,OAAO,EAAE,OARM;AASf,IAAA,kBAAkB,EAAE,kBATL;AAUf,IAAA,kBAAkB,EAAE,kBAVL;AAWf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAXR;AAYf,IAAA,OAAO,EAAE,YAAY,CAAC,OAZP;AAaf,IAAA,YAAY,EAAE,YAAY,CAAC,YAbZ;AAcf,IAAA,WAAW,EAAE,CAAC,CAAC,mBAAD,CAdC;AAef,IAAA,IAAI,EAAE,CAfS;AAgBf,IAAA,cAAc,EAAE,cAhBD;AAiBf,IAAA,cAAc,EAAE,cAjBD;AAkBf,IAAA,QAAQ,EAAE,oBAlBK;AAmBf,IAAA,KAAK,EAAE,YAAY,CAAC;AAnBL,GAAjB,CADF,EAsBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,iBAAb,GACG,CAAC,CAAC,oBAAD,CADJ,GAEG,CAAC,CAAC,mBAAD,CAHP,CADF,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,kCADZ;AAEE,IAAA,OAAO,EACL,YAAY,CAAC,iBAAb,GACI,YAAY,CAAC,gBADjB,GAEI,YAAY,CAAC,eALrB;AAOE,IAAA,SAAS,EAAE,YAAY,CAAC,kBAP1B;AAQE,IAAA,IAAI,EAAC,QARP;AASE,IAAA,QAAQ,EAAE;AATZ,GAAA,EAWE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAXF,CANF,CAtBF,EA0CE,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EAAK,YAAL,CAAZ,CA1CF,CADF,EA6CGA,YAAU,IAAI,KAAA,CAAA,aAAA,CAACA,YAAD,EAAW;AAAC,IAAA,WAAW,EAAE,YAAY,CAAC;AAA3B,GAAX,CA7CjB,CALF,CADF;AAuDF,C;;IC5Fa,iBAAiB,GAAG,SAApB,iBAAoB,CAU/B,KAV+B,EAUwB;AAGrD,MAAA,EAAA,GAeE,KAAK,CAfqB,uBAA5B;AAAA,MAAA,uBAAuB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAA5B;AAAA,MACA,oBAAoB,GAclB,KAAK,CAda,oBADpB;AAAA,MAEA,EAAA,GAaE,KAAK,CAbS,QAFhB;AAAA,MAEA,QAAQ,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAFhB;AAAA,MAGA,eAAe,GAYb,KAAK,CAZQ,eAHf;AAAA,MAIA,EAAA,GAWE,KAAK,CAXqB,SAJ5B;AAAA,MAIA,SAAS,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGJ,cAAH,GAAmB,EAJ5B;AAAA,MAKA,EAAA,GAUE,KAAK,CAV+B,cALtC;AAAA,MAKA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,kBAAH,GAAwB,EALtC;AAAA,MAMA,EAAA,GASE,KAAK,CATM,KANb;AAAA,MAMA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EANb;AAAA,MAOA,EAAA,GAQE,KAAK,CARI,IAPX;AAAA,MAOA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAPX;AAAA,MAQA,EAAA,GAOE,KAAK,CAPK,OARZ;AAAA,MAQA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EARZ;AAAA,MASA,kBAAkB,GAMhB,KAAK,CANW,kBATlB;AAAA,MAUA,kBAAkB,GAKhB,KAAK,CALW,kBAVlB;AAAA,MAWA,EAAA,GAIE,KAAK,CAJkB,kBAXzB;AAAA,MAWA,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAXzB;AAAA,MAYA,EAAA,GAGE,KAAK,CAHuB,UAZ9B;AAAA,MAYA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGE,UAAH,GAAoB,EAZ9B;AAAA,MAaA,cAAc,GAEZ,KAAK,CAFO,cAbd;AAAA,MAcA,cAAc,GACZ,KAAK,CADO,cAdd;AAiBF,MAAM,cAAc,GAAG,iBAAiB,EAAxC;AACQ,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,YAAY,GAAG,eAAe,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EAC/B,KAD+B,CAAA,EAC1B;AACR,IAAA,uBAAuB,EAAA,uBADf;AAER,IAAA,QAAQ,EAAA,QAFA;AAGR,IAAA,KAAK,EAAA,KAHG;AAIR,IAAA,IAAI,EAAA,IAJI;AAKR,IAAA,OAAO,EAAA,OALC;AAMR,IAAA,kBAAkB,EAAA;AANV,GAD0B,CAAA,CAApC;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,MAAM,EAAE,cAAc,CAAC,aADX;AAEZ,IAAA,QAAQ,EACN,CAAC,YAAY,CAAC,eAAd,IAAiC,YAAY,CAAC,YAAb,KAA8B,CAHrD;AAKZ,IAAA,WAAW,EAAE,YAAY,CAAC,cALd;AAMZ,IAAA,gBAAgB,EAAE,YAAY,CAAC,YANnB;AAOZ,IAAA,QAAQ,EAAE,cAAc,CAAC;AAPb,GAAd,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,oCACTC,YAAU,GACN,mDADM,GAEN,IAHK;AADb,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EAAK,YAAL,CAAf,CAFJ,EAIE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,uBAAuB,EAAE,uBADV;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAAb,EAFK;AAGf,IAAA,QAAQ,EAAE,QAHK;AAIf,IAAA,eAAe,EAAE,eAJF;AAKf,IAAA,IAAI,EAAE,IALS;AAMf,IAAA,YAAY,EAAE,YAAY,CAAC,YANZ;AAOf,IAAA,QAAQ,EAAE,YAAY,CAAC,WAPR;AAQf,IAAA,OAAO,EAAE,OARM;AASf,IAAA,kBAAkB,EAAE,kBATL;AAUf,IAAA,kBAAkB,EAAE,kBAVL;AAWf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAXR;AAYf,IAAA,OAAO,EAAE,YAAY,CAAC,OAZP;AAaf,IAAA,YAAY,EAAE,YAAY,CAAC,YAbZ;AAcf,IAAA,WAAW,EAAE,CAAC,CAAC,mBAAD,CAdC;AAef,IAAA,IAAI,EAAE,CAfS;AAgBf,IAAA,cAAc,EAAE,cAhBD;AAiBf,IAAA,cAAc,EAAE,cAjBD;AAkBf,IAAA,QAAQ,EAAE,oBAlBK;AAmBf,IAAA,KAAK,EAAE,YAAY,CAAC;AAnBL,GAAjB,CAJF,EAyBG,YAAY,CAAC,eAAb,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,8BADZ;AAC0C,mBAC5B;AAFd,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,YAAb,GACG,CAAC,CAAC,cAAD,CADJ,GAEG,CAAC,CAAC,4CAAD,CAHP,CAJF,EASE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,OAAO,EAAE,cAAc,CAAC,aADT;AAEf,IAAA,QAAQ,EAAE,YAAY,CAAC,YAAb,KAA8B,CAFzB;AAGf,IAAA,WAAW,EAAE,YAAY,CAAC,cAHX;AAIf,IAAA,QAAQ,EAAE,cAAc,CAAC;AAJV,GAAjB,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,IAAf,CADF,CANF,CATF,CA1BJ,EA+CE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EACG,YAAY,CAAC,iBAAb,GACG,CAAC,CAAC,oBAAD,CADJ,GAEG,CAAC,CAAC,mBAAD,CAHP,CADF,EAME,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EAAC,2CADZ;AAEE,IAAA,OAAO,EACL,YAAY,CAAC,iBAAb,GACI,YAAY,CAAC,gBADjB,GAEI,YAAY,CAAC,eALrB;AAOE,IAAA,SAAS,EAAE,YAAY,CAAC,kBAP1B;AAQE,IAAA,IAAI,EAAC,QARP;AASE,IAAA,QAAQ,EAAE;AATZ,GAAA,EAWE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAXF,CANF,CA/CF,EAmEE,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EAAK,YAAL,EAAiB;AAAE,IAAA,KAAK,EAAA;AAAP,GAAjB,CAAZ,CAnEF,CAPF,EA4EGA,YAAU,IAAI,KAAA,CAAA,aAAA,CAACA,YAAD,EAAW;AAAC,IAAA,WAAW,EAAE,YAAY,CAAC;AAA3B,GAAX,CA5EjB,CATF,CADF,CADF;AA4FF,C;;IC3Ja,KAAK,GAAyB,SAA9B,KAA8B,CAAC,KAAD,EAAM;AACvC,MAAA,QAAQ,GAAoB,KAAK,CAAzB,QAAR;AAAA,MAAU,OAAO,GAAW,KAAK,CAAhB,OAAjB;AAAA,MAAmB,IAAI,GAAK,KAAK,CAAV,IAAvB;AAEA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;AAER,MAAM,QAAQ,GAAG,MAAM,CAAwB,IAAxB,CAAvB;;AAEA,MAAM,WAAW,GAAG,SAAd,WAAc,CAAC,KAAD,EAAwC;;;AAC1D,QACE,KAAK,CAAC,MAAN,YAAwB,IAAxB,IACA,EAAA,CAAA,EAAA,GAAC,QAAQ,CAAC,OAAV,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAE,QAAF,CAAW,KAAK,CAAC,MAAjB,CAAjB,CADA,IAEA,OAHF,EAIE;AACA,MAAA,OAAO;AACR;AACF,GARD;;AAUA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,CAAC,IAAL,EAAW,OAAO,YAAA;AAAM,aAAA,IAAA;AAAI,KAAjB;;AAEX,QAAM,YAAY,GAAkB,SAA9B,YAA8B,CAAC,KAAD,EAAM;AACxC,UAAI,KAAK,YAAY,aAAjB,IAAkC,KAAK,CAAC,GAAN,KAAc,QAAhD,IAA4D,OAAhE,EAAyE;AACvE,QAAA,OAAO;AACR;AACF,KAJD;;AAMA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,UAA1B,EAAsC,YAAtC;AACA,WAAO,YAAA;AAAM,aAAA,QAAQ,CAAC,mBAAT,CAA6B,UAA7B,EAAyC,YAAzC,CAAA;AAAsD,KAAnE;AACD,GAXQ,EAWN,CAAC,OAAD,EAAU,IAAV,CAXM,CAAT;AAaA,MAAM,WAAW,GAAG,IAAI,GACpB,uBADoB,GAEpB,yBAFJ;AAIA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAE,qBAAmB,WAAnC;AAAkD,IAAA,OAAO,EAAE;AAA3D,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,CAAC,OAAD,CADJ,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,MAAM,EAAC,IAAZ;AAAiB,IAAA,KAAK,EAAC,IAAvB;AAA4B,IAAA,KAAK,EAAC;AAAlC,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,CAAC,EAAC,sHADJ;AAEE,IAAA,QAAQ,EAAC;AAFX,GAAA,CADF,CAFF,CADF,EAUE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,GAAG,EAAE;AAA7C,GAAA,EACG,QADH,CAVF,CADF;AAgBF,C;;ACKA,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAS/B,KAT+B,EASiC;AAG9D,MAAA,2BAA2B,GAwBzB,KAAK,CAxBoB,2BAA3B;AAAA,MACA,UAAU,GAuBR,KAAK,CAvBG,UADV;AAAA,MAEA,EAAA,GAsBE,KAAK,CAtBe,MAFtB;AAAA,MAEA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGZ,MAAH,GAAgB,EAFtB;AAAA,MAGA,iBAAiB,GAqBf,KAAK,CArBU,iBAHjB;AAAA,MAIA,OAAO,GAoBL,KAAK,CApBA,OAJP;AAAA,MAKA,EAAA,GAmBE,KAAK,CAnBkC,gBALzC;AAAA,MAKA,gBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGa,eAAH,GAAyB,EALzC;AAAA,MAMA,UAAU,GAkBR,KAAK,CAlBG,UANV;AAAA,MAOA,iBAAiB,GAiBf,KAAK,CAjBU,iBAPjB;AAAA,MAQA,YAAY,GAgBV,KAAK,CAhBK,YARZ;AAAA,MASA,gBAAgB,GAed,KAAK,CAfS,gBAThB;AAAA,MAUA,cAAc,GAcZ,KAAK,CAdO,cAVd;AAAA,MAWA,WAAW,GAaT,KAAK,CAbI,WAXX;AAAA,MAYA,WAAW,GAYT,KAAK,CAZI,WAZX;AAAA,MAaA,iBAAiB,GAWf,KAAK,CAXU,iBAbjB;AAAA,MAcA,OAAO,GAUL,KAAK,CAVA,OAdP;AAAA,MAeA,EAAA,GASE,KAAK,CAT+B,cAftC;AAAA,MAeA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAwB,EAftC;AAAA,MAgBA,mBAAmB,GAQjB,KAAK,CARY,mBAhBnB;AAAA,MAiBA,WAAW,GAOT,KAAK,CAPI,WAjBX;AAAA,MAkBA,WAAW,GAMT,KAAK,CANI,WAlBX;AAAA,MAmBA,EAAA,GAKE,KAAK,CALmC,gBAnB1C;AAAA,MAmBA,kBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGX,gBAAH,GAA0B,EAnB1C;AAAA,MAoBA,mBAAmB,GAIjB,KAAK,CAJY,mBApBnB;AAAA,MAqBA,EAAA,GAGE,KAAK,CAH4B,aArBnC;AAAA,MAqBA,eAAa,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGD,aAAH,GAAsB,EArBnC;AAAA,MAsBA,qBAAqB,GAEnB,KAAK,CAFc,qBAtBrB;AAAA,MAuBA,UAAU,GACR,KAAK,CADG,UAvBV;AA0BF,MAAM,iBAAiB,GAAG,MAAM,CAAwB,IAAxB,CAAhC;AAEA,MAAM,aAAa,GAAG,qBAAqB,CAAC,OAAD,CAA3C;AACA,MAAM,YAAY,GAAG,mBAAmB,CAAC,OAAD,CAAxC;AAEA,MAAM,cAAc,GAAG,WAAW,KAC9B,+FAD8B,GAE9B,4CAFJ;AAIA,MAAM,cAAc,GAAG,qBAAqB,CAAC,iBAAiB,EAAlB,CAA5C;;AAEA,MAAI,OAAO,CAAC,IAAR,KAAiB,cAAjB,IAAmC,OAAO,CAAC,IAAR,KAAiB,cAAxD,EAAwE;AACtE,WAAO,IAAP;AACD;;AAED,MAAI,OAAO,CAAC,UAAZ,EAAwB;AACtB,WAAO,KAAA,CAAA,aAAA,CAACa,gBAAD,EAAe;AAAC,MAAA,OAAO,EAAE;AAAV,KAAf,CAAP;AACD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAO,IACN,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM;AAAC,IAAA,OAAO,EAAE,iBAAV;AAA6B,IAAA,IAAI,EAAE;AAAnC,GAAN,EACE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,OAAA,CAAA;AACX,IAAA,iBAAiB,EAAE,iBADR;AAEX,IAAA,KAAK,EAAE,gBAFI;AAGX,IAAA,OAAO,EAAE;AAHE,GAAA,EAIP,2BAJO,CAAb,CADF,CAFJ,EAWG,OAAO,IACN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,CAAA,mBACb,cADa,GACC,mCADD,GAEM,OAAO,CAAC,IAFd,GAEkB,mCAFlB,GAGM,OAAO,CAAC,MAHd,GAGoB,gBAHpB,IAIb,OAAO,CAAC,IAAR,GAAe,6BAAf,GAA+C,aAJlC,IAI+C,gBAJ/C,IAKb,aAAa,GAAG,mCAAH,GAAyC,EALzC,IAK2C,gBAL3C,IAOP,YAAY,IAAI,iBAAhB,GACI,mCADJ,GAEI,EATG,IASD,gBATC,IAWP,OAAO,CAAC,MAAR,GAAiB,gBAAjB,GAAoC,EAX7B,IAW+B,cAX/B,EAYd,IAZc,EADb;AAcE,IAAA,GAAG,EAAE,OAAO,CAAC,EAAR,IAAc,EAdrB;AAeE,IAAA,GAAG,EAAE;AAfP,GAAA,EAiBE,KAAA,CAAA,aAAA,CAAC,mBAAD,EAAoB,OAAA,CAAA,EAAA,EAAK,KAAL,CAApB,CAjBF,EAkBG,OAAO,CAAC,IAAR,IACC,KAAA,CAAA,aAAA,CAACd,QAAD,EAAO;AACL,IAAA,KAAK,EAAE,OAAO,CAAC,IAAR,CAAa,KADf;AAEL,IAAA,IAAI,EAAE,OAAO,CAAC,IAAR,CAAa,IAAb,IAAqB,OAAO,CAAC,IAAR,CAAa,EAFnC;AAGL,IAAA,OAAO,EAAE,WAHJ;AAIL,IAAA,WAAW,EAAE;AAJR,GAAP,CAnBJ,EA0BE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,yBADZ;AACqC,mBACvB,eAFd;AAGE,IAAA,OAAO,EACL,OAAO,CAAC,MAAR,KAAmB,QAAnB,IAA+B,OAAO,CAAC,eAAR,KAA4B,GAA3D,GACI,YAAA;AAAM,aAAA,WAAW,CAAC,OAAD,CAAX;AAAoB,KAD9B,GAEI;AANR,GAAA,EASG,CAAC,OAAO,CAAC,IAAT,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EAEI,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EACT,KADS,EACJ;AACT,IAAA,gBAAgB,EAAE,gBADT;AAET,IAAA,iBAAiB,EAAE,iBAFV;AAGT,IAAA,mBAAmB,EAAE;AAHZ,GADI,CAAf,CAFJ,EASG,YAAY,IACX,CAAC,qBADF,IAEC,iBAFD,IAGG,KAAA,CAAA,aAAA,CAACI,eAAD,EAAc;AACZ,IAAA,OAAO,EAAE,mBADG;AAEZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAFX;AAGZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAHhC;AAIZ,IAAA,SAAS,EAAE,OAAO,CAAC,gBAJP;AAKZ,IAAA,OAAO,EAAE;AALG,GAAd,CAZN,EAoBG,qBAAqB,IAAI,iBAAzB,IACC,KAAA,CAAA,aAAA,CAACC,kBAAD,EAAiB;AACf,IAAA,YAAY,EAAA,IADG;AAEf,IAAA,cAAc,EAAE,cAFD;AAGf,IAAA,gBAAgB,EAAE,OAAO,CAAC,gBAHX;AAIf,IAAA,aAAa,EAAE,OAAO,CAAC,aAJR;AAKf,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAL7B;AAMf,IAAA,GAAG,EAAE;AANU,GAAjB,CArBJ,CAVJ,EA0CG,OAAO,CAAC,WAAR,IAAuB,UAAvB,IACC,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW;AACT,IAAA,aAAa,EAAE,YADN;AAET,IAAA,WAAW,EAAE,OAAO,CAAC;AAFZ,GAAX,CA3CJ,EAgDG,OAAO,CAAC,IAAR,IACC,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EACN,KADM,EACD;AACT,IAAA,iBAAiB,EAAE;AACjB,MAAA,cAAc,EAAE,cADC;AAEjB,MAAA,gBAAgB,EAAA,gBAFC;AAGjB,MAAA,iBAAiB,EAAA;AAHA;AADV,GADC,CAAZ,CAjDJ,EA0DG,OAAO,CAAC,GAAR,IACC,KAAA,CAAA,aAAA,CAAC,GAAD,EAAI;AACF,IAAA,aAAa,EAAE,YADb;AAEF,IAAA,KAAK,EAAE,WAAW,KAAK,OAAL,GAAe,MAF/B;AAGF,IAAA,MAAM,EAAE,OAAO,CAAC;AAHd,GAAJ,CA3DJ,EAiEG,CAAC,UAAD,IAAe,OAAO,CAAC,WAAR,KAAwB,CAAvC,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,yBAAD,EAA0B;AACxB,IAAA,OAAO,EAAE,gBADe;AAExB,IAAA,WAAW,EAAE,OAAO,CAAC;AAFG,GAA1B,CADF,CAlEJ,EAyEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE;AADb,GAAA,EAGG,CAAC,WAAW,EAAZ,IAAkB,OAAO,CAAC,IAA1B,GACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACG,OAAO,CAAC,IAAR,CAAa,IAAb,IAAqB,OAAO,CAAC,IAAR,CAAa,EADrC,CADD,GAIG,IAPN,EAQE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,QAAQ,EAAA,IADO;AAEf,IAAA,WAAW,EAAC,oCAFG;AAGf,IAAA,UAAU,EAAE,UAHG;AAIf,IAAA,OAAO,EAAE;AAJM,GAAjB,CARF,CAzEF,CA1BF,CAZJ,CADF;AAoID,CA7LD;;AA+LA,IAAM,mBAAmB,GAAG,SAAtB,mBAAsB,CAQ1B,EAR0B,EAe0B;;;MANpD,EAAA,GAAA,EAAA,CAAA,M;MAAA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGN,MAAH,GAAgB,E;MACtB,WAAW,GAAA,EAAA,CAAA,W;MACX,MAAM,GAAA,EAAA,CAAA,M;MACN,OAAO,GAAA,EAAA,CAAA,O;MACP,UAAU,GAAA,EAAA,CAAA,U;MACV,cAAc,GAAA,EAAA,CAAA,c;AAEN,MAAA,MAAM,GAAK,cAAc,GAAnB,MAAN;AACA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAER,MAAI,CAAC,WAAW,EAAZ,IAAkB,OAAO,CAAC,IAAR,KAAiB,OAAvC,EAAgD;AAC9C,WAAO,IAAP;AACD;;AAED,MAAM,YAAY,GAChB,MAAM,IACN,MAAM,CAAC,MAAP,KAAkB,CADlB,IAEA,MAAM,CAAC,CAAD,CAFN,IAGA,MAHA,IAIA,MAAM,CAAC,CAAD,CAAN,CAAU,EAAV,MAAY,CAAA,EAAA,GAAK,MAAM,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAA9B,CALF;;AAOA,MAAI,OAAO,IAAI,OAAO,CAAC,MAAR,KAAmB,SAAlC,EAA6C;AAC3C,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,iCADZ;AAC6C,qBAC/B;AAFd,KAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,CAAC,CAAC,YAAD,CAAX,CAJF,EAKE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB,IAAjB,CALF,CADF;AASD;;AAED,MAAI,MAAM,IAAI,MAAM,CAAC,MAAP,KAAkB,CAA5B,IAAiC,CAAC,UAAlC,IAAgD,CAAC,YAArD,EAAmE;AACjE,QAAM,YAAY,GAAG,MAAM,CAAC,MAAP,CACnB,UAAC,IAAD,EAAK;AAAA,UAAA,EAAA;;AAAK,aAAA,CAAC,CAAC,IAAF,IAAU,CAAC,CAAC,MAAZ,IAAsB,IAAI,CAAC,EAAL,MAAO,CAAA,EAAA,GAAK,MAAM,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAAzB,CAAtB;AAAiD,KADxC,EAEnB,CAFmB,CAArB;AAGA,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,iCADZ;AAC6C,qBAC/B;AAFd,KAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,MAAM,IAAI,oBAAoB,CAAC,MAAD,EAAS,CAAT,EAAY,MAAZ,CAAxC,CAJF,EAKE,KAAA,CAAA,aAAA,CAACC,QAAD,EAAO;AACL,MAAA,KAAK,EAAE,YAAY,KAAA,IAAZ,IAAA,YAAY,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAA,YAAY,CAAE,KADhB;AAEL,MAAA,IAAI,EAAE,YAAY,KAAA,IAAZ,IAAA,YAAY,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAA,YAAY,CAAE,IAFf;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP,CALF,EAUG,MAAM,CAAC,MAAP,GAAgB,CAAhB,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,wCADZ;AACoD,qBACtC;AAFd,KAAA,EAIG,MAAM,CAAC,MAAP,GAAgB,CAJnB,CAXJ,CADF;AAqBD;;AAED,MACE,OAAO,IACP,OAAO,CAAC,MAAR,KAAmB,UADnB,IAEA,OAAO,CAAC,EAAR,KAAe,cAFf,IAGA,CAAC,UAJH,EAKE;AACA,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,iCADZ;AAC6C,qBAC/B;AAFd,KAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,CAAC,CAAC,WAAD,CAAX,CAJF,EAKE,KAAA,CAAA,aAAA,CAAC,kBAAD,EAAmB,IAAnB,CALF,CADF;AASD;;AAED,SAAO,IAAP;AACD,CAvFD;;AAyFA,IAAM,qBAAqB,GAAG,KAAK,CAAC,IAAN,CAC5B,wBAD4B,EAE5B,sBAF4B,CAA9B;AAKA;;;;;IAIa,aAAa,GAAG,SAAhB,aAAgB,CAS3B,KAT2B,EAY1B;AAEO,MAAY,cAAc,GAAc,KAAK,CAAnB,UAA1B;AAAA,MAA4B,OAAO,GAAK,KAAK,CAAV,OAAnC;AAEA,MAAY,iBAAiB,GAAK,iBAAiB,GAAtB,UAA7B;AAUR,MAAM,mBAAmB,GAAG,MAAM,CAAwB,IAAxB,CAAlC;;AAEM,MAAA,EAAA,GAIF,gBAAgB,CAAC,OAAD,EAAU,mBAAV,CAJd;AAAA,MACJ,iBAAiB,GAAA,EAAA,CAAA,iBADb;AAAA,MAEJ,mBAAmB,GAAA,EAAA,CAAA,mBAFf;AAAA,MAGJ,qBAAqB,GAAA,EAAA,CAAA,qBAHjB;;AAMN,MAAMe,YAAU,GAAG,cAAc,IAAI,iBAAlB,IAAuCC,UAA1D;AAEA,SACE,KAAA,CAAA,aAAA,CAAC,qBAAD,EAAsB,OAAA,CAAA,EAAA,EAChB,KADgB,EACX;AACT,IAAA,UAAU,EAAED,YADH;AAET,IAAA,iBAAiB,EAAE,iBAFV;AAGT,IAAA,mBAAmB,EAAE,mBAHZ;AAIT,IAAA,mBAAmB,EAAE,mBAJZ;AAKT,IAAA,qBAAqB,EAAE;AALd,GADW,CAAtB,CADF;AAUF,C;;ACnUA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,CASzB,KATyB,EASiC;AAGxD,MAAA,MAAM,GAoBJ,KAAK,CApBD,MAAN;AAAA,MACA,OAAO,GAmBL,KAAK,CAnBA,OADP;AAAA,MAEA,UAAU,GAkBR,KAAK,CAlBG,UAFV;AAAA,MAGA,EAAA,GAiBE,KAAK,CAjBS,WAHhB;AAAA,MAGA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,EAHhB;AAAA,MAIA,YAAY,GAgBV,KAAK,CAhBK,YAJZ;AAAA,MAKA,YAAY,GAeV,KAAK,CAfK,YALZ;AAAA,MAMA,UAAU,GAcR,KAAK,CAdG,UANV;AAAA,MAOA,UAAU,GAaR,KAAK,CAbG,UAPV;AAAA,MAQA,gBAAgB,GAYd,KAAK,CAZS,gBARhB;AAAA,MASA,SAAS,GAWP,KAAK,CAXE,SATT;AAAA,MAUA,cAAc,GAUZ,KAAK,CAVO,cAVd;AAAA,MAWA,WAAW,GAST,KAAK,CATI,WAXX;AAAA,MAYA,EAAA,GAQE,KAAK,CARoC,OAZ3C;AAAA,MAYS,kBAAkB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,aAAH,GAAgB,EAZ3C;AAAA,MAaA,OAAO,GAOL,KAAK,CAPA,OAbP;AAAA,MAcA,EAAA,GAME,KAAK,CANsC,cAd7C;AAAA,MAcA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,MAAM,CAAC,IAAP,CAAY,eAAZ,CAAH,GAA+B,EAd7C;AAAA,MAeA,sBAAsB,GAKpB,KAAK,CALe,sBAftB;AAAA,MAgBA,sBAAsB,GAIpB,KAAK,CAJe,sBAhBtB;AAAA,MAiBa,eAAe,GAG1B,KAAK,CAHqB,WAjB5B;AAAA,MAkBa,eAAe,GAE1B,KAAK,CAFqB,WAlB5B;AAAA,MAmBA,SAAS,GACP,KAAK,CADE,SAnBT;AAsBF,MAAM,aAAa,GAAG,OAAO,CAAC,SAAR,IAAqB,OAAO,CAAC,SAAR,EAA3C;;AAEM,MAAA,EAAA,GAAkC,cAAc,EAAhD;AAAA,MAAE,SAAS,GAAA,EAAA,CAAA,SAAX;AAAA,MAAa,OAAO,GAAA,EAAA,CAAA,OAApB;AAAA,MAAsB,OAAO,GAAA,EAAA,CAAA,OAA7B;;AAEA,MAAA,EAAA,GAA+B,cAAc,CAAC,OAAD,EAAU;AAC3D,IAAA,kBAAkB,EAAE,eADuC;AAE3D,IAAA,kBAAkB,EAAE;AAFuC,GAAV,CAA7C;AAAA,MAAE,WAAW,GAAA,EAAA,CAAA,WAAb;AAAA,MAAe,WAAW,GAAA,EAAA,CAAA,WAA1B;;AAKE,MAAA,OAAO,GAAwC,SAAS,CAAjD,OAAP;AAAA,MAAS,WAAW,GAA2B,SAAS,CAApC,WAApB;AAAA,MAAsB,YAAW,GAAc,SAAS,CAAvB,WAAjC;AAAA,MAAmC,OAAO,GAAK,SAAS,CAAd,OAA1C;AAER,MAAM,OAAO,GAAG,YAAW,IAAI,WAAf,IAA8B,OAA9B,IAAyC,OAAzD;AACA,MAAM,SAAS,GAAG,OAAlB;AACA,MAAM,QAAQ,GAAG,IAAjB;AACA,MAAM,QAAQ,GAAG,IAAjB;AAEA,MAAM,qBAAqB,GAAG,WAAW,CAAC,YAAA;AACxC,QAAI,CAAC,OAAD,IAAY,CAAC,cAAjB,EAAiC;AAC/B,aAAO,EAAP;AACD;;AAED,WAAO,iBAAiB,CAAC,cAAD,EAAiB;AACvC,MAAA,SAAS,EAAA,SAD8B;AAEvC,MAAA,OAAO,EAAA,OAFgC;AAGvC,MAAA,OAAO,EAAE,CAAC,YAH6B;AAIvC,MAAA,OAAO,EAAE,CAAC,YAAD,IAAgB,CAAC,EAAC,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,KAAhB,CAJa;AAKvC,MAAA,MAAM,EAAA,MALiC;AAMvC,MAAA,QAAQ,EAAA,QAN+B;AAOvC,MAAA,QAAQ,EAAA;AAP+B,KAAjB,CAAxB;AASD,GAdwC,EActC,CACD,SADC,EAED,OAFC,EAGD,MAHC,EAID,QAJC,EAKD,QALC,EAMD,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,KANd,EAOD,YAPC,EAQD,OARC,EASD,cATC,CAdsC,CAAzC;AA0BA,MAAM,cAAc,GAClB,OAAO,IAAI,OAAO,CAAC,IAAR,KAAiB,SAA5B,IAAyC,OAAO,CAAC,MAAR,KAAmB,UAD9D;AAGA,SACE,KAAA,CAAA,aAAA,CAAC,kBAAD,EAAmB,OAAA,CAAA,EAAA,EACb,KADa,EACR;AACT,IAAA,cAAc,EAAE,cADP;AAET,IAAA,aAAa,EAAE,aAFN;AAGT,IAAA,iBAAiB,EAAE,SAHV;AAIT,IAAA,OAAO,EAAE,OAJA;AAKT,IAAA,UAAU,EAAE,UALH;AAMT,IAAA,iBAAiB,EAAE,qBANV;AAOT,IAAA,WAAW,EAAE,WAPJ;AAQT,IAAA,YAAY,EAAE,YARL;AAST,IAAA,YAAY,EAAE,YATL;AAUT,IAAA,UAAU,EAAE,OAVH;AAWT,IAAA,UAAU,EAAE,UAXH;AAYT,IAAA,UAAU,EAAE,UAZH;AAaT,IAAA,gBAAgB,EAAE,gBAbT;AAcT,IAAA,SAAS,EAAE,SAdF;AAeT,IAAA,cAAc,EAAE,cAfP;AAgBT,IAAA,WAAW,EAAE,WAhBJ;AAiBT,IAAA,WAAW,EAAE,uBAAA;AAAM,aAAA,YAAA;AAAW,KAjBrB;AAkBT,IAAA,sBAAsB,EAAE,sBAlBf;AAmBT,IAAA,sBAAsB,EAAE,sBAnBf;AAoBT,IAAA,WAAW,EAAE,WApBJ;AAqBT,IAAA,WAAW,EAAE,WArBJ;AAsBT,IAAA,eAAe,EAAE;AAtBR,GADQ,CAAnB,CADF;AA2BD,CA1GD;;AA4GA,IAAM,eAAe,GAAG,KAAK,CAAC,IAAN,CACtB,kBADsB,EAEtB,oBAFsB,CAAxB;AAKA;;;;;;IAKa,OAAO,GAAG,SAAV,OAAU,CASrB,KATqB,EAS0B;AAG7C,MAAA,eAAe,GAab,KAAK,CAbQ,eAAf;AAAA,MACS,WAAW,GAYlB,KAAK,CAZa,OADpB;AAAA,MAEA,+BAA+B,GAW7B,KAAK,CAXwB,+BAF/B;AAAA,MAGA,iCAAiC,GAU/B,KAAK,CAV0B,iCAHjC;AAAA,MAIA,4BAA4B,GAS1B,KAAK,CATqB,4BAJ5B;AAAA,MAKA,8BAA8B,GAQ5B,KAAK,CARuB,8BAL9B;AAAA,MAMA,8BAA8B,GAO5B,KAAK,CAPuB,8BAN9B;AAAA,MAOA,OAAO,GAML,KAAK,CANA,OAPP;AAAA,MAQiB,mBAAmB,GAKlC,KAAK,CAL6B,eARpC;AAAA,MASiB,mBAAmB,GAIlC,KAAK,CAJ6B,eATpC;AAAA,MAUY,cAAc,GAGxB,KAAK,CAHmB,UAV1B;AAAA,MAWA,EAAA,GAEE,KAAK,CAF+B,cAXtC;AAAA,MAWA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,qBAAH,GAAwB,EAXtC;AAAA,MAYkB,oBAAoB,GACpC,KAAK,CAD+B,gBAZtC;AAeM,MAAS,cAAc,GAAK,iBAAiB,GAAtB,OAAvB;AAUR,MAAM,OAAO,GAAG,WAAW,IAAI,cAA/B;AAEA,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAD,CAArC;AACA,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAD,CAArC;AACA,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,OAAD,EAAU,cAAV,CAA7C;AACA,MAAM,cAAc,GAAG,kBAAkB,CAAC,OAAD,CAAzC;AACA,MAAM,WAAW,GAAG,eAAe,CAAC,oBAAD,CAAnC;AACA,MAAM,SAAS,GAAG,WAAW,CAAC,OAAD,CAA7B;AAEA,MAAM,UAAU,GAAG,cAAc,CAAC,OAAD,EAAU;AACzC,IAAA,oBAAoB,EAAE,+BADmB;AAEzC,IAAA,sBAAsB,EAAE,iCAFiB;AAGzC,IAAA,MAAM,EAAE;AAHiC,GAAV,CAAjC;AAMA,MAAM,UAAU,GAAG,cAAc,CAAC,OAAD,EAAU;AACzC,IAAA,oBAAoB,EAAE,4BADmB;AAEzC,IAAA,sBAAsB,EAAE,8BAFiB;AAGzC,IAAA,MAAM,EAAE;AAHiC,GAAV,CAAjC;;AAMM,MAAA,EAAA,GAAuC,kBAAkB,CAAC,OAAD,EAAU;AACvE,IAAA,eAAe,EAAE,mBADsD;AAEvE,IAAA,eAAe,EAAE;AAFsD,GAAV,CAAzD;AAAA,MAAE,eAAe,GAAA,EAAA,CAAA,eAAjB;AAAA,MAAmB,eAAe,GAAA,EAAA,CAAA,eAAlC;;AAKA,MAAA,EAAA,GAAwB,aAAa,CAAC,OAAD,EAAU,cAAV,EAA0B;AACnE,IAAA,oBAAoB,EAAE,8BAD6C;AAEnE,IAAA,MAAM,EAAE;AAF2D,GAA1B,CAArC;AAAA,MAAE,MAAM,GAAA,EAAA,CAAA,MAAR;AAAA,MAAU,SAAS,GAAA,EAAA,CAAA,SAAnB;;AAKN,SACE,KAAA,CAAA,aAAA,CAAC,eAAD,EAAgB,OAAA,CAAA,EAAA,EACV,KADU,EACL;AACT,IAAA,MAAM,EAAE,MADC;AAET,IAAA,OAAO,EAAE,OAFA;AAGT,IAAA,YAAY,EAAE,YAHL;AAIT,IAAA,YAAY,EAAE,YAJL;AAKT,IAAA,UAAU,EAAE,UALH;AAMT,IAAA,UAAU,EAAE,UANH;AAOT,IAAA,gBAAgB,EAAE,gBAPT;AAQT,IAAA,SAAS,EAAE,SARF;AAST,IAAA,cAAc,EAAE,cATP;AAUT,IAAA,WAAW,EAAE,WAVJ;AAWT,IAAA,sBAAsB,EAAE,eAXf;AAYT,IAAA,sBAAsB,EAAE,eAZf;AAaT,IAAA,SAAS,EAAE;AAbF,GADK,CAAhB,CADF;AAkBF,C;;ACtOA,IAAM,0BAA0B,GAAG,SAA7B,0BAA6B,CASjC,KATiC,EASiC;;;AAGhE,MAAA,EAAA,GAmBE,KAAK,CAnBuB,UAA9B;AAAA,MAAA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,UAAH,GAAoB,EAA9B;AAAA,MACA,EAAA,GAkBE,KAAK,CAlBe,MADtB;AAAA,MACA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGjB,MAAH,GAAgB,EADtB;AAAA,MAEA,UAAU,GAiBR,KAAK,CAjBG,UAFV;AAAA,MAGA,WAAW,GAgBT,KAAK,CAhBI,WAHX;AAAA,MAIA,YAAY,GAeV,KAAK,CAfK,YAJZ;AAAA,MAKA,gBAAgB,GAcd,KAAK,CAdS,gBALhB;AAAA,MAMA,cAAc,GAaZ,KAAK,CAbO,cANd;AAAA,MAOA,WAAW,GAYT,KAAK,CAZI,WAPX;AAAA,MAQA,iBAAiB,GAWf,KAAK,CAXU,iBARjB;AAAA,MASA,OAAO,GAUL,KAAK,CAVA,OATP;AAAA,MAUA,EAAA,GASE,KAAK,CAT+B,cAVtC;AAAA,MAUA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGc,cAAH,GAAwB,EAVtC;AAAA,MAWA,mBAAmB,GAQjB,KAAK,CARY,mBAXnB;AAAA,MAYa,eAAe,GAO1B,KAAK,CAPqB,WAZ5B;AAAA,MAaa,eAAe,GAM1B,KAAK,CANqB,WAb5B;AAAA,MAcA,EAAA,GAKE,KAAK,CALmC,gBAd1C;AAAA,MAcA,kBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGX,gBAAH,GAA0B,EAd1C;AAAA,MAeA,mBAAmB,GAIjB,KAAK,CAJY,mBAfnB;AAAA,MAgBA,EAAA,GAGE,KAAK,CAH6B,aAhBpC;AAAA,MAgBA,eAAa,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGe,aAAH,GAAuB,EAhBpC;AAAA,MAiBA,qBAAqB,GAEnB,KAAK,CAFc,qBAjBrB;AAAA,MAkBA,UAAU,GACR,KAAK,CADG,UAlBV;;AAqBI,MAAA,EAAA,GAA+B,cAAc,CAAC,OAAD,EAAU;AAC3D,IAAA,kBAAkB,EAAE,eADuC;AAE3D,IAAA,kBAAkB,EAAE;AAFuC,GAAV,CAA7C;AAAA,MAAE,WAAW,GAAA,EAAA,CAAA,WAAb;AAAA,MAAe,WAAW,GAAA,EAAA,CAAA,WAA1B;;AAKN,MAAM,aAAa,GAAG,qBAAqB,CAAC,OAAD,CAA3C;AACA,MAAM,YAAY,GAAG,mBAAmB,CAAC,OAAD,CAAxC;AAEA,MAAM,eAAe,GAAG,WAAW,GAAG,WAAW,CAAC,CAAD,CAAd,GAAoB,EAAvD;AAEA,MAAM,cAAc,GAAG,6DACrB,WAAW,KAAK,OAAL,GAAe,MADL,CAAvB;;AAIA,MAAI,OAAO,CAAC,UAAZ,EAAwB;AACtB,WAAO,KAAA,CAAA,aAAA,CAACH,gBAAD,EAAe;AAAC,MAAA,OAAO,EAAE;AAAV,KAAf,CAAP;AACD;;AAED,MAAI,OAAO,CAAC,IAAR,KAAiB,cAAjB,IAAmC,OAAO,CAAC,IAAR,KAAiB,cAAxD,EAAwE;AACtE,WAAO,IAAP;AACD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,CAAA,mBACX,cADW,GACG,4CADH,GAEiB,OAAO,CAAC,IAFzB,GAE6B,gBAF7B,IAIL,OAAO,CAAC,IAAR,GACI,sCADJ,GAEI,yCANC,IAMwC,gBANxC,IAQX,aAAa,GAAG,4CAAH,GAAkD,EARpD,IAQsD,gBARtD,IAUL,YAAY,IAAI,iBAAhB,GACI,4CADJ,GAEI,EAZC,IAYC,gBAZD,IAcL,iCAA+B,eAd1B,IAc2C,gBAd3C,IAeL,OAAO,CAAC,MAAR,GAAiB,gBAAjB,GAAoC,EAf/B,IAeiC,cAfjC,EAgBZ,IAhBY,EADb;AAiBO,mBACO,0BAlBd;AAmBE,IAAA,GAAG,EAAE,OAAO,CAAC;AAnBf,GAAA,EAqBG,CAAC,eAAe,KAAK,QAApB,IAAgC,eAAe,KAAK,QAArD,KACC,KAAA,CAAA,aAAA,CAACd,QAAD,EAAO;AACL,IAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,IAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,IAAA,OAAO,EAAE,WAHJ;AAIL,IAAA,WAAW,EAAE,WAJR;AAKL,IAAA,IAAI,EAAE;AALD,GAAP,CAtBJ,EA8BE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,OAAO,IAAI,CAAC,OAAO,CAAC,IAApB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EAEI,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EACT,KADS,EACJ;AACT,IAAA,cAAc,EAAE,KADP;AAET,IAAA,WAAW,EAAE,KAFJ;AAGT,IAAA,cAAc,EAAE,KAHP;AAIT,IAAA,mBAAmB,EAAE,mBAJZ;AAKT,IAAA,KAAK,EAAC;AALG,GADI,CAAf,CAFJ,EAWG,YAAY,IAAI,CAAC,qBAAjB,IAA0C,iBAA1C,IACC,KAAA,CAAA,aAAA,CAACI,eAAD,EAAc;AACZ,IAAA,OAAO,EAAE,mBADG;AAEZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAFX;AAGZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAHhC;AAIZ,IAAA,SAAS,EAAE,OAAO,CAAC;AAJP,GAAd,CAZJ,EAmBG,qBAAqB,IAAI,iBAAzB,IACC,KAAA,CAAA,aAAA,CAACC,kBAAD,EAAiB;AACf,IAAA,YAAY,EAAA,IADG;AAEf,IAAA,cAAc,EAAE,cAFD;AAGf,IAAA,gBAAgB,EAAE,OAAO,CAAC,gBAHX;AAIf,IAAA,aAAa,EAAE,OAAO,CAAC,aAJR;AAKf,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAL7B;AAMf,IAAA,GAAG,EAAE,mBANU;AAOf,IAAA,OAAO,EAAE;AAPM,GAAjB,CApBJ,CAFJ,EAkCG,OAAO,CAAC,WAAR,IACC,KAAA,CAAA,aAAA,CAACU,YAAD,EAAW;AACT,IAAA,aAAa,EAAE,YADN;AAET,IAAA,WAAW,EAAE,OAAO,CAAC;AAFZ,GAAX,CAnCJ,EAwCG,OAAO,CAAC,GAAR,IACC,KAAA,CAAA,aAAA,CAAC,GAAD,EAAI;AACF,IAAA,aAAa,EAAE,YADb;AAEF,IAAA,KAAK,EAAE,WAAW,KAAK,OAAL,GAAe,MAF/B;AAGF,IAAA,MAAM,EAAE,OAAO,CAAC;AAHd,GAAJ,CAzCJ,EA+CG,OAAO,CAAC,IAAR,IACC,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY,OAAA,CAAA,EAAA,EACN,KADM,EACD;AACT,IAAA,gBAAgB,EAAC,uCADR;AAET,IAAA,iBAAiB,EAAE;AACjB,MAAA,cAAc,EAAE,KADC;AAEjB,MAAA,WAAW,EAAE,KAFI;AAGjB,MAAA,cAAc,EAAE,KAHC;AAIjB,MAAA,KAAK,EAAE;AAJU,KAFV;AAQT,IAAA,kBAAkB,EAAC,iCARV;AAST,IAAA,KAAK,EAAC;AATG,GADC,CAAZ,CAhDJ,EA6DG,CAAC,UAAD,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,yBAAD,EAA0B;AACxB,IAAA,OAAO,EAAE,gBADe;AAExB,IAAA,WAAW,EAAE,OAAO,CAAC;AAFG,GAA1B,CADF,CA9DJ,EAqEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,WAAW,EAAZ,GACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,IAAA,SAAS,EAAC;AAAhB,GAAA,EACG,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CADH,CADD,GAIG,IALN,EAME,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,WAAW,EAAC,sCADG;AAEf,IAAA,MAAM,EAAC,IAFQ;AAGf,IAAA,UAAU,EAAE,UAHG;AAIf,IAAA,OAAO,EAAE;AAJM,GAAjB,CANF,CArEF,CA9BF,CADF,CADF;AAsHD,CA7KD;;AA+KA,IAAM,uBAAuB,GAAG,KAAK,CAAC,IAAN,CAC9B,0BAD8B,EAE9B,sBAF8B,CAAhC;AAKA;;;;IAGa,eAAe,GAAG,SAAlB,eAAkB,CAS7B,KAT6B,EAY5B;AAEO,MAAA,OAAO,GAAK,KAAK,CAAV,OAAP;AAER,MAAM,mBAAmB,GAAG,MAAM,CAAwB,IAAxB,CAAlC;;AAEM,MAAA,EAAA,GAIF,gBAAgB,CAAC,OAAD,EAAU,mBAAV,CAJd;AAAA,MACJ,iBAAiB,GAAA,EAAA,CAAA,iBADb;AAAA,MAEJ,mBAAmB,GAAA,EAAA,CAAA,mBAFf;AAAA,MAGJ,qBAAqB,GAAA,EAAA,CAAA,qBAHjB;;AAMN,SACE,KAAA,CAAA,aAAA,CAAC,uBAAD,EAAwB,OAAA,CAAA,EAAA,EAClB,KADkB,EACb;AACT,IAAA,iBAAiB,EAAE,iBADV;AAET,IAAA,mBAAmB,EAAE,mBAFZ;AAGT,IAAA,mBAAmB,EAAE,mBAHZ;AAIT,IAAA,qBAAqB,EAAE;AAJd,GADa,CAAxB,CADF;AASF,C;;ACvMA,IAAM,4BAA4B,GAAG,SAA/B,4BAA+B,CASnC,KATmC,EASiC;;;AAGlE,MAAA,eAAe,GAiCb,KAAK,CAjCQ,eAAf;AAAA,MACA,EAAA,GAgCE,KAAK,CAhCuB,UAD9B;AAAA,MACA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,UAAH,GAAoB,EAD9B;AAAA,MAEA,EAAA,GA+BE,KAAK,CA/Be,MAFtB;AAAA,MAEA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGjB,MAAH,GAAgB,EAFtB;AAAA,MAGA,aAAa,GA8BX,KAAK,CA9BM,aAHb;AAAA,MAIA,iBAAiB,GA6Bf,KAAK,CA7BU,iBAJjB;AAAA,MAKA,EAAA,GA4BE,KAAK,CA5BkC,gBALzC;AAAA,MAKA,gBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGa,eAAH,GAAyB,EALzC;AAAA,MAMA,OAAO,GA2BL,KAAK,CA3BA,OANP;AAAA,MAOA,UAAU,GA0BR,KAAK,CA1BG,UAPV;AAAA,MAQA,iBAAiB,GAyBf,KAAK,CAzBU,iBARjB;AAAA,MASA,WAAW,GAwBT,KAAK,CAxBI,WATX;AAAA,MAUA,YAAY,GAuBV,KAAK,CAvBK,YAVZ;AAAA,MAWA,gBAAgB,GAsBd,KAAK,CAtBS,gBAXhB;AAAA,MAYA,cAAc,GAqBZ,KAAK,CArBO,cAZd;AAAA,MAaA,WAAW,GAoBT,KAAK,CApBI,WAbX;AAAA,MAcA,cAAc,GAmBZ,KAAK,CAnBO,cAdd;AAAA,MAeA,iBAAiB,GAkBf,KAAK,CAlBU,iBAfjB;AAAA,MAgBA,OAAO,GAiBL,KAAK,CAjBA,OAhBP;AAAA,MAiBA,EAAA,GAgBE,KAAK,CAhB+B,cAjBtC;AAAA,MAiBA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAwB,EAjBtC;AAAA,MAkBA,iBAAiB,GAef,KAAK,CAfU,iBAlBjB;AAAA,MAmBA,sBAAsB,GAcpB,KAAK,CAde,sBAnBtB;AAAA,MAoBA,sBAAsB,GAapB,KAAK,CAbe,sBApBtB;AAAA,MAqBA,mBAAmB,GAYjB,KAAK,CAZY,mBArBnB;AAAA,MAsBa,eAAe,GAW1B,KAAK,CAXqB,WAtB5B;AAAA,MAuBa,eAAe,GAU1B,KAAK,CAVqB,WAvB5B;AAAA,MAwBA,EAAA,GASE,KAAK,CAT2B,YAxBlC;AAAA,MAwBA,cAAY,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGK,YAAH,GAAsB,EAxBlC;AAAA,MAyBA,EAAA,GAQE,KAAK,CAR6B,aAzBpC;AAAA,MAyBA,aAAa,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGD,mBAAH,GAAuB,EAzBpC;AAAA,MA0BA,EAAA,GAOE,KAAK,CAPmC,gBA1B1C;AAAA,MA0BA,kBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGf,gBAAH,GAA0B,EA1B1C;AAAA,MA2BA,mBAAmB,GAMjB,KAAK,CANY,mBA3BnB;AAAA,MA4BA,EAAA,GAKE,KAAK,CALuB,UA5B9B;AAAA,MA4BA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,UAAH,GAAoB,EA5B9B;AAAA,MA6BA,UAAU,GAIR,KAAK,CAJG,UA7BV;AAAA,MA8BA,eAAe,GAGb,KAAK,CAHQ,eA9Bf;AAAA,MA+BA,qBAAqB,GAEnB,KAAK,CAFc,qBA/BrB;AAAA,MAgCA,UAAU,GACR,KAAK,CADG,UAhCV;;AAmCI,MAAA,EAAA,GAAsB,qBAAqB,EAA3C;AAAA,MAAE,CAAC,GAAA,EAAA,CAAA,CAAH;AAAA,MAAK,YAAY,GAAA,EAAA,CAAA,YAAjB;;AAEA,MAAA,EAAA,GAA+B,cAAc,CAAC,OAAD,EAAU;AAC3D,IAAA,kBAAkB,EAAE,eADuC;AAE3D,IAAA,kBAAkB,EAAE;AAFuC,GAAV,CAA7C;AAAA,MAAE,WAAW,GAAA,EAAA,CAAA,WAAb;AAAA,MAAe,WAAW,GAAA,EAAA,CAAA,WAA1B;;AAKN,MAAM,mBAAmB,GACvB,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAM,YAAY,GAAA,OAAlB,CAAZ,KACA,OAAO,CAAC,IAFV;AAIA,MAAM,WAAW,GAAG,OAAO,CACzB,YAAA;AAAM,WAAA,YAAU,CAAC,mBAAD,EAAsB,OAAO,CAAC,eAA9B,CAAV;AAAwD,GADrC,EAEzB,CAAC,OAAO,CAAC,eAAT,EAA0B,mBAA1B,CAFyB,CAA3B;AAKA,MAAM,eAAe,GAAG,WAAW,GAAG,WAAW,CAAC,CAAD,CAAd,GAAoB,EAAvD;;AAEA,MAAI,OAAO,CAAC,IAAR,KAAiB,cAAjB,IAAmC,OAAO,CAAC,IAAR,KAAiB,cAAxD,EAAwE;AACtE,WAAO,IAAP;AACD;;AAED,MAAI,OAAO,CAAC,UAAZ,EAAwB;AACtB,WAAO,KAAA,CAAA,aAAA,CAACW,gBAAD,EAAe;AAAC,MAAA,OAAO,EAAE;AAAV,KAAf,CAAP;AACD;;AAED,MAAI,OAAJ,EAAa;AACX,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,oDAAkD,eAAlD,GAAiE,kCAD9E;AACgH,qBACjG;AAFf,KAAA,EAIG,CAAC,eAAe,KAAK,KAApB,IAA6B,eAAe,KAAK,QAAlD,KACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACE,KAAA,CAAA,aAAA,CAACd,QAAD,EAAO;AACL,MAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,MAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,MAAA,OAAO,EAAE,WAHJ;AAIL,MAAA,WAAW,EAAE,WAJR;AAKL,MAAA,IAAI,EAAE;AALD,KAAP,CADF,CALJ,EAeE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa;AACX,MAAA,iBAAiB,EAAE,iBADR;AAEX,MAAA,KAAK,EAAE,gBAFI;AAGX,MAAA,OAAO,EAAE;AAHE,KAAb,CAfF,CADF;AAuBD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAO,CAAC,MAAR,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAACmB,cAAD,EAAa;AAAC,IAAA,OAAO,EAAE,OAAV;AAAmB,IAAA,CAAC,EAAE;AAAtB,GAAb,CADF,CAFJ,EAME,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,gEAA8D,eAA9D,GAA6E,iCAA7E,GACT,OAAO,CAAC,IADC,GACG,iCADH,GAEuB,OAAO,CAAC,MAF/B,GAEqC,GAFrC,IAGT,cAAc,GAAG,+CAAH,GAAqD,EAH1D,IAG4D,GAH5D,IAIP,OAAO,CAAC,MAAR,GAAiB,gBAAjB,GAAoC,EAJ7B,CADb;AAK8C,mBAChC,oBANd;AAOE,IAAA,GAAG,EAAE;AAPP,GAAA,EASG,qBAAqB,IAAI,iBAAzB,IACC,KAAA,CAAA,aAAA,CAACd,kBAAD,EAAiB;AACf,IAAA,YAAY,EAAA,IADG;AAEf,IAAA,cAAc,EAAE,cAFD;AAGf,IAAA,gBAAgB,EAAE,OAAO,CAAC,gBAHX;AAIf,IAAA,aAAa,EAAE,OAAO,CAAC,aAJR;AAKf,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAL7B;AAMf,IAAA,GAAG,EAAE,mBANU;AAOf,IAAA,OAAO,EAAE;AAPM,GAAjB,CAVJ,EAoBE,KAAA,CAAA,aAAA,CAAC,wBAAD,EAAyB;AACvB,IAAA,eAAe,EAAE,eADM;AAEvB,IAAA,aAAa,EAAE,aAFQ;AAGvB,IAAA,UAAU,EAAE,UAHW;AAIvB,IAAA,iBAAiB,EAAE,iBAJI;AAKvB,IAAA,gBAAgB,EAAE,gBALK;AAMvB,IAAA,cAAc,EAAE,cANO;AAOvB,IAAA,OAAO,EAAE,OAPc;AAQvB,IAAA,iBAAiB,EAAE,iBARI;AASvB,IAAA,mBAAmB,EAAE,mBATE;AAUvB,IAAA,eAAe,EAAE,eAVM;AAWvB,IAAA,UAAU,EAAE;AAXW,GAAzB,CApBF,EAiCE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAACL,QAAD,EAAO;AACL,IAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,IAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,IAAA,OAAO,EAAE,WAHJ;AAIL,IAAA,WAAW,EAAE,WAJR;AAKL,IAAA,IAAI,EAAE;AALD,GAAP,CADF,CAjCF,EA0CE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EAAS,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAAT,CADF,EAEG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,CAAC,qBAAD,CADJ,CAHJ,CADF,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EACP,YAAY,CAAC,OAAO,CAAC,IAAT,CAAZ,GACI,6CADJ,GAEI,EAJR;AAIU,mBAEI,yBANd;AAOE,IAAA,OAAO,EAAE,sBAPX;AAQE,IAAA,WAAW,EAAE;AARf,GAAA,EAUG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IACC,OAAO,CAAC,MAAR,KAAmB,QADpB,IAEC,CAAC,UAFF,IAGC,WAbJ,EAcG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IACC,OAAO,CAAC,MAAR,KAAmB,QADpB,IAEC,UAFD,IAGC,CAAC,CAAC,OAAO,CAAC,IAHX,IAIG,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,uBAAuB,EAAE;AAAE,MAAA,MAAM,EAAE,OAAO,CAAC;AAAlB;AAA9B,GAAA,CAlBN,EAoBG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IAA4B,CAAC,OAAO,CAAC,OAArC,IACC,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AAAA,mBAAe;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CADF,EAEG,OAAO,CAAC,IAFX,CArBJ,EA0BG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IAA4B,OAAO,CAAC,OAApC,IACC,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AAAA,mBAAe;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CADF,EAGE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,E,GAAA,EAAU,OAAO,CAAC,OAAlB,CAHF,EAII,yBAJJ,CA3BJ,EAiCG,OAAO,CAAC,MAAR,KAAmB,QAAnB,IACC,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACE,IAAA,OAAO,EACL,OAAO,CAAC,eAAR,KAA4B,GAA5B,GACI,YAAA;AAAM,aAAA,WAAW,CAAC,OAAD,CAAX;AAAoB,KAD9B,GAEI;AAJR,GAAA,EAOE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CAPF,EAQG,OAAO,CAAC,eAAR,KAA4B,GAA5B,GACG,CAAC,CAAC,qCAAD,CADJ,GAEG,CAAC,CAAC,+BAAD,CAVP,CAlCJ,CATF,EAyDG,OAAO,CAAC,WAAR,IAAuBe,YAAvB,IACC,KAAA,CAAA,aAAA,CAACA,YAAD,EAAW;AACT,IAAA,aAAa,EAAE,YADN;AAET,IAAA,WAAW,EAAE,OAAO,CAAC;AAFZ,GAAX,CA1DJ,EA+DG,iBAAiB,IAChB,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,cAAc,EAAE,cADJ;AAEZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAFX;AAGZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAHhC;AAIZ,IAAA,SAAS,EAAE,OAAO,CAAC;AAJP,GAAd,CAhEJ,EAuEG,CAAC,cAAD,IACC,KAAA,CAAA,aAAA,CAAC,yBAAD,EAA0B;AACxB,IAAA,OAAO,EAAE,gBADe;AAExB,IAAA,WAAW,EAAE,OAAO,CAAC;AAFG,GAA1B,CAxEJ,CADF,CA1CF,CANF,CADF;AAoID,CAvOD;;AAoQA,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAS/B,KAT+B,EASiC;AAG9D,MAAA,aAAa,GASX,KAAK,CATM,aAAb;AAAA,MACA,UAAU,GAQR,KAAK,CARG,UADV;AAAA,MAEA,iBAAiB,GAOf,KAAK,CAPU,iBAFjB;AAAA,MAGA,gBAAgB,GAMd,KAAK,CANS,gBAHhB;AAAA,MAIA,cAAc,GAKZ,KAAK,CALO,cAJd;AAAA,MAKA,OAAO,GAIL,KAAK,CAJA,OALP;AAAA,MAMA,iBAAiB,GAGf,KAAK,CAHU,iBANjB;AAAA,MAOA,mBAAmB,GAEjB,KAAK,CAFY,mBAPnB;AAAA,MAQA,UAAU,GACR,KAAK,CADG,UARV;;AAWI,MAAA,EAAA,GAAsC,QAAQ,CAAC,KAAD,CAA9C;AAAA,MAAC,cAAc,GAAA,EAAA,CAAA,CAAA,CAAf;AAAA,MAAiB,iBAAiB,GAAA,EAAA,CAAA,CAAA,CAAlC;;AAEN,MAAM,WAAW,GAAG,WAAW,CAAC,YAAA;AAAM,WAAA,iBAAiB,CAAC,KAAD,CAAjB;AAAwB,GAA/B,EAAiC,EAAjC,CAA/B;AACA,MAAM,gBAAgB,GAAG,CAAC,CAAC,OAAO,CAAC,UAAnC;AACA,MAAM,cAAc,GAAG,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,OAA1C;AAEA,MAAM,cAAc,GAAG,qBAAqB,CAAC,iBAAiB,EAAlB,CAA5C;AAEA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,cAAJ,EAAoB;AAClB,MAAA,cAAc,CAAC,gBAAf,CAAgC,YAAhC,EAA8C,WAA9C;AACD;;AAED,WAAO,YAAA;AACL,UAAI,cAAJ,EAAoB;AAClB,QAAA,cAAc,CAAC,mBAAf,CAAmC,YAAnC,EAAiD,WAAjD;AACD;AACF,KAJD;AAKD,GAVQ,EAUN,CAAC,cAAD,EAAiB,WAAjB,CAVM,CAAT;AAYA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,gBAAJ,EAAsB;AACpB,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC;AACD;AACF,GAJQ,EAIN,CAAC,gBAAD,EAAmB,WAAnB,CAJM,CAAT;AAMA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,cAAJ,EAAoB;AAClB,MAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,WAAnC;AACD,KAFD,MAEO;AACL,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC;AACD;;AACD,WAAO,YAAA;AACL,MAAA,QAAQ,CAAC,mBAAT,CAA6B,OAA7B,EAAsC,WAAtC;AACD,KAFD;AAGD,GATQ,EASN,CAAC,cAAD,EAAiB,WAAjB,CATM,CAAT;;AAWA,MACE,cAAc,IACd,CAAC,OADD,IAEA,OAAO,CAAC,IAAR,KAAiB,OAFjB,IAGA,OAAO,CAAC,IAAR,KAAiB,QAHjB,IAIA,OAAO,CAAC,IAAR,KAAiB,WAJjB,IAKA,OAAO,CAAC,MAAR,KAAmB,QALnB,IAMA,OAAO,CAAC,MAAR,KAAmB,SAPrB,EAQE;AACA,WAAO,IAAP;AACD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,sCADb;AACmD,mBACpC;AAFf,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AACf,IAAA,WAAW,EAAC,mCADG;AAEf,IAAA,UAAU,EAAE,UAFG;AAGf,IAAA,OAAO,EAAE;AAHM,GAAjB,CAJF,EASG,CAAA,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,SAAf,KACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,mBACc,qCADd;AAEE,IAAA,OAAO,EAAE;AAFX,GAAA,EAIE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CADF,CAJF,CAVJ,EAmBG,CAAC,UAAD,KAAe,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,OAA9B,KACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,mBACc,kCADd;AAEE,IAAA,OAAO,EAAE;AAFX,GAAA,EAIE,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW,IAAX,CAJF,CApBJ,EA2BG,cAAc,IACb,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe,OAAA,CAAA,EAAA,EACT,KADS,EACJ;AACT,IAAA,kBAAkB,EAAE,EADX;AAET,IAAA,iBAAiB,EAAE,iBAFV;AAGT,IAAA,MAAM,EAAA;AAHG,GADI,CAAf,CA5BJ,CADF;AAsCD,CA9GD;;AAgHA,IAAM,yBAAyB,GAAG,KAAK,CAAC,IAAN,CAChC,4BADgC,EAEhC,sBAFgC,CAAlC;AAKA;;;;;;IAKa,iBAAiB,GAAG,SAApB,iBAAoB,CAS/B,KAT+B,EAS2B;AAGxD,MAAA,OAAO,GAGL,KAAK,CAHA,OAAP;AAAA,MACwB,mBAAmB,GAEzC,KAAK,CAFoC,sBAD3C;AAAA,MAEwB,mBAAmB,GACzC,KAAK,CADoC,sBAF3C;AAKF,MAAM,iBAAiB,GAAG,MAAM,CAAwB,IAAxB,CAAhC;AACA,MAAM,mBAAmB,GAAG,MAAM,CAAwB,IAAxB,CAAlC;;AAEM,MAAA,EAAA,GAAuC,oBAAoB,CAAC,OAAD,EAAU;AACzE,IAAA,eAAe,EAAE,mBADwD;AAEzE,IAAA,eAAe,EAAE;AAFwD,GAAV,CAA3D;AAAA,MAAE,eAAe,GAAA,EAAA,CAAA,eAAjB;AAAA,MAAmB,eAAe,GAAA,EAAA,CAAA,eAAlC;;AAKA,MAAA,EAAA,GAIF,gBAAgB,CAAC,OAAD,EAAU,mBAAV,EAA+B,iBAA/B,CAJd;AAAA,MACJ,iBAAiB,GAAA,EAAA,CAAA,iBADb;AAAA,MAEJ,mBAAmB,GAAA,EAAA,CAAA,mBAFf;AAAA,MAGJ,qBAAqB,GAAA,EAAA,CAAA,qBAHjB;;AAMN,SACE,KAAA,CAAA,aAAA,CAAC,yBAAD,EAA0B,OAAA,CAAA,EAAA,EACpB,KADoB,EACf;AACT,IAAA,iBAAiB,EAAE,iBADV;AAET,IAAA,iBAAiB,EAAE,iBAFV;AAGT,IAAA,sBAAsB,EAAE,eAHf;AAIT,IAAA,sBAAsB,EAAE,eAJf;AAKT,IAAA,mBAAmB,EAAE,mBALZ;AAMT,IAAA,mBAAmB,EAAE,mBANZ;AAOT,IAAA,qBAAqB,EAAE;AAPd,GADe,CAA1B,CADF;AAYF,C;;ACzaA,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CAS7B,KAT6B,EASiC;;;AAG5D,MAAA,eAAe,GA+Cb,KAAK,CA/CQ,eAAf;AAAA,MACA,EAAA,GA8CE,KAAK,CA9Ce,MADtB;AAAA,MACA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGhB,MAAH,GAAgB,EADtB;AAAA,MAEA,UAAU,GA6CR,KAAK,CA7CG,UAFV;AAAA,MAGA,OAAO,GA4CL,KAAK,CA5CA,OAHP;AAAA,MAIe,iBAAiB,GA2C9B,KAAK,CA3CyB,aAJhC;AAAA,MAKA,iBAAiB,GA0Cf,KAAK,CA1CU,iBALjB;AAAA,MAMA,OAAO,GAyCL,KAAK,CAzCA,OANP;AAAA,MAOA,EAAA,GAwCE,KAAK,CAxCkC,gBAPzC;AAAA,MAOA,gBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGa,eAAH,GAAyB,EAPzC;AAAA,MAQA,UAAU,GAuCR,KAAK,CAvCG,UARV;AAAA,MASA,+BAA+B,GAsC7B,KAAK,CAtCwB,+BAT/B;AAAA,MAUA,iCAAiC,GAqC/B,KAAK,CArC0B,iCAVjC;AAAA,MAWA,iBAAiB,GAoCf,KAAK,CApCU,iBAXjB;AAAA,MAYA,4BAA4B,GAmC1B,KAAK,CAnCqB,4BAZ5B;AAAA,MAaA,8BAA8B,GAkC5B,KAAK,CAlCuB,8BAb9B;AAAA,MAcA,EAAA,GAiCE,KAAK,CAjCiB,WAdxB;AAAA,MAcA,WAAW,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAC,QAAD,CAAH,GAAa,EAdxB;AAAA,MAeA,YAAY,GAgCV,KAAK,CAhCK,YAfZ;AAAA,MAgBA,UAAU,GA+BR,KAAK,CA/BG,UAhBV;AAAA,MAiBA,UAAU,GA8BR,KAAK,CA9BG,UAjBV;AAAA,MAkBA,YAAY,GA6BV,KAAK,CA7BK,YAlBZ;AAAA,MAmBA,gBAAgB,GA4Bd,KAAK,CA5BS,gBAnBhB;AAAA,MAoBA,UAAU,GA2BR,KAAK,CA3BG,UApBV;AAAA,MAqBA,SAAS,GA0BP,KAAK,CA1BE,SArBT;AAAA,MAsBA,cAAc,GAyBZ,KAAK,CAzBO,cAtBd;AAAA,MAuBA,WAAW,GAwBT,KAAK,CAxBI,WAvBX;AAAA,MAwBA,cAAc,GAuBZ,KAAK,CAvBO,cAxBd;AAAA,MAyBA,WAAW,GAsBT,KAAK,CAtBI,WAzBX;AAAA,MA0BA,iBAAiB,GAqBf,KAAK,CArBU,iBA1BjB;AAAA,MA2BA,cAAc,GAoBZ,KAAK,CApBO,cA3Bd;AAAA,MA4BA,OAAO,GAmBL,KAAK,CAnBA,OA5BP;AAAA,MA6BA,EAAA,GAkBE,KAAK,CAlB+B,cA7BtC;AAAA,MA6BA,gBAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,cAAH,GAAwB,EA7BtC;AAAA,MA8BA,eAAe,GAiBb,KAAK,CAjBQ,eA9Bf;AAAA,MA+BA,iBAAiB,GAgBf,KAAK,CAhBU,iBA/BjB;AAAA,MAgCA,sBAAsB,GAepB,KAAK,CAfe,sBAhCtB;AAAA,MAiCA,sBAAsB,GAcpB,KAAK,CAde,sBAjCtB;AAAA,MAkCA,mBAAmB,GAajB,KAAK,CAbY,mBAlCnB;AAAA,MAmCa,eAAe,GAY1B,KAAK,CAZqB,WAnC5B;AAAA,MAoCa,eAAe,GAW1B,KAAK,CAXqB,WApC5B;AAAA,MAqCA,EAAA,GAUE,KAAK,CAV2B,YArClC;AAAA,MAqCA,cAAY,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGK,YAAH,GAAsB,EArClC;AAAA,MAsCA,EAAA,GASE,KAAK,CAT6B,aAtCpC;AAAA,MAsCA,aAAa,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGD,mBAAH,GAAuB,EAtCpC;AAAA,MAuCA,EAAA,GAQE,KAAK,CARmC,gBAvC1C;AAAA,MAuCA,kBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGf,gBAAH,GAA0B,EAvC1C;AAAA,MAwCA,mBAAmB,GAOjB,KAAK,CAPY,mBAxCnB;AAAA,MAyCA,MAAM,GAMJ,KAAK,CAND,MAzCN;AAAA,MA0CA,EAAA,GAKE,KAAK,CALuB,UA1C9B;AAAA,MA0CA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGC,UAAH,GAAoB,EA1C9B;AAAA,MA2CA,qBAAqB,GAInB,KAAK,CAJc,qBA3CrB;AAAA,MA4CA,eAAe,GAGb,KAAK,CAHQ,eA5Cf;AAAA,MA6CA,UAAU,GAER,KAAK,CAFG,UA7CV;AAAA,MA8CA,UAAU,GACR,KAAK,CADG,UA9CV;;AAiDI,MAAA,EAAA,GAAsB,qBAAqB,EAA3C;AAAA,MAAE,CAAC,GAAA,EAAA,CAAA,CAAH;AAAA,MAAK,YAAY,GAAA,EAAA,CAAA,YAAjB;;AAEN,MAAM,aAAa,GAAG,iBAAiB,KAAI,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAA,OAAO,CAAE,SAAT,EAAJ,CAAvC;AAEA,MAAM,cAAc,GAAG,qBAAqB,CAAC,iBAAiB,EAAlB,CAA5C;AAEA,MAAM,mBAAmB,GACvB,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAM,YAAY,GAAA,OAAlB,CAAZ,KACA,OAAO,CAAC,IAFV;AAIA,MAAM,yBAAyB,GAAG,OAAO,CAAC,eAA1C;;AAEM,MAAA,EAAA,GAA+B,cAAc,CAAC,OAAD,EAAU;AAC3D,IAAA,kBAAkB,EAAE,eADuC;AAE3D,IAAA,kBAAkB,EAAE;AAFuC,GAAV,CAA7C;AAAA,MAAE,WAAW,GAAA,EAAA,CAAA,WAAb;AAAA,MAAe,WAAW,GAAA,EAAA,CAAA,WAA1B;;AAKN,MAAM,WAAW,GAAG,OAAO,CACzB,YAAA;AAAM,WAAA,YAAU,CAAC,mBAAD,EAAsB,yBAAtB,CAAV;AAA0D,GADvC,EAEzB,CAAC,yBAAD,EAA4B,mBAA5B,CAFyB,CAA3B;AAKA,MAAM,eAAe,GAAG,WAAW,GAAG,WAAW,CAAC,CAAD,CAAd,GAAoB,EAAvD;;AAEA,MAAI,OAAO,CAAC,IAAR,KAAiB,cAArB,EAAqC;AACnC,WAAO,IAAP;AACD;;AAED,MAAI,OAAO,CAAC,UAAZ,EAAwB;AACtB,WAAO,KAAA,CAAA,aAAA,CAACW,gBAAD,EAAe;AAAC,MAAA,OAAO,EAAE;AAAV,KAAf,CAAP;AACD;;AAED,MAAI,OAAJ,EAAa;AACX,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,SAAS,EAAE,oDAAkD,eAAlD,GAAiE,kCAD9E;AACgH,qBAClG;AAFd,KAAA,EAIG,CAAC,eAAe,KAAK,KAApB,IAA6B,eAAe,KAAK,QAAlD,KACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACE,KAAA,CAAA,aAAA,CAACd,QAAD,EAAO;AACL,MAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,MAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,MAAA,OAAO,EAAE,WAHJ;AAIL,MAAA,WAAW,EAAE,WAJR;AAKL,MAAA,IAAI,EAAE;AALD,KAAP,CADF,CALJ,EAeE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa;AACX,MAAA,iBAAiB,EAAE,iBADR;AAEX,MAAA,KAAK,EAAE,gBAFI;AAGX,MAAA,OAAO,EAAE;AAHE,KAAb,CAfF,CADF;AAuBD;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAO,CAAC,MAAR,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAACmB,cAAD,EAAa;AAAC,IAAA,OAAO,EAAE,OAAV;AAAmB,IAAA,CAAC,EAAE;AAAtB,GAAb,CADF,CAFJ,EAME,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,oDAAkD,eAAlD,GAAiE,2BAAjE,GACT,OAAO,CAAC,IADC,GACG,GADH,IAEP,UAAU,GAAG,aAAH,GAAmB,EAFtB,IAEwB,2BAFxB,GAGT,OAAO,CAAC,MAHC,GAGK,GAHL,IAIP,OAAO,CAAC,MAAR,GAAiB,gBAAjB,GAAoC,EAJ7B,CADb;AAK8C,mBAChC,cANd;AAOE,IAAA,GAAG,EAAE;AAPP,GAAA,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,eAAe,KAAK,KAApB,IACD,eAAe,KAAK,QADnB,IAED,cAFC,GAGC,KAAA,CAAA,aAAA,CAACnB,QAAD,EAAO;AACL,IAAA,KAAK,EAAA,CAAA,EAAA,GAAE,OAAO,CAAC,IAAV,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,KADhB;AAEL,IAAA,IAAI,EAAE,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAFD;AAGL,IAAA,OAAO,EAAE,WAHJ;AAIL,IAAA,WAAW,EAAE,WAJR;AAKL,IAAA,IAAI,EAAE;AALD,GAAP,CAHD,GAWC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,mBACc,kBADd;AAEE,IAAA,KAAK,EAAE;AAAE,MAAA,WAAW,EAAE,CAAf;AAAkB,MAAA,KAAK,EAAE;AAAzB;AAFT,GAAA,CAZJ,EAiBE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AAAC,IAAA,UAAU,EAAE,UAAb;AAAyB,IAAA,OAAO,EAAE;AAAlC,GAAjB,CAjBF,CATF,EA4BE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,OAAO,KACL,eAAe,KAAK,KAApB,IACC,eAAe,KAAK,QADrB,IAEC,cAHI,CAAP,IAIG,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,+BADZ;AAC2C,mBAC7B,qBAFd;AAGE,IAAA,OAAO,EAAE;AAHX,GAAA,EAKE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EAAS,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAR,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAY,EAAA,CAAE,IAAd,MAAkB,CAAA,EAAA,GAAI,OAAO,CAAC,IAAZ,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgB,EAAA,CAAE,EAApC,CAAT,CALF,EAMG,OAAO,CAAC,IAAR,KAAiB,OAAjB,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC;AAAf,GAAA,EACG,CAAC,CAAC,qBAAD,CADJ,CAPJ,CALN,EAkBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,oEAAkE,eAAlE,GAAiF,mCAAjF,IACT,OAAO,CAAC,IAAR,KAAiB,EAAjB,GAAsB,OAAtB,GAAgC,MADvB,CADb;AAGI,mBACU;AAJd,GAAA,EAMG,CAAC,cAAD,IACC,OADD,IAEC,OAAO,CAAC,MAAR,KAAmB,SAFpB,IAGC,OAAO,CAAC,MAAR,KAAmB,QAHpB,IAIC,OAAO,CAAC,IAAR,KAAiB,QAJlB,IAKC,OAAO,CAAC,IAAR,KAAiB,WALlB,IAMC,OAAO,CAAC,IAAR,KAAiB,OANlB,IAOG,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAE,gCADb;AAC6C,mBAC/B;AAFd,GAAA,EAIG,OAAO,IAAI,qBAAX,IACC,KAAA,CAAA,aAAA,CAACK,kBAAD,EAAiB;AACf,IAAA,YAAY,EAAE,IADC;AAEf,IAAA,cAAc,EAAE,cAFD;AAGf,IAAA,gBAAgB,EAAE,OAAO,CAAC,gBAHX;AAIf,IAAA,aAAa,EAAE,OAAO,CAAC,aAJR;AAKf,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAL7B;AAMf,IAAA,GAAG,EAAE;AANU,GAAjB,CALJ,EAcG,iBAAiB,IAChB,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,mBACc,4BADd;AAEE,IAAA,OAAO,EAAE,mBAFX;AAGE,IAAA,KAAK,EAAC;AAHR,GAAA,EAKE,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,IAAb,CALF,CAfJ,EAuBG,CAAC,UAAD,IAAe,CAAA,aAAa,KAAA,IAAb,IAAA,aAAa,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAA,aAAa,CAAE,OAAf,MAA2B,KAA1C,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,mBACc,0BADd;AAEE,IAAA,OAAO,EAAE,gBAFX;AAGE,IAAA,KAAK,EAAC;AAHR,GAAA,EAKE,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW,IAAX,CALF,CAxBJ,EAgCG,cAAc,IACb,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,IAAA,eAAe,EAAE,eADJ;AAEb,IAAA,kBAAkB,EAAE,EAFP;AAGb,IAAA,+BAA+B,EAC7B,+BAJW;AAMb,IAAA,iCAAiC,EAC/B,iCAPW;AASb,IAAA,iBAAiB,EAAE,iBATN;AAUb,IAAA,4BAA4B,EAC1B,4BAXW;AAab,IAAA,8BAA8B,EAC5B,8BAdW;AAgBb,IAAA,YAAY,EAAE,YAhBD;AAiBb,IAAA,UAAU,EAAE,UAjBC;AAkBb,IAAA,UAAU,EAAE,UAlBC;AAmBb,IAAA,UAAU,EAAE,UAnBC;AAoBb,IAAA,SAAS,EAAE,SApBE;AAqBb,IAAA,MAAM,EAAA,IArBO;AAsBb,IAAA,OAAO,EAAE,OAtBI;AAuBb,IAAA,eAAe,EAAE,eAvBJ;AAwBb,IAAA,iBAAiB,EAAE,iBAxBN;AAyBb,IAAA,eAAe,EAAE;AAzBJ,GAAf,CAjCJ,CAbN,EA4EG,OAAO,IACN,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,IAAA,SAAS,EACP,YAAY,CAAC,OAAO,CAAC,IAAT,CAAZ,GACI,uCADJ,GAEI,EAJR;AAIU,mBAEI,sBANd;AAOE,IAAA,OAAO,EAAE,sBAPX;AAQE,IAAA,WAAW,EAAE;AARf,GAAA,EAUG,UAAU,IAAI,OAAO,CAAC,IAAtB,GACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,uBAAuB,EAAE;AAAE,MAAA,MAAM,EAAE,OAAO,CAAC;AAAlB;AAA9B,GAAA,CADD,GAGC,WAbJ,CA7EJ,EA8FG,OAAO,CAAC,GAAR,IACC,KAAA,CAAA,aAAA,CAAC,GAAD,EAAI;AACF,IAAA,aAAa,EAAE,YADb;AAEF,IAAA,KAAK,EAAC,MAFJ;AAGF,IAAA,MAAM,EAAE,OAAO,CAAC;AAHd,GAAJ,CA/FJ,EAqGG,OAAO,CAAC,IAAR,KAAiB,EAAjB,IACC,KAAA,CAAA,aAAA,CAAC,sBAAD,EAAuB;AACrB,IAAA,UAAU,EAAE,UADS;AAErB,IAAA,YAAY,EAAE,YAFO;AAGrB,IAAA,OAAO,EAAE;AAHY,GAAvB,CAtGJ,EA4GG,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,gBAAR,MAAwB,IAAxB,IAAwB,EAAA,KAAA,KAAA,CAAxB,GAAwB,KAAA,CAAxB,GAAwB,EAAA,CAAE,MAA1B,MAAqC,CAArC,IACC,OAAO,CAAC,IAAR,KAAiB,EADlB,IAEC,iBAFD,IAGG,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,cAAc,EAAE,cADJ;AAEZ,IAAA,OAAO,EAAE,mBAFG;AAGZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAHX;AAIZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAJhC;AAKZ,IAAA,SAAS,EAAE,OAAO,CAAC;AALP,GAAd,CA/GN,EAuHG,OAAO,CAAC,MAAR,KAAmB,QAAnB,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,IAAA,SAAS,EAAC,+BADZ;AAC2C,mBAC7B,qBAFd;AAGE,IAAA,OAAO,EACL,OAAO,CAAC,eAAR,KAA4B,GAA5B,GACI,YAAA;AAAM,aAAA,WAAW,CAAC,OAAD,CAAX;AAAoB,KAD9B,GAEI;AANR,GAAA,EASE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,IAAV,CATF,EAUG,OAAO,CAAC,eAAR,KAA4B,GAA5B,GACG,CAAC,CAAC,qCAAD,CADJ,GAEG,CAAC,CAAC,+BAAD,CAZP,CAxHJ,CAlBF,EA0JE,KAAA,CAAA,aAAA,CAAC,iBAAD,EAAkB;AAChB,IAAA,MAAM,EAAEL,QADQ;AAEhB,IAAA,WAAW,EAAE,WAFG;AAGhB,IAAA,cAAc,EAAE,cAHA;AAIhB,IAAA,OAAO,EAAE,OAJO;AAKhB,IAAA,MAAM,EAAE,MALQ;AAMhB,IAAA,UAAU,EAAE;AANI,GAAlB,CA1JF,EAkKG,OAAO,CAAC,IAAR,KAAiB,EAAjB,IAAuB,OAAO,CAAC,WAA/B,IACC,KAAA,CAAA,aAAA,CAAC,sBAAD,EAAuB;AACrB,IAAA,UAAU,EAAE,UADS;AAErB,IAAA,YAAY,EAAE,YAFO;AAGrB,IAAA,OAAO,EAAE;AAHY,GAAvB,CAnKJ,EAyKG,OAAO,CAAC,gBAAR,IACC,OAAO,CAAC,gBAAR,CAAyB,MAAzB,KAAoC,CADrC,IAEC,OAAO,CAAC,IAAR,KAAiB,EAFlB,IAGC,iBAHD,IAIG,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,IAAA,cAAc,EAAE,cADJ;AAEZ,IAAA,OAAO,EAAE,mBAFG;AAGZ,IAAA,aAAa,EAAE,OAAO,CAAC,aAHX;AAIZ,IAAA,eAAe,EAAE,OAAO,CAAC,eAAR,IAA2B,SAJhC;AAKZ,IAAA,SAAS,EAAE,OAAO,CAAC;AALP,GAAd,CA7KN,EAqLG,CAAC,UAAD,IACC,KAAA,CAAA,aAAA,CAAC,yBAAD,EAA0B;AACxB,IAAA,OAAO,EAAE,gBADe;AAExB,IAAA,WAAW,EAAE,OAAO,CAAC;AAFG,GAA1B,CAtLJ,CA5BF,CANF,CADF;AAkOD,CAzVD;;AA2VA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CASxB,KATwB,EAiBvB;AAGC,MAAA,EAAA,GAME,KAAK,CANe,MAAtB;AAAA,MAAA,QAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGD,MAAH,GAAgB,EAAtB;AAAA,MACA,WAAW,GAKT,KAAK,CALI,WADX;AAAA,MAEA,cAAc,GAIZ,KAAK,CAJO,cAFd;AAAA,MAGA,OAAO,GAGL,KAAK,CAHA,OAHP;AAAA,MAIA,MAAM,GAEJ,KAAK,CAFD,MAJN;AAAA,MAKA,UAAU,GACR,KAAK,CADG,UALV;AAQM,MAAA,MAAM,GAAK,cAAc,GAAnB,MAAN;AACA,MAAA,CAAC,GAAK,qBAAqB,GAA1B,CAAD;;AAER,MAAI,CAAC,WAAW,EAAZ,IAAkB,OAAO,CAAC,IAAR,KAAiB,OAAvC,EAAgD;AAC9C,WAAO,IAAP;AACD;;AAED,MAAM,YAAY,GAChB,MAAM,KACN,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IADF,CAAN,IAEA,MAAM,CAAC,MAAP,KAAkB,CAFlB,IAGA,MAAM,CAAC,CAAD,CAHN,IAIA,MAAM,CAAC,CAAD,CAAN,CAAU,EAAV,KAAiB,MAAM,CAAC,IAAP,CAAY,EAL/B;;AAOA,MAAI,OAAO,IAAI,OAAO,CAAC,MAAR,KAAmB,SAAlC,EAA6C;AAC3C,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,+BADZ;AAC2C,qBAC7B;AAFd,KAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,CAAC,CAAC,YAAD,CAAX,CAJF,EAKE,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB,IAAjB,CALF,CADF;AASD;;AAED,MAAI,MAAM,IAAI,MAAM,CAAC,MAAP,KAAkB,CAA5B,IAAiC,CAAC,UAAlC,IAAgD,CAAC,YAArD,EAAmE;AACjE,QAAM,YAAY,GAAG,MAAM,CAAC,MAAP,CACnB,UAAC,IAAD,EAAK;AAAK,aAAA,IAAI,KAAI,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,IAAZ,CAAJ,IAAwB,IAAI,CAAC,EAAL,KAAY,MAAM,CAAC,IAAP,CAAY,EAAhD;AAAkD,KADzC,EAEnB,CAFmB,CAArB;AAGA,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAC;AAAhB,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,oBAAoB,CAAC,MAAD,EAAS,CAAT,EAAY,MAAZ,CAA9B,CADF,EAEE,KAAA,CAAA,aAAA,CAACC,QAAD,EAAO;AACL,MAAA,KAAK,EAAE,YAAY,KAAA,IAAZ,IAAA,YAAY,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAA,YAAY,CAAE,KADhB;AAEL,MAAA,IAAI,EAAE,YAAY,KAAA,IAAZ,IAAA,YAAY,KAAA,KAAA,CAAZ,GAAY,KAAA,CAAZ,GAAA,YAAY,CAAE,IAFf;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP,CAFF,EAOG,MAAM,CAAC,MAAP,GAAgB,CAAhB,GAAoB,CAApB,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,sCADZ;AACkD,qBACpC;AAFd,KAAA,EAIG,MAAM,CAAC,MAAP,GAAgB,CAJnB,CARJ,CADF;AAkBD;;AAED,MACE,OAAO,IACP,OAAO,CAAC,MAAR,KAAmB,UADnB,IAEA,OAAO,CAAC,EAAR,KAAe,cAFf,IAGA,CAAC,UAJH,EAKE;AACA,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACE,MAAA,SAAS,EAAC,+BADZ;AAC2C,qBAC7B;AAFd,KAAA,EAIE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ,IAAR,EAAU,CAAC,CAAC,WAAD,CAAX,CAJF,EAKE,KAAA,CAAA,aAAA,CAAC,kBAAD,EAAmB,IAAnB,CALF,CADF;AASD;;AAED,SAAO,IAAP;AACD,CAhGD;;AAkGA,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CAS7B,KAT6B,EAY5B;AAEO,MAAA,EAAA,GAA0D,KAAK,CAAjC,UAA9B;AAAA,MAAA,YAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAGgB,UAAH,GAAoB,EAA9B;AAAA,MAAgC,YAAY,GAAc,KAAK,CAAnB,YAA5C;AAAA,MAA8C,OAAO,GAAK,KAAK,CAAV,OAArD;;AAER,MAAI,OAAO,CAAC,WAAZ,EAAyB;AACvB,WACE,KAAA,CAAA,aAAA,CAACD,YAAD,EAAW;AACT,MAAA,aAAa,EAAE,YADN;AAET,MAAA,WAAW,EAAE,OAAO,CAAC;AAFZ,KAAX,CADF;AAMD;;AAED,SAAO,IAAP;AACD,CA1BD;;AA4BA,IAAM,mBAAmB,GAAG,KAAK,CAAC,IAAN,CAC1B,sBAD0B,EAE1B,sBAF0B,CAA5B;AAKA;;;;;;IAKa,WAAW,GAAG,SAAd,WAAc,CASzB,KATyB,EASiC;AAElD,MAAA,OAAO,GAAK,KAAK,CAAV,OAAP;AAEA,MAAA,OAAO,GAAK,iBAAiB,GAAtB,OAAP;AAER,MAAM,mBAAmB,GAAG,MAAM,CAAwB,IAAxB,CAAlC;AACA,MAAM,iBAAiB,GAAG,MAAM,CAAwB,IAAxB,CAAhC;;AAEM,MAAA,EAAA,GAIF,gBAAgB,CAAC,OAAD,EAAU,mBAAV,EAA+B,iBAA/B,CAJd;AAAA,MACJ,iBAAiB,GAAA,EAAA,CAAA,iBADb;AAAA,MAEJ,mBAAmB,GAAA,EAAA,CAAA,mBAFf;AAAA,MAGJ,qBAAqB,GAAA,EAAA,CAAA,qBAHjB;;AAMN,SACE,KAAA,CAAA,aAAA,CAAC,mBAAD,EAAoB,OAAA,CAAA,EAAA,EACd,KADc,EACT;AACT,IAAA,OAAO,EAAE,OADA;AAET,IAAA,iBAAiB,EAAE,iBAFV;AAGT,IAAA,iBAAiB,EAAE,iBAHV;AAIT,IAAA,mBAAmB,EAAE,mBAJZ;AAKT,IAAA,mBAAmB,EAAE,mBALZ;AAMT,IAAA,qBAAqB,EAAE;AANd,GADS,CAApB,CADF;AAWF,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import React from 'react';\n\nimport type { Action } from 'stream-chat';\n\nexport type AttachmentActionsProps = {\n  /** A list of actions */\n  actions: Action[];\n  /** Unique id for action button key. Key is generated by concatenating this id with action value - {`${id}-${action.value}`} */\n  id: string;\n  /** The text for the form input */\n  text: string;\n  /** Click event handler */\n  actionHandler?: (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n    name?: string,\n    value?: string,\n  ) => void;\n};\n\nconst UnMemoizedAttachmentActions: React.FC<AttachmentActionsProps> = (\n  props,\n) => {\n  const { actionHandler, actions, id, text } = props;\n\n  const handleActionClick = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n    name?: string,\n    value?: string,\n  ) => {\n    if (actionHandler) {\n      actionHandler(event, name, value);\n    }\n  };\n\n  return (\n    <div className='str-chat__message-attachment-actions'>\n      <div className='str-chat__message-attachment-actions-form'>\n        <span key={0}>{text}</span>\n        {actions.map((action) => (\n          <button\n            className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\n            data-testid={`${action.name}`}\n            data-value={action.value}\n            key={`${id}-${action.value}`}\n            onClick={(event) =>\n              handleActionClick(event, action.name, action.value)\n            }\n          >\n            {action.text}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n/**\n * AttachmentActions - renders the attachment action, which are the actions you can take on an attachment.\n * @example ./AttachmentActions.md\n */\nexport const AttachmentActions = React.memo(\n  UnMemoizedAttachmentActions,\n) as typeof UnMemoizedAttachmentActions;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { DefaultAttachmentType } from '../../../types/types';\n\nconst progressUpdateInterval = 500;\n/**\n * Audio attachment with play/pause button and progress bar\n */\nexport type AudioProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = {\n  og: Attachment<At>;\n};\n\nconst UnMemoizedAudio = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: AudioProps<At>,\n) => {\n  const { og } = props;\n\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n\n  const updateProgress = useCallback(() => {\n    if (audioRef.current !== null) {\n      const position = audioRef.current.currentTime;\n      const { duration } = audioRef.current;\n      const currentProgress = (100 / duration) * position;\n      setProgress(currentProgress);\n      if (position === duration) {\n        setIsPlaying(false);\n      }\n    }\n  }, [audioRef]);\n\n  useEffect(() => {\n    if (audioRef.current !== null) {\n      if (isPlaying) {\n        audioRef.current.play();\n        const interval = setInterval(updateProgress, progressUpdateInterval);\n        return () => clearInterval(interval);\n      }\n      audioRef.current.pause();\n    }\n    return;\n  }, [isPlaying, updateProgress]);\n\n  const { asset_url, description, image_url, text, title } = og;\n\n  return (\n    <div className='str-chat__audio'>\n      <div className='str-chat__audio__wrapper'>\n        <audio ref={audioRef}>\n          <source data-testid='audio-source' src={asset_url} type='audio/mp3' />\n        </audio>\n        <div className='str-chat__audio__image'>\n          <div className='str-chat__audio__image--overlay'>\n            {!isPlaying ? (\n              <div\n                className='str-chat__audio__image--button'\n                data-testid='play-audio'\n                onClick={() => setIsPlaying(true)}\n              >\n                <svg\n                  height='40'\n                  viewBox='0 0 64 64'\n                  width='40'\n                  xmlns='http://www.w3.org/2000/svg'\n                >\n                  <path\n                    d='M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z'\n                    fillRule='nonzero'\n                  />\n                </svg>\n              </div>\n            ) : (\n              <div\n                className='str-chat__audio__image--button'\n                data-testid='pause-audio'\n                onClick={() => setIsPlaying(false)}\n              >\n                <svg\n                  height='40'\n                  viewBox='0 0 64 64'\n                  width='40'\n                  xmlns='http://www.w3.org/2000/svg'\n                >\n                  <path\n                    d='M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z'\n                    fillRule='nonzero'\n                  />\n                </svg>\n              </div>\n            )}\n          </div>\n          {image_url && <img alt={`${description}`} src={image_url} />}\n        </div>\n        <div className='str-chat__audio__content'>\n          <span className='str-chat__audio__content--title'>\n            <strong>{title}</strong>\n          </span>\n          <span className='str-chat__audio__content--subtitle'>{text}</span>\n          <div className='str-chat__audio__content--progress'>\n            <div\n              data-testid='audio-progress'\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const Audio = React.memo(UnMemoizedAudio) as typeof UnMemoizedAudio;\n","import React from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n */\nexport type SafeAnchorProps = {\n  /** Set the className for the anchor tag element */\n  className?: string;\n  /** Specifies that the target (href attribute) will be downloaded instead of navigating to a file */\n  download?: boolean;\n  /** Set the href attribute for the anchor tag element */\n  href?: string;\n  /** Set the rel attribute for the anchor tag element */\n  rel?: string;\n  /** Set the target attribute for the anchor tag element */\n  target?: string;\n};\n\nconst UnMemoizedSafeAnchor: React.FC<SafeAnchorProps> = (props) => {\n  const { children, className, download, href, rel, target } = props;\n  if (!href) return null;\n  const sanitized = sanitizeUrl(href);\n  return (\n    <a\n      className={className}\n      download={download}\n      href={sanitized}\n      rel={rel}\n      target={target}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport const SafeAnchor = React.memo(\n  UnMemoizedSafeAnchor,\n) as typeof UnMemoizedSafeAnchor;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","import type { UnknownType } from '../../../types/types';\n\nexport const getDisplayName = <P extends UnknownType>(\n  Component: React.ComponentType<P>,\n) => Component.displayName || Component.name || 'Component';\n","import React, { useContext } from 'react';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\n\nimport { getDisplayName } from './utils/getDisplayName';\n\nimport type { TFunction } from 'i18next';\nimport type { Moment } from 'moment';\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { UnknownType } from '../../types/types';\n\nDayjs.extend(calendar);\nDayjs.extend(localizedFormat);\n\nexport const isDayOrMoment = (\n  output: TDateTimeParserOutput,\n): output is Dayjs.Dayjs | Moment =>\n  (output as Dayjs.Dayjs | Moment).isSame != null;\n\nexport const isDate = (output: TDateTimeParserOutput): output is Date =>\n  (output as Date).getMonth != null;\n\nexport const isNumberOrString = (\n  output: TDateTimeParserOutput,\n): output is number | string =>\n  typeof output === 'string' || typeof output === 'number';\n\nexport type TDateTimeParserInput = string | number | Date;\n\nexport type TDateTimeParserOutput =\n  | string\n  | number\n  | Date\n  | Dayjs.Dayjs\n  | Moment;\n\nexport type TDateTimeParser = (\n  input?: TDateTimeParserInput,\n) => TDateTimeParserOutput;\n\nexport type TranslationContextValue = {\n  t: TFunction | ((key: string) => string);\n  tDateTimeParser: TDateTimeParser;\n  userLanguage: TranslationLanguages;\n};\n\nexport const TranslationContext = React.createContext<TranslationContextValue>({\n  t: (key: string) => key,\n  tDateTimeParser: (input) => Dayjs(input),\n  userLanguage: 'en',\n});\n\nexport const TranslationProvider: React.FC<{\n  value: TranslationContextValue;\n}> = ({ children, value }) => (\n  <TranslationContext.Provider value={value}>\n    {children}\n  </TranslationContext.Provider>\n);\n\nexport const useTranslationContext = () => useContext(TranslationContext);\n\nexport const withTranslationContext = <P extends UnknownType>(\n  Component: React.ComponentType<P>,\n): React.FC<Omit<P, keyof TranslationContextValue>> => {\n  const WithTranslationContextComponent = (\n    props: Omit<P, keyof TranslationContextValue>,\n  ) => {\n    const translationContext = useTranslationContext();\n\n    return <Component {...(props as P)} {...translationContext} />;\n  };\n\n  WithTranslationContextComponent.displayName = `WithTranslationContext${getDisplayName(\n    Component,\n  )}`;\n\n  return WithTranslationContextComponent;\n};\n","import React from 'react';\n\nimport { SafeAnchor } from '../SafeAnchor';\n\nimport giphyLogo from '../../assets/Poweredby_100px-White_VertText.png';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport type CardProps = {\n  /** The url of the full sized image */\n  image_url?: string;\n  /** The scraped url, used as a fallback if the OG-data doesn't include a link */\n  og_scrape_url?: string;\n  /** Description returned by the OG scraper */\n  text?: string;\n  /** The url for thumbnail sized image */\n  thumb_url?: string;\n  /** Title returned by the OG scraper */\n  title?: string;\n  /** Link returned by the OG scraper */\n  title_link?: string;\n  /** The card type used in the className attribute */\n  type?: string;\n};\n\nconst UnMemoizedCard: React.FC<CardProps> = (props) => {\n  const {\n    image_url,\n    og_scrape_url,\n    text,\n    thumb_url,\n    title,\n    title_link,\n    type,\n  } = props;\n\n  const { t } = useTranslationContext();\n\n  const image = thumb_url || image_url;\n\n  const trimUrl = (url?: string | null) => {\n    if (url !== undefined && url !== null) {\n      const [trimmedUrl] = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/');\n\n      return trimmedUrl;\n    }\n    return null;\n  };\n\n  if (!title && !title_link && !image) {\n    return (\n      <div\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n      >\n        <div className='str-chat__message-attachment-card--content'>\n          <div className='str-chat__message-attachment-card--text'>\n            {t('this content could not be displayed')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!title_link && !og_scrape_url) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n    >\n      {image && (\n        <div className='str-chat__message-attachment-card--header'>\n          <img alt={image} src={image} />\n        </div>\n      )}\n      <div className='str-chat__message-attachment-card--content'>\n        <div className='str-chat__message-attachment-card--flex'>\n          {title && (\n            <div className='str-chat__message-attachment-card--title'>\n              {title}\n            </div>\n          )}\n          {text && (\n            <div className='str-chat__message-attachment-card--text'>\n              {text}\n            </div>\n          )}\n          {(title_link || og_scrape_url) && (\n            <SafeAnchor\n              className='str-chat__message-attachment-card--url'\n              href={title_link || og_scrape_url}\n              rel='noopener noreferrer'\n              target='_blank'\n            >\n              {trimUrl(title_link || og_scrape_url)}\n            </SafeAnchor>\n          )}\n        </div>\n        {type === 'giphy' && (\n          <img\n            alt='giphy logo'\n            className='str-chat__message-attachment-card__giphy-logo'\n            data-testid='card-giphy'\n            src={giphyLogo}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n/**\n * Card - Simple Card Layout for displaying links. For different message styles, we customized this component with css.\n * @example ./Card.md\n */\nexport const Card = React.memo(UnMemoizedCard) as typeof UnMemoizedCard;\n","import React from 'react';\nimport prettybytes from 'pretty-bytes';\nimport { FileIcon } from 'react-file-utils';\n\nimport { SafeAnchor } from '../SafeAnchor';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { DefaultAttachmentType } from '../../../types/types';\n\nexport type FileAttachmentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = {\n  attachment: Attachment<At>;\n};\n\nconst UnMemoizedFileAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: FileAttachmentProps<At>,\n) => {\n  const { attachment } = props;\n\n  return (\n    <div\n      className='str-chat__message-attachment-file--item'\n      data-testid='attachment-file'\n    >\n      <FileIcon\n        big={true}\n        filename={attachment.title}\n        mimeType={attachment.mime_type}\n        size={30}\n      />\n      <div className='str-chat__message-attachment-file--item-text'>\n        <SafeAnchor download href={attachment.asset_url} target='_blank'>\n          {attachment.title}\n        </SafeAnchor>\n        {attachment.file_size &&\n          Number.isFinite(Number(attachment.file_size)) && (\n            <span>{prettybytes(attachment.file_size)}</span>\n          )}\n      </div>\n    </div>\n  );\n};\n\nexport const FileAttachment = React.memo(\n  UnMemoizedFileAttachment,\n) as typeof UnMemoizedFileAttachment;\n","import React, { PropsWithChildren } from 'react';\n\nimport type {\n  DefaultAttachmentProps,\n  ExtendedAttachment,\n  InnerAttachmentUIComponentProps,\n} from './Attachment';\n\nimport type { DefaultAttachmentType } from '../../../types/types';\n\nexport const SUPPORTED_VIDEO_FORMATS = [\n  'video/mp4',\n  'video/ogg',\n  'video/webm',\n  'video/quicktime',\n];\n\nexport const isAudioAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  attachment: ExtendedAttachment<At>,\n) => attachment.type === 'audio';\n\nexport const isFileAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  attachment: ExtendedAttachment<At>,\n) =>\n  attachment.type === 'file' ||\n  (attachment.mime_type &&\n    SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) === -1 &&\n    attachment.type !== 'video');\n\nexport const isGalleryAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  attachment: ExtendedAttachment<At>,\n) => attachment.type === 'gallery';\n\nexport const isImageAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  attachment: ExtendedAttachment<At>,\n) =>\n  attachment.type === 'image' &&\n  !attachment.title_link &&\n  !attachment.og_scrape_url;\n\nexport const isMediaAttachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  attachment: ExtendedAttachment<At>,\n) =>\n  (attachment.mime_type &&\n    SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) !== -1) ||\n  attachment.type === 'video';\n\nexport const renderAttachmentWithinContainer = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: PropsWithChildren<Partial<DefaultAttachmentProps<At>>>,\n) => {\n  const { attachment, children, componentType } = props;\n\n  const extra =\n    componentType === 'card' && !attachment?.image_url && !attachment?.thumb_url\n      ? 'no-image'\n      : attachment && attachment.actions && attachment.actions.length\n      ? 'actions'\n      : '';\n\n  return (\n    <div\n      className={`str-chat__message-attachment str-chat__message-attachment--${componentType} str-chat__message-attachment--${\n        attachment?.type || ''\n      } str-chat__message-attachment--${componentType}--${extra}`}\n      key={`${attachment?.id}-${attachment?.type || 'none'} `}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport const renderAttachmentActions = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { actionHandler, attachment, AttachmentActions } = props;\n\n  if (!AttachmentActions || !attachment.actions || !attachment.actions.length) {\n    return null;\n  }\n\n  return (\n    <AttachmentActions\n      {...attachment}\n      actionHandler={(event, name, value) =>\n        actionHandler?.(name, value, event)\n      }\n      actions={attachment.actions || []}\n      id={attachment.id || ''}\n      key={`key-actions-${attachment.id}`}\n      text={attachment.text || ''}\n    />\n  );\n};\n\nexport const renderGallery = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { attachment, Gallery } = props;\n\n  if (!Gallery) return null;\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: <Gallery images={attachment.images || []} key='gallery' />,\n    componentType: 'gallery',\n  });\n};\n\nexport const renderImage = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { attachment, Image } = props;\n\n  if (!Image) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment,\n      children: (\n        <div\n          className='str-chat__attachment'\n          key={`key-image-${attachment.id}`}\n        >\n          {<Image {...attachment} />}\n          {renderAttachmentActions(props)}\n        </div>\n      ),\n      componentType: 'image',\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: <Image {...attachment} key={`key-image-${attachment.id}`} />,\n    componentType: 'image',\n  });\n};\n\nexport const renderCard = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { attachment: attachment, Card } = props;\n\n  if (!Card) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment,\n      children: (\n        <div\n          className='str-chat__attachment'\n          key={`key-image-${attachment.id}`}\n        >\n          <Card {...attachment} key={`key-card-${attachment.id}`} />\n          {renderAttachmentActions(props)}\n        </div>\n      ),\n      componentType: 'card',\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: <Card {...attachment} key={`key-card-${attachment.id}`} />,\n    componentType: 'card',\n  });\n};\n\nexport const renderFile = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { attachment: attachment, File } = props;\n\n  if (!File || !attachment.asset_url) return null;\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: (\n      <File attachment={attachment} key={`key-file-${attachment.id}`} />\n    ),\n    componentType: 'file',\n  });\n};\n\nexport const renderAudio = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: InnerAttachmentUIComponentProps<At>,\n) => {\n  const { attachment: attachment, Audio } = props;\n  if (!Audio) return null;\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: (\n      <div className='str-chat__attachment' key={`key-video-${attachment.id}`}>\n        <Audio og={attachment} />\n      </div>\n    ),\n    componentType: 'audio',\n  });\n};\n\nexport const renderMedia: React.FC<InnerAttachmentUIComponentProps> = (\n  props,\n) => {\n  const { attachment, Media } = props;\n\n  if (!Media) return null;\n\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment,\n      children: (\n        <div\n          className='str-chat__attachment str-chat__attachment-media'\n          key={`key-video-${attachment.id}`}\n        >\n          <div className='str-chat__player-wrapper'>\n            <Media\n              className='react-player'\n              controls\n              height='100%'\n              url={attachment.asset_url}\n              width='100%'\n            />\n          </div>\n          {renderAttachmentActions(props)}\n        </div>\n      ),\n      componentType: 'media',\n    });\n  }\n\n  return renderAttachmentWithinContainer({\n    attachment,\n    children: (\n      <div\n        className='str-chat__player-wrapper'\n        key={`key-video-${attachment.id}`}\n      >\n        {' '}\n        <Media\n          className='react-player'\n          controls\n          height='100%'\n          url={attachment.asset_url}\n          width='100%'\n        />\n      </div>\n    ),\n    componentType: 'media',\n  });\n};\n","import React from 'react';\n\n/**\n * Modal - Custom Image component used in modal\n */\nexport type ModalImageProps = {\n  /** The src attribute for the image element */\n  data: { source: string };\n};\n\nexport const ModalImage: React.FC<ModalImageProps> = (props) => {\n  const { data } = props;\n  return (\n    <div className='str-chat__modal-image__wrapper' data-testid='modal-image'>\n      <img className='str-chat__modal-image__image' src={data.source} />\n    </div>\n  );\n};\n","import React from 'react';\nimport Carousel, { Modal, ModalGateway, ViewType } from 'react-images';\n\nimport { ModalImage } from './ModalImage';\n\n/**\n * ImageModal - Small modal component\n */\nexport type ModalWrapperProps = {\n  /** The images for the Carousel component */\n  images: ViewType[];\n  /** Boolean for if modal is open*/\n  modalIsOpen: boolean;\n  /** click event handler for toggling modal */\n  toggleModal: (event: React.SyntheticEvent<HTMLButtonElement, Event>) => void;\n  /** The index for the component */\n  index?: number;\n};\n\nexport const ModalComponent: React.FC<ModalWrapperProps> = (props) => {\n  const { images, index, modalIsOpen, toggleModal } = props;\n\n  return (\n    <ModalGateway>\n      {modalIsOpen ? (\n        <Modal onClose={toggleModal}>\n          <Carousel\n            components={{\n              // @ts-expect-error\n              View: ModalImage,\n            }}\n            currentIndex={index}\n            views={images}\n          />\n        </Modal>\n      ) : null}\n    </ModalGateway>\n  );\n};\n","import React, { useMemo, useState } from 'react';\n\nimport { ModalComponent as ModalWrapper } from './ModalWrapper';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { DefaultAttachmentType } from '../../../types/types';\n\nexport type GalleryProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = {\n  images: Attachment<At>[];\n};\n\nconst UnMemoizedGallery = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: GalleryProps<At>,\n) => {\n  const { images } = props;\n\n  const [index, setIndex] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const { t } = useTranslationContext();\n\n  const toggleModal = (selectedIndex: number) => {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n\n  const formattedArray = useMemo(\n    () =>\n      images.map((image) => ({\n        source: image.image_url || image.thumb_url || '',\n      })),\n    [images],\n  );\n\n  const renderImages = images.slice(0, 3).map((image, i) => (\n    <div\n      className='str-chat__gallery-image'\n      data-testid='gallery-image'\n      key={`gallery-image-${i}`}\n      onClick={() => toggleModal(i)}\n    >\n      <img src={image.image_url || image.thumb_url} />\n    </div>\n  ));\n\n  return (\n    <div\n      className={`str-chat__gallery ${\n        images.length > 3 ? 'str-chat__gallery--square' : ''\n      }`}\n    >\n      {renderImages}\n      {images.length > 3 && (\n        <div\n          className='str-chat__gallery-placeholder'\n          onClick={() => toggleModal(3)}\n          style={{\n            backgroundImage: `url(${images[3].image_url})`,\n          }}\n        >\n          <p>\n            {t('{{ imageCount }} more', {\n              imageCount: images.length - 3,\n            })}\n          </p>\n        </div>\n      )}\n      <ModalWrapper\n        images={formattedArray}\n        index={index}\n        modalIsOpen={modalOpen}\n        toggleModal={() => setModalOpen(!modalOpen)}\n      />\n    </div>\n  );\n};\n\n/**\n * Gallery - displays up to 4 images in a simple responsive grid with a lightbox to view the images.\n * @example ./Gallery.md\n */\nexport const Gallery = React.memo(\n  UnMemoizedGallery,\n) as typeof UnMemoizedGallery;\n","import React, { useState } from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\nimport { ModalComponent as ModalWrapper } from './ModalWrapper';\n\nexport type ImageProps = {\n  /** The text fallback for the image */\n  fallback?: string;\n  /** The full size image url */\n  image_url?: string;\n  /** The thumb url */\n  thumb_url?: string;\n};\n\n/**\n * Image - a simple component that displays an image.\n * @example ./Image.md\n */\nexport const ImageComponent: React.FC<ImageProps> = (props) => {\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  const { fallback, image_url, thumb_url } = props;\n  const imageSrc = sanitizeUrl(image_url || thumb_url);\n  const formattedArray = [{ source: imageSrc }];\n\n  const toggleModal = () => setModalIsOpen(!modalIsOpen);\n\n  return (\n    <>\n      <img\n        alt={fallback}\n        className='str-chat__message-attachment--img'\n        data-testid='image-test'\n        onClick={toggleModal}\n        src={imageSrc}\n      />\n\n      <ModalWrapper\n        images={formattedArray}\n        index={0}\n        modalIsOpen={modalIsOpen}\n        toggleModal={toggleModal}\n      />\n    </>\n  );\n};\n","import React from 'react';\nimport ReactPlayer, { ReactPlayerProps } from 'react-player';\n\nimport {\n  AttachmentActionsProps,\n  AttachmentActions as DefaultAttachmentActions,\n} from './AttachmentActions';\nimport { AudioProps, Audio as DefaultAudio } from './Audio';\nimport { CardProps, Card as DefaultCard } from './Card';\nimport {\n  FileAttachment as DefaultFile,\n  FileAttachmentProps,\n} from './FileAttachment';\nimport {\n  isAudioAttachment,\n  isFileAttachment,\n  isGalleryAttachment,\n  isImageAttachment,\n  isMediaAttachment,\n  renderAudio,\n  renderCard,\n  renderFile,\n  renderGallery,\n  renderImage,\n  renderMedia,\n} from './utils';\n\nimport {\n  Gallery as DefaultGallery,\n  ImageComponent as DefaultImage,\n  GalleryProps,\n  ImageProps,\n} from '../Gallery';\n\nimport type { Attachment as StreamAttachment } from 'stream-chat';\n\nimport type { ActionHandlerReturnType } from '../Message';\n\nimport type { DefaultAttachmentType } from '../../../types/types';\n\nexport type AttachmentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = {\n  /**\n   * The attachment to render.\n   * See [Attachment structure](https://getstream.io/chat/docs/javascript/message_format/?language=javascript)\n   **/\n  attachments: ExtendedAttachment<At>[];\n  /**\n\t\tThe handler function to call when an action is selected on an attachment.\n\t\tExamples include canceling a \\/giphy command or shuffling the results.\n\t\t*/\n  actionHandler?: ActionHandlerReturnType;\n  /**\n   * Custom UI component for AttachmentActions.\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/AttachmentActions.tsx)\n   */\n  AttachmentActions?: React.ComponentType<AttachmentActionsProps>;\n  /**\n   * Custom UI component for audio type Attachment.\n   * Defaults to [Audio](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Audio.tsx)\n   */\n  Audio?: React.ComponentType<AudioProps>;\n  /**\n   * Custom UI component for card type Attachment.\n   * Defaults to [Card](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Card.tsx)\n   */\n  Card?: React.ComponentType<CardProps>;\n  /**\n   * Custom UI component for file type Attachment.\n   * Defaults to [File](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/FileAttachment.tsx)\n   */\n  File?: React.ComponentType<FileAttachmentProps>;\n  /**\n   * Custom UI component for gallery type Attachment.\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Gallery/Gallery.tsx)\n   */\n  Gallery?: React.ComponentType<GalleryProps>;\n  /**\n   * Custom UI component for image type Attachment.\n   * Defaults to [Image](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Gallery/Image.tsx)\n   */\n  Image?: React.ComponentType<ImageProps>;\n  /**\n   * Custom UI component for media type Attachment.\n   * Defaults to ReactPlayer from 'react-player'\n   */\n  Media?: React.ComponentType<ReactPlayerProps>;\n};\n\nexport type DefaultAttachmentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = Required<\n  Pick<\n    InnerAttachmentUIComponentProps,\n    | 'AttachmentActions'\n    | 'Audio'\n    | 'Card'\n    | 'File'\n    | 'Gallery'\n    | 'Image'\n    | 'Media'\n  >\n> & {\n  attachment: ExtendedAttachment<At>;\n  componentType: string;\n};\n\nexport type ExtendedAttachment<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = StreamAttachment<At> & {\n  asset_url?: string;\n  id?: string;\n  images?: Array<{\n    image_url?: string;\n    thumb_url?: string;\n  }>;\n  mime_type?: string;\n};\n\nexport type InnerAttachmentUIComponentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = Omit<AttachmentProps<At>, 'attachments'> & {\n  attachment: ExtendedAttachment<At>;\n};\n\n/**\n * Attachment - The message Attachment. A message can contain multiple Attachments.\n * By default, the component supports:\n * - AttachmentActions\n * - Audio\n * - Card\n * - File\n * - Gallery\n * - Image\n * - Media (video)\n *\n * @example ./Attachment.md\n */\nexport const Attachment = <\n  At extends DefaultAttachmentType = DefaultAttachmentType\n>(\n  props: AttachmentProps<At>,\n) => {\n  const {\n    AttachmentActions = DefaultAttachmentActions,\n    attachments,\n    Audio = DefaultAudio,\n    Card = DefaultCard,\n    File = DefaultFile,\n    Gallery = DefaultGallery,\n    Image = DefaultImage,\n    Media = ReactPlayer,\n    ...rest\n  } = props;\n\n  const gallery = {\n    images: attachments?.filter(\n      (attachment) =>\n        attachment.type === 'image' &&\n        !(attachment.og_scrape_url || attachment.title_link),\n    ),\n    type: 'gallery',\n  };\n\n  let newAttachments;\n\n  if (gallery.images?.length >= 2) {\n    newAttachments = [\n      ...attachments.filter(\n        (attachment) =>\n          !(\n            attachment.type === 'image' &&\n            !(attachment.og_scrape_url || attachment.title_link)\n          ),\n      ),\n      gallery,\n    ];\n  } else {\n    newAttachments = attachments;\n  }\n\n  const propsWithDefault = {\n    AttachmentActions,\n    Audio,\n    Card,\n    File,\n    Gallery,\n    Image,\n    Media,\n    ...rest,\n  };\n\n  return (\n    <>\n      {newAttachments?.map((attachment) => {\n        if (isGalleryAttachment(attachment)) {\n          return renderGallery({\n            ...propsWithDefault,\n            attachment,\n          });\n        }\n\n        if (isImageAttachment(attachment)) {\n          return renderImage({\n            ...propsWithDefault,\n            attachment,\n          });\n        }\n\n        if (isFileAttachment(attachment)) {\n          return renderFile({\n            ...propsWithDefault,\n            attachment,\n          });\n        }\n\n        if (isAudioAttachment(attachment)) {\n          return renderAudio({\n            ...propsWithDefault,\n            attachment,\n          });\n        }\n\n        if (isMediaAttachment(attachment)) {\n          return renderMedia({\n            ...propsWithDefault,\n            attachment,\n          });\n        }\n\n        return renderCard({\n          ...propsWithDefault,\n          attachment,\n        });\n      })}\n    </>\n  );\n};\n","import React from 'react';\n\n// eslint-disable-next-line react/display-name\nconst Item = React.forwardRef((props, innerRef) => {\n  const {\n    className,\n    component: Component,\n    item,\n    onClickHandler,\n    onSelectHandler,\n    selected,\n    style,\n  } = props;\n\n  const selectItem = () => onSelectHandler(item);\n\n  return (\n    <li className={`rta__item ${className || ''}`} style={style}>\n      <div\n        className={`rta__entity ${selected ? 'rta__entity--selected' : ''}`}\n        onClick={onClickHandler}\n        onFocus={selectItem}\n        onMouseEnter={selectItem}\n        ref={innerRef}\n        role='button'\n        tabIndex={0}\n      >\n        <Component entity={item} selected={selected} />\n      </div>\n    </li>\n  );\n});\n\nexport default Item;\n","/* eslint-disable */\nexport const KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32,\n};\n\n// This is self-made key shortcuts manager, used for caching key strokes\nclass Listener {\n  constructor() {\n    this.index = 0;\n    this.listeners = {};\n    this.refCount = 0;\n\n    this.f = (e) => {\n      const code = e.keyCode || e.which;\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\n        if (keyCode.includes(code)) fn(e);\n      });\n    };\n  }\n\n  startListen = () => {\n    if (!this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', this.f);\n    }\n    this.refCount++;\n  };\n\n  stopListen = () => {\n    this.refCount--;\n    if (!this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', this.f);\n    }\n  };\n\n  add = (keyCodes, fn) => {\n    let keyCode = keyCodes;\n\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n\n    this.listeners[this.index] = {\n      keyCode,\n      fn,\n    };\n\n    this.index += 1;\n\n    return this.index;\n  };\n\n  remove = (id) => {\n    delete this.listeners[id];\n  };\n\n  removeAll = () => {\n    this.listeners = {};\n    this.index = 0;\n  };\n}\n\nexport default new Listener();\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { TranslationContext } from '../../context/TranslationContext';\n\nimport Item from './Item';\nimport { KEY_CODES } from './listener';\n\nconst List = (props) => {\n  const {\n    className,\n    component,\n    dropdownScroll,\n    getSelectedItem,\n    getTextToReplace,\n    itemClassName,\n    itemStyle,\n    onSelect,\n    style,\n    SuggestionItem = Item,\n    value: propValue,\n    values,\n  } = props;\n\n  const { t } = useContext(TranslationContext);\n\n  const [selectedItem, setSelectedItem] = useState(undefined);\n\n  const itemsRef = [];\n\n  const isSelected = (item) =>\n    selectedItem === values.findIndex((value) => value.id === item.id);\n\n  const getId = (item) => {\n    const textToReplace = getTextToReplace(item);\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  const modifyText = (value) => {\n    if (!value) return;\n\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) getSelectedItem(value);\n  };\n\n  const handleClick = (e) => {\n    if (e) e.preventDefault?.();\n    modifyText(values[selectedItem]);\n  };\n\n  const selectItem = (item) => {\n    setSelectedItem(values.findIndex((value) => value.id === item.id));\n  };\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (event.which === KEY_CODES.UP) {\n        setSelectedItem((prevSelected) => {\n          if (prevSelected === undefined) return 0;\n          const newID =\n            prevSelected === 0 ? values.length - 1 : prevSelected - 1;\n          dropdownScroll(itemsRef[newID]);\n          return newID;\n        });\n      }\n\n      if (event.which === KEY_CODES.DOWN) {\n        setSelectedItem((prevSelected) => {\n          if (prevSelected === undefined) return 0;\n          const newID =\n            prevSelected === values.length - 1 ? 0 : prevSelected + 1;\n          dropdownScroll(itemsRef[newID]);\n          return newID;\n        });\n      }\n\n      if (\n        (event.which === KEY_CODES.ENTER || event.which === KEY_CODES.TAB) &&\n        selectedItem !== undefined\n      ) {\n        handleClick(event);\n        return setSelectedItem(undefined);\n      }\n\n      return null;\n    },\n    [selectedItem, values], // eslint-disable-line\n  );\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n\n  useEffect(() => {\n    if (values?.length) selectItem(values[0]);\n  }, [values]); // eslint-disable-line\n\n  const renderHeader = (value) => {\n    if (value[0] === '/') {\n      const html = `<strong>${value.replace('/', '')}</strong>`;\n      return `${t('Commands matching')} ${html}`;\n    }\n\n    if (value[0] === ':') {\n      const html = `<strong>${value.replace(':', '')}</strong>`;\n      return `${t('Emoji matching')} ${html}`;\n    }\n\n    if (value[0] === '@') {\n      const html = `<strong>${value.replace('@', '')}</strong>`;\n      return `${t('People matching')} ${html}`;\n    }\n\n    return null;\n  };\n\n  const restructureItem = (item) => {\n    const matched = item.name || item.id;\n\n    const editedPropValue = propValue.slice(1);\n    const parts = matched.split(new RegExp(`(${editedPropValue})`, 'gi'));\n\n    const itemNameParts = { match: editedPropValue, parts };\n\n    return { ...item, itemNameParts };\n  };\n\n  return (\n    <ul className={`rta__list ${className || ''}`} style={style}>\n      <li\n        className='rta__list-header'\n        dangerouslySetInnerHTML={{\n          __html: renderHeader(propValue),\n        }}\n      />\n      {values.map((item, i) => (\n        <SuggestionItem\n          className={itemClassName}\n          component={component}\n          item={restructureItem(item)}\n          key={getId(item)}\n          onClickHandler={handleClick}\n          onSelectHandler={selectItem}\n          ref={(ref) => {\n            itemsRef[i] = ref;\n          }}\n          selected={isSelected(item)}\n          style={itemStyle}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default List;\n","import { isValidElementType } from 'react-is';\n\nexport const DEFAULT_CARET_POSITION = 'next';\n\nexport function defaultScrollToItem(container, item) {\n  if (!item) return;\n\n  const itemHeight = parseInt(\n    getComputedStyle(item).getPropertyValue('height'),\n    10,\n  );\n\n  const containerHight =\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\n    itemHeight;\n\n  const actualScrollTop = container.scrollTop;\n  const itemOffsetTop = item.offsetTop;\n\n  if (\n    itemOffsetTop < actualScrollTop + containerHight &&\n    actualScrollTop < itemOffsetTop\n  ) {\n    return;\n  }\n\n  // eslint-disable-next-line\n  container.scrollTop = itemOffsetTop;\n}\n\nexport const errorMessage = (message) =>\n  console.error(\n    `RTA: dataProvider fails: ${message}\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\n  );\n\nexport const triggerPropsCheck = ({ trigger }) => {\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n\n  const triggers = Object.entries(trigger);\n\n  for (let i = 0; i < triggers.length; i += 1) {\n    const [triggerChar, settings] = triggers[i];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error(\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\n      );\n    }\n\n    // $FlowFixMe\n    const triggerSetting = settings;\n\n    const { callback, component, dataProvider, output } = triggerSetting;\n\n    if (!isValidElementType(component)) {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n  }\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport DefaultSuggestionList from './List';\nimport {\n  DEFAULT_CARET_POSITION,\n  defaultScrollToItem,\n  errorMessage,\n  triggerPropsCheck,\n} from './utils';\n\nclass ReactTextareaAutocomplete extends React.Component {\n  static defaultProps = {\n    closeOnClickOutside: true,\n    maxRows: 10,\n    minChar: 1,\n    movePopupAsYouType: false,\n    scrollToItem: true,\n    value: '',\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { loadingComponent, trigger, value } = this.props;\n\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    this.state = {\n      actualToken: '',\n      component: null,\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      listenerIndex: 0,\n      selectionEnd: 0,\n      selectionStart: 0,\n      top: null,\n      value: value || '',\n    };\n  }\n\n  componentDidMount() {\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\n\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\n      this._onEnter(e),\n    );\n\n    this.setState({\n      listenerIndex,\n    });\n\n    Listeners.startListen();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this._update(nextProps);\n  }\n\n  componentWillUnmount() {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  }\n\n  getSelectionPosition = () => {\n    if (!this.textareaRef) return null;\n\n    return {\n      selectionEnd: this.textareaRef.selectionEnd,\n      selectionStart: this.textareaRef.selectionStart,\n    };\n  };\n\n  getSelectedText = () => {\n    if (!this.textareaRef) return null;\n    const { selectionEnd, selectionStart } = this.textareaRef;\n\n    if (selectionStart === selectionEnd) return null;\n\n    return this.state.value.substr(\n      selectionStart,\n      selectionEnd - selectionStart,\n    );\n  };\n\n  setCaretPosition = (position = 0) => {\n    if (!this.textareaRef) return;\n\n    this.textareaRef.focus();\n    this.textareaRef.setSelectionRange(position, position);\n  };\n\n  getCaretPosition = () => {\n    if (!this.textareaRef) return 0;\n\n    return this.textareaRef.selectionEnd;\n  };\n\n  _onEnter = (event) => {\n    if (!this.textareaRef) return;\n\n    const trigger = this.state.currentTrigger;\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't submit if the element has focus or the shift key is pressed\n    if (!hasFocus || event.shiftKey === true) return;\n\n    if (!trigger || !this.state.data) {\n      // trigger a submit\n      this._replaceWord();\n      if (this.textareaRef) {\n        this.textareaRef.selectionEnd = 0;\n      }\n      this.props.handleSubmit(event);\n    }\n  };\n\n  _onSpace = () => {\n    if (!this.props.replaceWord || !this.textareaRef) return;\n\n    // don't change characters if the element doesn't have focus\n    const hasFocus = this.textareaRef.matches(':focus');\n    if (!hasFocus) return;\n\n    this._replaceWord();\n  };\n\n  _replaceWord = () => {\n    const { value } = this.state;\n\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\n    const lastWord = match && match[1];\n\n    if (!lastWord) return;\n\n    const spaces = match[2];\n\n    const newWord = this.props.replaceWord(lastWord);\n    if (newWord == null) return;\n\n    const textBeforeWord = value.slice(\n      0,\n      this.getCaretPosition() - match[0].length,\n    );\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\n\n    this.setState(\n      {\n        value: newText,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (this.props.onChange) this.props.onChange(e);\n      },\n    );\n  };\n\n  _onSelect = (newToken) => {\n    const { onChange } = this.props;\n    const { currentTrigger, selectionEnd, value: textareaValue } = this.state;\n\n    if (!currentTrigger) return;\n\n    const computeCaretPosition = (position, token, startToken) => {\n      switch (position) {\n        case 'start':\n          return startToken;\n        case 'next':\n        case 'end':\n          return startToken + token.length;\n        default:\n          if (!Number.isInteger(position)) {\n            throw new Error(\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\n            );\n          }\n\n          return position;\n      }\n    };\n\n    const textToModify = textareaValue.slice(0, selectionEnd);\n\n    const startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(`\\\\${currentTrigger}${`[^\\\\${currentTrigger}${'\\\\s'}]`}*$`),\n    );\n\n    // we add space after emoji is selected if a caret position is next\n    const newTokenString =\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\n\n    const newCaretPosition = computeCaretPosition(\n      newToken.caretPosition,\n      newTokenString,\n      startOfTokenPosition,\n    );\n\n    const modifiedText =\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\n\n    // set the new textarea value and after that set the caret back to its position\n    this.setState(\n      {\n        dataLoading: false,\n        value: textareaValue.replace(textToModify, modifiedText),\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n\n        this.setCaretPosition(newCaretPosition);\n      },\n    );\n    this._closeAutocomplete();\n  };\n\n  _getItemOnSelect = () => {\n    const { currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { callback } = triggerSettings;\n\n    if (!callback) return null;\n\n    return (item) => {\n      if (typeof callback !== 'function') {\n        throw new Error(\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n      if (callback) {\n        return callback(item, currentTrigger);\n      }\n      return null;\n    };\n  };\n\n  _getTextToReplace = () => {\n    const { actualToken, currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { output } = triggerSettings;\n\n    return (item) => {\n      if (\n        typeof item === 'object' &&\n        (!output || typeof output !== 'function')\n      ) {\n        throw new Error(\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n\n      if (output) {\n        const textToReplace = output(item, currentTrigger);\n\n        if (!textToReplace || typeof textToReplace === 'number') {\n          throw new Error(\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\n              textToReplace,\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\n          );\n        }\n\n        if (typeof textToReplace === 'string') {\n          return {\n            caretPosition: DEFAULT_CARET_POSITION,\n            text: textToReplace,\n          };\n        }\n\n        if (!textToReplace.text) {\n          throw new Error(\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        if (!textToReplace.caretPosition) {\n          throw new Error(\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        return textToReplace;\n      }\n\n      if (typeof item !== 'string') {\n        throw new Error('Output item should be string\\n');\n      }\n\n      return {\n        caretPosition: DEFAULT_CARET_POSITION,\n        text: `${currentTrigger}${item}${currentTrigger}`,\n      };\n    };\n  };\n\n  _getCurrentTriggerSettings = () => {\n    const { currentTrigger } = this.state;\n\n    if (!currentTrigger) return null;\n\n    return this.props.trigger[currentTrigger];\n  };\n\n  _getValuesFromProvider = () => {\n    const { mutes } = this.props;\n    const { actualToken, currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return;\n\n    const { component, dataProvider } = triggerSettings;\n\n    if (typeof dataProvider !== 'function') {\n      throw new Error('Trigger provider has to be a function!');\n    }\n\n    this.setState({ dataLoading: true });\n\n    // Modified: send the full text to support / style commands\n    dataProvider(actualToken, this.state.value, (data, token) => {\n      // Make sure that the result is still relevant for current query\n      if (token !== this.state.actualToken) return;\n\n      if (!Array.isArray(data)) {\n        throw new Error('Trigger provider has to provide an array!');\n      }\n\n      if (!isValidElementType(component)) {\n        throw new Error('Component should be defined!');\n      }\n\n      // throw away if we resolved old trigger\n      if (currentTrigger !== this.state.currentTrigger) return;\n\n      // if we haven't resolved any data let's close the autocomplete\n      if (!data.length) {\n        this._closeAutocomplete();\n        return;\n      }\n\n      if (currentTrigger === '@' && mutes.length) {\n        data = data.filter((suggestion) => {\n          const mutedUser = mutes.some(\n            (mute) => mute.target.id === suggestion.id,\n          );\n\n          if (mutedUser) return false;\n          return true;\n        });\n      }\n\n      this.setState({\n        component,\n        data,\n        dataLoading: false,\n      });\n    });\n  };\n\n  _getSuggestions = () => {\n    const { currentTrigger, data } = this.state;\n\n    if (!currentTrigger || !data || (data && !data.length)) return null;\n\n    return data;\n  };\n\n  _createRegExp = () => {\n    const { trigger } = this.props;\n\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n    // https://stackoverflow.com/a/8057827/2719917\n    this.tokenRegExp = new RegExp(\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\n    );\n  };\n\n  // TODO: This is an anti pattern in react, should come up with a better way\n  _update({ trigger, value }) {\n    const { value: oldValue } = this.state;\n    const { trigger: oldTrigger } = this.props;\n\n    if (value !== oldValue || !oldValue) this.setState({ value });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  }\n\n  /**\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\n   */\n  _closeAutocomplete = () => {\n    this.setState({\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      top: null,\n    });\n  };\n\n  _cleanUpProps = () => {\n    const props = { ...this.props };\n    const notSafe = [\n      'additionalTextareaProps',\n      'className',\n      'closeOnClickOutside',\n      'containerClassName',\n      'containerStyle',\n      'disableMentions',\n      'dropdownClassName',\n      'dropdownStyle',\n      'grow',\n      'handleSubmit',\n      'innerRef',\n      'itemClassName',\n      'itemStyle',\n      'listClassName',\n      'listStyle',\n      'loaderClassName',\n      'loaderStyle',\n      'loadingComponent',\n      'minChar',\n      'movePopupAsYouType',\n      'onCaretPositionChange',\n      'onChange',\n      'ref',\n      'replaceWord',\n      'scrollToItem',\n      'SuggestionItem',\n      'SuggestionList',\n      'trigger',\n      'value',\n    ];\n\n    // eslint-disable-next-line\n    for (const prop in props) {\n      if (notSafe.includes(prop)) delete props[prop];\n    }\n\n    return props;\n  };\n\n  _isCommand = (text) => {\n    if (text[0] !== '/') return false;\n\n    const tokens = text.split(' ');\n\n    if (tokens.length > 1) return false;\n\n    return true;\n  };\n\n  _changeHandler = (e) => {\n    const {\n      minChar,\n      movePopupAsYouType,\n      onCaretPositionChange,\n      onChange,\n      trigger,\n    } = this.props;\n    const { left, top } = this.state;\n\n    const textarea = e.target;\n    const { selectionEnd, selectionStart, value } = textarea;\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (onCaretPositionChange) onCaretPositionChange(this.getCaretPosition());\n\n    this.setState({ value });\n\n    let currentTrigger;\n    let lastToken;\n\n    if (this._isCommand(value)) {\n      currentTrigger = '/';\n      lastToken = value;\n    } else {\n      const tokenMatch = value\n        .slice(0, selectionEnd)\n        .match(/(?!^|\\W)?[:@][^\\s]*\\s?[^\\s]*$/g);\n\n      lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n\n      currentTrigger =\n        (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\n        null;\n    }\n\n    /*\n     if we lost the trigger token or there is no following character we want to close\n     the autocomplete\n    */\n    if (!lastToken || lastToken.length <= minChar) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    const actualToken = lastToken.slice(1);\n\n    // if trigger is not configured step out from the function, otherwise proceed\n    if (!currentTrigger) return;\n\n    if (\n      movePopupAsYouType ||\n      (top === null && left === null) ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1\n    ) {\n      const { left: newLeft, top: newTop } = getCaretCoordinates(\n        textarea,\n        selectionEnd,\n      );\n\n      this.setState({\n        // make position relative to textarea\n        left: newLeft,\n        top: newTop - this.textareaRef.scrollTop || 0,\n      });\n    }\n\n    this.setState(\n      {\n        actualToken,\n        currentTrigger,\n        selectionEnd,\n        selectionStart,\n      },\n      () => {\n        try {\n          this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      },\n    );\n  };\n\n  _selectHandler = (e) => {\n    const { onCaretPositionChange, onSelect } = this.props;\n\n    if (onCaretPositionChange) onCaretPositionChange(this.getCaretPosition());\n\n    if (onSelect) {\n      e.persist();\n      onSelect(e);\n    }\n  };\n\n  // The textarea itself is outside the auto-select dropdown.\n  _onClickAndBlurHandler = (e) => {\n    const { closeOnClickOutside, onBlur } = this.props;\n\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n    // that was actually clicked. If we clicked inside the auto-select dropdown, then\n    // that's not a blur, from the auto-select point of view, so then do nothing.\n    const el = e.relatedTarget;\n    if (\n      this.dropdownRef &&\n      el instanceof Node &&\n      this.dropdownRef.contains(el)\n    ) {\n      return;\n    }\n\n    if (closeOnClickOutside) this._closeAutocomplete();\n\n    if (onBlur) {\n      e.persist();\n      onBlur(e);\n    }\n  };\n\n  _onScrollHandler = () => this._closeAutocomplete();\n\n  _dropdownScroll = (item) => {\n    const { scrollToItem } = this.props;\n\n    if (!scrollToItem) return;\n\n    if (scrollToItem === true) {\n      defaultScrollToItem(this.dropdownRef, item);\n      return;\n    }\n\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n      throw new Error(\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\n      );\n    }\n\n    scrollToItem(this.dropdownRef, item);\n  };\n\n  renderSuggestionListContainer() {\n    const {\n      disableMentions,\n      dropdownClassName,\n      dropdownStyle,\n      itemClassName,\n      itemStyle,\n      listClassName,\n      SuggestionItem,\n      SuggestionList = DefaultSuggestionList,\n    } = this.props;\n\n    const { component, currentTrigger, dataLoading, value } = this.state;\n\n    const selectedItem = this._getItemOnSelect();\n    const suggestionData = this._getSuggestions();\n    const textToReplace = this._getTextToReplace();\n\n    if (\n      (dataLoading || suggestionData) &&\n      currentTrigger &&\n      !(disableMentions && currentTrigger === '@')\n    ) {\n      return (\n        <div\n          className={`rta__autocomplete ${dropdownClassName || ''}`}\n          ref={(ref) => {\n            this.dropdownRef = ref;\n          }}\n          style={dropdownStyle}\n        >\n          {component && suggestionData && textToReplace && (\n            <SuggestionList\n              className={listClassName}\n              component={component}\n              dropdownScroll={this._dropdownScroll}\n              getSelectedItem={selectedItem}\n              getTextToReplace={textToReplace}\n              itemClassName={itemClassName}\n              itemStyle={itemStyle}\n              onSelect={this._onSelect}\n              SuggestionItem={SuggestionItem}\n              value={value}\n              values={suggestionData}\n            />\n          )}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const { className, containerClassName, containerStyle, style } = this.props;\n\n    let { maxRows } = this.props;\n\n    const { dataLoading, value } = this.state;\n\n    if (!this.props.grow) maxRows = 1;\n\n    return (\n      <div\n        className={`rta ${dataLoading === true ? 'rta--loading' : ''} ${\n          containerClassName || ''\n        }`}\n        style={containerStyle}\n      >\n        {this.renderSuggestionListContainer()}\n        <Textarea\n          {...this._cleanUpProps()}\n          className={`rta__textarea ${className || ''}`}\n          maxRows={maxRows}\n          onBlur={this._onClickAndBlurHandler}\n          onChange={this._changeHandler}\n          onClick={this._onClickAndBlurHandler}\n          onFocus={this.props.onFocus}\n          onScroll={this._onScrollHandler}\n          onSelect={this._selectHandler}\n          ref={(ref) => {\n            if (this.props.innerRef) this.props.innerRef(ref);\n            this.textareaRef = ref;\n          }}\n          style={style}\n          value={value}\n          {...this.props.additionalTextareaProps}\n        />\n      </div>\n    );\n  }\n}\n\nReactTextareaAutocomplete.propTypes = {\n  className: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  containerClassName: PropTypes.string,\n  containerStyle: PropTypes.object,\n  disableMentions: PropTypes.bool,\n  dropdownClassName: PropTypes.string,\n  dropdownStyle: PropTypes.object,\n  itemClassName: PropTypes.string,\n  itemStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  listStyle: PropTypes.object,\n  loaderClassName: PropTypes.string,\n  loaderStyle: PropTypes.object,\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  style: PropTypes.object,\n  SuggestionList: PropTypes.elementType,\n  trigger: triggerPropsCheck,\n  value: PropTypes.string,\n};\n\nexport default ReactTextareaAutocomplete;\n","import React, { useEffect, useState } from 'react';\n\nexport type AvatarProps = {\n  /** Image URL or default is an image of the first initial of the name if there is one  */\n  image?: string | null;\n  /** Name of the image, used for title tag fallback */\n  name?: string;\n  /** click event handler */\n  onClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  /** mouseOver event handler */\n  onMouseOver?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  /** Shape of the avatar - circle, rounded or square\n   * @default circle\n   */\n  shape?: 'circle' | 'rounded' | 'square';\n  /** Size in pixels\n   * @default 32px\n   */\n  size?: number;\n};\n\n/**\n * Avatar - A round avatar image with fallback to username's first letter.\n * @example ./Avatar.md\n */\nexport const Avatar: React.FC<AvatarProps> = (props) => {\n  const {\n    image,\n    name,\n    onClick = () => undefined,\n    onMouseOver = () => undefined,\n    shape = 'circle',\n    size = 32,\n  } = props;\n\n  const [error, setError] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    setError(false);\n    setLoaded(false);\n  }, [image]);\n\n  const initials = (name || '').charAt(0);\n\n  return (\n    <div\n      className={`str-chat__avatar str-chat__avatar--${shape}`}\n      data-testid='avatar'\n      onClick={onClick}\n      onMouseOver={onMouseOver}\n      style={{\n        flexBasis: `${size}px`,\n        fontSize: `${size / 2}px`,\n        height: `${size}px`,\n        lineHeight: `${size}px`,\n        width: `${size}px`,\n      }}\n      title={name}\n    >\n      {image && !error ? (\n        <img\n          alt={initials}\n          className={`str-chat__avatar-image${\n            loaded ? ' str-chat__avatar-image--loaded' : ''\n          }`}\n          data-testid='avatar-img'\n          onError={() => setError(true)}\n          onLoad={() => setLoaded(true)}\n          src={image}\n          style={{\n            flexBasis: `${size}px`,\n            height: `${size}px`,\n            objectFit: 'cover',\n            width: `${size}px`,\n          }}\n        />\n      ) : (\n        <div\n          className='str-chat__avatar-fallback'\n          data-testid='avatar-fallback'\n        >\n          {initials}\n        </div>\n      )}\n    </div>\n  );\n};\n","import type { Reducer } from 'react';\nimport type {\n  Channel,\n  MessageResponse,\n  ChannelState as StreamChannelState,\n} from 'stream-chat';\n\nimport type { ChannelState, StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ChannelStateReducerAction<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> =\n  | {\n      channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n      type: 'initStateFromChannel';\n    }\n  | {\n      channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n      type: 'copyStateFromChannelOnEvent';\n    }\n  | {\n      message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n      type: 'setThread';\n    }\n  | {\n      hasMore: boolean;\n      messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n      type: 'loadMoreFinished';\n    }\n  | {\n      loadingMore: boolean;\n      type: 'setLoadingMore';\n    }\n  | {\n      channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n      type: 'copyMessagesFromChannel';\n      parentId?: string | null;\n    }\n  | {\n      channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n      message: MessageResponse<At, Ch, Co, Me, Re, Us>;\n      type: 'updateThreadOnEvent';\n    }\n  | {\n      channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n      message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n      type: 'openThread';\n    }\n  | {\n      type: 'startLoadingThread';\n    }\n  | {\n      threadHasMore: boolean;\n      threadMessages: Array<\n        ReturnType<\n          StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['formatMessage']\n        >\n      >;\n      type: 'loadMoreThreadFinished';\n    }\n  | {\n      type: 'closeThread';\n    }\n  | {\n      error: Error;\n      type: 'setError';\n    };\n\nexport type ChannelStateReducer<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Reducer<\n  ChannelState<At, Ch, Co, Ev, Me, Re, Us>,\n  ChannelStateReducerAction<At, Ch, Co, Ev, Me, Re, Us>\n>;\n\nexport const channelReducer = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  state: ChannelState<At, Ch, Co, Ev, Me, Re, Us>,\n  action: ChannelStateReducerAction<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  switch (action.type) {\n    case 'initStateFromChannel': {\n      const { channel } = action;\n      return {\n        ...state,\n        loading: false,\n        members: { ...channel.state.members },\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        read: { ...channel.state.read },\n        watcherCount: channel.state.watcher_count,\n        watchers: { ...channel.state.watchers },\n      };\n    }\n\n    case 'copyStateFromChannelOnEvent': {\n      const { channel } = action;\n      return {\n        ...state,\n        members: { ...channel.state.members },\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        read: { ...channel.state.read },\n        typing: { ...channel.state.typing },\n        watcherCount: channel.state.watcher_count,\n        watchers: { ...channel.state.watchers },\n      };\n    }\n\n    case 'setThread': {\n      const { message } = action;\n      return { ...state, thread: message };\n    }\n\n    case 'loadMoreFinished': {\n      const { hasMore, messages } = action;\n      return {\n        ...state,\n        hasMore,\n        loadingMore: false,\n        messages,\n      };\n    }\n\n    case 'setLoadingMore': {\n      const { loadingMore } = action;\n      return { ...state, loadingMore };\n    }\n\n    case 'copyMessagesFromChannel': {\n      const { channel, parentId } = action;\n      return {\n        ...state,\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        threadMessages: parentId\n          ? { ...channel.state.threads }[parentId] || []\n          : state.threadMessages,\n      };\n    }\n\n    case 'updateThreadOnEvent': {\n      const { channel, message } = action;\n      if (!state.thread) return state;\n      return {\n        ...state,\n        thread:\n          message?.id === state.thread.id\n            ? channel.state.formatMessage(message)\n            : state.thread,\n        threadMessages: state.thread?.id\n          ? { ...channel.state.threads }[state.thread.id] || []\n          : [],\n      };\n    }\n\n    case 'openThread': {\n      const { channel, message } = action;\n      return {\n        ...state,\n        thread: message,\n        threadMessages: message.id\n          ? { ...channel.state.threads }[message.id] || []\n          : [],\n      };\n    }\n\n    case 'startLoadingThread': {\n      return {\n        ...state,\n        threadLoadingMore: true,\n      };\n    }\n\n    case 'loadMoreThreadFinished': {\n      const { threadHasMore, threadMessages } = action;\n      return {\n        ...state,\n        threadHasMore,\n        threadLoadingMore: false,\n        threadMessages,\n      };\n    }\n\n    case 'closeThread': {\n      return {\n        ...state,\n        thread: null,\n        threadLoadingMore: false,\n        threadMessages: [],\n      };\n    }\n\n    case 'setError': {\n      const { error } = action;\n      return { ...state, error };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const initialState = {\n  error: null,\n  hasMore: true,\n  loading: true,\n  loadingMore: false,\n  members: {},\n  messages: [],\n  pinnedMessages: [],\n  read: {},\n  thread: null,\n  threadHasMore: true,\n  threadLoadingMore: false,\n  threadMessages: [],\n  typing: {},\n  watcherCount: 0,\n  watchers: {},\n};\n","import type { Data as EmojiData } from 'emoji-mart';\n\nimport type {\n  CommonEmoji,\n  EmojiSetDef,\n  MinimalEmoji,\n} from '../../context/ChannelContext';\n\nexport const commonEmoji: CommonEmoji = {\n  custom: true,\n  emoticons: [],\n  short_names: [],\n};\n\nexport const emojiSetDef: EmojiSetDef = {\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n  size: 20,\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n};\n\nexport const defaultMinimalEmojis: MinimalEmoji[] = [\n  {\n    colons: ':+1:',\n    id: 'like',\n    name: 'like',\n    sheet_x: 0,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    colons: ':heart:',\n    id: 'love',\n    name: 'love',\n    sheet_x: 1,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    colons: ':joy:',\n    id: 'haha',\n    name: 'haha',\n    sheet_x: 1,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    colons: ':astonished:',\n    id: 'wow',\n    name: 'wow',\n    sheet_x: 0,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    colons: ':pensive:',\n    id: 'sad',\n    name: 'sad',\n    sheet_x: 0,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    colons: ':angry:',\n    id: 'angry',\n    name: 'angry',\n    sheet_x: 1,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n];\n\n// use this only for small lists like in ReactionSelector\nexport const getStrippedEmojiData = (data?: EmojiData) => ({\n  ...data,\n  emojis: {},\n});\n","import React, { PropsWithChildren, useContext } from 'react';\n\nimport type { Channel, Mute, StreamChat } from 'stream-chat';\n\nimport { getDisplayName } from './utils/getDisplayName';\nimport type { Theme } from '../components/Chat/Chat';\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\nexport type ChatContextValue<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  theme: Theme;\n  channel?: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  closeMobileNav?: () => void;\n  mutes?: Mute<Us>[];\n  navOpen?: boolean;\n  openMobileNav?: () => void;\n  setActiveChannel?: (\n    newChannel?: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n    watchers?: { limit?: number; offset?: number },\n    event?: React.SyntheticEvent,\n  ) => void;\n};\n\nexport const ChatContext = React.createContext({} as ChatContextValue);\n\nexport const ChatProvider = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>({\n  children,\n  value,\n}: PropsWithChildren<{\n  value: ChatContextValue<At, Ch, Co, Ev, Me, Re, Us>;\n}>) => (\n  <ChatContext.Provider value={(value as unknown) as ChatContextValue}>\n    {children}\n  </ChatContext.Provider>\n);\n\nexport const useChatContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>() =>\n  (useContext(ChatContext) as unknown) as ChatContextValue<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >;\n\n/**\n * Typescript currently does not support partial inference so if ChatContext\n * typing is desired while using the HOC withChatContext the Props for the\n * wrapped component must be provided as the first generic.\n */\nexport const withChatContext = <\n  P extends UnknownType,\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  Component: React.ComponentType<P>,\n): React.FC<Omit<P, keyof ChatContextValue<At, Ch, Co, Ev, Me, Re, Us>>> => {\n  const WithChatContextComponent = (\n    props: Omit<P, keyof ChatContextValue<At, Ch, Co, Ev, Me, Re, Us>>,\n  ) => {\n    const chatContext = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n    return <Component {...(props as P)} {...chatContext} />;\n  };\n  WithChatContextComponent.displayName = `WithChatContext${getDisplayName(\n    Component,\n  )}`;\n  return WithChatContextComponent;\n};\n","import { useChatContext } from '../../../context/ChatContext';\n\nimport type { StreamChat, UpdatedMessage } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\ntype UpdateHandler<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (\n  cid: string,\n  updatedMessage: UpdatedMessage<At, Ch, Co, Me, Re, Us>,\n) => ReturnType<StreamChat<At, Ch, Co, Ev, Me, Re, Us>['updateMessage']>;\n\nexport const useEditMessageHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  doUpdateMessageRequest?: UpdateHandler<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { channel, client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  return (updatedMessage: UpdatedMessage<At, Ch, Co, Me, Re, Us>) => {\n    if (doUpdateMessageRequest && channel) {\n      return Promise.resolve(\n        doUpdateMessageRequest(channel.cid, updatedMessage),\n      );\n    }\n    return client.updateMessage(updatedMessage);\n  };\n};\n","import { useEffect, useRef } from 'react';\n\nexport const useIsMounted = () => {\n  const isMounted = useRef(true);\n\n  useEffect(\n    () => () => {\n      isMounted.current = false;\n    },\n    [],\n  );\n\n  return isMounted;\n};\n","import { MouseEvent, useCallback } from 'react';\n\nimport type { UserResponse } from 'stream-chat';\n\nimport type { DefaultUserType } from '../../../../types/types';\n\nexport type OnMentionAction<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (event: MouseEvent<HTMLElement>, user?: UserResponse<Us>) => void;\n\nexport const useMentionsHandlers = <\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  onMentionsHover?: OnMentionAction<Us>,\n  onMentionsClick?: OnMentionAction<Us>,\n) =>\n  useCallback(\n    (event: MouseEvent<HTMLElement>, mentioned_users: UserResponse<Us>[]) => {\n      if (\n        (!onMentionsHover && !onMentionsClick) ||\n        !(event.target instanceof HTMLElement)\n      ) {\n        return;\n      }\n\n      const target = event.target;\n      const tagName = target.tagName.toLowerCase();\n      const textContent = target.innerHTML.replace('*', '');\n\n      if (tagName === 'strong' && textContent[0] === '@') {\n        const userName = textContent.replace('@', '');\n        const user = mentioned_users.find(\n          ({ id, name }) => name === userName || id === userName,\n        );\n\n        if (\n          onMentionsHover &&\n          typeof onMentionsHover === 'function' &&\n          event.type === 'mouseover'\n        ) {\n          onMentionsHover(event, user);\n        }\n\n        if (\n          onMentionsClick &&\n          event.type === 'click' &&\n          typeof onMentionsClick === 'function'\n        ) {\n          onMentionsClick(event, user);\n        }\n      }\n    },\n    [onMentionsClick, onMentionsHover],\n  );\n","import React from 'react';\n\nconst LoadingItems: React.FC = () => (\n  <div className='str-chat__loading-channels-item'>\n    <div className='str-chat__loading-channels-avatar' />\n    <div className='str-chat__loading-channels-meta'>\n      <div className='str-chat__loading-channels-username' />\n      <div className='str-chat__loading-channels-status' />\n    </div>\n  </div>\n);\n\nconst UnMemoizedLoadingChannels: React.FC = () => (\n  <div className='str-chat__loading-channels'>\n    <LoadingItems />\n    <LoadingItems />\n    <LoadingItems />\n  </div>\n);\n\n/**\n * LoadingChannels - Fancy loading indicator for the ChannelList.\n * @example ./LoadingChannels.md\n */\nexport const LoadingChannels = React.memo(\n  UnMemoizedLoadingChannels,\n) as typeof UnMemoizedLoadingChannels;\n","import React from 'react';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport type LoadingErrorIndicatorProps = {\n  /** Error object */\n  error?: Error;\n};\n\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ../../docs/LoadingErrorIndicator.md\n */\nconst UnMemoizedLoadingErrorIndicator: React.FC<LoadingErrorIndicatorProps> = ({\n  error,\n}) => {\n  const { t } = useTranslationContext();\n\n  if (!error) return null;\n\n  return (\n    <div>{t('Error: {{ errorMessage }}', { errorMessage: error.message })}</div>\n  );\n};\n\nexport const LoadingErrorIndicator = React.memo(\n  UnMemoizedLoadingErrorIndicator,\n  (prevProps, nextProps) =>\n    prevProps.error?.message === nextProps.error?.message,\n) as typeof UnMemoizedLoadingErrorIndicator;\n","import React from 'react';\n\nexport type LoadingIndicatorProps = {\n  /** Set the color of the LoadingIndicator */\n  color?: string;\n  /** The size of the loading icon\n   * @default 15px\n   */\n  size?: number;\n};\n\nconst UnMemoizedLoadingIndicator: React.FC<LoadingIndicatorProps> = (props) => {\n  const { color = '#006CFF', size = 15 } = props;\n\n  return (\n    <div\n      className={`str-chat__loading-indicator ${color}`}\n      data-testid='loading-indicator-wrapper'\n      style={{ height: size, width: size }}\n    >\n      <svg\n        height={size}\n        viewBox={`0 0 30 30`}\n        width={size}\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <defs>\n          <linearGradient id='a' x1='50%' x2='50%' y1='0%' y2='100%'>\n            <stop offset='0%' stopColor='#FFF' stopOpacity='0' />\n            <stop\n              data-testid='loading-indicator-circle'\n              offset='100%'\n              stopColor={color}\n              stopOpacity='1'\n              style={{ stopColor: color }}\n            />\n          </linearGradient>\n        </defs>\n        <path\n          d='M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z'\n          fill='url(#a)'\n          fillRule='evenodd'\n        />\n      </svg>\n    </div>\n  );\n};\n\n/**\n * LoadingIndicator - Just a simple loading spinner.\n * @example ./LoadingIndicator.md\n */\nexport const LoadingIndicator = React.memo(\n  UnMemoizedLoadingIndicator,\n  (prevProps, nextProps) =>\n    prevProps.color === nextProps.color && prevProps.size === nextProps.size,\n) as typeof UnMemoizedLoadingIndicator;\n","import React, { PropsWithChildren, useContext } from 'react';\n\nimport type {\n  Data as EmojiMartData,\n  NimbleEmojiIndex,\n  NimbleEmojiProps,\n  NimblePickerProps,\n} from 'emoji-mart';\nimport type {\n  Attachment,\n  Channel,\n  MessageResponse,\n  Mute,\n  ChannelState as StreamChannelState,\n  StreamChat,\n  UpdatedMessage,\n  UpdateMessageAPIResponse,\n  UserResponse,\n} from 'stream-chat';\n\nimport type { AttachmentProps } from '../components/Attachment/Attachment';\nimport type { ChannelStateReducerAction } from '../components/Channel/channelState';\nimport type { MessageUIComponentProps } from '../components/Message/types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\nexport type ChannelNotifications = Array<{\n  id: string;\n  text: string;\n  type: 'success' | 'error';\n}>;\n\nexport type CommonEmoji = {\n  custom: boolean;\n  emoticons: [];\n  short_names: [];\n};\n\nexport type EmojiSetDef = {\n  sheetColumns: number;\n  sheetRows: number;\n  sheetSize: number;\n  size: number;\n  spriteUrl: string;\n};\n\nexport type MinimalEmoji = CommonEmoji &\n  EmojiSetDef & {\n    colons: string;\n    id: string;\n    name: string;\n    sheet_x: number;\n    sheet_y: number;\n  };\n\nexport type EmojiConfig = {\n  commonEmoji: CommonEmoji;\n  defaultMinimalEmojis: MinimalEmoji[];\n  Emoji: React.ComponentType<NimbleEmojiProps>;\n  emojiData: EmojiMartData;\n  EmojiIndex: NimbleEmojiIndex;\n  EmojiPicker: React.ComponentType<NimblePickerProps>;\n  emojiSetDef: EmojiSetDef;\n};\n\nexport type MessageAttachments<\n  At extends DefaultAttachmentType = DefaultAttachmentType\n> = Array<Attachment<At> & { file_size?: number; mime_type?: string }>;\n\nexport type MessageToSend<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  attachments?: MessageAttachments<At>;\n  errorStatusCode?: number;\n  id?: string;\n  mentioned_users?: UserResponse<Us>[];\n  parent?: MessageResponse<At, Ch, Co, Me, Re, Us>;\n  parent_id?: string;\n  status?: string;\n  text?: string;\n};\n\nexport type RetrySendMessage<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>) => Promise<void>;\n\nexport type StreamMessage<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> =\n  | ReturnType<StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['formatMessage']>\n  | MessageResponse<At, Ch, Co, Me, Re, Us>;\n\nexport type ChannelState<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  error?: Error | null;\n  hasMore?: boolean;\n  loading?: boolean;\n  loadingMore?: boolean;\n  members?: StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['members'];\n  messages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n  pinnedMessages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n  read?: StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['read'];\n  thread?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us> | null;\n  threadHasMore?: boolean;\n  threadLoadingMore?: boolean;\n  threadMessages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n  typing?: StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['typing'];\n  watcherCount?: number;\n  watchers?: StreamChannelState<At, Ch, Co, Ev, Me, Re, Us>['watchers'];\n};\n\nexport type ChannelContextValue<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = ChannelState<At, Ch, Co, Ev, Me, Re, Us> & {\n  addNotification: (text: string, type: 'success' | 'error') => void;\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  notifications: ChannelNotifications;\n  acceptedFiles?: string[];\n  Attachment?: React.ComponentType<AttachmentProps<At>>;\n  closeThread?: (event: React.SyntheticEvent) => void;\n  dispatch?: React.Dispatch<\n    ChannelStateReducerAction<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  editMessage?: (\n    message: UpdatedMessage<At, Ch, Co, Me, Re, Us>,\n  ) => Promise<UpdateMessageAPIResponse<At, Ch, Co, Me, Re, Us> | void>;\n  emojiConfig?: EmojiConfig;\n  loadMore?: ((limit: number) => Promise<number>) | (() => Promise<void>);\n  loadMoreThread?: () => Promise<void>;\n  maxNumberOfFiles?: number;\n  Message?: React.ComponentType<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  multipleUploads?: boolean;\n  mutes?: Mute<Us>[];\n  onMentionsClick?: (\n    event: React.MouseEvent<HTMLElement>,\n    user: UserResponse<Us>[],\n  ) => void;\n  onMentionsHover?: (\n    event: React.MouseEvent<HTMLElement>,\n    user: UserResponse<Us>[],\n  ) => void;\n  openThread?: (\n    message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n    event: React.SyntheticEvent,\n  ) => void;\n  removeMessage?: (message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>) => void;\n  retrySendMessage?: RetrySendMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  sendMessage?: (\n    message: MessageToSend<At, Ch, Co, Me, Re, Us>,\n  ) => Promise<void>;\n  updateMessage?: (message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>) => void;\n  watcher_count?: number;\n};\n\nexport const ChannelContext = React.createContext<ChannelContextValue>(\n  {} as ChannelContextValue,\n);\n\nexport const ChannelProvider = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>({\n  children,\n  value,\n}: PropsWithChildren<{\n  value: ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>;\n}>) => (\n  <ChannelContext.Provider value={(value as unknown) as ChannelContextValue}>\n    {children}\n  </ChannelContext.Provider>\n);\n\nexport const useChannelContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>() =>\n  (useContext(ChannelContext) as unknown) as ChannelContextValue<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >;\n\n/**\n * Typescript currently does not support partial inference, so if ChannelContext\n * typing is desired while using the HOC withChannelContext, the Props for the\n * wrapped component must be provided as the first generic.\n */\nexport const withChannelContext = <\n  P extends UnknownType,\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  Component: React.ComponentType<P>,\n): React.FC<Omit<P, keyof ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>>> => {\n  const WithChannelContextComponent = (\n    props: Omit<P, keyof ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>>,\n  ) => {\n    const channelContext = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n    return <Component {...(props as P)} {...channelContext} />;\n  };\n\n  WithChannelContextComponent.displayName = (\n    Component.displayName ||\n    Component.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return WithChannelContextComponent;\n};\n","import {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type { BaseSyntheticEvent } from 'react';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type FormData = Record<string, string>;\n\nexport type ActionHandlerReturnType = (\n  dataOrName?: string | FormData,\n  value?: string,\n  event?: BaseSyntheticEvent,\n) => Promise<void>;\n\nexport const handleActionWarning = `Action handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n\nexport function useActionHandler<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n): ActionHandlerReturnType {\n  const { channel, removeMessage, updateMessage } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  return async (dataOrName, value, event) => {\n    if (event) event.preventDefault();\n\n    if (!message || !updateMessage || !removeMessage || !channel) {\n      console.warn(handleActionWarning);\n      return;\n    }\n\n    const messageID = message.id;\n    let formData: FormData = {};\n\n    // deprecated: value&name should be removed in favor of data obj\n    if (typeof dataOrName === 'string') {\n      formData[dataOrName] = value as string;\n    } else {\n      formData = { ...dataOrName };\n    }\n\n    if (messageID) {\n      const data = await channel.sendAction(messageID, formData);\n\n      if (data?.message) {\n        updateMessage(data.message);\n      } else {\n        removeMessage(message);\n      }\n    }\n  };\n}\n","import { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\n\nexport type DeviceWidth = {\n  device: 'mobile' | 'tablet' | 'full';\n  width: number;\n};\n\nconst getDeviceWidth = (width: number): DeviceWidth => {\n  if (width < 768) return { device: 'mobile', width };\n  if (width < 1024) return { device: 'tablet', width };\n  return { device: 'full', width };\n};\n\nexport const useBreakpoint = () => {\n  const [breakpoint, setBreakpoint] = useState(\n    getDeviceWidth(window.innerWidth),\n  );\n\n  useEffect(() => {\n    const getInnerWidth = throttle(\n      () => setBreakpoint(getDeviceWidth(window.innerWidth)),\n      200,\n    );\n\n    window.addEventListener('resize', getInnerWidth);\n    return () => window.removeEventListener('resize', getInnerWidth);\n  }, []);\n\n  return breakpoint;\n};\n","import {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useDeleteHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n): MouseEventHandler => {\n  const { client, updateMessage } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  return async (event) => {\n    event.preventDefault();\n    if (!message?.id || !client || !updateMessage) {\n      return;\n    }\n\n    const data = await client.deleteMessage(message.id);\n    updateMessage(data.message);\n  };\n};\n","import { MouseEvent, useState } from 'react';\n\nimport type { MouseEventHandler } from '../types';\n\nexport type EditHandlerReturnType = {\n  clearEdit: (event?: React.MouseEvent<HTMLElement>) => void;\n  editing: boolean;\n  setEdit: MouseEventHandler;\n};\n\nexport const useEditHandler = (\n  customInitialState = false,\n  customSetEditing?: (event?: MouseEvent<HTMLElement>) => void,\n  customClearEditingHandler?: (event?: React.MouseEvent<HTMLElement>) => void,\n): EditHandlerReturnType => {\n  const [editing, setEditing] = useState(customInitialState);\n\n  const setEdit =\n    customSetEditing ||\n    ((event) => {\n      if (event?.preventDefault) {\n        event.preventDefault();\n      }\n      setEditing(true);\n    });\n\n  const clearEdit =\n    customClearEditingHandler ||\n    ((event) => {\n      if (event?.preventDefault) {\n        event.preventDefault();\n      }\n      setEditing(false);\n    });\n\n  return { clearEdit, editing, setEdit };\n};\n","import deepequal from 'react-fast-compare';\n\nimport type { TFunction } from 'i18next';\nimport type {\n  MessageResponse,\n  Mute,\n  StreamChat,\n  UserResponse,\n} from 'stream-chat';\n\nimport type { PinPermissions } from './hooks';\nimport type { MessageProps, MessageUIComponentProps } from './types';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n */\nexport const validateAndGetMessage = <T extends unknown[]>(\n  func: (...args: T) => unknown,\n  args: T,\n) => {\n  if (!func || typeof func !== 'function') return null;\n\n  // below is due to tests passing a single argument\n  // rather than an array.\n  if (!(args instanceof Array)) {\n    // @ts-expect-error\n    args = [args];\n  }\n\n  const returnValue = func(...args);\n\n  if (typeof returnValue !== 'string') return null;\n\n  return returnValue;\n};\n\n/**\n * Tell if the owner of the current message is muted\n */\nexport const isUserMuted = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  mutes?: Mute<Us>[],\n) => {\n  if (!mutes || !message) return false;\n\n  const userMuted = mutes.filter((el) => el.target.id === message.user?.id);\n  return !!userMuted.length;\n};\n\nexport const MESSAGE_ACTIONS = {\n  delete: 'delete',\n  edit: 'edit',\n  flag: 'flag',\n  mute: 'mute',\n  pin: 'pin',\n  react: 'react',\n  reply: 'reply',\n};\n\nexport type MessageActionsArray<T extends string = string> = Array<\n  'delete' | 'edit' | 'flag' | 'mute' | 'pin' | 'react' | 'reply' | T\n>;\n\nexport const defaultPinPermissions: PinPermissions = {\n  commerce: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false,\n  },\n  gaming: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false,\n  },\n  livestream: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n  messaging: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n  team: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n};\n\nexport type Capabilities = {\n  canDelete?: boolean;\n  canEdit?: boolean;\n  canFlag?: boolean;\n  canMute?: boolean;\n  canPin?: boolean;\n  canReact?: boolean;\n  canReply?: boolean;\n};\n\nexport const getMessageActions = (\n  actions: string[] | boolean,\n  {\n    canDelete,\n    canEdit,\n    canFlag,\n    canMute,\n    canPin,\n    canReact,\n    canReply,\n  }: Capabilities,\n): MessageActionsArray => {\n  const messageActionsAfterPermission = [];\n  let messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = [...actions];\n  } else {\n    return [];\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  if (canPin && messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.pin);\n  }\n\n  if (canReact && messageActions.indexOf(MESSAGE_ACTIONS.react) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.react);\n  }\n\n  if (canReply && messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.reply);\n  }\n\n  return messageActionsAfterPermission;\n};\n\nexport const showMessageActionsBox = (actions: MessageActionsArray) => {\n  if (actions.length === 0) {\n    return false;\n  }\n\n  if (\n    actions.length === 1 &&\n    (actions.includes('react') || actions.includes('reply'))\n  ) {\n    return false;\n  }\n\n  if (\n    actions.length === 2 &&\n    actions.includes('react') &&\n    actions.includes('reply')\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const areMessagePropsEqual = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  prevProps: MessageProps<At, Ch, Co, Ev, Me, Re, Us>,\n  nextProps: MessageProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { message: prevMessage } = prevProps;\n  const { message: nextMessage } = nextProps;\n\n  const messagesAreEqual =\n    prevMessage.deleted_at === nextMessage.deleted_at &&\n    prevMessage.latest_reactions?.length ===\n      nextMessage.latest_reactions?.length &&\n    prevMessage.own_reactions?.length === nextMessage.own_reactions?.length &&\n    prevMessage.pinned === nextMessage.pinned &&\n    prevMessage.reply_count === nextMessage.reply_count &&\n    prevMessage.status === nextMessage.status &&\n    prevMessage.text === nextMessage.text &&\n    prevMessage.type === nextMessage.type &&\n    prevMessage.updated_at === nextMessage.updated_at;\n\n  if (!messagesAreEqual) return false;\n\n  const deepEqualProps =\n    deepequal(nextProps.readBy, prevProps.readBy) &&\n    deepequal(nextProps.groupStyles, prevProps.groupStyles) && // last 3 messages can have different group styles\n    deepequal(nextProps.mutes, prevProps.mutes) &&\n    deepequal(nextProps.lastReceivedId, prevProps.lastReceivedId);\n\n  if (!deepEqualProps) return false;\n\n  return (\n    prevProps.messageListRect === nextProps.messageListRect // MessageList wrapper layout changes\n  );\n};\n\nexport const areMessageUIPropsEqual = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  prevProps: MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n    showDetailedReactions?: boolean;\n  },\n  nextProps: MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n    showDetailedReactions?: boolean;\n  },\n) => {\n  const {\n    lastReceivedId: prevLastReceivedId,\n    message: prevMessage,\n  } = prevProps;\n  const {\n    lastReceivedId: nextLastReceivedId,\n    message: nextMessage,\n  } = nextProps;\n\n  if (nextProps.editing !== prevProps.editing) return false;\n\n  if (nextProps.showDetailedReactions !== prevProps.showDetailedReactions) {\n    return false;\n  }\n\n  if (\n    (prevMessage.id === prevLastReceivedId ||\n      prevMessage.id === nextLastReceivedId) &&\n    prevLastReceivedId !== nextLastReceivedId\n  ) {\n    return false;\n  }\n\n  const messagesAreEqual =\n    prevMessage.deleted_at === nextMessage.deleted_at &&\n    prevMessage.latest_reactions?.length ===\n      nextMessage.latest_reactions?.length &&\n    prevMessage.own_reactions?.length === nextMessage.own_reactions?.length &&\n    prevMessage.pinned === nextMessage.pinned &&\n    prevMessage.reply_count === nextMessage.reply_count &&\n    prevMessage.status === nextMessage.status &&\n    prevMessage.text === nextMessage.text &&\n    prevMessage.type === nextMessage.type &&\n    prevMessage.updated_at === nextMessage.updated_at;\n\n  if (!messagesAreEqual) return false;\n\n  return true;\n};\n\nexport const messageHasReactions = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n) => !!message?.latest_reactions && !!message.latest_reactions.length;\n\nexport const messageHasAttachments = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n) => !!message?.attachments && !!message.attachments.length;\n\nexport const getImages = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: MessageResponse<At, Ch, Co, Me, Re, Us>,\n) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter((item) => item.type === 'image');\n};\n\nexport const getNonImageAttachments = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: MessageResponse<At, Ch, Co, Me, Re, Us>,\n) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter((item) => item.type !== 'image');\n};\n\nexport const getReadByTooltipText = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  users: UserResponse<Us>[],\n  t: TFunction,\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  let outStr = '';\n\n  if (!t) {\n    throw new Error(\n      '`getReadByTooltipText was called, but translation function is not available`',\n    );\n  }\n\n  // first filter out client user, so restLength won't count it\n  const otherUsers = users\n    .filter((item) => item && client?.user && item.id !== client.user.id)\n    .map((item) => item.name || item.id);\n\n  const slicedArr = otherUsers.slice(0, 5);\n  const restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = `${slicedArr[0]} `;\n  } else if (slicedArr.length === 2) {\n    // joins all with \"and\" but =no commas\n    // example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1],\n    });\n  } else if (slicedArr.length > 2) {\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      const lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser,\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength,\n      });\n    }\n  }\n\n  return outStr;\n};\n","import { validateAndGetMessage } from '../utils';\n\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type { StreamMessage } from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const missingUseFlagHandlerParameterWarning =\n  'useFlagHandler was called but it is missing one or more necessary parameters.';\n\nexport type FlagMessageNotifications<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  getErrorNotification?: (\n    message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => string;\n  getSuccessNotification?: (\n    message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => string;\n  notify?: (notificationText: string, type: 'success' | 'error') => void;\n};\n\nexport const useFlagHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  notifications: FlagMessageNotifications<At, Ch, Co, Ev, Me, Re, Us> = {},\n): MouseEventHandler => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  return async (event) => {\n    event.preventDefault();\n\n    const {\n      getErrorNotification,\n      getSuccessNotification,\n      notify,\n    } = notifications;\n\n    if (!client || !t || !notify || !message?.id) {\n      console.warn(missingUseFlagHandlerParameterWarning);\n      return;\n    }\n\n    try {\n      await client.flagMessage(message.id);\n\n      const successMessage =\n        getSuccessNotification &&\n        validateAndGetMessage(getSuccessNotification, [message]);\n\n      notify(\n        successMessage || t('Message has been successfully flagged'),\n        'success',\n      );\n    } catch (e) {\n      const errorMessage =\n        getErrorNotification &&\n        validateAndGetMessage(getErrorNotification, [message]);\n\n      notify(\n        errorMessage ||\n          t(\n            'Error adding flag: Either the flag already exist or there is issue with network connection ...',\n          ),\n        'error',\n      );\n    }\n  };\n};\n","import {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type { MouseEvent } from 'react';\nimport type { UserResponse } from 'stream-chat';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type CustomMentionHandler<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (event: MouseEvent<HTMLElement>, user: UserResponse<Us>[]) => void;\n\nexport type MentionedUserEventHandler<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (\n  event: MouseEvent<HTMLElement>,\n  mentionedUsers: UserResponse<Us>[],\n) => void;\n\nfunction createEventHandler<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  fn?: MentionedUserEventHandler<Us>,\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n): MouseEventHandler {\n  return (event) => {\n    if (typeof fn !== 'function' || !message?.mentioned_users) {\n      return;\n    }\n    fn(event, message.mentioned_users);\n  };\n}\n\nexport const useMentionsHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  customMentionHandler?: {\n    onMentionsClick?: CustomMentionHandler<Us>;\n    onMentionsHover?: CustomMentionHandler<Us>;\n  },\n) => {\n  const {\n    onMentionsClick: channelOnMentionsClick,\n    onMentionsHover: channelOnMentionsHover,\n  } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const onMentionsClick =\n    customMentionHandler?.onMentionsClick ||\n    channelOnMentionsClick ||\n    (() => null);\n\n  const onMentionsHover =\n    customMentionHandler?.onMentionsHover ||\n    channelOnMentionsHover ||\n    (() => null);\n\n  return {\n    onMentionsClick: createEventHandler(onMentionsClick, message),\n    onMentionsHover: createEventHandler(onMentionsHover, message),\n  };\n};\n\nexport const useMentionsUIHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  eventHandlers?: {\n    onMentionsClick?: MouseEventHandler;\n    onMentionsHover?: MouseEventHandler;\n  },\n) => {\n  const { onMentionsClick, onMentionsHover } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  return {\n    onMentionsClick:\n      eventHandlers?.onMentionsClick ||\n      createEventHandler(onMentionsClick, message),\n    onMentionsHover:\n      eventHandlers?.onMentionsHover ||\n      createEventHandler(onMentionsHover, message),\n  };\n};\n","import { useEffect, useState } from 'react';\n\nimport { useBreakpoint } from './useBreakpoint';\n\nimport type { MouseEventHandler } from '../types';\n\nexport const useMobilePress = () => {\n  const [targetMessage, setTargetMessage] = useState<Element | null>(null);\n\n  const breakpoint = useBreakpoint();\n\n  const handleMobilePress: MouseEventHandler = (event) => {\n    if (event.target instanceof HTMLElement && breakpoint.device === 'mobile') {\n      const closestMessage = event.target.closest('.str-chat__message-simple');\n\n      if (!closestMessage) return;\n\n      setTargetMessage(closestMessage);\n\n      if (closestMessage.classList.contains('mobile-press')) {\n        closestMessage.classList.remove('mobile-press');\n      } else {\n        closestMessage.classList.add('mobile-press');\n      }\n    }\n  };\n\n  useEffect(() => {\n    function handleClick(event: globalThis.MouseEvent) {\n      const isClickInside = targetMessage?.contains(\n        event.target as HTMLElement,\n      );\n\n      if (!isClickInside && targetMessage) {\n        targetMessage.classList.remove('mobile-press');\n      }\n    }\n\n    if (breakpoint.device === 'mobile') {\n      document.addEventListener('click', handleClick);\n    }\n    return () => document.removeEventListener('click', handleClick);\n  }, [breakpoint, targetMessage]);\n\n  return { handleMobilePress };\n};\n","import { isUserMuted, validateAndGetMessage } from '../utils';\nimport {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\n\nimport type { UserResponse } from 'stream-chat';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const missingUseMuteHandlerParamsWarning =\n  'useMuteHandler was called but it is missing one or more necessary parameter.';\n\nexport type MuteUserNotifications<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  getErrorNotification?: (user: UserResponse<Us>) => string;\n  getSuccessNotification?: (user: UserResponse<Us>) => string;\n  notify?: (notificationText: string, type: 'success' | 'error') => void;\n};\n\nexport const useMuteHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  notifications: MuteUserNotifications<Us> = {},\n): MouseEventHandler => {\n  const { mutes } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  return async (event) => {\n    event.preventDefault();\n\n    const {\n      getErrorNotification,\n      getSuccessNotification,\n      notify,\n    } = notifications;\n\n    if (!t || !message?.user || !notify || !client) {\n      console.warn(missingUseMuteHandlerParamsWarning);\n      return;\n    }\n\n    if (!isUserMuted(message, mutes)) {\n      try {\n        await client.muteUser(message.user.id);\n\n        const successMessage =\n          getSuccessNotification &&\n          validateAndGetMessage(getSuccessNotification, [message.user]);\n\n        notify(\n          successMessage ||\n            t(`{{ user }} has been muted`, {\n              user: message.user.name || message.user.id,\n            }),\n          'success',\n        );\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message.user]);\n\n        notify(errorMessage || t('Error muting a user ...'), 'error');\n      }\n    } else {\n      try {\n        await client.unmuteUser(message.user.id);\n\n        const fallbackMessage = t(`{{ user }} has been unmuted`, {\n          user: message.user.name || message.user.id,\n        });\n\n        const successMessage =\n          (getSuccessNotification &&\n            validateAndGetMessage(getSuccessNotification, [message.user])) ||\n          fallbackMessage;\n\n        if (typeof successMessage === 'string') {\n          notify(successMessage, 'success');\n        }\n      } catch (e) {\n        const errorMessage =\n          (getErrorNotification &&\n            validateAndGetMessage(getErrorNotification, [message.user])) ||\n          t('Error unmuting a user ...');\n\n        if (typeof errorMessage === 'string') {\n          notify(errorMessage, 'error');\n        }\n      }\n    }\n  };\n};\n","import {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useOpenThreadHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  customOpenThread?: (\n    message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n    event: React.SyntheticEvent,\n  ) => void,\n): MouseEventHandler => {\n  const { openThread: channelOpenThread } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  const openThread = customOpenThread || channelOpenThread;\n\n  return (event) => {\n    if (!openThread || !message) {\n      console.warn(\n        'Open thread handler was called but it is missing one of its parameters',\n      );\n      return;\n    }\n\n    openThread(message, event);\n  };\n};\n","import { validateAndGetMessage } from '../utils';\n\nimport {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\n\nimport type { UpdatedMessage } from 'stream-chat';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type PinEnabledUserRoles<T extends string = string> = Partial<\n  Record<T, boolean>\n> & {\n  admin?: boolean;\n  anonymous?: boolean;\n  channel_member?: boolean;\n  channel_moderator?: boolean;\n  guest?: boolean;\n  member?: boolean;\n  moderator?: boolean;\n  owner?: boolean;\n  user?: boolean;\n};\n\nexport type PinPermissions<\n  T extends string = string,\n  U extends string = string\n> = Partial<Record<T, PinEnabledUserRoles<U>>> & {\n  commerce?: PinEnabledUserRoles<U>;\n  gaming?: PinEnabledUserRoles<U>;\n  livestream?: PinEnabledUserRoles<U>;\n  messaging?: PinEnabledUserRoles<U>;\n  team?: PinEnabledUserRoles<U>;\n};\n\nexport type PinMessageNotifications<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  getErrorNotification?: (\n    message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => string;\n  notify?: (notificationText: string, type: 'success' | 'error') => void;\n};\n\nexport const usePinHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  permissions?: PinPermissions,\n  notifications: PinMessageNotifications<At, Ch, Co, Ev, Me, Re, Us> = {},\n) => {\n  const { getErrorNotification, notify } = notifications;\n\n  const { channel, client } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const canPin = () => {\n    if (\n      !client?.userID ||\n      !channel?.state ||\n      !permissions ||\n      !permissions[channel.type]\n    ) {\n      return false;\n    }\n\n    const currentChannelPermissions = permissions[channel.type];\n    const currentChannelMember = channel.state.members[client.userID];\n    const currentChannelWatcher = channel.state.watchers[client.userID];\n\n    if (\n      currentChannelPermissions &&\n      typeof client.user?.role === 'string' &&\n      currentChannelPermissions[client.user.role]\n    ) {\n      return true;\n    }\n\n    if (\n      currentChannelMember &&\n      typeof currentChannelMember.role === 'string' &&\n      currentChannelPermissions &&\n      currentChannelPermissions[currentChannelMember.role]\n    ) {\n      return true;\n    }\n\n    if (\n      currentChannelWatcher &&\n      typeof currentChannelWatcher.role === 'string' &&\n      currentChannelPermissions &&\n      currentChannelPermissions[currentChannelWatcher.role]\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const handlePin: MouseEventHandler = async (event) => {\n    event.preventDefault();\n\n    if (!message) return;\n\n    if (!message.pinned) {\n      try {\n        await client.pinMessage(\n          message as UpdatedMessage<At, Ch, Co, Me, Re, Us>,\n        );\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message]);\n\n        if (notify) notify(errorMessage || t('Error pinning message'), 'error');\n      }\n    } else {\n      try {\n        await client.unpinMessage(\n          message as UpdatedMessage<At, Ch, Co, Me, Re, Us>,\n        );\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message]);\n\n        if (notify)\n          notify(errorMessage || t('Error removing message pin'), 'error');\n      }\n    }\n  };\n\n  return { canPin: canPin(), handlePin };\n};\n","import {\n  MouseEvent,\n  RefObject,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nimport {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type {\n  Reaction,\n  ReactionAPIResponse,\n  ReactionResponse,\n} from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const reactionHandlerWarning = `Reaction handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n\nexport const useReactionHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { channel, updateMessage } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  return async (reactionType: string, event: MouseEvent<HTMLElement>) => {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    if (!updateMessage || !message || !channel || !client) {\n      console.warn(reactionHandlerWarning);\n      return;\n    }\n\n    let userExistingReaction = (null as unknown) as ReactionResponse<Re, Us>;\n\n    const currentUser = client.userID;\n\n    if (message.own_reactions) {\n      message.own_reactions.forEach((reaction) => {\n        // own user should only ever contain the current user id\n        // just in case we check to prevent bugs with message updates from breaking reactions\n        if (\n          reaction.user &&\n          currentUser === reaction.user.id &&\n          reaction.type === reactionType\n        ) {\n          userExistingReaction = reaction;\n        } else if (reaction.user && currentUser !== reaction.user.id) {\n          console.warn(\n            `message.own_reactions contained reactions from a different user, this indicates a bug`,\n          );\n        }\n      });\n    }\n\n    const originalMessage = message;\n    let reactionChangePromise: Promise<\n      ReactionAPIResponse<At, Ch, Co, Me, Re, Us>\n    >;\n\n    // Make the API call in the background\n    // If it fails, revert to the old message...\n    if (message.id) {\n      if (userExistingReaction) {\n        reactionChangePromise = channel.deleteReaction(\n          message.id,\n          userExistingReaction.type,\n        );\n      } else {\n        // add the reaction\n        const messageID = message.id;\n\n        const reaction = { type: reactionType } as Reaction<Re, Us>;\n\n        // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n        reactionChangePromise = channel.sendReaction(messageID, reaction);\n      }\n\n      try {\n        // only wait for the API call after the state is updated\n        await reactionChangePromise;\n      } catch (e) {\n        // revert to the original message if the API call fails\n        updateMessage(originalMessage);\n      }\n    }\n  };\n};\n\nexport const useReactionClick = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  reactionSelectorRef?: RefObject<HTMLDivElement | null>,\n  messageWrapperRef?: RefObject<HTMLDivElement | null>,\n) => {\n  const { channel } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const [showDetailedReactions, setShowDetailedReactions] = useState(false);\n\n  const hasListener = useRef(false);\n\n  const isReactionEnabled = channel?.getConfig?.()?.reactions !== false;\n  const messageDeleted = !!message?.deleted_at;\n\n  const closeDetailedReactions: EventListener = useCallback(\n    (event) => {\n      if (\n        event.target instanceof HTMLElement &&\n        reactionSelectorRef?.current?.contains(event.target)\n      ) {\n        return;\n      }\n\n      setShowDetailedReactions(false);\n    },\n    [setShowDetailedReactions, reactionSelectorRef],\n  );\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n\n    if (showDetailedReactions && !hasListener.current) {\n      hasListener.current = true;\n      document.addEventListener('click', closeDetailedReactions);\n      document.addEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.addEventListener('mouseleave', closeDetailedReactions);\n      }\n    }\n\n    if (!showDetailedReactions && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n\n      hasListener.current = false;\n    }\n\n    return () => {\n      if (hasListener.current) {\n        document.removeEventListener('click', closeDetailedReactions);\n        document.removeEventListener('touchend', closeDetailedReactions);\n\n        if (messageWrapper) {\n          messageWrapper.removeEventListener(\n            'mouseleave',\n            closeDetailedReactions,\n          );\n        }\n\n        hasListener.current = false;\n      }\n    };\n  }, [showDetailedReactions, closeDetailedReactions, messageWrapperRef]);\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n\n    if (messageDeleted && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n\n      hasListener.current = false;\n    }\n  }, [messageDeleted, closeDetailedReactions, messageWrapperRef]);\n\n  const onReactionListClick: MouseEventHandler = (event) => {\n    if (event && event.stopPropagation) {\n      event.stopPropagation();\n    }\n    setShowDetailedReactions(true);\n  };\n\n  return {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  };\n};\n","import {\n  RetrySendMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useRetryHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  customRetrySendMessage?: RetrySendMessage<At, Ch, Co, Ev, Me, Re, Us>,\n): RetrySendMessage<At, Ch, Co, Ev, Me, Re, Us> => {\n  const { retrySendMessage: contextRetrySendMessage } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  const retrySendMessage = customRetrySendMessage || contextRetrySendMessage;\n\n  return async (message) => {\n    if (retrySendMessage && message) {\n      await retrySendMessage(message);\n    }\n  };\n};\n","import type { MouseEvent } from 'react';\nimport type { User } from 'stream-chat';\n\nimport type { MouseEventHandler } from '../types';\n\nimport type { StreamMessage } from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type UserEventHandler<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = (event: MouseEvent<HTMLElement>, user: User<Us>) => void;\n\nexport const useUserHandler = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  eventHandlers?: {\n    onUserClickHandler?: UserEventHandler<Us>;\n    onUserHoverHandler?: UserEventHandler<Us>;\n  },\n): {\n  onUserClick: MouseEventHandler;\n  onUserHover: MouseEventHandler;\n} => ({\n  onUserClick: (event) => {\n    if (\n      typeof eventHandlers?.onUserClickHandler !== 'function' ||\n      !message?.user\n    ) {\n      return;\n    }\n    eventHandlers.onUserClickHandler(event, message.user);\n  },\n  onUserHover: (event) => {\n    if (\n      typeof eventHandlers?.onUserHoverHandler !== 'function' ||\n      !message?.user\n    ) {\n      return;\n    }\n\n    eventHandlers.onUserHoverHandler(event, message.user);\n  },\n});\n","import {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useUserRole = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { channel, client } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>(); // TODO - fix breaking tests that result from pulling client from ChatContext\n\n  const isMyMessage =\n    !!message?.user && !!client?.user && client.user.id === message.user.id;\n\n  const isAdmin =\n    client?.user?.role === 'admin' ||\n    channel?.state?.membership?.role === 'admin';\n\n  const isOwner = channel?.state?.membership?.role === 'owner';\n\n  const isModerator =\n    client?.user?.role === 'channel_moderator' ||\n    channel?.state?.membership?.role === 'channel_moderator' ||\n    channel?.state?.membership?.role === 'moderator';\n\n  const canEditMessage = isMyMessage || isModerator || isOwner || isAdmin;\n\n  const canDeleteMessage = canEditMessage;\n\n  return {\n    canDeleteMessage,\n    canEditMessage,\n    isAdmin,\n    isModerator,\n    isMyMessage,\n    isOwner,\n  };\n};\n","import React, { useMemo } from 'react';\n\nimport {\n  isDate,\n  isDayOrMoment,\n  isNumberOrString,\n  TDateTimeParser,\n  TDateTimeParserInput,\n  useTranslationContext,\n} from '../../context/TranslationContext';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const defaultTimestampFormat = 'h:mmA';\n\nexport const notValidDateWarning =\n  'MessageTimestamp was called without a message, or message has invalid created_at date.';\n\nexport const noParsingFunctionWarning =\n  'MessageTimestamp was called but there is no datetime parsing function available';\n\nfunction getDateString(\n  messageCreatedAt?: string,\n  formatDate?: MessageTimestampProps['formatDate'],\n  calendar?: boolean,\n  tDateTimeParser?: TDateTimeParser,\n  format?: string,\n): TDateTimeParserInput | null {\n  if (!messageCreatedAt || !Date.parse(messageCreatedAt)) {\n    console.warn(notValidDateWarning);\n    return null;\n  }\n\n  if (typeof formatDate === 'function') {\n    return formatDate(new Date(messageCreatedAt));\n  }\n\n  if (!tDateTimeParser) {\n    console.warn(noParsingFunctionWarning);\n    return null;\n  }\n\n  const parsedTime = tDateTimeParser(messageCreatedAt);\n\n  if (isDayOrMoment(parsedTime)) {\n    /**\n     * parsedTime.calendar is guaranteed on the type but is only\n     * available when a user calls dayjs.extend(calendar)\n     */\n    return calendar && parsedTime.calendar\n      ? parsedTime.calendar()\n      : parsedTime.format(format);\n  }\n\n  if (isDate(parsedTime)) {\n    return parsedTime.toDateString();\n  }\n\n  if (isNumberOrString(parsedTime)) {\n    return parsedTime;\n  }\n\n  return null;\n}\n\nexport type MessageTimestampProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  calendar?: boolean;\n  customClass?: string;\n  format?: string;\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate?: (date: Date) => string;\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n};\n\nconst UnMemoizedMessageTimestamp = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageTimestampProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    calendar = false,\n    customClass = '',\n    format = defaultTimestampFormat,\n    formatDate,\n    message,\n  } = props;\n\n  const { tDateTimeParser } = useTranslationContext();\n\n  const createdAt = message?.created_at as string;\n\n  const when = useMemo(\n    () =>\n      getDateString(createdAt, formatDate, calendar, tDateTimeParser, format),\n    [formatDate, calendar, tDateTimeParser, format, createdAt],\n  );\n\n  if (!when) return null;\n\n  return (\n    <time className={customClass} dateTime={createdAt} title={createdAt}>\n      {when}\n    </time>\n  );\n};\n\nexport const MessageTimestamp = React.memo(\n  UnMemoizedMessageTimestamp,\n) as typeof UnMemoizedMessageTimestamp;\n","import React, { useCallback, useState } from 'react';\n\nimport { MESSAGE_ACTIONS } from '../Message/utils';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageActionsProps } from './MessageActions';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype PropsDrilledToMessageActionsBox =\n  | 'getMessageActions'\n  | 'handleDelete'\n  | 'handleEdit'\n  | 'handleFlag'\n  | 'handleMute'\n  | 'handlePin'\n  | 'message'\n  | 'messageListRect';\n\nexport type MessageActionsBoxProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Pick<\n  MessageActionsProps<At, Ch, Co, Ev, Me, Re, Us>,\n  PropsDrilledToMessageActionsBox\n> & {\n  isUserMuted: () => boolean;\n  mine: boolean;\n  open: boolean;\n};\n\nconst UnMemoizedMessageActionsBox = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageActionsBoxProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    getMessageActions,\n    handleDelete,\n    handleEdit,\n    handleFlag,\n    handleMute,\n    handlePin,\n    isUserMuted,\n    message,\n    messageListRect,\n    mine,\n    open = false,\n  } = props;\n\n  const { t } = useTranslationContext();\n\n  const [reverse, setReverse] = useState(false);\n\n  const messageActions = getMessageActions();\n\n  const checkIfReverse = useCallback(\n    (containerElement: HTMLDivElement) => {\n      if (!containerElement) {\n        setReverse(false);\n        return;\n      }\n\n      if (open) {\n        const containerRect = containerElement.getBoundingClientRect();\n\n        if (mine) {\n          setReverse(\n            !!messageListRect && containerRect.left < messageListRect.left,\n          );\n        } else {\n          setReverse(\n            !!messageListRect &&\n              containerRect.right + 5 > messageListRect.right,\n          );\n        }\n      }\n    },\n    [messageListRect, mine, open],\n  );\n\n  return (\n    <div\n      className={`str-chat__message-actions-box\n        ${open ? 'str-chat__message-actions-box--open' : ''}\n        ${mine ? 'str-chat__message-actions-box--mine' : ''}\n        ${reverse ? 'str-chat__message-actions-box--reverse' : ''}\n      `}\n      data-testid='message-actions-box'\n      ref={checkIfReverse}\n    >\n      <ul className='str-chat__message-actions-list'>\n        {messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1 &&\n          !message?.parent_id && (\n            <button onClick={handlePin}>\n              <li className='str-chat__message-actions-list-item'>\n                {!message?.pinned ? t('Pin') : t('Unpin')}\n              </li>\n            </button>\n          )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\n          <button onClick={handleFlag}>\n            <li className='str-chat__message-actions-list-item'>{t('Flag')}</li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\n          <button onClick={handleMute}>\n            <li className='str-chat__message-actions-list-item'>\n              {isUserMuted && isUserMuted() ? t('Unmute') : t('Mute')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\n          <button onClick={handleEdit}>\n            <li className='str-chat__message-actions-list-item'>\n              {t('Edit Message')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\n          <button onClick={handleDelete}>\n            <li className='str-chat__message-actions-list-item'>\n              {t('Delete')}\n            </li>\n          </button>\n        )}\n      </ul>\n    </div>\n  );\n};\n\n/**\n * MessageActionsBox - Allows a user to edit, flag or delete a message.\n * @example ./MessageActionsBox.md\n */\nexport const MessageActionsBox = React.memo(\n  UnMemoizedMessageActionsBox,\n) as typeof UnMemoizedMessageActionsBox;\n","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { MessageActionsBox } from './MessageActionsBox';\n\nimport {\n  useDeleteHandler,\n  useFlagHandler,\n  useMuteHandler,\n  usePinHandler,\n  useUserRole,\n} from '../Message/hooks';\nimport {\n  defaultPinPermissions,\n  isUserMuted,\n  MessageActionsArray,\n} from '../Message/utils';\n\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type { MessageUIComponentProps } from '../Message/types';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageActionsProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Partial<MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>> & {\n  getMessageActions: () => MessageActionsArray;\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  customWrapperClass?: string;\n  inline?: boolean;\n  messageWrapperRef?: React.RefObject<HTMLDivElement>;\n};\n\nexport const MessageActions = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageActionsProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    addNotification,\n    customWrapperClass,\n    getMessageActions,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    getPinMessageErrorNotification,\n    handleDelete: propHandleDelete,\n    handleFlag: propHandleFlag,\n    handleMute: propHandleMute,\n    handlePin: propHandlePin,\n    inline,\n    message,\n    messageListRect,\n    messageWrapperRef,\n    pinPermissions = defaultPinPermissions,\n    setEditingState,\n  } = props;\n\n  const { mutes } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n\n  const { isMyMessage } = useUserRole(message);\n\n  const handleDelete = useDeleteHandler(message);\n\n  const handleFlag = useFlagHandler(message, {\n    getErrorNotification: getFlagMessageSuccessNotification,\n    getSuccessNotification: getFlagMessageErrorNotification,\n    notify: addNotification,\n  });\n\n  const handleMute = useMuteHandler(message, {\n    getErrorNotification: getMuteUserSuccessNotification,\n    getSuccessNotification: getMuteUserErrorNotification,\n    notify: addNotification,\n  });\n\n  const { handlePin } = usePinHandler(message, pinPermissions, {\n    getErrorNotification: getPinMessageErrorNotification,\n    notify: addNotification,\n  });\n\n  const isMuted = useCallback(() => isUserMuted(message, mutes), [\n    message,\n    mutes,\n  ]);\n\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n\n  const messageActions = getMessageActions();\n  const messageDeletedAt = !!message?.deleted_at;\n\n  useEffect(() => {\n    if (messageWrapperRef?.current) {\n      messageWrapperRef.current.addEventListener('onMouseLeave', hideOptions);\n    }\n  }, [hideOptions, messageWrapperRef]);\n\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [hideOptions, messageDeletedAt]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return () => document.removeEventListener('click', hideOptions);\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (messageActions.length === 0) return null;\n\n  return (\n    <MessageActionsWrapper\n      customWrapperClass={customWrapperClass}\n      inline={inline}\n      setActionsBoxOpen={setActionsBoxOpen}\n    >\n      <MessageActionsBox<At, Ch, Co, Ev, Me, Re, Us>\n        getMessageActions={getMessageActions}\n        handleDelete={propHandleDelete || handleDelete}\n        handleEdit={setEditingState}\n        handleFlag={propHandleFlag || handleFlag}\n        handleMute={propHandleMute || handleMute}\n        handlePin={propHandlePin || handlePin}\n        isUserMuted={isMuted}\n        message={message}\n        messageListRect={messageListRect}\n        mine={isMyMessage}\n        open={actionsBoxOpen}\n      />\n      <svg\n        height='4'\n        viewBox='0 0 11 4'\n        width='11'\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <path\n          d='M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z'\n          fillRule='nonzero'\n        />\n      </svg>\n    </MessageActionsWrapper>\n  );\n};\n\nexport type MessageActionsWrapperProps = {\n  setActionsBoxOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  customWrapperClass?: string;\n  inline?: boolean;\n};\n\nconst MessageActionsWrapper: React.FC<MessageActionsWrapperProps> = (props) => {\n  const { children, customWrapperClass, inline, setActionsBoxOpen } = props;\n\n  const defaultWrapperClass =\n    'str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options';\n\n  const wrapperClass =\n    typeof customWrapperClass === 'string'\n      ? customWrapperClass\n      : defaultWrapperClass;\n\n  const onClickOptionsAction = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    setActionsBoxOpen(true);\n  };\n\n  const wrapperProps = {\n    className: wrapperClass,\n    'data-testid': 'message-actions',\n    onClick: onClickOptionsAction,\n  };\n\n  if (inline) return <span {...wrapperProps}>{children}</span>;\n\n  return <div {...wrapperProps}>{children}</div>;\n};\n","import React from 'react';\nimport { MML as MMLReact } from 'mml-react';\n\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type { ActionHandlerReturnType } from '../Message/hooks/useActionHandler';\n\nexport type MMLProps = {\n  /** mml source string */\n  source: string;\n  /** submit handler for mml actions */\n  actionHandler?: ActionHandlerReturnType;\n  /** align mml components to left/right\n   * @default right\n   */\n  align?: 'left' | 'right';\n};\n\n/**\n * MML - A wrapper component around MML-React library\n */\nexport const MML: React.FC<MMLProps> = (props) => {\n  const { actionHandler, align = 'right', source } = props;\n\n  const { theme } = useChatContext();\n\n  if (!source) return null;\n\n  return (\n    <MMLReact\n      className={`mml-align-${align}`}\n      Loading={null}\n      onSubmit={actionHandler}\n      source={source}\n      Success={null}\n      theme={(theme || '').replace(' ', '-')}\n    />\n  );\n};\n","import React, { PropsWithChildren } from 'react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\n//@ts-expect-error\nimport findAndReplace from 'mdast-util-find-and-replace';\nimport RootReactMarkdown, { NodeType } from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\n\nimport type { UserResponse } from 'stream-chat';\n\nimport type { DefaultUserType, UnknownType } from '../types/types';\n\nexport const isOnlyEmojis = (text?: string) => {\n  if (!text) return false;\n\n  const noEmojis = text.replace(emojiRegex(), '');\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n\n  return !noSpace;\n};\n\nconst allowedMarkups: NodeType[] = [\n  'html',\n  // @ts-expect-error\n  'root',\n  'text',\n  'break',\n  'paragraph',\n  'emphasis',\n  'strong',\n  'link',\n  'list',\n  'listItem',\n  'code',\n  'inlineCode',\n  'blockquote',\n  'delete',\n];\n\nconst matchMarkdownLinks = (message: string) => {\n  const regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  const matches = message.match(regexMdLinks);\n  const singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n\n  const links = matches\n    ? matches.map((match) => {\n        const i = singleMatch.exec(match);\n        return i && [i[1], i[2]];\n      })\n    : [];\n\n  return links.flat();\n};\n\nconst messageCodeBlocks = (message: string) => {\n  const codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  const matches = message.match(codeRegex);\n  return matches || [];\n};\n\nexport const truncate = (input?: string, length?: number, end = '...') => {\n  if (!input || !length) return '';\n  if (input.length > length) {\n    return `${input.substring(0, length - end.length)}${end}`;\n  }\n  return input;\n};\n\ntype MarkDownRenderers = {\n  children: React.ReactElement;\n  href?: string;\n};\n\nconst markDownRenderers: { [nodeType: string]: React.ElementType } = {\n  // eslint-disable-next-line react/display-name\n  link: (props: MarkDownRenderers) => {\n    const { children, href } = props;\n\n    const isEmail = href?.startsWith('mailto:');\n    const isUrl = href?.startsWith('http');\n\n    if (!href || (!isEmail && !isUrl)) {\n      return children;\n    }\n\n    return (\n      <a\n        className={`${isUrl ? 'str-chat__message-url-link' : ''}`}\n        href={href}\n        rel='nofollow noreferrer noopener'\n        target='_blank'\n      >\n        {children}\n      </a>\n    );\n  },\n  span: 'span',\n};\n\nconst emojiMarkdownPlugin = () => {\n  function replace(match: RegExpMatchArray | null) {\n    return {\n      children: [{ type: 'text', value: match }],\n      className: 'inline-text-emoji',\n      type: 'span',\n    };\n  }\n\n  const transform = <T extends unknown>(markdownAST: T) => {\n    findAndReplace(markdownAST, emojiRegex(), replace);\n    return markdownAST;\n  };\n\n  return transform;\n};\n\nconst mentionsMarkdownPlugin = <\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  mentioned_users: UserResponse<Us>[],\n) => () => {\n  const mentioned_usernames = mentioned_users\n    .map((user) => user.name || user.id)\n    .filter(Boolean)\n    .map(escapeRegExp);\n\n  function replace(match: string) {\n    const usernameOrId = match.replace('@', '');\n    const user = mentioned_users.find(\n      ({ id, name }) => name === usernameOrId || id === usernameOrId,\n    );\n    return {\n      children: [{ type: 'text', value: match }],\n      mentioned_user: user,\n      type: 'mention',\n    };\n  }\n\n  const transform = <T extends unknown>(markdownAST: T) => {\n    if (!mentioned_usernames.length) {\n      return markdownAST;\n    }\n    const mentionedUsersRegex = new RegExp(\n      mentioned_usernames.map((username) => `@${username}`).join('|'),\n      'g',\n    );\n    findAndReplace(markdownAST, mentionedUsersRegex, replace);\n    return markdownAST;\n  };\n\n  return transform;\n};\n\nexport type MentionProps<Us extends DefaultUserType<Us> = DefaultUserType> = {\n  mentioned_user: UserResponse<Us>;\n};\n\nconst Mention = <Us extends DefaultUserType<Us> = DefaultUserType>(\n  props: PropsWithChildren<Us>,\n) => <span className='str-chat__message-mention'>{props.children}</span>;\n\nexport type RenderTextOptions = {\n  customMarkDownRenderers?: {\n    [nodeType: string]: React.ElementType;\n  };\n};\n\nexport const renderText = <Us extends DefaultUserType<Us> = DefaultUserType>(\n  text?: string,\n  mentioned_users?: UserResponse<Us>[],\n  options: RenderTextOptions = {},\n) => {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n\n  let newText = text;\n  const markdownLinks = matchMarkdownLinks(newText);\n  const codeBlocks = messageCodeBlocks(newText);\n  const detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\n\n  // extract all valid links/emails within text and replace it with proper markup\n  linkify.find(newText).forEach(({ href, type, value }) => {\n    const linkIsInBlock = codeBlocks.some((block) => block?.includes(value));\n\n    // check if message is already  markdown\n    const noParsingNeeded =\n      markdownLinks &&\n      markdownLinks.filter((text) => {\n        const strippedHref = href?.replace(detectHttp, '');\n        const strippedText = text?.replace(detectHttp, '');\n\n        if (!strippedHref || !strippedText) return false;\n\n        return (\n          strippedHref.includes(strippedText) ||\n          strippedText.includes(strippedHref)\n        );\n      });\n\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n\n    const displayLink =\n      type === 'email' ? value : value.replace(detectHttp, '');\n\n    newText = newText.replace(value, `[${displayLink}](${encodeURI(href)})`);\n  });\n\n  const plugins = [emojiMarkdownPlugin];\n\n  if (mentioned_users?.length) {\n    plugins.push(mentionsMarkdownPlugin(mentioned_users));\n  }\n\n  const renderers = {\n    mention: Mention,\n    ...markDownRenderers,\n    ...options.customMarkDownRenderers,\n  };\n\n  return (\n    <ReactMarkdown\n      allowedTypes={allowedMarkups}\n      escapeHtml={true}\n      plugins={plugins}\n      renderers={renderers}\n      source={newText}\n      transformLinkUri={(uri) =>\n        uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri)\n      }\n      unwrapDisallowed={true}\n    />\n  );\n};\n\nfunction escapeRegExp(text: string) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nexport const smartRender = (\n  ElementOrComponentOrLiteral: React.ComponentType,\n  props?: UnknownType,\n  fallback?: React.ComponentType | null,\n) => {\n  if (ElementOrComponentOrLiteral === undefined && fallback) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ElementOrComponentOrLiteral;\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n\n  return <ComponentOrLiteral {...props} />;\n};\n","import React, { useCallback, useMemo } from 'react';\n\nimport { useActionHandler, useUserRole } from './hooks';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { getMessageActions } from './utils';\n\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { MessageActions } from '../MessageActions';\nimport { MML } from '../MML';\n\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText } from '../../utils';\n\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst selectColor = (number: number, dark: boolean) => {\n  const hue = number * 137.508; // use golden angle approximation\n  return `hsl(${hue},${dark ? '50%' : '85%'}, ${dark ? '75%' : '55%'})`;\n};\n\nconst hashUserId = (userId: string) => {\n  const hash = userId.split('').reduce((acc, c) => {\n    acc = (acc << 5) - acc + c.charCodeAt(0); // eslint-disable-line\n    return acc & acc; // eslint-disable-line no-bitwise\n  }, 0);\n  return Math.abs(hash) / 10 ** Math.ceil(Math.log10(Math.abs(hash) + 1));\n};\n\nconst getUserColor = (theme: string, userId: string) =>\n  selectColor(hashUserId(userId), theme.includes('dark'));\n\nexport type FixedHeightMessageProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  groupedByUser: boolean;\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n};\n\n/**\n * FixedHeightMessage - This component renders a single message.\n * It uses fixed height elements to make sure it works well in VirtualizedMessageList\n */\nconst UnMemoizedFixedHeightMessage = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: FixedHeightMessageProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { groupedByUser, message } = props;\n\n  const { theme } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { userLanguage } = useTranslationContext();\n\n  const handleAction = useActionHandler(message);\n  const role = useUserRole(message);\n\n  const messageTextToRender =\n    message?.i18n?.[`${userLanguage}_text` as `${TranslationLanguages}_text`] ||\n    message?.text;\n\n  const renderedText = useMemo(\n    () => renderText(messageTextToRender, message.mentioned_users),\n    [message.mentioned_users, messageTextToRender],\n  );\n\n  const userId = message.user?.id || '';\n  const userColor = useMemo(() => getUserColor(theme, userId), [userId, theme]);\n\n  const messageActionsHandler = useCallback(\n    () => getMessageActions(['delete'], { canDelete: role.canDeleteMessage }),\n    [role],\n  );\n\n  const images = message?.attachments?.filter(({ type }) => type === 'image');\n\n  return (\n    <div\n      className={`str-chat__virtual-message__wrapper ${\n        role.isMyMessage ? 'str-chat__virtual-message__wrapper--me' : ''\n      } ${groupedByUser ? 'str-chat__virtual-message__wrapper--group' : ''}`}\n      key={message.id}\n    >\n      <Avatar\n        image={message.user?.image}\n        name={message.user?.name || message.user?.id}\n        shape='rounded'\n        size={38}\n      />\n      <div className='str-chat__virtual-message__content'>\n        <div className='str-chat__virtual-message__meta'>\n          <div\n            className='str-chat__virtual-message__author'\n            style={{ color: userColor }}\n          >\n            <strong>{message.user?.name || 'unknown'}</strong>\n          </div>\n        </div>\n        {images && <Gallery images={images} />}\n        <div className='str-chat__virtual-message__text' data-testid='msg-text'>\n          {renderedText}\n          {message.mml && (\n            <MML\n              actionHandler={handleAction}\n              align='left'\n              source={message.mml}\n            />\n          )}\n          <div className='str-chat__virtual-message__data'>\n            <MessageActions<At, Ch, Co, Ev, Me, Re, Us>\n              customWrapperClass='str-chat__virtual-message__actions'\n              getMessageActions={messageActionsHandler}\n              message={message}\n            />\n            <span className='str-chat__virtual-message__date'>\n              <MessageTimestamp\n                customClass='str-chat__message-simple-timestamp'\n                message={message}\n              />\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const FixedHeightMessage = React.memo(\n  UnMemoizedFixedHeightMessage,\n) as typeof UnMemoizedFixedHeightMessage;\n","import React from 'react';\n\nimport { useUserRole } from './hooks/useUserRole';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageDeletedProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n};\n\nexport const MessageDeleted = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageDeletedProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { message } = props;\n\n  const { t } = useTranslationContext();\n\n  const { isMyMessage } = useUserRole(message);\n\n  const messageClasses = isMyMessage\n    ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n    : 'str-chat__message str-chat__message-simple';\n\n  return (\n    <div\n      className={`${messageClasses} str-chat__message--deleted ${message.type} `}\n      data-testid={'message-deleted-component'}\n      key={message.id}\n    >\n      <div className='str-chat__message--deleted-inner'>\n        {t('This message was deleted...')}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport type { PinIndicatorProps } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const ReplyIcon = () => (\n  <svg height='15' width='18' xmlns='http://www.w3.org/2000/svg'>\n    <path\n      d='M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z'\n      fillRule='nonzero'\n    />\n  </svg>\n);\n\nexport const DeliveredCheckIcon = () => (\n  <svg height='16' width='16' xmlns='http://www.w3.org/2000/svg'>\n    <path\n      d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z'\n      fill='#006CFF'\n      fillRule='evenodd'\n    />\n  </svg>\n);\n\nexport const ReactionIcon = () => (\n  <svg\n    height='12'\n    viewBox='0 0 12 12'\n    width='12'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <g clipRule='evenodd' fillRule='evenodd'>\n      <path d='M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z'></path>\n      <path d='M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z'></path>\n    </g>\n  </svg>\n);\n\nexport const ThreadIcon = () => (\n  <svg height='10' width='14' xmlns='http://www.w3.org/2000/svg'>\n    <path\n      d='M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z'\n      fillRule='evenodd'\n    />\n  </svg>\n);\n\nexport const ErrorIcon = () => (\n  <svg height='14' width='14' xmlns='http://www.w3.org/2000/svg'>\n    <path\n      d='M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z'\n      fill='#EA152F'\n      fillRule='evenodd'\n    />\n  </svg>\n);\n\nexport const PinIcon = () => (\n  <svg\n    height='13'\n    viewBox='0 0 14 13'\n    width='14'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path\n      d='M13.3518 6.686L6.75251 0.0866699L5.80984 1.02867L6.75318 1.972V1.97334L3.45318 5.272L3.45251 5.27334L2.50984 4.32934L1.56718 5.27267L4.39584 8.10067L0.624512 11.8713L1.56718 12.814L5.33851 9.04334L8.16718 11.8713L9.10984 10.9293L8.16718 9.986L11.4672 6.686L12.4098 7.62867L13.3518 6.686ZM7.22451 9.04267L7.22385 9.04334L4.39584 6.21467L7.69518 2.91467L10.5232 5.74267L7.22451 9.04267Z'\n      fillRule='evenodd'\n    />\n  </svg>\n);\n\nexport const PinIndicator = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>({\n  message,\n  t,\n}: PinIndicatorProps<At, Ch, Co, Ev, Me, Re, Us>) => {\n  if (!message || !t) return null;\n\n  return (\n    <div style={{ alignItems: 'center', display: 'flex' }}>\n      <PinIcon />\n      <div\n        style={{\n          fontSize: '14px',\n          marginBottom: '0',\n          marginLeft: '8px',\n          marginTop: '0',\n        }}\n      >\n        {message.pinned_by\n          ? `${t('Pinned by')} ${\n              message.pinned_by?.name || message.pinned_by?.id\n            }`\n          : t('Message pinned')}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { useOpenThreadHandler, useUserRole } from './hooks';\nimport { ReactionIcon, ThreadIcon } from './icons';\nimport { MESSAGE_ACTIONS } from './utils';\n\nimport { MessageActions } from '../MessageActions';\n\nimport { useChannelContext } from '../../context/ChannelContext';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageOptionsProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  onReactionListClick: MouseEventHandler;\n  displayActions?: boolean;\n  displayLeft?: boolean;\n  displayReplies?: boolean;\n  messageWrapperRef?: React.RefObject<HTMLDivElement>;\n  theme?: string;\n};\n\nconst UnMemoizedMessageOptions = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageOptionsProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    displayActions = true,\n    displayLeft = true,\n    displayReplies = true,\n    getMessageActions,\n    handleOpenThread: propHandleOpenThread,\n    initialMessage,\n    message,\n    messageWrapperRef,\n    onReactionListClick,\n    theme = 'simple',\n    threadList,\n  } = props;\n\n  const { channel } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const handleOpenThread = useOpenThreadHandler(message);\n  const { isMyMessage } = useUserRole(message);\n\n  const channelConfig = channel?.getConfig?.();\n  const messageActions = getMessageActions();\n\n  const shouldShowReactions =\n    messageActions.indexOf(MESSAGE_ACTIONS.react) > -1 &&\n    channelConfig &&\n    channelConfig.reactions;\n\n  const shouldShowReplies =\n    messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1 &&\n    displayReplies &&\n    !threadList &&\n    channelConfig &&\n    channelConfig.replies;\n\n  if (\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending' ||\n    initialMessage\n  ) {\n    return null;\n  }\n\n  if (isMyMessage && displayLeft) {\n    return (\n      <div\n        className={`str-chat__message-${theme}__actions`}\n        data-testid='message-options-left'\n      >\n        {displayActions && (\n          <MessageActions {...props} messageWrapperRef={messageWrapperRef} />\n        )}\n        {shouldShowReplies && (\n          <div\n            className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--thread`}\n            data-testid='thread-action'\n            onClick={propHandleOpenThread || handleOpenThread}\n          >\n            <ThreadIcon />\n          </div>\n        )}\n        {shouldShowReactions && (\n          <div\n            className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n            data-testid='message-reaction-action'\n            onClick={onReactionListClick}\n          >\n            <ReactionIcon />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`str-chat__message-${theme}__actions`}\n      data-testid='message-options'\n    >\n      {shouldShowReactions && (\n        <div\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n          data-testid='message-reaction-action'\n          onClick={onReactionListClick}\n        >\n          <ReactionIcon />\n        </div>\n      )}\n      {shouldShowReplies && (\n        <div\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--thread`}\n          data-testid='thread-action'\n          onClick={propHandleOpenThread || handleOpenThread}\n        >\n          <ThreadIcon />\n        </div>\n      )}\n      {displayActions && (\n        <MessageActions {...props} messageWrapperRef={messageWrapperRef} />\n      )}\n    </div>\n  );\n};\n\nexport const MessageOptions = React.memo(\n  UnMemoizedMessageOptions,\n) as typeof UnMemoizedMessageOptions;\n","import React from 'react';\n\nimport { ReplyIcon } from './icons';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MouseEventHandler } from './types';\n\nexport type MessageRepliesCountButtonProps = {\n  labelPlural?: string;\n  labelSingle?: string;\n  onClick?: MouseEventHandler;\n  reply_count?: number;\n};\n\nconst UnMemoizedMessageRepliesCountButton: React.FC<MessageRepliesCountButtonProps> = (\n  props,\n) => {\n  const { labelPlural, labelSingle, onClick, reply_count = 0 } = props;\n\n  const { t } = useTranslationContext();\n\n  let singleReplyText;\n  let pluralReplyText;\n\n  if (reply_count === 1) {\n    if (labelSingle) {\n      singleReplyText = `1 ${labelSingle}`;\n    } else {\n      singleReplyText = t('1 reply');\n    }\n  }\n\n  if (reply_count && reply_count > 1) {\n    if (labelPlural) {\n      pluralReplyText = `${reply_count} ${labelPlural}`;\n    } else {\n      pluralReplyText = t('{{ replyCount }} replies', {\n        replyCount: reply_count,\n      });\n    }\n  }\n\n  if (reply_count && reply_count !== 0) {\n    return (\n      <button\n        className='str-chat__message-replies-count-button'\n        data-testid='replies-count-button'\n        onClick={onClick}\n      >\n        <ReplyIcon />\n        {reply_count === 1 ? singleReplyText : pluralReplyText}\n      </button>\n    );\n  }\n\n  return null;\n};\n\nexport const MessageRepliesCountButton = React.memo(\n  UnMemoizedMessageRepliesCountButton,\n) as typeof UnMemoizedMessageRepliesCountButton;\n","export const isMutableRef = <T>(\n  ref: React.ForwardedRef<T> | null,\n): ref is React.MutableRefObject<T> => {\n  if (ref) {\n    return (ref as React.MutableRefObject<T>).current !== undefined;\n  }\n  return false;\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { isMutableRef } from './utils/utils';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\nimport { getStrippedEmojiData } from '../Channel/emojiData';\n\nimport { MinimalEmoji, useChannelContext } from '../../context/ChannelContext';\n\nimport type { ReactionResponse } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ReactionSelectorProps<\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /**\n   * Custom UI component to display user avatar.\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   * */\n  Avatar?: React.ElementType<AvatarProps>;\n  /** Enable the avatar display */\n  detailedView?: boolean;\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction?: (\n    reactionType: string,\n    event: React.MouseEvent<HTMLElement, MouseEvent>,\n  ) => Promise<void>;\n  /**\n   * Array of latest reactions.\n   * Reaction object has following structure:\n   *\n   * ```json\n   * {\n   *  \"type\": \"love\",\n   *  \"user_id\": \"demo_user_id\",\n   *  \"user\": {\n   *    ...userObject\n   *  },\n   *  \"created_at\": \"datetime\";\n   * }\n   * ```\n   * */\n  latest_reactions?: ReactionResponse<Re, Us>[];\n  own_reactions?: ReactionResponse<Re, Us>[] | null;\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts?: { [key: string]: number };\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions?: MinimalEmoji[];\n  /** Adds a CSS class that changes the horizontal positioning to the opposite (right: 0), defaults to false (left: 0) */\n  reverse?: boolean;\n};\n\n/**\n * Component that allows a user to select a reaction.\n */\nconst UnMemoizedReactionSelector = React.forwardRef(\n  <\n    At extends DefaultAttachmentType = DefaultAttachmentType,\n    Ch extends DefaultChannelType = DefaultChannelType,\n    Co extends DefaultCommandType = DefaultCommandType,\n    Ev extends DefaultEventType = DefaultEventType,\n    Me extends DefaultMessageType = DefaultMessageType,\n    Re extends DefaultReactionType = DefaultReactionType,\n    Us extends DefaultUserType<Us> = DefaultUserType\n  >(\n    props: ReactionSelectorProps<Re, Us>,\n    ref: React.ForwardedRef<HTMLDivElement | null>,\n  ) => {\n    const {\n      Avatar = DefaultAvatar,\n      detailedView = true,\n      handleReaction,\n      latest_reactions,\n      reaction_counts,\n      reactionOptions: reactionOptionsProp,\n      reverse = false,\n    } = props;\n\n    const { emojiConfig } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n    const {\n      defaultMinimalEmojis,\n      Emoji,\n      emojiData: fullEmojiData,\n      emojiSetDef,\n    } = emojiConfig || {};\n\n    const emojiData = getStrippedEmojiData(fullEmojiData);\n    const reactionOptions = reactionOptionsProp || defaultMinimalEmojis;\n\n    const [tooltipReactionType, setTooltipReactionType] = useState<\n      string | null\n    >(null);\n    const [tooltipPositions, setTooltipPositions] = useState<{\n      arrow: number;\n      tooltip: number;\n    } | null>(null);\n\n    const targetRef = useRef<HTMLDivElement | null>(null);\n    const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n    const showTooltip = useCallback((e, reactionType: string) => {\n      targetRef.current = e.target;\n      setTooltipReactionType(reactionType);\n    }, []);\n\n    const hideTooltip = useCallback(() => {\n      setTooltipReactionType(null);\n      setTooltipPositions(null);\n    }, []);\n\n    useEffect(() => {\n      if (tooltipReactionType) {\n        const tooltip = tooltipRef.current?.getBoundingClientRect();\n        const target = targetRef.current?.getBoundingClientRect();\n\n        const container = isMutableRef(ref)\n          ? ref.current?.getBoundingClientRect()\n          : null;\n\n        if (!tooltip || !target || !container) return;\n\n        const tooltipPosition =\n          tooltip.width === container.width || tooltip.x < container.x\n            ? 0\n            : target.left +\n              target.width / 2 -\n              container.left -\n              tooltip.width / 2;\n\n        const arrowPosition =\n          target.x - tooltip.x + target.width / 2 - tooltipPosition;\n\n        setTooltipPositions({\n          arrow: arrowPosition,\n          tooltip: tooltipPosition,\n        });\n      }\n    }, [tooltipReactionType, ref]);\n\n    const getUsersPerReactionType = (type: string | null) =>\n      latest_reactions\n        ?.map((reaction) => {\n          if (reaction.type === type) {\n            return reaction.user?.name || reaction.user?.id;\n          }\n          return null;\n        })\n        .filter(Boolean);\n\n    const getLatestUserForReactionType = (type: string | null) =>\n      latest_reactions?.find(\n        (reaction) => reaction.type === type && !!reaction.user,\n      )?.user || undefined;\n\n    return (\n      <div\n        className={`str-chat__reaction-selector ${\n          reverse ? 'str-chat__reaction-selector--reverse' : ''\n        }`}\n        data-testid='reaction-selector'\n        ref={ref}\n      >\n        {!!tooltipReactionType && detailedView && (\n          <div\n            className='str-chat__reaction-selector-tooltip'\n            ref={tooltipRef}\n            style={{\n              left: tooltipPositions?.tooltip,\n              visibility: tooltipPositions ? 'visible' : 'hidden',\n            }}\n          >\n            <div className='arrow' style={{ left: tooltipPositions?.arrow }} />\n            {getUsersPerReactionType(tooltipReactionType)?.map(\n              (user, i, users) => (\n                <span className='latest-user-username' key={`key-${i}-${user}`}>\n                  {`${user}${i < users.length - 1 ? ', ' : ''}`}\n                </span>\n              ),\n            )}\n          </div>\n        )}\n        <ul className='str-chat__message-reactions-list'>\n          {reactionOptions?.map((reactionOption) => {\n            const latestUser = getLatestUserForReactionType(reactionOption.id);\n            const count = reaction_counts && reaction_counts[reactionOption.id];\n\n            return (\n              <li\n                className='str-chat__message-reactions-list-item'\n                data-text={reactionOption.id}\n                key={`item-${reactionOption.id}`}\n                onClick={(event) =>\n                  handleReaction && handleReaction(reactionOption.id, event)\n                }\n              >\n                {!!count && detailedView && (\n                  <>\n                    <div\n                      className='latest-user'\n                      onClick={hideTooltip}\n                      onMouseEnter={(e) => showTooltip(e, reactionOption.id)}\n                      onMouseLeave={hideTooltip}\n                    >\n                      {latestUser ? (\n                        <Avatar\n                          image={latestUser.image}\n                          name={latestUser.name}\n                          size={20}\n                        />\n                      ) : (\n                        <div className='latest-user-not-found' />\n                      )}\n                    </div>\n                  </>\n                )}\n                {Emoji && (\n                  <Emoji\n                    // @ts-expect-error\n                    emoji={reactionOption}\n                    {...emojiSetDef}\n                    // @ts-expect-error\n                    data={emojiData}\n                  />\n                )}\n                {Boolean(count) && detailedView && (\n                  <span className='str-chat__message-reactions-list-item__count'>\n                    {count || ''}\n                  </span>\n                )}\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  },\n);\n\n/**\n * Component that allows you to select a reaction.\n */\nexport const ReactionSelector = React.memo(\n  UnMemoizedReactionSelector,\n) as typeof UnMemoizedReactionSelector;\n","import React, { useMemo } from 'react';\n\nimport { getStrippedEmojiData } from '../Channel/emojiData';\n\nimport {\n  EmojiSetDef,\n  MinimalEmoji,\n  useChannelContext,\n} from '../../context/ChannelContext';\n\nimport type { ReactionResponse } from 'stream-chat';\n\nimport type { MouseEventHandler } from '../Message/types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ReactionsListProps<\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  emojiSetDef?: EmojiSetDef;\n  onClick?: MouseEventHandler;\n  own_reactions?: ReactionResponse<Re, Us>[] | null;\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts?: { [key: string]: number };\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions?: MinimalEmoji[];\n  reactions?: ReactionResponse<Re, Us>[];\n  reverse?: boolean;\n};\n\nconst UnMemoizedReactionsList = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ReactionsListProps<Re, Us>,\n) => {\n  const {\n    onClick,\n    reaction_counts,\n    reactionOptions: reactionOptionsProp,\n    reactions,\n    reverse = false,\n  } = props;\n\n  const { emojiConfig } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const { defaultMinimalEmojis, Emoji, emojiData: fullEmojiData, emojiSetDef } =\n    emojiConfig || {};\n\n  const emojiData = useMemo(() => getStrippedEmojiData(fullEmojiData), [\n    fullEmojiData,\n  ]);\n\n  const reactionOptions = reactionOptionsProp || defaultMinimalEmojis || [];\n\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  const getOptionForType = (type: string) =>\n    reactionOptions.find((option) => option.id === type);\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set(reactions.map(({ type }) => type));\n\n    return Array.from(allTypes);\n  };\n\n  return (\n    <div\n      className={`str-chat__reaction-list ${\n        reverse ? 'str-chat__reaction-list--reverse' : ''\n      }`}\n      data-testid='reaction-list'\n      onClick={onClick}\n    >\n      <ul>\n        {getReactionTypes().map((reactionType) => {\n          const emojiDefinition = getOptionForType(reactionType);\n          return emojiDefinition ? (\n            <li key={emojiDefinition.id}>\n              {Emoji && (\n                <Emoji\n                  // @ts-expect-error\n                  emoji={emojiDefinition}\n                  {...emojiSetDef}\n                  // @ts-expect-error\n                  data={emojiData}\n                  size={16}\n                />\n              )}\n              &nbsp;\n            </li>\n          ) : null;\n        })}\n        <li>\n          <span className='str-chat__reaction-list--counter'>\n            {getTotalReactionCount()}\n          </span>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport const ReactionsList = React.memo(\n  UnMemoizedReactionsList,\n) as typeof UnMemoizedReactionsList;\n","import React, { useState } from 'react';\n\nimport { getStrippedEmojiData } from '../Channel/emojiData';\n\nimport { MinimalEmoji, useChannelContext } from '../../context/ChannelContext';\n\nimport type { ReactionResponse } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type SimpleReactionsListProps<\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: (\n    reactionType: string,\n    event: React.MouseEvent<HTMLElement, MouseEvent>,\n  ) => Promise<void>;\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts?: { [key: string]: number };\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions?: MinimalEmoji[];\n  reactions?: ReactionResponse<Re, Us>[];\n};\n\nconst UnMemoizedSimpleReactionsList = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: SimpleReactionsListProps<Re, Us>,\n) => {\n  const {\n    handleReaction,\n    reaction_counts,\n    reactionOptions: reactionOptionsProp,\n    reactions,\n  } = props;\n\n  const { emojiConfig } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const {\n    defaultMinimalEmojis,\n    Emoji,\n    emojiData: defaultEmojiData,\n    emojiSetDef,\n  } = emojiConfig || {};\n\n  const [tooltipReactionType, setTooltipReactionType] = useState<\n    string | undefined\n  >(undefined);\n\n  const emojiData = getStrippedEmojiData(defaultEmojiData);\n\n  const reactionOptions = reactionOptionsProp || defaultMinimalEmojis || [];\n\n  if (!reactions || reactions.length === 0) {\n    return null;\n  }\n\n  const getUsersPerReactionType = (type?: string) =>\n    reactions\n      ?.map((reaction) => {\n        if (reaction.type === type) {\n          return reaction.user?.name || reaction.user?.id;\n        }\n        return null;\n      })\n      .filter(Boolean);\n\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set(reactions.map(({ type }) => type));\n\n    return Array.from(allTypes);\n  };\n\n  const getOptionForType = (type: string) =>\n    reactionOptions.find((option) => option.id === type);\n\n  return (\n    <ul\n      className='str-chat__simple-reactions-list'\n      data-testid='simple-reaction-list'\n      onMouseLeave={() => setTooltipReactionType(undefined)}\n    >\n      {getReactionTypes().map((reactionType, i) => {\n        const emojiDefinition = getOptionForType(reactionType);\n        return emojiDefinition ? (\n          <li\n            className='str-chat__simple-reactions-list-item'\n            key={`${emojiDefinition?.id}-${i}`}\n            onClick={(event) => handleReaction(reactionType, event)}\n          >\n            <span onMouseEnter={() => setTooltipReactionType(reactionType)}>\n              {Emoji && (\n                <Emoji\n                  // @ts-expect-error\n                  emoji={emojiDefinition}\n                  {...emojiSetDef}\n                  // @ts-expect-error\n                  data={emojiData}\n                  size={13}\n                />\n              )}\n              &nbsp;\n            </span>\n            {tooltipReactionType === getOptionForType(reactionType)?.id && (\n              <div className='str-chat__simple-reactions-list-tooltip'>\n                <div className='arrow' />\n                {getUsersPerReactionType(tooltipReactionType)?.join(', ')}\n              </div>\n            )}\n          </li>\n        ) : null;\n      })}\n      {reactions?.length !== 0 && (\n        <li className='str-chat__simple-reactions-list-item--last-number'>\n          {getTotalReactionCount()}\n        </li>\n      )}\n    </ul>\n  );\n};\n\nexport const SimpleReactionsList = React.memo(\n  UnMemoizedSimpleReactionsList,\n) as typeof UnMemoizedSimpleReactionsList;\n","import React, { useMemo } from 'react';\n\nimport {\n  useMentionsUIHandler,\n  useMobilePress,\n  useReactionClick,\n  useReactionHandler,\n} from './hooks';\nimport { MessageOptions, MessageOptionsProps } from './MessageOptions';\nimport { messageHasAttachments, messageHasReactions } from './utils';\n\nimport {\n  ReactionsList as DefaultReactionList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText as defaultRenderText, isOnlyEmojis } from '../../utils';\n\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageTextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  customInnerClass?: string;\n  customOptionProps?: Partial<MessageOptionsProps<At, Ch, Co, Ev, Me, Re, Us>>;\n  customWrapperClass?: string;\n  messageWrapperRef?: React.RefObject<HTMLDivElement>;\n  onReactionListClick?: MouseEventHandler;\n  reactionSelectorRef?: React.RefObject<HTMLDivElement>;\n  showDetailedReactions?: boolean;\n  theme?: string;\n};\n\nconst UnMemoizedMessageTextComponent = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageTextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    customInnerClass,\n    customOptionProps,\n    customWrapperClass,\n    message,\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n    ReactionsList = DefaultReactionList,\n    ReactionSelector = DefaultReactionSelector,\n    reactionSelectorRef,\n    renderText = defaultRenderText,\n    theme = 'simple',\n    unsafeHTML,\n  } = props;\n\n  const { t, userLanguage } = useTranslationContext();\n\n  const { handleMobilePress } = useMobilePress();\n\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n\n  const {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  } = useReactionClick(message, reactionSelectorRef);\n\n  const hasReactions = messageHasReactions(message);\n  const hasAttachment = messageHasAttachments(message);\n  const handleReaction = useReactionHandler(message);\n\n  const messageTextToRender =\n    message.i18n?.[`${userLanguage}_text` as `${TranslationLanguages}_text`] ||\n    message.text;\n\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, message.mentioned_users),\n    [message.mentioned_users, messageTextToRender],\n  );\n\n  const wrapperClass = customWrapperClass || 'str-chat__message-text';\n  const innerClass =\n    customInnerClass ||\n    `str-chat__message-text-inner str-chat__message-${theme}-text-inner`;\n\n  if (!messageTextToRender) return null;\n\n  return (\n    <div className={wrapperClass}>\n      <div\n        className={`\n          ${innerClass}\n          ${\n            hasAttachment\n              ? ` str-chat__message-${theme}-text-inner--has-attachment`\n              : ''\n          }\n          ${\n            isOnlyEmojis(message.text)\n              ? ` str-chat__message-${theme}-text-inner--is-emoji`\n              : ''\n          }\n        `.trim()}\n        data-testid='message-text-inner-wrapper'\n        onClick={onMentionsClick}\n        onMouseOver={onMentionsHover}\n      >\n        {message.type === 'error' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {t('Error · Unsent')}\n          </div>\n        )}\n        {message.status === 'failed' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {message.errorStatusCode !== 403\n              ? t('Message Failed · Click to try again')\n              : t('Message Failed · Unauthorized')}\n          </div>\n        )}\n        {unsafeHTML && message.html ? (\n          <div dangerouslySetInnerHTML={{ __html: message.html }} />\n        ) : (\n          <div onClick={handleMobilePress}>{messageText}</div>\n        )}\n        {hasReactions && !showDetailedReactions && isReactionEnabled && (\n          <ReactionsList\n            onClick={onReactionListClick}\n            own_reactions={message.own_reactions}\n            reaction_counts={message.reaction_counts || undefined}\n            reactions={message.latest_reactions}\n            reverse={true}\n          />\n        )}\n        {showDetailedReactions && isReactionEnabled && (\n          <ReactionSelector\n            detailedView\n            handleReaction={handleReaction}\n            latest_reactions={message.latest_reactions}\n            own_reactions={message.own_reactions}\n            reaction_counts={message.reaction_counts || undefined}\n            ref={reactionSelectorRef}\n          />\n        )}\n      </div>\n      <MessageOptions\n        {...props}\n        {...customOptionProps}\n        onReactionListClick={onReactionListClick}\n      />\n    </div>\n  );\n};\n\nexport const MessageText = React.memo(\n  UnMemoizedMessageTextComponent,\n) as typeof UnMemoizedMessageTextComponent;\n","import React from 'react';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { EmojiData } from 'emoji-mart';\n\nimport type { MessageInputState } from './hooks/messageInput';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst filterEmoji = (emoji: EmojiData) => {\n  if (\n    emoji.name === 'White Smiling Face' ||\n    emoji.name === 'White Frowning Face'\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport type MessageInputEmojiPickerProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageInputState<At, Us> & {\n  emojiPickerRef: React.MutableRefObject<HTMLDivElement | null>;\n  onSelectEmoji: (emoji: EmojiData) => void;\n  small?: boolean;\n};\n\nexport const EmojiPicker = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageInputEmojiPickerProps<At, Us>,\n) => {\n  const { emojiPickerIsOpen, emojiPickerRef, onSelectEmoji, small } = props;\n\n  const { emojiConfig } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const { emojiData, EmojiPicker: Picker } = emojiConfig || {};\n\n  if (emojiPickerIsOpen && emojiData) {\n    const className = small\n      ? 'str-chat__small-message-input-emojipicker'\n      : 'str-chat__input--emojipicker';\n\n    return (\n      <div className={className} ref={emojiPickerRef}>\n        {Picker && (\n          <Picker\n            color='#006CFF'\n            data={emojiData}\n            emoji='point_up'\n            emojisToShowFilter={filterEmoji}\n            native\n            onSelect={onSelectEmoji}\n            set='facebook'\n            showPreview={false}\n            showSkinTones={false}\n            title={t('Pick your emoji')}\n            useButton\n          />\n        )}\n      </div>\n    );\n  }\n  return null;\n};\n","import React, {\n  Reducer,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n} from 'react';\nimport {\n  dataTransferItemsHaveFiles,\n  dataTransferItemsToFiles,\n  FileLike,\n} from 'react-file-utils';\nimport {\n  Attachment,\n  CommandResponse,\n  logChatPromiseExecution,\n  MessageResponse,\n  SendFileAPIResponse,\n  UpdatedMessage,\n  UserResponse,\n} from 'stream-chat';\n\nimport {\n  StreamMessage,\n  useChannelContext,\n} from '../../../context/ChannelContext';\nimport { generateRandomId } from '../../../utils';\n\nimport type { BaseEmoji, EmojiData } from 'emoji-mart';\n\nimport type { MessageInputProps } from '../MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type FileUpload = {\n  file: {\n    name: string;\n    size?: number | string;\n    type?: string;\n    uri?: string;\n  };\n  id: string;\n  state: 'finished' | 'failed' | 'uploading';\n  url?: string;\n};\n\nexport type ImageUpload = {\n  file: {\n    height?: number;\n    name?: string;\n    uri?: string;\n    width?: number;\n  };\n  id: string;\n  state: 'finished' | 'failed' | 'uploading';\n  previewUri?: string;\n  url?: string;\n};\n\nexport type MessageInputState<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  attachments: Attachment<At>[];\n  emojiPickerIsOpen: boolean;\n  fileOrder: string[];\n  fileUploads: { [id: string]: FileUpload };\n  imageOrder: string[];\n  imageUploads: {\n    [id: string]: ImageUpload;\n  };\n  // ids of users mentioned in message\n  mentioned_users: UserResponse<Us>[];\n  numberOfUploads: number;\n  text: string;\n};\n\ntype SetEmojiPickerIsOpenAction = {\n  type: 'setEmojiPickerIsOpen';\n  value: boolean;\n};\ntype SetTextAction = {\n  getNewText: (currentStateText: string) => string;\n  type: 'setText';\n};\ntype ClearAction = {\n  type: 'clear';\n};\ntype SetImageUploadAction = {\n  id: string;\n  type: 'setImageUpload';\n  file?: File | FileLike;\n  previewUri?: string;\n  state?: string;\n  url?: string;\n};\ntype SetFileUploadAction = {\n  id: string;\n  type: 'setFileUpload';\n  file?: File;\n  state?: string;\n  url?: string;\n};\ntype RemoveImageUploadAction = {\n  id: string;\n  type: 'removeImageUpload';\n};\ntype RemoveFileUploadAction = {\n  id: string;\n  type: 'removeFileUpload';\n};\ntype ReduceNumberOfUploadsAction = {\n  type: 'reduceNumberOfUploads';\n};\ntype AddMentionedUserAction<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  type: 'addMentionedUser';\n  user: UserResponse<Us>;\n};\n\nexport type MessageInputReducerAction<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> =\n  | SetEmojiPickerIsOpenAction\n  | SetTextAction\n  | ClearAction\n  | SetImageUploadAction\n  | SetFileUploadAction\n  | RemoveImageUploadAction\n  | RemoveFileUploadAction\n  | ReduceNumberOfUploadsAction\n  | AddMentionedUserAction<Us>;\n\nexport type MessageInputHookProps<\n  Co extends DefaultCommandType = DefaultCommandType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  closeEmojiPicker: React.MouseEventHandler<HTMLButtonElement>;\n  emojiPickerRef: React.MutableRefObject<HTMLDivElement | null>;\n  getCommands: () => CommandResponse<Co>[] | undefined;\n  getUsers: () => (UserResponse<Us> | undefined)[];\n  handleChange: React.ChangeEventHandler<HTMLTextAreaElement>;\n  handleEmojiKeyDown: React.KeyboardEventHandler<HTMLSpanElement>;\n  handleSubmit: React.FormEventHandler<HTMLFormElement>;\n  insertText: (textToInsert: string) => void;\n  isUploadEnabled: boolean;\n  maxFilesLeft: number;\n  onPaste: (event: React.ClipboardEvent<HTMLTextAreaElement>) => void;\n  onSelectEmoji: (emoji: EmojiData) => void;\n  onSelectItem: (item: UserResponse<Us>) => void;\n  openEmojiPicker: React.MouseEventHandler<HTMLSpanElement>;\n  removeFile: (id: string) => void;\n  removeImage: (id: string) => void;\n  textareaRef: React.MutableRefObject<HTMLTextAreaElement | undefined>;\n  uploadFile: (id: string) => void;\n  uploadImage: (id: string) => void;\n  uploadNewFiles(files: FileList | File[]): void;\n};\n\n/**\n * Get attachment type from MIME type\n */\nconst getAttachmentTypeFromMime = (mime: string) => {\n  if (mime.includes('video/')) return 'media';\n  if (mime.includes('audio/')) return 'audio';\n  return 'file';\n};\n\nconst apiMaxNumberOfFiles = 10;\nconst emptyFileUploads: Record<string, FileUpload> = {};\nconst emptyImageUploads: Record<string, ImageUpload> = {};\n\n/**\n * Initializes the state. Empty if the message prop is falsy.\n */\nconst initState = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n): MessageInputState<At, Us> => {\n  if (!message) {\n    return {\n      attachments: [],\n      emojiPickerIsOpen: false,\n      fileOrder: [],\n      fileUploads: { ...emptyFileUploads },\n      imageOrder: [],\n      imageUploads: { ...emptyImageUploads },\n      mentioned_users: [],\n      numberOfUploads: 0,\n      text: '',\n    };\n  }\n\n  // if message prop is defined, get image uploads, file uploads, text, etc. from it\n  const imageUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'image')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        acc[id] = {\n          file: {\n            name: attachment.fallback,\n          },\n          id,\n          state: 'finished',\n          url: attachment.image_url,\n        };\n        return acc;\n      }, {} as Record<string, ImageUpload>) || {};\n  const imageOrder = Object.keys(imageUploads);\n\n  const fileUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'file')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        acc[id] = {\n          file: {\n            name: attachment.title || '',\n            size: attachment.file_size,\n            type: attachment.mime_type,\n          },\n          id,\n          state: 'finished',\n          url: attachment.asset_url,\n        };\n        return acc;\n      }, {} as Record<string, FileUpload>) || {};\n  const fileOrder = Object.keys(fileUploads);\n\n  const numberOfUploads = fileOrder.length + imageOrder.length;\n\n  const attachments =\n    message.attachments?.filter(\n      ({ type }) => type !== 'file' && type !== 'image',\n    ) || [];\n\n  const mentioned_users = message.mentioned_users || [];\n\n  return {\n    attachments,\n    emojiPickerIsOpen: false,\n    fileOrder,\n    fileUploads,\n    imageOrder,\n    imageUploads,\n    mentioned_users,\n    numberOfUploads,\n    text: message.text || '',\n  };\n};\n\n/**\n * MessageInput state reducer\n */\nconst messageInputReducer = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  state: MessageInputState<At, Us>,\n  action: MessageInputReducerAction<Us>,\n) => {\n  switch (action.type) {\n    case 'setEmojiPickerIsOpen':\n      return { ...state, emojiPickerIsOpen: action.value };\n    case 'setText':\n      return { ...state, text: action.getNewText(state.text) };\n    case 'clear':\n      return {\n        attachments: [],\n        emojiPickerIsOpen: false,\n        fileOrder: [],\n        fileUploads: { ...emptyFileUploads },\n        imageOrder: [],\n        imageUploads: { ...emptyImageUploads },\n        mentioned_users: [],\n        numberOfUploads: 0,\n        text: '',\n      };\n    case 'setImageUpload': {\n      const imageAlreadyExists = state.imageUploads[action.id];\n      if (!imageAlreadyExists && !action.file) return state;\n      const imageOrder = imageAlreadyExists\n        ? state.imageOrder\n        : state.imageOrder.concat(action.id);\n      const newUploadFields = { ...action } as Partial<SetImageUploadAction>;\n      delete newUploadFields.type;\n      return {\n        ...state,\n        imageOrder,\n        imageUploads: {\n          ...state.imageUploads,\n          [action.id]: { ...state.imageUploads[action.id], ...newUploadFields },\n        },\n        numberOfUploads: imageAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'setFileUpload': {\n      const fileAlreadyExists = state.fileUploads[action.id];\n      if (!fileAlreadyExists && !action.file) return state;\n      const fileOrder = fileAlreadyExists\n        ? state.fileOrder\n        : state.fileOrder.concat(action.id);\n      const newUploadFields = { ...action } as Partial<SetFileUploadAction>;\n      delete newUploadFields.type;\n      return {\n        ...state,\n        fileOrder,\n        fileUploads: {\n          ...state.fileUploads,\n          [action.id]: { ...state.fileUploads[action.id], ...newUploadFields },\n        },\n        numberOfUploads: fileAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'removeImageUpload': {\n      if (!state.imageUploads[action.id]) return state; // cannot remove anything\n      const newImageUploads = { ...state.imageUploads };\n      delete newImageUploads[action.id];\n      return {\n        ...state,\n        imageOrder: state.imageOrder.filter((_id) => _id !== action.id),\n        imageUploads: newImageUploads,\n        numberOfUploads: state.numberOfUploads - 1,\n      };\n    }\n    case 'removeFileUpload': {\n      if (!state.fileUploads[action.id]) return state; // cannot remove anything\n      const newFileUploads = { ...state.fileUploads };\n      delete newFileUploads[action.id];\n      return {\n        ...state,\n        fileOrder: state.fileOrder.filter((_id) => _id !== action.id),\n        fileUploads: newFileUploads,\n        numberOfUploads: state.numberOfUploads - 1,\n      };\n    }\n    case 'reduceNumberOfUploads': // TODO: figure out if we can just use uploadOrder instead\n      return { ...state, numberOfUploads: state.numberOfUploads - 1 };\n    case 'addMentionedUser':\n      return {\n        ...state,\n        mentioned_users: state.mentioned_users.concat(action.user),\n      };\n    default:\n      return state;\n  }\n};\n\n/**\n * hook for MessageInput state\n */\nexport const useMessageInput = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n): MessageInputState<At, Us> & MessageInputHookProps<Co, Us> => {\n  const {\n    additionalTextareaProps,\n    clearEditingState,\n    doFileUploadRequest,\n    doImageUploadRequest,\n    errorHandler,\n    focus,\n    message,\n    noFiles,\n    overrideSubmitHandler,\n    parent,\n    publishTypingEvent,\n  } = props;\n\n  const {\n    channel,\n    editMessage,\n    maxNumberOfFiles,\n    multipleUploads,\n    sendMessage,\n  } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const [state, dispatch] = useReducer(\n    messageInputReducer as Reducer<\n      MessageInputState<At, Us>,\n      MessageInputReducerAction<Us>\n    >,\n    message,\n    initState,\n  );\n\n  const {\n    attachments,\n    fileOrder,\n    fileUploads,\n    imageOrder,\n    imageUploads,\n    mentioned_users,\n    numberOfUploads,\n    text,\n  } = state;\n\n  const emojiPickerRef = useRef<HTMLDivElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>();\n\n  // Focus\n  useEffect(() => {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]);\n\n  // Text + cursor position\n  const newCursorPosition = useRef<number>();\n\n  const insertText = useCallback(\n    (textToInsert: string) => {\n      const { maxLength } = additionalTextareaProps || {};\n\n      if (!textareaRef.current) {\n        dispatch({\n          getNewText: (text) => {\n            const updatedText = text + textToInsert;\n            if (maxLength && updatedText.length > maxLength) {\n              return updatedText.slice(0, maxLength);\n            }\n            return updatedText;\n          },\n          type: 'setText',\n        });\n        return;\n      }\n\n      const { selectionEnd, selectionStart } = textareaRef.current;\n      newCursorPosition.current = selectionStart + textToInsert.length;\n\n      dispatch({\n        getNewText: (prevText) => {\n          const updatedText =\n            prevText.slice(0, selectionStart) +\n            textToInsert +\n            prevText.slice(selectionEnd);\n\n          if (maxLength && updatedText.length > maxLength) {\n            return updatedText.slice(0, maxLength);\n          }\n\n          return updatedText;\n        },\n        type: 'setText',\n      });\n    },\n    [additionalTextareaProps, newCursorPosition, textareaRef],\n  );\n\n  useEffect(() => {\n    const textareaElement = textareaRef.current;\n    if (textareaElement && newCursorPosition.current !== undefined) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = undefined;\n    }\n  }, [text, newCursorPosition]);\n\n  const handleChange: React.ChangeEventHandler<HTMLTextAreaElement> = useCallback(\n    (event) => {\n      event.preventDefault();\n      if (!event || !event.target) {\n        return;\n      }\n\n      const newText = event.target.value;\n      dispatch({\n        getNewText: () => newText,\n        type: 'setText',\n      });\n      if (publishTypingEvent && newText && channel) {\n        logChatPromiseExecution(\n          channel.keystroke(parent?.id),\n          'start typing event',\n        );\n      }\n    },\n    [channel, parent, publishTypingEvent],\n  );\n\n  // Emoji\n\n  const closeEmojiPicker = useCallback(\n    (event: MouseEvent) => {\n      if (\n        emojiPickerRef.current &&\n        !emojiPickerRef.current.contains(event.target as Node)\n      ) {\n        dispatch({\n          type: 'setEmojiPickerIsOpen',\n          value: false,\n        });\n      }\n    },\n    [emojiPickerRef],\n  );\n\n  const openEmojiPicker: React.MouseEventHandler<HTMLSpanElement> = useCallback(\n    (event) => {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: true,\n      });\n\n      // Prevent event from bubbling to document, so the close handler is never called for this event\n      event.stopPropagation();\n    },\n    [],\n  );\n\n  const handleEmojiKeyDown: React.KeyboardEventHandler<HTMLSpanElement> = (\n    event,\n  ) => {\n    if (\n      event.key === ' ' ||\n      event.key === 'Enter' ||\n      event.key === 'Spacebar'\n    ) {\n      event.preventDefault();\n      /**\n       * TODO: fix the below at some point because this type casting is wrong\n       * and just forced to not have warnings currently with the unknown casting\n       */\n      openEmojiPicker(\n        (event as unknown) as React.MouseEvent<HTMLSpanElement, MouseEvent>,\n      );\n    }\n  };\n\n  const handleEmojiEscape = (event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: false,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (state.emojiPickerIsOpen) {\n      document.addEventListener('click', closeEmojiPicker, false);\n      document.addEventListener('keydown', handleEmojiEscape);\n    }\n    return () => {\n      document.removeEventListener('click', closeEmojiPicker, false);\n      document.removeEventListener('keydown', handleEmojiEscape);\n    };\n  }, [closeEmojiPicker, state.emojiPickerIsOpen]);\n\n  const onSelectEmoji = useCallback(\n    (emoji: EmojiData) => insertText((emoji as BaseEmoji).native),\n    [insertText],\n  );\n\n  // Commands / mentions\n\n  const getCommands = useCallback(() => channel?.getConfig?.()?.commands, [\n    channel,\n  ]);\n\n  const getUsers = useCallback(() => {\n    if (!channel) return [];\n    return [\n      ...Object.values(channel.state.members).map(({ user }) => user),\n      ...Object.values(channel.state.watchers),\n    ].filter(\n      (_user, index, self) =>\n        self.findIndex((user) => user?.id === _user?.id) === index, // filter out non-unique ids\n    );\n  }, [channel]);\n\n  const onSelectItem = useCallback((item: UserResponse<Us>) => {\n    dispatch({ type: 'addMentionedUser', user: item });\n  }, []);\n\n  // Submitting\n\n  const getAttachmentsFromUploads = useCallback(() => {\n    const imageAttachments = imageOrder\n      .map((id) => imageUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .filter((\n        { id, url },\n        _,\n        self, // filter out duplicates based on url\n      ) => self.every((upload) => upload.id === id || upload.url !== url))\n      .map(\n        (upload) =>\n          ({\n            fallback: upload.file.name,\n            image_url: upload.url,\n            type: 'image',\n          } as Attachment<At>),\n      );\n\n    const fileAttachments = fileOrder\n      .map((id) => fileUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .map(\n        (upload) =>\n          ({\n            asset_url: upload.url,\n            file_size: upload.file.size,\n            mime_type: upload.file.type,\n            title: upload.file.name,\n            type: getAttachmentTypeFromMime(upload.file.type || ''),\n          } as Attachment<At>),\n      );\n\n    return [\n      ...attachments, // from state\n      ...imageAttachments,\n      ...fileAttachments,\n    ];\n  }, [imageOrder, imageUploads, fileOrder, fileUploads, attachments]);\n\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = (event) => {\n    event.preventDefault();\n    const trimmedMessage = text.trim();\n    const isEmptyMessage =\n      trimmedMessage === '' ||\n      trimmedMessage === '>' ||\n      trimmedMessage === '``````' ||\n      trimmedMessage === '``' ||\n      trimmedMessage === '**' ||\n      trimmedMessage === '____' ||\n      trimmedMessage === '__' ||\n      trimmedMessage === '****';\n    if (isEmptyMessage && numberOfUploads === 0) {\n      return;\n    }\n    // the channel component handles the actual sending of the message\n    const someAttachmentsUploading =\n      Object.values(imageUploads).some(\n        (upload) => upload.state === 'uploading',\n      ) ||\n      Object.values(fileUploads).some((upload) => upload.state === 'uploading');\n    if (someAttachmentsUploading) {\n      // TODO: show error to user that they should wait until image is uploaded\n      return;\n    }\n\n    const newAttachments = getAttachmentsFromUploads();\n\n    // Instead of checking if a user is still mentioned every time the text changes,\n    // just filter out non-mentioned users before submit, which is cheaper\n    // and allows users to easily undo any accidental deletion\n    const actualMentionedUsers = Array.from(\n      new Set(\n        mentioned_users.filter(\n          ({ id, name }) =>\n            text.includes(`@${id}`) || text.includes(`@${name}`),\n        ),\n      ),\n    );\n\n    const updatedMessage = {\n      attachments: newAttachments,\n      mentioned_users: actualMentionedUsers,\n      text,\n    };\n\n    if (!!message && editMessage) {\n      // TODO: Remove this line and show an error when submit fails\n      if (clearEditingState) {\n        clearEditingState();\n      }\n\n      const updateMessagePromise = editMessage(({\n        ...updatedMessage,\n        id: message.id,\n      } as unknown) as UpdatedMessage<At, Ch, Co, Me, Re, Us>).then(\n        clearEditingState,\n      );\n\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n      dispatch({ type: 'clear' });\n    } else if (overrideSubmitHandler && channel) {\n      overrideSubmitHandler(\n        {\n          ...updatedMessage,\n          parent,\n        },\n        channel.cid,\n      );\n      dispatch({ type: 'clear' });\n    } else if (sendMessage) {\n      const sendMessagePromise = sendMessage({\n        ...updatedMessage,\n        parent: parent as MessageResponse<At, Ch, Co, Me, Re, Us>,\n      });\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      dispatch({ type: 'clear' });\n    }\n    if (channel && publishTypingEvent)\n      logChatPromiseExecution(channel.stopTyping(), 'stop typing');\n  };\n\n  // Attachments\n\n  // Files\n\n  const uploadFile = useCallback((id) => {\n    dispatch({ id, state: 'uploading', type: 'setFileUpload' });\n  }, []);\n\n  const removeFile = useCallback((id) => {\n    // TODO: cancel upload if still uploading\n    dispatch({ id, type: 'removeFileUpload' });\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      if (!channel) return;\n      const upload = Object.values(fileUploads).find(\n        (fileUpload) => fileUpload.state === 'uploading' && fileUpload.file,\n      );\n      if (!upload) return;\n\n      const { file, id } = upload;\n      /** @type FileUploadAPIResponse */\n      let response;\n      try {\n        if (doFileUploadRequest) {\n          response = await doFileUploadRequest(file, channel);\n        } else {\n          response = await channel.sendFile(file as File);\n        }\n      } catch (error) {\n        console.warn(error);\n        let alreadyRemoved = false;\n\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!fileUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ id, state: 'failed', type: 'setFileUpload' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the parameters passed to the error handler actually make sense\n          errorHandler(error, 'upload-file', file);\n        }\n        return;\n      }\n\n      // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n      // This is for the case if someone wants to handle failure on app level.\n      if (!response) {\n        removeFile(id);\n        return;\n      }\n\n      dispatch({\n        id,\n        state: 'finished',\n        type: 'setFileUpload',\n        url: response.file,\n      });\n    })();\n  }, [fileUploads, channel, doFileUploadRequest, errorHandler, removeFile]);\n\n  // Images\n\n  const removeImage = useCallback((id) => {\n    dispatch({ id, type: 'removeImageUpload' });\n    // TODO: cancel upload if still uploading\n  }, []);\n\n  const uploadImage = useCallback(\n    async (id) => {\n      const img = imageUploads[id];\n      if (!img || !channel) return;\n      const { file } = img;\n      if (img.state !== 'uploading') {\n        dispatch({ id, state: 'uploading', type: 'setImageUpload' });\n      }\n      let response: SendFileAPIResponse;\n      try {\n        if (doImageUploadRequest) {\n          response = await doImageUploadRequest(file, channel);\n        } else {\n          response = await channel.sendImage(file as File);\n        }\n      } catch (error) {\n        console.warn(error);\n        let alreadyRemoved = false;\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!imageUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ id, state: 'failed', type: 'setImageUpload' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the parameters passed to the error handler actually make sense\n          errorHandler(error, 'upload-image', {\n            ...file,\n            id,\n          });\n        }\n        return;\n      }\n\n      // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n      // This is for the case if someone wants to handle failure on app level.\n      if (!response) {\n        removeImage(id);\n        return;\n      }\n\n      dispatch({\n        id,\n        state: 'finished',\n        type: 'setImageUpload',\n        url: response.file,\n      });\n    },\n    [imageUploads, channel, doImageUploadRequest, errorHandler, removeImage],\n  );\n\n  useEffect(() => {\n    if (FileReader) {\n      const upload = Object.values(imageUploads).find(\n        (imageUpload) =>\n          imageUpload.state === 'uploading' &&\n          !!imageUpload.file &&\n          !imageUpload.previewUri,\n      );\n      if (upload) {\n        const { file, id } = upload;\n        // TODO: Possibly use URL.createObjectURL instead. However, then we need\n        // to release the previews when not used anymore though.\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          if (typeof event.target?.result !== 'string') return;\n          dispatch({\n            id,\n            previewUri: event.target.result,\n            type: 'setImageUpload',\n          });\n        };\n        reader.readAsDataURL(file as Blob);\n        uploadImage(id);\n        return () => {\n          reader.onload = null;\n        };\n      }\n    }\n    return;\n  }, [imageUploads, uploadImage]);\n\n  // Number of files that the user can still add. Should never be more than the amount allowed by the API.\n  // If multipleUploads is false, we only want to allow a single upload.\n  const maxFilesAllowed = useMemo(\n    () => (!multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles),\n    [maxNumberOfFiles, multipleUploads],\n  );\n\n  // return !multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles;\n  const maxFilesLeft = maxFilesAllowed - numberOfUploads;\n\n  const uploadNewFiles = useCallback(\n    (files: FileList | File[] | FileLike[]) => {\n      Array.from(files)\n        .slice(0, maxFilesLeft)\n        .forEach((file) => {\n          const id = generateRandomId();\n          if (\n            file.type.startsWith('image/') &&\n            !file.type.endsWith('.photoshop') // photoshop files begin with 'image/'\n          ) {\n            dispatch({ file, id, state: 'uploading', type: 'setImageUpload' });\n          } else if (file instanceof File && !noFiles) {\n            dispatch({ file, id, state: 'uploading', type: 'setFileUpload' });\n          }\n        });\n    },\n    [maxFilesLeft, noFiles],\n  );\n\n  const onPaste = useCallback(\n    (clipboardEvent: React.ClipboardEvent<HTMLTextAreaElement>) => {\n      (async (event) => {\n        // TODO: Move this handler to package with ImageDropzone\n        const { items } = event.clipboardData;\n        if (!dataTransferItemsHaveFiles(Array.from(items))) return;\n\n        event.preventDefault();\n        // Get a promise for the plain text in case no files are\n        // found. This needs to be done here because chrome cleans\n        // up the DataTransferItems after resolving of a promise.\n        let plainTextPromise: Promise<string> | undefined = undefined;\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.kind === 'string' && item.type === 'text/plain') {\n            plainTextPromise = new Promise((resolve) => {\n              item.getAsString((string) => {\n                resolve(string);\n              });\n            });\n            break;\n          }\n        }\n\n        const fileLikes = await dataTransferItemsToFiles(Array.from(items));\n        if (fileLikes.length) {\n          uploadNewFiles(fileLikes);\n          return;\n        }\n\n        // fallback to regular text paste\n        if (plainTextPromise) {\n          const pastedText = await plainTextPromise;\n          insertText(pastedText);\n        }\n      })(clipboardEvent);\n    },\n    [insertText, uploadNewFiles],\n  );\n\n  const isUploadEnabled = channel?.getConfig?.()?.uploads !== false;\n\n  return {\n    ...state,\n    /**\n     * TODO: fix the below at some point because this type casting is wrong\n     * and just forced to not have warnings currently with the unknown casting\n     */\n    closeEmojiPicker: (closeEmojiPicker as unknown) as React.MouseEventHandler<HTMLSpanElement>,\n    emojiPickerRef,\n    getCommands,\n    getUsers,\n    handleChange,\n    handleEmojiKeyDown,\n    handleSubmit,\n    insertText,\n    isUploadEnabled,\n    maxFilesLeft,\n    onPaste,\n    onSelectEmoji,\n    onSelectItem,\n    openEmojiPicker,\n    removeFile,\n    removeImage,\n    textareaRef,\n    uploadFile,\n    uploadImage,\n    uploadNewFiles,\n  };\n};\n","import React from 'react';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport const EmojiIconLarge: React.FC = () => {\n  const { t } = useTranslationContext();\n\n  return (\n    <svg height='28' width='28' xmlns='http://www.w3.org/2000/svg'>\n      <title>{t('Open emoji picker')}</title>\n      <path\n        d='M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z'\n        fillRule='evenodd'\n      />\n    </svg>\n  );\n};\n\nexport const EmojiIconSmall: React.FC = () => {\n  const { t } = useTranslationContext();\n\n  return (\n    <svg height='14' width='14' xmlns='http://www.w3.org/2000/svg'>\n      <title>{t('Open emoji picker')}</title>\n      <path\n        d='M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z'\n        fillRule='evenodd'\n      />\n    </svg>\n  );\n};\n\nexport const FileUploadIcon: React.FC = () => {\n  const { t } = useTranslationContext();\n\n  return (\n    <svg height='14' width='14' xmlns='http://www.w3.org/2000/svg'>\n      <title>{t('Attach files')}</title>\n      <path\n        d='M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z'\n        fillRule='nonzero'\n      />\n    </svg>\n  );\n};\n\nexport const FileUploadIconFlat: React.FC = () => {\n  const { t } = useTranslationContext();\n\n  return (\n    <svg height='14' width='14' xmlns='http://www.w3.org/2000/svg'>\n      <title>{t('Attach files')}</title>\n      <path\n        d='M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z'\n        fillRule='nonzero'\n      />\n    </svg>\n  );\n};\n\nexport type SendButtonProps = {\n  /** Function that gets triggered on click */\n  sendMessage: React.FormEventHandler<HTMLFormElement>;\n};\n\nexport const SendButton: React.FC<SendButtonProps> = ({ sendMessage }) => {\n  const { t } = useTranslationContext();\n  return (\n    <button\n      className='str-chat__send-button'\n      onClick={\n        /**\n         * TODO: fix the below at some point because this type casting is wrong\n         * and just forced to not have warnings currently with the unknown casting\n         */\n        (sendMessage as unknown) as React.MouseEventHandler<HTMLButtonElement>\n      }\n    >\n      <svg\n        height='17'\n        viewBox='0 0 18 17'\n        width='18'\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <title>{t('Send')}</title>\n        <path\n          d='M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z'\n          fill='#006cff'\n          fillRule='evenodd'\n        />\n      </svg>\n    </button>\n  );\n};\n","import React from 'react';\nimport { FilePreviewer, ImagePreviewer } from 'react-file-utils';\n\nimport { useChannelContext } from '../../context/ChannelContext';\n\nimport type { MessageInputState } from './hooks/messageInput';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageInputUploadsProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageInputState<At, Us> & {\n  removeFile?: (id: string) => void;\n  removeImage?: (id: string) => void;\n  uploadFile?: (id: string) => void;\n  uploadImage?: (id: string) => void;\n  uploadNewFiles?: (files: FileList | File[]) => void;\n};\n\nexport const UploadsPreview = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageInputUploadsProps<At, Us>,\n) => {\n  const {\n    fileOrder,\n    fileUploads,\n    imageOrder,\n    imageUploads,\n    numberOfUploads,\n    removeFile,\n    removeImage,\n    uploadFile,\n    uploadImage,\n    uploadNewFiles,\n  } = props;\n\n  const channelContext = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const imagesToPreview = imageOrder.map((id) => imageUploads[id]);\n  const filesToPreview = fileOrder.map((id) => fileUploads[id]);\n\n  return (\n    <>\n      {imageOrder.length > 0 && (\n        <ImagePreviewer\n          disabled={\n            channelContext.maxNumberOfFiles !== undefined &&\n            numberOfUploads >= channelContext.maxNumberOfFiles\n          }\n          handleFiles={uploadNewFiles}\n          handleRemove={removeImage}\n          handleRetry={uploadImage}\n          imageUploads={imagesToPreview}\n          multiple={channelContext.multipleUploads}\n        />\n      )}\n      {fileOrder.length > 0 && (\n        <FilePreviewer\n          handleFiles={uploadNewFiles}\n          handleRemove={removeFile}\n          handleRetry={uploadFile}\n          uploads={filesToPreview}\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\n\nexport type CommandItemProps = {\n  entity: {\n    /** Arguments of command */\n    args?: string;\n    /** Description of command */\n    description?: string;\n    /** Name of the command */\n    name?: string;\n  };\n};\n\nconst UnMemoizedCommandItem: React.FC<CommandItemProps> = (props) => {\n  const { entity } = props;\n\n  return (\n    <div className='str-chat__slash-command'>\n      <span className='str-chat__slash-command-header'>\n        <strong>{entity.name}</strong> {entity.args}\n      </span>\n      <br />\n      <span className='str-chat__slash-command-description'>\n        {entity.description}\n      </span>\n    </div>\n  );\n};\n\nexport const CommandItem = React.memo(\n  UnMemoizedCommandItem,\n) as typeof UnMemoizedCommandItem;\n","import React from 'react';\n\nexport type EmoticonItemProps = {\n  entity: {\n    /** The parts of the Name property of the entity (or id if no name) that can be matched to the user input value.\n     * Default is bold for matches, but can be overwritten in css.\n     * */\n    itemNameParts: { match: string; parts: string[] };\n    /** Name for emoticon */\n    name: string;\n    /** Native value or actual emoticon */\n    native: string;\n  };\n};\n\nconst UnMemoizedEmoticonItem: React.FC<EmoticonItemProps> = (props) => {\n  const { entity } = props;\n\n  const hasEntity = Object.keys(entity).length;\n  const itemParts = entity?.itemNameParts;\n\n  const renderName = () => {\n    if (!hasEntity) return null;\n    return (\n      hasEntity &&\n      itemParts.parts.map((part, i) =>\n        part.toLowerCase() === itemParts.match.toLowerCase() ? (\n          <span className='str-chat__emoji-item--highlight' key={`part-${i}`}>\n            {part}\n          </span>\n        ) : (\n          <span className='str-chat__emoji-item--part' key={`part-${i}`}>\n            {part}\n          </span>\n        ),\n      )\n    );\n  };\n\n  return (\n    <div className='str-chat__emoji-item'>\n      <span className='str-chat__emoji-item--entity'>{entity.native}</span>\n      <span className='str-chat__emoji-item--name'>{renderName()}</span>\n    </div>\n  );\n};\n\nexport const EmoticonItem = React.memo(\n  UnMemoizedEmoticonItem,\n) as typeof UnMemoizedEmoticonItem;\n","import React from 'react';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\n\nexport type UserItemProps = {\n  /** The user */\n  entity: {\n    /** The parts of the Name property of the entity (or id if no name) that can be matched to the user input value.\n     * Default is bold for matches, but can be overwritten in css.\n     * */\n    itemNameParts: { match: string; parts: string[] };\n    /** Id of the user */\n    id?: string;\n    /** Image of the user */\n    image?: string;\n    /** Name of the user */\n    name?: string;\n  };\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   */\n  Avatar?: React.ComponentType<AvatarProps>;\n};\n\n/**\n * UserItem - Component rendered in commands menu\n */\nconst UnMemoizedUserItem: React.FC<UserItemProps> = (props) => {\n  const { Avatar = DefaultAvatar, entity } = props;\n\n  const hasEntity = Object.keys(entity).length;\n  const itemParts = entity?.itemNameParts;\n\n  const renderName = () => {\n    if (!hasEntity) return null;\n\n    return (\n      hasEntity &&\n      itemParts.parts.map((part, i) =>\n        part.toLowerCase() === itemParts.match.toLowerCase() ? (\n          <span className='str-chat__emoji-item--highlight' key={`part-${i}`}>\n            {part}\n          </span>\n        ) : (\n          <span className='str-chat__emoji-item--part' key={`part-${i}`}>\n            {part}\n          </span>\n        ),\n      )\n    );\n  };\n\n  return (\n    <div className='str-chat__user-item'>\n      <Avatar image={entity.image} size={20} />\n      <span\n        className='str-chat__user-item--name'\n        data-testid={'user-item-name'}\n      >\n        {renderName()}\n      </span>\n    </div>\n  );\n};\n\nexport const UserItem = React.memo(\n  UnMemoizedUserItem,\n) as typeof UnMemoizedUserItem;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport debounce from 'lodash.debounce';\n\nimport { AutoCompleteTextarea } from '../AutoCompleteTextarea';\nimport { CommandItem, CommandItemProps } from '../CommandItem/CommandItem';\nimport { EmoticonItem, EmoticonItemProps } from '../EmoticonItem/EmoticonItem';\nimport {\n  LoadingIndicator,\n  LoadingIndicatorProps,\n} from '../Loading/LoadingIndicator';\nimport { UserItem, UserItemProps } from '../UserItem/UserItem';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type { EmojiData, NimbleEmojiIndex } from 'emoji-mart';\nimport type {\n  CommandResponse,\n  UserFilters,\n  UserOptions,\n  UserResponse,\n  UserSort,\n} from 'stream-chat';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../../types/types';\n\ntype ObjectUnion<T> = T[keyof T];\n\nexport type SuggestionItemProps<\n  Co extends DefaultCommandType = DefaultCommandType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  className: string;\n  component: JSX.Element;\n  item: EmojiData | SuggestionUser<Us> | SuggestionCommand<Co>;\n  key: React.Key;\n  onClickHandler: React.MouseEventHandler<HTMLDivElement>;\n  onSelectHandler: (\n    item: EmojiData | SuggestionUser<Us> | SuggestionCommand<Co>,\n  ) => void;\n  selected: boolean;\n  style: React.CSSProperties;\n};\n\nexport type SuggestionListProps<\n  Co extends DefaultCommandType = DefaultCommandType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n> = ObjectUnion<\n  {\n    [key in keyof TriggerSettings<Co, Us, V>]: {\n      component: TriggerSettings<Co, Us, V>[key]['component'];\n      dropdownScroll: (element: HTMLDivElement) => void;\n      getSelectedItem:\n        | ((\n            item: Parameters<TriggerSettings<Co, Us, V>[key]['output']>[0],\n          ) => void)\n        | null;\n      getTextToReplace: (\n        item: Parameters<TriggerSettings<Co, Us, V>[key]['output']>[0],\n      ) => {\n        caretPosition: 'start' | 'end' | 'next' | number;\n        text: string;\n        key?: string;\n      };\n      onSelect: (newToken: {\n        caretPosition: 'start' | 'end' | 'next' | number;\n        text: string;\n      }) => void;\n      values: Parameters<\n        Parameters<TriggerSettings<Co, Us, V>[key]['dataProvider']>[2]\n      >[0];\n      className?: string;\n      itemClassName?: string;\n      itemStyle?: React.CSSProperties;\n      style?: React.CSSProperties;\n      value?: string;\n    };\n  }\n>;\n\nexport type SuggestionCommand<\n  Co extends DefaultCommandType = DefaultCommandType\n> = CommandResponse<Co>;\n\nexport type SuggestionUser<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = UserResponse<Us>;\n\nexport type TriggerSetting<\n  T extends UnknownType = UnknownType,\n  U = UnknownType\n> = {\n  component: string | React.ComponentType<T>;\n  dataProvider: (\n    query: string,\n    text: string,\n    onReady: (data: (U | undefined)[], token: string) => void,\n  ) => U[];\n  output: (\n    entity: U,\n  ) =>\n    | {\n        caretPosition: 'start' | 'end' | 'next' | number;\n        text: string;\n        key?: string;\n      }\n    | string\n    | null;\n  callback?: (item: U) => void;\n};\n\nexport type CommandTriggerSetting<\n  Co extends DefaultCommandType = DefaultCommandType\n> = TriggerSetting<Partial<CommandItemProps>, SuggestionCommand<Co>>;\n\nexport type EmojiTriggerSetting = TriggerSetting<\n  Partial<EmoticonItemProps>,\n  EmojiData\n>;\n\nexport type UserTriggerSetting<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = TriggerSetting<Partial<UserItemProps>, SuggestionUser<Us>>;\n\nexport type TriggerSettings<\n  Co extends DefaultCommandType = DefaultCommandType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n> = {\n  [key in keyof V]: TriggerSetting<V[key]['componentProps'], V[key]['data']>;\n} & {\n  '/': CommandTriggerSetting<Co>;\n  ':': EmojiTriggerSetting;\n  '@': UserTriggerSetting<Us>;\n};\n\nexport type MentionQueryParams<\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  filters?: UserFilters<Us>;\n  options?: UserOptions;\n  sort?: UserSort<Us>;\n};\n\nexport type ChatAutoCompleteProps<\n  Co extends DefaultCommandType = DefaultCommandType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n> = {\n  innerRef: React.MutableRefObject<HTMLTextAreaElement | undefined>;\n  /** Any additional attributes that you may want to add for underlying HTML textarea element */\n  additionalTextareaProps?: React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n  /** Array of commands */\n  commands?: CommandResponse<Co>[];\n  /** Make the textarea disabled */\n  disabled?: boolean;\n  /** Disable mentions */\n  disableMentions?: boolean;\n  /** Grow the number of rows of the textarea while you're typing */\n  grow?: boolean;\n  /** Function that runs on submit */\n  handleSubmit?: React.FormEventHandler<HTMLFormElement>;\n  /** What loading component to use for the auto complete when loading results. */\n  LoadingIndicator?: React.ElementType<LoadingIndicatorProps>;\n  /** Maximum number of rows */\n  maxRows?: number;\n  /** If true, the suggestion list will search all app users, not just current channel members/watchers. Default: false. */\n  mentionAllAppUsers?: boolean;\n  /** Object containing filters/sort/options overrides for mentions user query */\n  mentionQueryParams?: MentionQueryParams<Us>;\n  /** Minimum number of characters */\n  minChar?: number;\n  /** Function that runs on change */\n  onChange?: React.ChangeEventHandler<HTMLTextAreaElement>;\n  /** Listener for onfocus event on textarea */\n  onFocus?: React.FocusEventHandler<HTMLTextAreaElement>;\n  /** Function to run on pasting within the textarea */\n  onPaste?: (event: React.ClipboardEvent<HTMLTextAreaElement>) => void;\n  /** Handler for selecting item from suggestions list */\n  onSelectItem?: (item: UserResponse<Us>) => void;\n  /** Placeholder for the textarea */\n  placeholder?: string;\n  /** The number of rows you want the textarea to have */\n  rows?: number;\n  /**\n   * Optional UI component prop to override the default suggestion Item component.\n   * Defaults to and accepts same props as: [Item](https://github.com/GetStream/stream-chat-react/blob/master/src/components/AutoCompleteTextarea/Item.js)\n   */\n  SuggestionItem?: React.ForwardRefExoticComponent<SuggestionItemProps<Co, Us>>;\n  /**\n   * Optional UI component prop to override the default List component that displays suggestions.\n   * Defaults to and accepts same props as: [List](https://github.com/GetStream/stream-chat-react/blob/master/src/components/AutoCompleteTextarea/List.js)\n   */\n  SuggestionList?: React.ComponentType<SuggestionListProps<Co, Us, V>>;\n  /** The triggers for the textarea */\n  triggers?: TriggerSettings<Co, Us, V>;\n  /** The value of the textarea */\n  value?: string;\n};\n\nconst UnMemoizedChatAutoComplete = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: ChatAutoCompleteProps<Co, Us, V>,\n) => {\n  const {\n    additionalTextareaProps,\n    commands,\n    disabled,\n    disableMentions,\n    grow,\n    handleSubmit,\n    innerRef,\n    maxRows,\n    mentionAllAppUsers = false,\n    mentionQueryParams = {},\n    onChange,\n    onFocus,\n    onPaste,\n    onSelectItem,\n    placeholder,\n    rows = 3,\n    SuggestionItem,\n    SuggestionList,\n    triggers,\n    value,\n  } = props;\n\n  const { channel, emojiConfig } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n  const { client, mutes } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const [searching, setSearching] = useState(false);\n\n  const members = channel?.state?.members;\n  const watchers = channel?.state?.watchers;\n  const { emojiData, EmojiIndex } = emojiConfig || {};\n\n  const emojiIndex: NimbleEmojiIndex | null = useMemo(() => {\n    if (EmojiIndex) {\n      // @ts-expect-error type here isn't registering the constructor type\n      return new EmojiIndex(emojiData);\n    }\n    return null;\n  }, [emojiData, EmojiIndex]);\n\n  const emojiReplace = (word: string) => {\n    const found = emojiIndex?.search(word) || [];\n    const emoji = found\n      .filter(Boolean)\n      .slice(0, 10)\n      .find(({ emoticons }: EmojiData) => !!emoticons?.includes(word));\n    if (!emoji || !('native' in emoji)) return null;\n    return emoji.native;\n  };\n\n  const getMembersAndWatchers = useCallback(() => {\n    const memberUsers = members\n      ? Object.values(members).map(({ user }) => user)\n      : [];\n    const watcherUsers = watchers ? Object.values(watchers) : [];\n    const users = [...memberUsers, ...watcherUsers];\n\n    // make sure we don't list users twice\n    const uniqueUsers = {} as Record<string, UserResponse<Us>>;\n\n    users.forEach((user) => {\n      if (user && !uniqueUsers[user.id]) {\n        uniqueUsers[user.id] = user;\n      }\n    });\n\n    return Object.values(uniqueUsers);\n  }, [members, watchers]);\n\n  const queryMembersDebounced = useCallback(\n    debounce(\n      async (query: string, onReady: (users: UserResponse<Us>[]) => void) => {\n        try {\n          // @ts-expect-error\n          const response = await channel.queryMembers({\n            name: { $autocomplete: query },\n          });\n\n          const users = response.members.map(\n            (member) => member.user,\n          ) as UserResponse<Us>[];\n\n          if (onReady && users.length) {\n            onReady(users);\n          } else {\n            onReady([]);\n          }\n        } catch (error) {\n          console.log({ error });\n        }\n      },\n      200,\n    ),\n    [channel],\n  );\n\n  const queryUsers = async (\n    query: string,\n    onReady: (users: UserResponse<Us>[]) => void,\n  ) => {\n    if (!query || searching) return;\n    setSearching(true);\n\n    try {\n      const { users } = await client.queryUsers(\n        // @ts-expect-error\n        {\n          $or: [\n            { id: { $autocomplete: query } },\n            { name: { $autocomplete: query } },\n          ],\n          id: { $ne: client.userID },\n          ...mentionQueryParams.filters,\n        },\n        { id: 1, ...mentionQueryParams.sort },\n        { limit: 10, ...mentionQueryParams.options },\n      );\n\n      if (onReady && users.length) {\n        onReady(users);\n      } else {\n        onReady([]);\n      }\n    } catch (error) {\n      console.log({ error });\n    }\n\n    setSearching(false);\n  };\n\n  const queryUsersDebounced = debounce(queryUsers, 200);\n\n  /**\n   * dataProvider accepts `onReady` function, which will executed once the data is ready.\n   * Another approach would have been to simply return the data from dataProvider and let the\n   * component await for it and then execute the required logic. We are going for callback instead\n   * of async-await since we have debounce function in dataProvider. Which will delay the execution\n   * of api call on trailing end of debounce (lets call it a1) but will return with result of\n   * previous call without waiting for a1. So in this case, we want to execute onReady, when trailing\n   * end of debounce executes.\n   */\n  const getTriggers = useCallback(\n    () =>\n      triggers ||\n      ({\n        '/': {\n          component: CommandItem,\n          dataProvider: (query, text, onReady) => {\n            if (text.indexOf('/') !== 0 || !commands) {\n              return [];\n            }\n            const selectedCommands = commands.filter(\n              (command) => command.name?.indexOf(query) !== -1,\n            );\n\n            // sort alphabetically unless the you're matching the first char\n            selectedCommands.sort((a, b) => {\n              let nameA = a.name?.toLowerCase();\n              let nameB = b.name?.toLowerCase();\n              if (nameA?.indexOf(query) === 0) {\n                nameA = `0${nameA}`;\n              }\n              if (nameB?.indexOf(query) === 0) {\n                nameB = `0${nameB}`;\n              }\n              // Should confirm possible null / undefined when TS is fully implemented\n              if (nameA != null && nameB != null) {\n                if (nameA < nameB) {\n                  return -1;\n                }\n                if (nameA > nameB) {\n                  return 1;\n                }\n              }\n\n              return 0;\n            });\n\n            const result = selectedCommands.slice(0, 10);\n            if (onReady) onReady(result, query);\n\n            return result;\n          },\n          output: (entity) => ({\n            caretPosition: 'next',\n            key: entity.name,\n            text: `/${entity.name}`,\n          }),\n        },\n        ':': {\n          component: EmoticonItem,\n          dataProvider: (query, _, onReady) => {\n            if (query.length === 0 || query.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n              return [];\n            }\n            const emojis = emojiIndex?.search(query) || [];\n            const result = emojis.slice(0, 10);\n\n            if (onReady) onReady(result, query);\n\n            return result;\n          },\n          output: (entity) => ({\n            caretPosition: 'next',\n            key: entity.id,\n            text: `${'native' in entity ? entity.native : ''}`,\n          }),\n        },\n        '@': {\n          callback: (item) => onSelectItem && onSelectItem(item),\n          component: UserItem,\n          dataProvider: (query, _, onReady) => {\n            if (mentionAllAppUsers) {\n              return queryUsersDebounced(\n                query,\n                (data: (UserResponse<Us> | undefined)[]) => {\n                  if (onReady) onReady(data, query);\n                },\n              );\n            }\n\n            /**\n             * By default, we return maximum 100 members via queryChannels api call.\n             * Thus it is safe to assume, that if number of members in channel.state is < 100,\n             * then all the members are already available on client side and we don't need to\n             * make any api call to queryMembers endpoint.\n             */\n            if (!query || Object.values(members || {}).length < 100) {\n              const users = getMembersAndWatchers();\n\n              const matchingUsers = users.filter((user) => {\n                if (user.id === client.userID) return false;\n                if (!query) return true;\n\n                if (\n                  user.name !== undefined &&\n                  user.name.toLowerCase().includes(query.toLowerCase())\n                ) {\n                  return true;\n                }\n\n                return user.id.toLowerCase().includes(query.toLowerCase());\n              });\n\n              const data = matchingUsers.slice(0, 10);\n\n              if (onReady) onReady(data, query);\n\n              return data;\n            }\n\n            return queryMembersDebounced(\n              query,\n              (data: (UserResponse<Us> | undefined)[]) => {\n                if (onReady) onReady(data, query);\n              },\n            );\n          },\n          output: (entity) => ({\n            caretPosition: 'next',\n            key: entity.id,\n            text: `@${entity.name || entity.id}`,\n          }),\n        },\n      } as TriggerSettings<Co, Us, V>),\n    [\n      commands,\n      getMembersAndWatchers,\n      members,\n      onSelectItem,\n      queryMembersDebounced,\n      triggers,\n      emojiIndex,\n    ],\n  );\n\n  const updateInnerRef = useCallback(\n    (ref) => {\n      if (innerRef) {\n        innerRef.current = ref;\n      }\n    },\n    [innerRef],\n  );\n\n  return (\n    <AutoCompleteTextarea\n      additionalTextareaProps={additionalTextareaProps}\n      className='str-chat__textarea__textarea'\n      containerClassName='str-chat__textarea'\n      disabled={disabled}\n      disableMentions={disableMentions}\n      dropdownClassName='str-chat__emojisearch'\n      grow={grow}\n      handleSubmit={handleSubmit}\n      innerRef={updateInnerRef}\n      itemClassName='str-chat__emojisearch__item'\n      listClassName='str-chat__emojisearch__list'\n      loadingComponent={LoadingIndicator}\n      maxRows={maxRows}\n      minChar={0}\n      mutes={mutes}\n      onChange={onChange}\n      onFocus={onFocus}\n      onPaste={onPaste}\n      placeholder={placeholder}\n      replaceWord={emojiReplace}\n      rows={rows}\n      SuggestionItem={SuggestionItem}\n      SuggestionList={SuggestionList}\n      trigger={getTriggers()}\n      value={value}\n    />\n  );\n};\n\nexport const ChatAutoComplete = React.memo(\n  UnMemoizedChatAutoComplete,\n) as typeof UnMemoizedChatAutoComplete;\n","import React from 'react';\n\nexport const Tooltip: React.FC<React.HTMLAttributes<HTMLDivElement>> = (\n  props,\n) => {\n  const { children, ...rest } = props;\n  return (\n    <div className='str-chat__tooltip' {...rest}>\n      {children}\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { FileUploadButton, ImageDropzone } from 'react-file-utils';\n\nimport { EmojiPicker } from './EmojiPicker';\nimport { useMessageInput } from './hooks/messageInput';\nimport {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIcon as DefaultFileUploadIcon,\n} from './icons';\nimport { UploadsPreview } from './UploadsPreview';\n\nimport { KEY_CODES } from '../AutoCompleteTextarea/listener';\nimport { ChatAutoComplete } from '../ChatAutoComplete/ChatAutoComplete';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageInputProps } from './MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const EditMessageForm = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    clearEditingState,\n    disabled = false,\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    focus = false,\n    grow = true,\n    maxRows = 10,\n    mentionAllAppUsers,\n    mentionQueryParams,\n    publishTypingEvent = true,\n  } = props;\n\n  const channelContext = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const messageInput = useMessageInput({\n    ...props,\n    additionalTextareaProps,\n    disabled,\n    focus,\n    grow,\n    maxRows,\n    publishTypingEvent,\n  });\n\n  useEffect(() => {\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (event.keyCode === KEY_CODES.ESC && clearEditingState)\n        clearEditingState();\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [clearEditingState]);\n\n  return (\n    <div className='str-chat__edit-message-form'>\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        handleFiles={messageInput.uploadNewFiles}\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        multiple={channelContext.multipleUploads}\n      >\n        <form onSubmit={messageInput.handleSubmit}>\n          {messageInput.isUploadEnabled && <UploadsPreview {...messageInput} />}\n          <EmojiPicker {...messageInput} small />\n          <ChatAutoComplete\n            additionalTextareaProps={additionalTextareaProps}\n            commands={messageInput.getCommands()}\n            grow={grow}\n            handleSubmit={messageInput.handleSubmit}\n            innerRef={messageInput.textareaRef}\n            maxRows={maxRows}\n            mentionAllAppUsers={mentionAllAppUsers}\n            mentionQueryParams={mentionQueryParams}\n            onChange={messageInput.handleChange}\n            onPaste={messageInput.onPaste}\n            onSelectItem={messageInput.onSelectItem}\n            placeholder={t('Type your message')}\n            rows={1}\n            value={messageInput.text}\n          />\n          <div className='str-chat__message-team-form-footer'>\n            <div className='str-chat__edit-message-form-options'>\n              <span\n                className='str-chat__input-emojiselect'\n                onClick={messageInput.openEmojiPicker}\n              >\n                <EmojiIcon />\n              </span>\n              {messageInput.isUploadEnabled && (\n                <div\n                  className='str-chat__fileupload-wrapper'\n                  data-testid='fileinput'\n                >\n                  <Tooltip>\n                    {messageInput.maxFilesLeft\n                      ? t('Attach files')\n                      : t(\"You've reached the maximum number of files\")}\n                  </Tooltip>\n                  <FileUploadButton\n                    accepts={channelContext.acceptedFiles}\n                    disabled={messageInput.maxFilesLeft === 0}\n                    handleFiles={messageInput.uploadNewFiles}\n                    multiple={channelContext.multipleUploads}\n                  >\n                    <span className='str-chat__input-fileupload'>\n                      <FileUploadIcon />\n                    </span>\n                  </FileUploadButton>\n                </div>\n              )}\n            </div>\n            <div>\n              <button\n                onClick={() => {\n                  if (clearEditingState) {\n                    clearEditingState();\n                  }\n                }}\n              >\n                {t('Cancel')}\n              </button>\n              <button type='submit'>{t('Send')}</button>\n            </div>\n          </div>\n        </form>\n      </ImageDropzone>\n    </div>\n  );\n};\n","import React from 'react';\nimport { FileUploadButton, ImageDropzone } from 'react-file-utils';\n\nimport { EmojiPicker } from './EmojiPicker';\nimport { useMessageInput } from './hooks/messageInput';\nimport {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIcon as DefaultFileUploadIcon,\n  SendButton as DefaultSendButton,\n} from './icons';\nimport { UploadsPreview } from './UploadsPreview';\n\nimport { ChatAutoComplete } from '../ChatAutoComplete/ChatAutoComplete';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { Event } from 'stream-chat';\n\nimport type { MessageInputProps } from './MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const MessageInputLarge = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    autocompleteTriggers,\n    disabled = false,\n    disableMentions,\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    focus = false,\n    grow = true,\n    maxRows = 10,\n    mentionAllAppUsers,\n    mentionQueryParams,\n    publishTypingEvent = true,\n    SendButton = DefaultSendButton,\n    SuggestionItem,\n    SuggestionList,\n  } = props;\n\n  const {\n    acceptedFiles,\n    client,\n    multipleUploads,\n    typing,\n    watcher_count,\n  } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const messageInput = useMessageInput<At, Ch, Co, Ev, Me, Re, Us, V>({\n    ...props,\n    additionalTextareaProps,\n    focus,\n    publishTypingEvent,\n  });\n\n  const constructTypingString = (\n    typingUsers: Record<string, Event<At, Ch, Co, Ev, Me, Re, Us>>,\n  ) => {\n    const otherTypingUsers = Object.values(typingUsers)\n      .filter(({ user }) => client.user?.id !== user?.id)\n      .map(({ user }) => user?.name || user?.id);\n    if (otherTypingUsers.length === 0) return '';\n    if (otherTypingUsers.length === 1) {\n      return t('{{ user }} is typing...', { user: otherTypingUsers[0] });\n    }\n    if (otherTypingUsers.length === 2) {\n      // joins all with \"and\" but =no commas\n      // example: \"bob and sam\"\n      return t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: otherTypingUsers[0],\n        secondUser: otherTypingUsers[1],\n      });\n    }\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, and sam\"\n    return t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n      commaSeparatedUsers: otherTypingUsers.slice(0, -1).join(', '),\n      lastUser: otherTypingUsers[otherTypingUsers.length - 1],\n    });\n  };\n\n  return (\n    <div className='str-chat__input-large'>\n      <ImageDropzone\n        accept={acceptedFiles}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        handleFiles={messageInput.uploadNewFiles}\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        multiple={multipleUploads}\n      >\n        <div className='str-chat__input'>\n          <div className='str-chat__input--textarea-wrapper'>\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n            <ChatAutoComplete\n              additionalTextareaProps={additionalTextareaProps}\n              commands={messageInput.getCommands()}\n              disabled={disabled}\n              disableMentions={disableMentions}\n              grow={grow}\n              handleSubmit={messageInput.handleSubmit}\n              innerRef={messageInput.textareaRef}\n              maxRows={maxRows}\n              mentionAllAppUsers={mentionAllAppUsers}\n              mentionQueryParams={mentionQueryParams}\n              onChange={messageInput.handleChange}\n              onPaste={messageInput.onPaste}\n              onSelectItem={messageInput.onSelectItem}\n              placeholder={t('Type your message')}\n              rows={1}\n              SuggestionItem={SuggestionItem}\n              SuggestionList={SuggestionList}\n              triggers={autocompleteTriggers}\n              value={messageInput.text}\n            />\n            {messageInput.isUploadEnabled && (\n              <div\n                className='str-chat__fileupload-wrapper'\n                data-testid='fileinput'\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  accepts={acceptedFiles}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  handleFiles={messageInput.uploadNewFiles}\n                  multiple={multipleUploads}\n                >\n                  <span className='str-chat__input-fileupload'>\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n            <div className='str-chat__emojiselect-wrapper'>\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className='str-chat__input-emojiselect'\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                ref={messageInput.emojiPickerRef}\n                role='button'\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} />\n          </div>\n          <SendButton sendMessage={messageInput.handleSubmit} />\n        </div>\n        <div>\n          <div className='str-chat__input-footer'>\n            <span\n              className={`str-chat__input-footer--count ${\n                !watcher_count ? 'str-chat__input-footer--count--hidden' : ''\n              }`}\n            >\n              {t('{{ watcherCount }} online', {\n                watcherCount: watcher_count,\n              })}\n            </span>\n            <span className='str-chat__input-footer--typing'>\n              {constructTypingString(typing || {})}\n            </span>\n          </div>\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { MessageInputLarge } from './MessageInputLarge';\n\nimport type {\n  Attachment,\n  Channel,\n  SendFileAPIResponse,\n  UserResponse,\n} from 'stream-chat';\n\nimport type { FileUpload, ImageUpload } from './hooks/messageInput';\nimport type { SendButtonProps } from './icons';\n\nimport type {\n  MentionQueryParams,\n  SuggestionItemProps,\n  SuggestionListProps,\n  TriggerSettings,\n} from '../ChatAutoComplete/ChatAutoComplete';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageInputProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n> = {\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   * ```\n   * <MessageInput\n   *  additionalTextareaProps={{\n   *    maxLength: 10,\n   *  }}\n   * />\n   * ```\n   */\n  additionalTextareaProps?: React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n  /**\n   * Override the default triggers of the [ChatAutoComplete](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatAutoComplete/Avatar.tsx) component\n   */\n  autocompleteTriggers?: TriggerSettings<Co, Us, V>;\n  /** Callback to clear editing state in parent component */\n  clearEditingState?: () => void;\n  /** Disable input */\n  disabled?: boolean;\n  /** If true, the suggestion list will not display and autocomplete mentions. Default: false. */\n  disableMentions?: boolean;\n  /** Override file upload request */\n  doFileUploadRequest?: (\n    file: FileUpload['file'],\n    channel: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => Promise<SendFileAPIResponse>;\n  /** Override image upload request */\n  doImageUploadRequest?: (\n    file: ImageUpload['file'],\n    channel: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => Promise<SendFileAPIResponse>;\n  /**\n   * Custom UI component for emoji button in input.\n   * Defaults to and accepts same props as: [EmojiIconSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.tsx)\n   */\n  EmojiIcon?: React.ComponentType;\n  /** Custom error handler, called when file/image uploads fail */\n  errorHandler?: (\n    error: Error,\n    type: string,\n    file: (FileUpload | ImageUpload)['file'] & { id?: string },\n  ) => void;\n  /** Change the FileUploadIcon component */\n  FileUploadIcon?: React.ComponentType;\n  /** Set focus to the text input if this is enabled */\n  focus?: boolean;\n  /** Grow the textarea while you're typing */\n  grow?: boolean;\n  /** The component handling how the input is rendered */\n  Input?: React.ComponentType<MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>>;\n  /** Max number of rows the textarea is allowed to grow */\n  maxRows?: number;\n  /** If true, the suggestion list will search all app users, not just current channel members/watchers. Default: false. */\n  mentionAllAppUsers?: boolean;\n  /** Object containing filters/sort/options overrides for mentions user query */\n  mentionQueryParams?: MentionQueryParams<Us>;\n  /** Message object. If defined, the message passed will be edited, instead of a new message being created */\n  message?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  /** If true, file uploads are disabled. Default: false */\n  noFiles?: boolean;\n  /** Completely override the submit handler (advanced usage only) */\n  overrideSubmitHandler?: (\n    message: {\n      attachments: Attachment<At>[];\n      mentioned_users: UserResponse<Us>[];\n      text: string;\n      parent?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n    },\n    channelCid: string,\n  ) => void;\n  /** The parent message object when replying on a thread */\n  parent?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Enable/disable firing the typing event */\n  publishTypingEvent?: boolean;\n  /**\n   * Custom UI component for send button.\n   * Defaults to and accepts same props as: [SendButton](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.tsx)\n   */\n  SendButton?: React.ComponentType<SendButtonProps>;\n  /**\n   * Optional UI component prop to override the default suggestion Item component.\n   * Defaults to and accepts same props as: [Item](https://github.com/GetStream/stream-chat-react/blob/master/src/components/AutoCompleteTextarea/Item.js)\n   */\n  SuggestionItem?: React.ForwardRefExoticComponent<SuggestionItemProps<Co, Us>>;\n  /**\n   * Optional UI component prop to override the default List component that displays suggestions.\n   * Defaults to and accepts same props as: [List](https://github.com/GetStream/stream-chat-react/blob/master/src/components/AutoCompleteTextarea/List.js)\n   */\n  SuggestionList?: React.ComponentType<SuggestionListProps<Co, Us, V>>;\n};\n\nconst UnMemoizedMessageInput = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    disabled = false,\n    focus = false,\n    grow = true,\n    Input = MessageInputLarge,\n    maxRows = 10,\n    publishTypingEvent = true,\n  } = props;\n\n  return (\n    <Input\n      {...props}\n      additionalTextareaProps={additionalTextareaProps}\n      disabled={disabled}\n      focus={focus}\n      grow={grow}\n      maxRows={maxRows}\n      publishTypingEvent={publishTypingEvent}\n    />\n  );\n};\n\n/**\n * MessageInput - a high level component that has provides all functionality to the Input it renders.\n *\n * It exposes the [useMessageInput](https://getstream.github.io/stream-chat-react/#section-usemessageinput) hook, which accepts the MessageInput props and returns\n * all functions needed to customize and build your custom Input components.\n * @example ./MessageInput.md\n */\nexport const MessageInput = React.memo(\n  UnMemoizedMessageInput,\n) as typeof UnMemoizedMessageInput;\n","import React from 'react';\nimport { FileUploadButton, ImageDropzone } from 'react-file-utils';\n\nimport { EmojiPicker } from './EmojiPicker';\nimport { useMessageInput } from './hooks/messageInput';\nimport {\n  EmojiIconLarge as DefaultEmojiIcon,\n  FileUploadIconFlat as DefaultFileUploadIcon,\n  SendButton as DefaultSendButton,\n} from './icons';\nimport { UploadsPreview } from './UploadsPreview';\n\nimport { ChatAutoComplete } from '../ChatAutoComplete/ChatAutoComplete';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageInputProps } from './MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const MessageInputFlat = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    autocompleteTriggers,\n    disabled = false,\n    disableMentions,\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    focus = false,\n    grow = true,\n    maxRows = 10,\n    mentionAllAppUsers,\n    mentionQueryParams,\n    publishTypingEvent = true,\n    SendButton = DefaultSendButton,\n    SuggestionItem,\n    SuggestionList,\n  } = props;\n\n  const channelContext = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const messageInput = useMessageInput({\n    ...props,\n    additionalTextareaProps,\n    disabled,\n    focus,\n    grow,\n    maxRows,\n    publishTypingEvent,\n  });\n\n  return (\n    <div\n      className={`str-chat__input-flat ${\n        SendButton ? 'str-chat__input-flat--send-button-active' : null\n      }`}\n    >\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        handleFiles={messageInput.uploadNewFiles}\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        multiple={channelContext.multipleUploads}\n      >\n        <div className='str-chat__input-flat-wrapper'>\n          <div className='str-chat__input-flat--textarea-wrapper'>\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n            <div className='str-chat__emojiselect-wrapper'>\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className='str-chat__input-flat-emojiselect'\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                role='button'\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} />\n            <ChatAutoComplete\n              additionalTextareaProps={additionalTextareaProps}\n              commands={messageInput.getCommands()}\n              disabled={disabled}\n              disableMentions={disableMentions}\n              grow={grow}\n              handleSubmit={messageInput.handleSubmit}\n              innerRef={messageInput.textareaRef}\n              maxRows={maxRows}\n              mentionAllAppUsers={mentionAllAppUsers}\n              mentionQueryParams={mentionQueryParams}\n              onChange={messageInput.handleChange}\n              onPaste={messageInput.onPaste}\n              onSelectItem={messageInput.onSelectItem}\n              placeholder={t('Type your message')}\n              rows={1}\n              SuggestionItem={SuggestionItem}\n              SuggestionList={SuggestionList}\n              triggers={autocompleteTriggers}\n              value={messageInput.text}\n            />\n            {messageInput.isUploadEnabled && (\n              <div\n                className='str-chat__fileupload-wrapper'\n                data-testid='fileinput'\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  accepts={channelContext.acceptedFiles}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  handleFiles={messageInput.uploadNewFiles}\n                  multiple={channelContext.multipleUploads}\n                >\n                  <span className='str-chat__input-flat-fileupload'>\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { EmojiPicker } from './EmojiPicker';\nimport { useMessageInput } from './hooks/messageInput';\nimport {\n  EmojiIconLarge as DefaultEmojiIcon,\n  SendButton as DefaultSendButton,\n} from './icons';\n\nimport { ChatAutoComplete } from '../ChatAutoComplete/ChatAutoComplete';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageInputProps } from './MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const MessageInputSimple = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    autocompleteTriggers,\n    disabled = false,\n    disableMentions,\n    EmojiIcon = DefaultEmojiIcon,\n    focus = false,\n    grow = true,\n    maxRows = 10,\n    mentionAllAppUsers,\n    mentionQueryParams,\n    publishTypingEvent = true,\n    SendButton = DefaultSendButton,\n    SuggestionItem,\n    SuggestionList,\n  } = props;\n\n  const { t } = useTranslationContext();\n\n  const messageInput = useMessageInput({\n    ...props,\n    additionalTextareaProps,\n    disabled,\n    focus,\n    grow,\n    maxRows,\n    publishTypingEvent,\n  });\n\n  return (\n    <div\n      className={`str-chat__input-flat ${\n        SendButton ? 'str-chat__input-flat--send-button-active' : null\n      }`}\n    >\n      <div className='str-chat__input-flat-wrapper'>\n        <div className='str-chat__input-flat--textarea-wrapper'>\n          <ChatAutoComplete\n            additionalTextareaProps={additionalTextareaProps}\n            commands={messageInput.getCommands()}\n            disabled={disabled}\n            disableMentions={disableMentions}\n            grow={grow}\n            handleSubmit={messageInput.handleSubmit}\n            innerRef={messageInput.textareaRef}\n            maxRows={maxRows}\n            mentionAllAppUsers={mentionAllAppUsers}\n            mentionQueryParams={mentionQueryParams}\n            onChange={messageInput.handleChange}\n            onPaste={messageInput.onPaste}\n            onSelectItem={messageInput.onSelectItem}\n            placeholder={t('Type your message')}\n            rows={1}\n            SuggestionItem={SuggestionItem}\n            SuggestionList={SuggestionList}\n            triggers={autocompleteTriggers}\n            value={messageInput.text}\n          />\n          <div className='str-chat__emojiselect-wrapper'>\n            <Tooltip>\n              {messageInput.emojiPickerIsOpen\n                ? t('Close emoji picker')\n                : t('Open emoji picker')}\n            </Tooltip>\n            <span\n              className='str-chat__input-flat-emojiselect'\n              onClick={\n                messageInput.emojiPickerIsOpen\n                  ? messageInput.closeEmojiPicker\n                  : messageInput.openEmojiPicker\n              }\n              onKeyDown={messageInput.handleEmojiKeyDown}\n              role='button'\n              tabIndex={0}\n            >\n              <EmojiIcon />\n            </span>\n          </div>\n          <EmojiPicker {...messageInput} />\n        </div>\n        {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { FileUploadButton, ImageDropzone } from 'react-file-utils';\n\nimport { EmojiPicker } from './EmojiPicker';\nimport { useMessageInput } from './hooks/messageInput';\nimport {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIconFlat as DefaultFileUploadIcon,\n  SendButton as DefaultSendButton,\n} from './icons';\nimport { UploadsPreview } from './UploadsPreview';\n\nimport { ChatAutoComplete } from '../ChatAutoComplete/ChatAutoComplete';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageInputProps } from './MessageInput';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const MessageInputSmall = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const {\n    additionalTextareaProps = {},\n    autocompleteTriggers,\n    disabled = false,\n    disableMentions,\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    focus = false,\n    grow = true,\n    maxRows = 10,\n    mentionAllAppUsers,\n    mentionQueryParams,\n    publishTypingEvent = true,\n    SendButton = DefaultSendButton,\n    SuggestionItem,\n    SuggestionList,\n  } = props;\n\n  const channelContext = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const messageInput = useMessageInput({\n    ...props,\n    additionalTextareaProps,\n    disabled,\n    focus,\n    grow,\n    maxRows,\n    publishTypingEvent,\n  });\n\n  return (\n    <div className='str-chat__small-message-input__wrapper'>\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        handleFiles={messageInput.uploadNewFiles}\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        multiple={channelContext.multipleUploads}\n      >\n        <div\n          className={`str-chat__small-message-input ${\n            SendButton\n              ? 'str-chat__small-message-input--send-button-active'\n              : null\n          }`}\n        >\n          <div className='str-chat__small-message-input--textarea-wrapper'>\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n            <ChatAutoComplete\n              additionalTextareaProps={additionalTextareaProps}\n              commands={messageInput.getCommands()}\n              disabled={disabled}\n              disableMentions={disableMentions}\n              grow={grow}\n              handleSubmit={messageInput.handleSubmit}\n              innerRef={messageInput.textareaRef}\n              maxRows={maxRows}\n              mentionAllAppUsers={mentionAllAppUsers}\n              mentionQueryParams={mentionQueryParams}\n              onChange={messageInput.handleChange}\n              onPaste={messageInput.onPaste}\n              onSelectItem={messageInput.onSelectItem}\n              placeholder={t('Type your message')}\n              rows={1}\n              SuggestionItem={SuggestionItem}\n              SuggestionList={SuggestionList}\n              triggers={autocompleteTriggers}\n              value={messageInput.text}\n            />\n            {messageInput.isUploadEnabled && (\n              <div\n                className='str-chat__fileupload-wrapper'\n                data-testid='fileinput'\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  accepts={channelContext.acceptedFiles}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  handleFiles={messageInput.uploadNewFiles}\n                  multiple={channelContext.multipleUploads}\n                >\n                  <span className='str-chat__small-message-input-fileupload'>\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n            <div className='str-chat__emojiselect-wrapper'>\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className='str-chat__small-message-input-emojiselect'\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                role='button'\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} small />\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from 'react';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport type ModalProps = {\n  /** If true, modal is opened or visible. */\n  open: boolean;\n  /** Callback handler for closing of modal. */\n  onClose?: () => void | ((event?: React.SyntheticEvent) => void);\n};\n\nexport const Modal: React.FC<ModalProps> = (props) => {\n  const { children, onClose, open } = props;\n\n  const { t } = useTranslationContext();\n\n  const innerRef = useRef<HTMLDivElement | null>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (\n      event.target instanceof Node &&\n      !innerRef.current?.contains(event.target) &&\n      onClose\n    ) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    if (!open) return () => null;\n\n    const handleEscKey: EventListener = (event) => {\n      if (event instanceof KeyboardEvent && event.key === 'Escape' && onClose) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keyPress', handleEscKey);\n    return () => document.removeEventListener('keyPress', handleEscKey);\n  }, [onClose, open]);\n\n  const openClasses = open\n    ? 'str-chat__modal--open'\n    : 'str-chat__modal--closed';\n\n  return (\n    <div className={`str-chat__modal ${openClasses}`} onClick={handleClick}>\n      <div className='str-chat__modal__close-button'>\n        {t('Close')}\n        <svg height='10' width='10' xmlns='http://www.w3.org/2000/svg'>\n          <path\n            d='M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z'\n            fillRule='evenodd'\n          />\n        </svg>\n      </div>\n      <div className='str-chat__modal__inner' ref={innerRef}>\n        {children}\n      </div>\n    </div>\n  );\n};\n","import React, { useRef } from 'react';\n\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageOptions } from './MessageOptions';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageText } from './MessageText';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { useReactionClick } from './hooks';\nimport { DeliveredCheckIcon } from './icons';\nimport {\n  areMessageUIPropsEqual,\n  getReadByTooltipText,\n  messageHasAttachments,\n  messageHasReactions,\n  showMessageActionsBox,\n} from './utils';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { LoadingIndicator } from '../Loading';\nimport {\n  EditMessageForm as DefaultEditMessageForm,\n  MessageInput,\n} from '../MessageInput';\nimport { MML } from '../MML';\nimport { Modal } from '../Modal';\nimport {\n  ReactionsList as DefaultReactionList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport { Tooltip } from '../Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype MessageSimpleWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Omit<\n  MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n  'PinIndicator'\n> & {\n  isReactionEnabled: boolean;\n  onReactionListClick: MouseEventHandler;\n  reactionSelectorRef: React.MutableRefObject<HTMLDivElement | null>;\n  showDetailedReactions: boolean;\n};\n\nconst MessageSimpleWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageSimpleWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    additionalMessageInputProps,\n    Attachment,\n    Avatar = DefaultAvatar,\n    clearEditingState,\n    editing,\n    EditMessageInput = DefaultEditMessageForm,\n    formatDate,\n    getMessageActions,\n    handleAction,\n    handleOpenThread,\n    handleReaction,\n    handleRetry,\n    isMyMessage,\n    isReactionEnabled,\n    message,\n    MessageDeleted = DefaultMessageDeleted,\n    onReactionListClick,\n    onUserClick,\n    onUserHover,\n    ReactionSelector = DefaultReactionSelector,\n    reactionSelectorRef,\n    ReactionsList = DefaultReactionList,\n    showDetailedReactions,\n    threadList,\n  } = props;\n\n  const messageWrapperRef = useRef<HTMLDivElement | null>(null);\n\n  const hasAttachment = messageHasAttachments(message);\n  const hasReactions = messageHasReactions(message);\n\n  const messageClasses = isMyMessage()\n    ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n    : 'str-chat__message str-chat__message-simple';\n\n  const showActionsBox = showMessageActionsBox(getMessageActions());\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return <MessageDeleted message={message} />;\n  }\n\n  return (\n    <>\n      {editing && (\n        <Modal onClose={clearEditingState} open={editing}>\n          <MessageInput\n            clearEditingState={clearEditingState}\n            Input={EditMessageInput}\n            message={message}\n            {...additionalMessageInputProps}\n          />\n        </Modal>\n      )}\n      {message && (\n        <div\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message--${message.type}\n\t\t\t\t\t\tstr-chat__message--${message.status}\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\n            ${\n              hasReactions && isReactionEnabled\n                ? 'str-chat__message--with-reactions'\n                : ''\n            }\n            ${message.pinned ? 'pinned-message' : ''}\n\t\t\t\t\t`.trim()}\n          key={message.id || ''}\n          ref={messageWrapperRef}\n        >\n          <MessageSimpleStatus {...props} />\n          {message.user && (\n            <Avatar\n              image={message.user.image}\n              name={message.user.name || message.user.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          )}\n          <div\n            className='str-chat__message-inner'\n            data-testid='message-inner'\n            onClick={\n              message.status === 'failed' && message.errorStatusCode !== 403\n                ? () => handleRetry(message)\n                : undefined\n            }\n          >\n            {!message.text && (\n              <>\n                {\n                  <MessageOptions\n                    {...props}\n                    handleOpenThread={handleOpenThread}\n                    messageWrapperRef={messageWrapperRef}\n                    onReactionListClick={onReactionListClick}\n                  />\n                }\n                {hasReactions &&\n                  !showDetailedReactions &&\n                  isReactionEnabled && (\n                    <ReactionsList\n                      onClick={onReactionListClick}\n                      own_reactions={message.own_reactions}\n                      reaction_counts={message.reaction_counts || undefined}\n                      reactions={message.latest_reactions}\n                      reverse={true}\n                    />\n                  )}\n                {showDetailedReactions && isReactionEnabled && (\n                  <ReactionSelector\n                    detailedView\n                    handleReaction={handleReaction}\n                    latest_reactions={message.latest_reactions}\n                    own_reactions={message.own_reactions}\n                    reaction_counts={message.reaction_counts || undefined}\n                    ref={reactionSelectorRef}\n                  />\n                )}\n              </>\n            )}\n            {message.attachments && Attachment && (\n              <Attachment\n                actionHandler={handleAction}\n                attachments={message.attachments}\n              />\n            )}\n            {message.text && (\n              <MessageText\n                {...props}\n                customOptionProps={{\n                  displayActions: showActionsBox,\n                  handleOpenThread,\n                  messageWrapperRef,\n                }}\n              />\n            )}\n            {message.mml && (\n              <MML\n                actionHandler={handleAction}\n                align={isMyMessage() ? 'right' : 'left'}\n                source={message.mml}\n              />\n            )}\n            {!threadList && message.reply_count !== 0 && (\n              <div className='str-chat__message-simple-reply-button'>\n                <MessageRepliesCountButton\n                  onClick={handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div\n              className={`str-chat__message-data str-chat__message-simple-data`}\n            >\n              {!isMyMessage() && message.user ? (\n                <span className='str-chat__message-simple-name'>\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <MessageTimestamp\n                calendar\n                customClass='str-chat__message-simple-timestamp'\n                formatDate={formatDate}\n                message={message}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nconst MessageSimpleStatus = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>({\n  Avatar = DefaultAvatar,\n  isMyMessage,\n  readBy,\n  message,\n  threadList,\n  lastReceivedId,\n}: MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  if (!isMyMessage() || message.type === 'error') {\n    return null;\n  }\n\n  const justReadByMe =\n    readBy &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    client &&\n    readBy[0].id === client.user?.id;\n\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className='str-chat__message-simple-status'\n        data-testid='message-status-sending'\n      >\n        <Tooltip>{t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      (item) => !!item && !!client && item.id !== client.user?.id,\n    )[0];\n    return (\n      <span\n        className='str-chat__message-simple-status'\n        data-testid='message-status-read-by'\n      >\n        <Tooltip>{readBy && getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          image={lastReadUser?.image}\n          name={lastReadUser?.name}\n          size={15}\n        />\n        {readBy.length > 2 && (\n          <span\n            className='str-chat__message-simple-status-number'\n            data-testid='message-status-read-by-many'\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        className='str-chat__message-simple-status'\n        data-testid='message-status-received'\n      >\n        <Tooltip>{t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n\n  return null;\n};\n\nconst MemoizedMessageSimple = React.memo(\n  MessageSimpleWithContext,\n  areMessageUIPropsEqual,\n) as typeof MessageSimpleWithContext;\n\n/**\n * MessageSimple - UI component that renders a message and receives functionality and logic from the Message/MessageList components.\n * @example ./MessageSimple.md\n */\nexport const MessageSimple = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: Omit<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n    'PinIndicator'\n  >,\n) => {\n  const { Attachment: PropAttachment, message } = props;\n\n  const { Attachment: ContextAttachment } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  const reactionSelectorRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  } = useReactionClick(message, reactionSelectorRef);\n\n  const Attachment = PropAttachment || ContextAttachment || DefaultAttachment;\n\n  return (\n    <MemoizedMessageSimple\n      {...props}\n      Attachment={Attachment}\n      isReactionEnabled={isReactionEnabled}\n      onReactionListClick={onReactionListClick}\n      reactionSelectorRef={reactionSelectorRef}\n      showDetailedReactions={showDetailedReactions}\n    />\n  );\n};\n","import React, { useCallback } from 'react';\n\nimport { MessageSimple } from './MessageSimple';\nimport {\n  ActionHandlerReturnType,\n  useActionHandler,\n  useDeleteHandler,\n  useEditHandler,\n  useFlagHandler,\n  useMentionsHandler,\n  useMuteHandler,\n  useOpenThreadHandler,\n  usePinHandler,\n  useReactionHandler,\n  useRetryHandler,\n  useUserHandler,\n  useUserRole,\n} from './hooks';\nimport {\n  areMessagePropsEqual,\n  defaultPinPermissions,\n  getMessageActions,\n  MESSAGE_ACTIONS,\n} from './utils';\n\nimport {\n  RetrySendMessage,\n  useChannelContext,\n} from '../../context/ChannelContext';\n\nimport type { Channel } from 'stream-chat';\n\nimport type { MessageProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype MessageWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  canPin: boolean;\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  handleAction: ActionHandlerReturnType;\n  handleDelete: MouseEventHandler;\n  handleFlag: MouseEventHandler;\n  handleMute: MouseEventHandler;\n  handleOpenThread: MouseEventHandler;\n  handlePin: MouseEventHandler;\n  handleReaction: (\n    reactionType: string,\n    event: React.MouseEvent<HTMLElement, MouseEvent>,\n  ) => Promise<void>;\n  handleRetry: RetrySendMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  onMentionsClickMessage: MouseEventHandler;\n  onMentionsHoverMessage: MouseEventHandler;\n  userRoles: {\n    canDeleteMessage: boolean;\n    canEditMessage: boolean;\n    isAdmin: boolean;\n    isModerator: boolean;\n    isMyMessage: boolean;\n    isOwner: boolean;\n  };\n};\n\nconst MessageWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    canPin,\n    channel,\n    formatDate,\n    groupStyles = [],\n    handleAction,\n    handleDelete,\n    handleFlag,\n    handleMute,\n    handleOpenThread,\n    handlePin,\n    handleReaction,\n    handleRetry,\n    Message: MessageUIComponent = MessageSimple,\n    message,\n    messageActions = Object.keys(MESSAGE_ACTIONS),\n    onMentionsClickMessage,\n    onMentionsHoverMessage,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    userRoles,\n  } = props;\n\n  const channelConfig = channel.getConfig && channel.getConfig();\n\n  const { clearEdit, editing, setEdit } = useEditHandler();\n\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n\n  const { isAdmin, isModerator, isMyMessage, isOwner } = userRoles;\n\n  const canEdit = isMyMessage || isModerator || isOwner || isAdmin;\n  const canDelete = canEdit;\n  const canReact = true;\n  const canReply = true;\n\n  const messageActionsHandler = useCallback(() => {\n    if (!message || !messageActions) {\n      return [];\n    }\n\n    return getMessageActions(messageActions, {\n      canDelete,\n      canEdit,\n      canFlag: !isMyMessage,\n      canMute: !isMyMessage && !!channelConfig?.mutes,\n      canPin,\n      canReact,\n      canReply,\n    });\n  }, [\n    canDelete,\n    canEdit,\n    canPin,\n    canReply,\n    canReact,\n    channelConfig?.mutes,\n    isMyMessage,\n    message,\n    messageActions,\n  ]);\n\n  const actionsEnabled =\n    message && message.type === 'regular' && message.status === 'received';\n\n  return (\n    <MessageUIComponent\n      {...props}\n      actionsEnabled={actionsEnabled}\n      channelConfig={channelConfig}\n      clearEditingState={clearEdit}\n      editing={editing}\n      formatDate={formatDate}\n      getMessageActions={messageActionsHandler}\n      groupStyles={groupStyles}\n      handleAction={handleAction}\n      handleDelete={handleDelete}\n      handleEdit={setEdit}\n      handleFlag={handleFlag}\n      handleMute={handleMute}\n      handleOpenThread={handleOpenThread}\n      handlePin={handlePin}\n      handleReaction={handleReaction}\n      handleRetry={handleRetry}\n      isMyMessage={() => isMyMessage}\n      onMentionsClickMessage={onMentionsClickMessage}\n      onMentionsHoverMessage={onMentionsHoverMessage}\n      onUserClick={onUserClick}\n      onUserHover={onUserHover}\n      setEditingState={setEdit}\n    />\n  );\n};\n\nconst MemoizedMessage = React.memo(\n  MessageWithContext,\n  areMessagePropsEqual,\n) as typeof MessageWithContext;\n\n/**\n * Message - A high level component which implements all the logic required for a Message.\n * The actual rendering of the Message is delegated via the \"Message\" property.\n * @example ./Message.md\n */\nexport const Message = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    addNotification,\n    channel: propChannel,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    getPinMessageErrorNotification,\n    message,\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n    openThread: propOpenThread,\n    pinPermissions = defaultPinPermissions,\n    retrySendMessage: propRetrySendMessage,\n  } = props;\n\n  const { channel: contextChannel } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  const channel = propChannel || contextChannel;\n\n  const handleAction = useActionHandler(message);\n  const handleDelete = useDeleteHandler(message);\n  const handleOpenThread = useOpenThreadHandler(message, propOpenThread);\n  const handleReaction = useReactionHandler(message);\n  const handleRetry = useRetryHandler(propRetrySendMessage);\n  const userRoles = useUserRole(message);\n\n  const handleFlag = useFlagHandler(message, {\n    getErrorNotification: getFlagMessageErrorNotification,\n    getSuccessNotification: getFlagMessageSuccessNotification,\n    notify: addNotification,\n  });\n\n  const handleMute = useMuteHandler(message, {\n    getErrorNotification: getMuteUserErrorNotification,\n    getSuccessNotification: getMuteUserSuccessNotification,\n    notify: addNotification,\n  });\n\n  const { onMentionsClick, onMentionsHover } = useMentionsHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n\n  const { canPin, handlePin } = usePinHandler(message, pinPermissions, {\n    getErrorNotification: getPinMessageErrorNotification,\n    notify: addNotification,\n  });\n\n  return (\n    <MemoizedMessage\n      {...props}\n      canPin={canPin}\n      channel={channel}\n      handleAction={handleAction}\n      handleDelete={handleDelete}\n      handleFlag={handleFlag}\n      handleMute={handleMute}\n      handleOpenThread={handleOpenThread}\n      handlePin={handlePin}\n      handleReaction={handleReaction}\n      handleRetry={handleRetry}\n      onMentionsClickMessage={onMentionsClick}\n      onMentionsHoverMessage={onMentionsHover}\n      userRoles={userRoles}\n    />\n  );\n};\n","import React, { useRef } from 'react';\n\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageOptions } from './MessageOptions';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageText } from './MessageText';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { useReactionClick, useUserHandler } from './hooks';\nimport {\n  areMessageUIPropsEqual,\n  messageHasAttachments,\n  messageHasReactions,\n} from './utils';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MML } from '../MML';\nimport {\n  ReactionSelector as DefaultReactionSelector,\n  ReactionsList as DefaultReactionsList,\n} from '../Reactions';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype MessageCommerceWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Omit<\n  MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n  'PinIndicator'\n> & {\n  isReactionEnabled: boolean;\n  onReactionListClick: MouseEventHandler;\n  reactionSelectorRef: React.MutableRefObject<HTMLDivElement | null>;\n  showDetailedReactions: boolean;\n};\n\nconst MessageCommerceWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageCommerceWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    Attachment = DefaultAttachment,\n    Avatar = DefaultAvatar,\n    formatDate,\n    groupStyles,\n    handleAction,\n    handleOpenThread,\n    handleReaction,\n    isMyMessage,\n    isReactionEnabled,\n    message,\n    MessageDeleted = DefaultMessageDeleted,\n    onReactionListClick,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    ReactionSelector = DefaultReactionSelector,\n    reactionSelectorRef,\n    ReactionsList = DefaultReactionsList,\n    showDetailedReactions,\n    threadList,\n  } = props;\n\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n\n  const hasAttachment = messageHasAttachments(message);\n  const hasReactions = messageHasReactions(message);\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  const messageClasses = `str-chat__message-commerce str-chat__message-commerce--${\n    isMyMessage() ? 'right' : 'left'\n  }`;\n\n  if (message.deleted_at) {\n    return <MessageDeleted message={message} />;\n  }\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  return (\n    <>\n      <div\n        className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message-commerce--${message.type}\n\t\t\t\t\t\t${\n              message.text\n                ? 'str-chat__message-commerce--has-text'\n                : 'str-chat__message-commerce--has-no-text'\n            }\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\n\t\t\t\t\t\t${\n              hasReactions && isReactionEnabled\n                ? 'str-chat__message-commerce--with-reactions'\n                : ''\n            }\n            ${`str-chat__message-commerce--${firstGroupStyle}`}\n            ${message.pinned ? 'pinned-message' : ''}\n\t\t\t\t\t`.trim()}\n        data-testid='message-commerce-wrapper'\n        key={message.id}\n      >\n        {(firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && (\n          <Avatar\n            image={message.user?.image}\n            name={message.user?.name || message.user?.id}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n            size={32}\n          />\n        )}\n        <div className='str-chat__message-commerce-inner'>\n          {message && !message.text && (\n            <>\n              {\n                <MessageOptions<At, Ch, Co, Ev, Me, Re, Us>\n                  {...props}\n                  displayActions={false}\n                  displayLeft={false}\n                  displayReplies={false}\n                  onReactionListClick={onReactionListClick}\n                  theme='commerce'\n                />\n              }\n              {hasReactions && !showDetailedReactions && isReactionEnabled && (\n                <ReactionsList\n                  onClick={onReactionListClick}\n                  own_reactions={message.own_reactions}\n                  reaction_counts={message.reaction_counts || undefined}\n                  reactions={message.latest_reactions}\n                />\n              )}\n              {showDetailedReactions && isReactionEnabled && (\n                <ReactionSelector\n                  detailedView\n                  handleReaction={handleReaction}\n                  latest_reactions={message.latest_reactions}\n                  own_reactions={message.own_reactions}\n                  reaction_counts={message.reaction_counts || undefined}\n                  ref={reactionSelectorRef}\n                  reverse={false}\n                />\n              )}\n            </>\n          )}\n          {message.attachments && (\n            <Attachment\n              actionHandler={handleAction}\n              attachments={message.attachments}\n            />\n          )}\n          {message.mml && (\n            <MML\n              actionHandler={handleAction}\n              align={isMyMessage() ? 'right' : 'left'}\n              source={message.mml}\n            />\n          )}\n          {message.text && (\n            <MessageText\n              {...props}\n              customInnerClass='str-chat__message-commerce-text-inner'\n              customOptionProps={{\n                displayActions: false,\n                displayLeft: false,\n                displayReplies: false,\n                theme: 'commerce',\n              }}\n              customWrapperClass='str-chat__message-commerce-text'\n              theme='commerce'\n            />\n          )}\n          {!threadList && (\n            <div className='str-chat__message-commerce-reply-button'>\n              <MessageRepliesCountButton\n                onClick={handleOpenThread}\n                reply_count={message.reply_count}\n              />\n            </div>\n          )}\n          <div className='str-chat__message-commerce-data'>\n            {!isMyMessage() ? (\n              <span className='str-chat__message-commerce-name'>\n                {message.user?.name || message.user?.id}\n              </span>\n            ) : null}\n            <MessageTimestamp\n              customClass='str-chat__message-commerce-timestamp'\n              format='LT'\n              formatDate={formatDate}\n              message={message}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst MemoizedMessageCommerce = React.memo(\n  MessageCommerceWithContext,\n  areMessageUIPropsEqual,\n) as typeof MessageCommerceWithContext;\n\n/**\n * MessageCommerce - UI component that renders a message and receives functionality from the Message/MessageList components\n */\nexport const MessageCommerce = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: Omit<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n    'PinIndicator'\n  >,\n) => {\n  const { message } = props;\n\n  const reactionSelectorRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  } = useReactionClick(message, reactionSelectorRef);\n\n  return (\n    <MemoizedMessageCommerce\n      {...props}\n      isReactionEnabled={isReactionEnabled}\n      onReactionListClick={onReactionListClick}\n      reactionSelectorRef={reactionSelectorRef}\n      showDetailedReactions={showDetailedReactions}\n    />\n  );\n};\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport {\n  useMentionsUIHandler,\n  useReactionClick,\n  useUserHandler,\n} from './hooks';\nimport {\n  PinIndicator as DefaultPinIndicator,\n  ErrorIcon,\n  ReactionIcon,\n  ThreadIcon,\n} from './icons';\nimport { areMessageUIPropsEqual, showMessageActionsBox } from './utils';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MessageActions } from '../MessageActions';\nimport {\n  EditMessageForm as DefaultEditMessageForm,\n  MessageInput,\n} from '../MessageInput';\nimport {\n  ReactionSelector as DefaultReactionSelector,\n  SimpleReactionsList as DefaultReactionsList,\n} from '../Reactions';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText as defaultRenderText, isOnlyEmojis } from '../../utils';\n\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype MessageLivestreamWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  isReactionEnabled: boolean;\n  messageWrapperRef: React.MutableRefObject<HTMLDivElement | null>;\n  onReactionListClick: MouseEventHandler;\n  reactionSelectorRef: React.MutableRefObject<HTMLDivElement | null>;\n  showDetailedReactions: boolean;\n};\n\nconst MessageLivestreamWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageLivestreamWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    addNotification,\n    Attachment = DefaultAttachment,\n    Avatar = DefaultAvatar,\n    channelConfig,\n    clearEditingState,\n    EditMessageInput = DefaultEditMessageForm,\n    editing,\n    formatDate,\n    getMessageActions,\n    groupStyles,\n    handleAction,\n    handleOpenThread,\n    handleReaction,\n    handleRetry,\n    initialMessage,\n    isReactionEnabled,\n    message,\n    MessageDeleted = DefaultMessageDeleted,\n    messageWrapperRef,\n    onMentionsClickMessage,\n    onMentionsHoverMessage,\n    onReactionListClick,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    PinIndicator = DefaultPinIndicator,\n    ReactionsList = DefaultReactionsList,\n    ReactionSelector = DefaultReactionSelector,\n    reactionSelectorRef,\n    renderText = defaultRenderText,\n    threadList,\n    setEditingState,\n    showDetailedReactions,\n    unsafeHTML,\n  } = props;\n\n  const { t, userLanguage } = useTranslationContext();\n\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n\n  const messageTextToRender =\n    message.i18n?.[`${userLanguage}_text` as `${TranslationLanguages}_text`] ||\n    message.text;\n\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, message.mentioned_users),\n    [message.mentioned_users, messageTextToRender],\n  );\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return <MessageDeleted message={message} />;\n  }\n\n  if (editing) {\n    return (\n      <div\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n        data-testid={'message-livestream-edit'}\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className='str-chat__message-team-meta'>\n            <Avatar\n              image={message.user?.image}\n              name={message.user?.name || message.user?.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n              size={40}\n            />\n          </div>\n        )}\n        <MessageInput\n          clearEditingState={clearEditingState}\n          Input={EditMessageInput}\n          message={message}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {message.pinned && (\n        <div className='str-chat__message-livestream-pin-indicator'>\n          <PinIndicator message={message} t={t} />\n        </div>\n      )}\n      <div\n        className={`str-chat__message-livestream str-chat__message-livestream--${firstGroupStyle} str-chat__message-livestream--${\n          message.type\n        } str-chat__message-livestream--${message.status} ${\n          initialMessage ? 'str-chat__message-livestream--initial-message' : ''\n        } ${message.pinned ? 'pinned-message' : ''}`}\n        data-testid='message-livestream'\n        ref={messageWrapperRef}\n      >\n        {showDetailedReactions && isReactionEnabled && (\n          <ReactionSelector\n            detailedView\n            handleReaction={handleReaction}\n            latest_reactions={message.latest_reactions}\n            own_reactions={message.own_reactions}\n            reaction_counts={message.reaction_counts || undefined}\n            ref={reactionSelectorRef}\n            reverse={false}\n          />\n        )}\n        <MessageLivestreamActions\n          addNotification={addNotification}\n          channelConfig={channelConfig}\n          formatDate={formatDate}\n          getMessageActions={getMessageActions}\n          handleOpenThread={handleOpenThread}\n          initialMessage={initialMessage}\n          message={message}\n          messageWrapperRef={messageWrapperRef}\n          onReactionListClick={onReactionListClick}\n          setEditingState={setEditingState}\n          threadList={threadList}\n        />\n        <div className='str-chat__message-livestream-left'>\n          <Avatar\n            image={message.user?.image}\n            name={message.user?.name || message.user?.id}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n            size={30}\n          />\n        </div>\n        <div className='str-chat__message-livestream-right'>\n          <div className='str-chat__message-livestream-content'>\n            <div className='str-chat__message-livestream-author'>\n              <strong>{message.user?.name || message.user?.id}</strong>\n              {message.type === 'error' && (\n                <div className='str-chat__message-team-error-header'>\n                  {t('Only visible to you')}\n                </div>\n              )}\n            </div>\n            <div\n              className={\n                isOnlyEmojis(message.text)\n                  ? 'str-chat__message-livestream-text--is-emoji'\n                  : ''\n              }\n              data-testid='message-livestream-text'\n              onClick={onMentionsClickMessage}\n              onMouseOver={onMentionsHoverMessage}\n            >\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                !unsafeHTML &&\n                messageText}\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                unsafeHTML &&\n                !!message.html && (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                )}\n              {message.type === 'error' && !message.command && (\n                <p data-testid='message-livestream-error'>\n                  <ErrorIcon />\n                  {message.text}\n                </p>\n              )}\n              {message.type === 'error' && message.command && (\n                <p data-testid='message-livestream-command-error'>\n                  <ErrorIcon />\n                  {/* TODO: Translate following sentence */}\n                  <strong>/{message.command}</strong> is not a valid command\n                </p>\n              )}\n              {message.status === 'failed' && (\n                <p\n                  onClick={\n                    message.errorStatusCode !== 403\n                      ? () => handleRetry(message)\n                      : undefined\n                  }\n                >\n                  <ErrorIcon />\n                  {message.errorStatusCode !== 403\n                    ? t('Message Failed · Click to try again')\n                    : t('Message Failed · Unauthorized')}\n                </p>\n              )}\n            </div>\n            {message.attachments && Attachment && (\n              <Attachment\n                actionHandler={handleAction}\n                attachments={message.attachments}\n              />\n            )}\n            {isReactionEnabled && (\n              <ReactionsList\n                handleReaction={handleReaction}\n                own_reactions={message.own_reactions}\n                reaction_counts={message.reaction_counts || undefined}\n                reactions={message.latest_reactions}\n              />\n            )}\n            {!initialMessage && (\n              <MessageRepliesCountButton\n                onClick={handleOpenThread}\n                reply_count={message.reply_count}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\ntype PropsDrilledToMessageLivestreamActions =\n  | 'addNotification'\n  | 'channelConfig'\n  | 'formatDate'\n  | 'getMessageActions'\n  | 'handleOpenThread'\n  | 'initialMessage'\n  | 'message'\n  | 'setEditingState'\n  | 'threadList';\n\nexport type MessageLivestreamActionsProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Pick<\n  MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n  PropsDrilledToMessageLivestreamActions\n> & {\n  messageWrapperRef: React.RefObject<HTMLDivElement>;\n  onReactionListClick: MouseEventHandler;\n};\n\nconst MessageLivestreamActions = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageLivestreamActionsProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    channelConfig,\n    formatDate,\n    getMessageActions,\n    handleOpenThread,\n    initialMessage,\n    message,\n    messageWrapperRef,\n    onReactionListClick,\n    threadList,\n  } = props;\n\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n  const messageDeletedAt = !!message.deleted_at;\n  const messageWrapper = messageWrapperRef?.current;\n\n  const showActionsBox = showMessageActionsBox(getMessageActions());\n\n  useEffect(() => {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return () => {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n    return () => {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (\n    initialMessage ||\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending'\n  ) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`str-chat__message-livestream-actions`}\n      data-testid={'message-livestream-actions'}\n    >\n      <MessageTimestamp\n        customClass='str-chat__message-livestream-time'\n        formatDate={formatDate}\n        message={message}\n      />\n      {channelConfig?.reactions && (\n        <span\n          data-testid='message-livestream-reactions-action'\n          onClick={onReactionListClick}\n        >\n          <span>\n            <ReactionIcon />\n          </span>\n        </span>\n      )}\n      {!threadList && channelConfig?.replies && (\n        <span\n          data-testid='message-livestream-thread-action'\n          onClick={handleOpenThread}\n        >\n          <ThreadIcon />\n        </span>\n      )}\n      {showActionsBox && (\n        <MessageActions\n          {...props}\n          customWrapperClass={''}\n          getMessageActions={getMessageActions}\n          inline\n        />\n      )}\n    </div>\n  );\n};\n\nconst MemoizedMessageLivestream = React.memo(\n  MessageLivestreamWithContext,\n  areMessageUIPropsEqual,\n) as typeof MessageLivestreamWithContext;\n\n/**\n * MessageLivestream - handles the rendering of a message and depends on the Message component for all the logic.\n * Implements the look and feel for a livestream use case.\n * @example ./MessageLivestream.md\n */\nexport const MessageLivestream = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    message,\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n  } = props;\n\n  const messageWrapperRef = useRef<HTMLDivElement | null>(null);\n  const reactionSelectorRef = useRef<HTMLDivElement | null>(null);\n\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n\n  const {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  } = useReactionClick(message, reactionSelectorRef, messageWrapperRef);\n\n  return (\n    <MemoizedMessageLivestream\n      {...props}\n      isReactionEnabled={isReactionEnabled}\n      messageWrapperRef={messageWrapperRef}\n      onMentionsClickMessage={onMentionsClick}\n      onMentionsHoverMessage={onMentionsHover}\n      onReactionListClick={onReactionListClick}\n      reactionSelectorRef={reactionSelectorRef}\n      showDetailedReactions={showDetailedReactions}\n    />\n  );\n};\n","import React, { useMemo, useRef } from 'react';\n\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { useReactionClick, useUserHandler } from './hooks';\nimport {\n  PinIndicator as DefaultPinIndicator,\n  DeliveredCheckIcon,\n  ErrorIcon,\n  ReactionIcon,\n  ThreadIcon,\n} from './icons';\nimport {\n  areMessageUIPropsEqual,\n  getReadByTooltipText,\n  showMessageActionsBox,\n} from './utils';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { LoadingIndicator } from '../Loading';\nimport { MessageActions } from '../MessageActions';\nimport {\n  EditMessageForm as DefaultEditMessageForm,\n  MessageInput,\n} from '../MessageInput';\nimport { MML } from '../MML';\nimport {\n  ReactionSelector as DefaultReactionSelector,\n  SimpleReactionsList as DefaultReactionsList,\n} from '../Reactions';\nimport { Tooltip } from '../Tooltip';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText as defaultRenderText, isOnlyEmojis } from '../../utils';\n\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { MessageUIComponentProps, MouseEventHandler } from './types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype MessageTeamWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  isReactionEnabled: boolean;\n  messageWrapperRef: React.MutableRefObject<HTMLDivElement | null>;\n  onReactionListClick: MouseEventHandler;\n  reactionSelectorRef: React.MutableRefObject<HTMLDivElement | null>;\n  showDetailedReactions: boolean;\n};\n\nconst MessageTeamWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageTeamWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    addNotification,\n    Avatar = DefaultAvatar,\n    Attachment,\n    channel,\n    channelConfig: propChannelConfig,\n    clearEditingState,\n    editing,\n    EditMessageInput = DefaultEditMessageForm,\n    formatDate,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMessageActions,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    groupStyles = ['single'],\n    handleAction,\n    handleEdit,\n    handleFlag,\n    handleDelete,\n    handleOpenThread,\n    handleMute,\n    handlePin,\n    handleReaction,\n    handleRetry,\n    initialMessage,\n    isMyMessage,\n    isReactionEnabled,\n    lastReceivedId,\n    message,\n    MessageDeleted = DefaultMessageDeleted,\n    messageListRect,\n    messageWrapperRef,\n    onMentionsClickMessage,\n    onMentionsHoverMessage,\n    onReactionListClick,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    PinIndicator = DefaultPinIndicator,\n    ReactionsList = DefaultReactionsList,\n    ReactionSelector = DefaultReactionSelector,\n    reactionSelectorRef,\n    readBy,\n    renderText = defaultRenderText,\n    showDetailedReactions,\n    setEditingState,\n    threadList,\n    unsafeHTML,\n  } = props;\n\n  const { t, userLanguage } = useTranslationContext();\n\n  const channelConfig = propChannelConfig || channel?.getConfig();\n\n  const showActionsBox = showMessageActionsBox(getMessageActions());\n\n  const messageTextToRender =\n    message.i18n?.[`${userLanguage}_text` as `${TranslationLanguages}_text`] ||\n    message.text;\n\n  const messageMentionedUsersItem = message.mentioned_users;\n\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, messageMentionedUsersItem),\n    [messageMentionedUsersItem, messageTextToRender],\n  );\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message.type === 'message.read') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return <MessageDeleted message={message} />;\n  }\n\n  if (editing) {\n    return (\n      <div\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n        data-testid='message-team-edit'\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className='str-chat__message-team-meta'>\n            <Avatar\n              image={message.user?.image}\n              name={message.user?.name || message.user?.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n              size={40}\n            />\n          </div>\n        )}\n        <MessageInput\n          clearEditingState={clearEditingState}\n          Input={EditMessageInput}\n          message={message}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {message.pinned && (\n        <div className='str-chat__message-team-pin-indicator'>\n          <PinIndicator message={message} t={t} />\n        </div>\n      )}\n      <div\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--${\n          message.type\n        } ${threadList ? 'thread-list' : ''} str-chat__message-team--${\n          message.status\n        } ${message.pinned ? 'pinned-message' : ''}`}\n        data-testid='message-team'\n        ref={messageWrapperRef}\n      >\n        <div className='str-chat__message-team-meta'>\n          {firstGroupStyle === 'top' ||\n          firstGroupStyle === 'single' ||\n          initialMessage ? (\n            <Avatar\n              image={message.user?.image}\n              name={message.user?.name || message.user?.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n              size={40}\n            />\n          ) : (\n            <div\n              data-testid='team-meta-spacer'\n              style={{ marginRight: 0, width: 40 }}\n            />\n          )}\n          <MessageTimestamp formatDate={formatDate} message={message} />\n        </div>\n        <div className='str-chat__message-team-group'>\n          {message &&\n            (firstGroupStyle === 'top' ||\n              firstGroupStyle === 'single' ||\n              initialMessage) && (\n              <div\n                className='str-chat__message-team-author'\n                data-testid='message-team-author'\n                onClick={onUserClick}\n              >\n                <strong>{message.user?.name || message.user?.id}</strong>\n                {message.type === 'error' && (\n                  <div className='str-chat__message-team-error-header'>\n                    {t('Only visible to you')}\n                  </div>\n                )}\n              </div>\n            )}\n          <div\n            className={`str-chat__message-team-content str-chat__message-team-content--${firstGroupStyle} str-chat__message-team-content--${\n              message.text === '' ? 'image' : 'text'\n            }`}\n            data-testid='message-team-content'\n          >\n            {!initialMessage &&\n              message &&\n              message.status !== 'sending' &&\n              message.status !== 'failed' &&\n              message.type !== 'system' &&\n              message.type !== 'ephemeral' &&\n              message.type !== 'error' && (\n                <div\n                  className={`str-chat__message-team-actions`}\n                  data-testid='message-team-actions'\n                >\n                  {message && showDetailedReactions && (\n                    <ReactionSelector\n                      detailedView={true}\n                      handleReaction={handleReaction}\n                      latest_reactions={message.latest_reactions}\n                      own_reactions={message.own_reactions}\n                      reaction_counts={message.reaction_counts || undefined}\n                      ref={reactionSelectorRef}\n                    />\n                  )}\n                  {isReactionEnabled && (\n                    <span\n                      data-testid='message-team-reaction-icon'\n                      onClick={onReactionListClick}\n                      title='Reactions'\n                    >\n                      <ReactionIcon />\n                    </span>\n                  )}\n                  {!threadList && channelConfig?.replies !== false && (\n                    <span\n                      data-testid='message-team-thread-icon'\n                      onClick={handleOpenThread}\n                      title='Start a thread'\n                    >\n                      <ThreadIcon />\n                    </span>\n                  )}\n                  {showActionsBox && (\n                    <MessageActions\n                      addNotification={addNotification}\n                      customWrapperClass={''}\n                      getFlagMessageErrorNotification={\n                        getFlagMessageErrorNotification\n                      }\n                      getFlagMessageSuccessNotification={\n                        getFlagMessageSuccessNotification\n                      }\n                      getMessageActions={getMessageActions}\n                      getMuteUserErrorNotification={\n                        getMuteUserErrorNotification\n                      }\n                      getMuteUserSuccessNotification={\n                        getMuteUserSuccessNotification\n                      }\n                      handleDelete={handleDelete}\n                      handleEdit={handleEdit}\n                      handleFlag={handleFlag}\n                      handleMute={handleMute}\n                      handlePin={handlePin}\n                      inline\n                      message={message}\n                      messageListRect={messageListRect}\n                      messageWrapperRef={messageWrapperRef}\n                      setEditingState={setEditingState}\n                    />\n                  )}\n                </div>\n              )}\n            {message && (\n              <span\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-team-text--is-emoji'\n                    : ''\n                }\n                data-testid='message-team-message'\n                onClick={onMentionsClickMessage}\n                onMouseOver={onMentionsHoverMessage}\n              >\n                {unsafeHTML && message.html ? (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                ) : (\n                  messageText\n                )}\n              </span>\n            )}\n            {message.mml && (\n              <MML\n                actionHandler={handleAction}\n                align='left'\n                source={message.mml}\n              />\n            )}\n            {message.text === '' && (\n              <MessageTeamAttachments\n                Attachment={Attachment}\n                handleAction={handleAction}\n                message={message}\n              />\n            )}\n            {message.latest_reactions?.length !== 0 &&\n              message.text !== '' &&\n              isReactionEnabled && (\n                <ReactionsList\n                  handleReaction={handleReaction}\n                  onClick={onReactionListClick}\n                  own_reactions={message.own_reactions}\n                  reaction_counts={message.reaction_counts || undefined}\n                  reactions={message.latest_reactions}\n                />\n              )}\n            {message.status === 'failed' && (\n              <button\n                className='str-chat__message-team-failed'\n                data-testid='message-team-failed'\n                onClick={\n                  message.errorStatusCode !== 403\n                    ? () => handleRetry(message)\n                    : undefined\n                }\n              >\n                <ErrorIcon />\n                {message.errorStatusCode !== 403\n                  ? t('Message Failed · Click to try again')\n                  : t('Message Failed · Unauthorized')}\n              </button>\n            )}\n          </div>\n          <MessageTeamStatus\n            Avatar={Avatar}\n            isMyMessage={isMyMessage}\n            lastReceivedId={lastReceivedId}\n            message={message}\n            readBy={readBy}\n            threadList={threadList}\n          />\n          {message.text !== '' && message.attachments && (\n            <MessageTeamAttachments\n              Attachment={Attachment}\n              handleAction={handleAction}\n              message={message}\n            />\n          )}\n          {message.latest_reactions &&\n            message.latest_reactions.length !== 0 &&\n            message.text === '' &&\n            isReactionEnabled && (\n              <ReactionsList\n                handleReaction={handleReaction}\n                onClick={onReactionListClick}\n                own_reactions={message.own_reactions}\n                reaction_counts={message.reaction_counts || undefined}\n                reactions={message.latest_reactions}\n              />\n            )}\n          {!threadList && (\n            <MessageRepliesCountButton\n              onClick={handleOpenThread}\n              reply_count={message.reply_count}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst MessageTeamStatus = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: Pick<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n    | 'Avatar'\n    | 'isMyMessage'\n    | 'lastReceivedId'\n    | 'message'\n    | 'readBy'\n    | 'threadList'\n  >,\n) => {\n  const {\n    Avatar = DefaultAvatar,\n    isMyMessage,\n    lastReceivedId,\n    message,\n    readBy,\n    threadList,\n  } = props;\n\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  if (!isMyMessage() || message.type === 'error') {\n    return null;\n  }\n\n  const justReadByMe =\n    readBy &&\n    client?.user &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    readBy[0].id === client.user.id;\n\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className='str-chat__message-team-status'\n        data-testid='message-team-sending'\n      >\n        <Tooltip>{t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      (item) => item && client?.user && item.id !== client.user.id,\n    )[0];\n    return (\n      <span className='str-chat__message-team-status'>\n        <Tooltip>{getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          image={lastReadUser?.image}\n          name={lastReadUser?.name}\n          size={15}\n        />\n        {readBy.length - 1 > 1 && (\n          <span\n            className='str-chat__message-team-status-number'\n            data-testid='message-team-read-by-count'\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        className='str-chat__message-team-status'\n        data-testid='message-team-received'\n      >\n        <Tooltip>{t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n\n  return null;\n};\n\nconst MessageTeamAttachments = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: Pick<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n    'Attachment' | 'handleAction' | 'message'\n  >,\n) => {\n  const { Attachment = DefaultAttachment, handleAction, message } = props;\n\n  if (message.attachments) {\n    return (\n      <Attachment\n        actionHandler={handleAction}\n        attachments={message.attachments}\n      />\n    );\n  }\n\n  return null;\n};\n\nconst MemoizedMessageTeam = React.memo(\n  MessageTeamWithContext,\n  areMessageUIPropsEqual,\n) as typeof MessageTeamWithContext;\n\n/**\n * MessageTeam - handles the rendering of a Message and depends on the Message component for all the logic.\n * Implements the look and feel for a team style collaboration environment.\n * @example ./MessageTeam.md\n */\nexport const MessageTeam = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { message } = props;\n\n  const { channel } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const reactionSelectorRef = useRef<HTMLDivElement | null>(null);\n  const messageWrapperRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    isReactionEnabled,\n    onReactionListClick,\n    showDetailedReactions,\n  } = useReactionClick(message, reactionSelectorRef, messageWrapperRef);\n\n  return (\n    <MemoizedMessageTeam\n      {...props}\n      channel={channel}\n      isReactionEnabled={isReactionEnabled}\n      messageWrapperRef={messageWrapperRef}\n      onReactionListClick={onReactionListClick}\n      reactionSelectorRef={reactionSelectorRef}\n      showDetailedReactions={showDetailedReactions}\n    />\n  );\n};\n","import React, {\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\n// @ts-expect-error\nimport DefaultEmoji from 'emoji-mart/dist/components/emoji/nimble-emoji.js';\n// @ts-expect-error\nimport DefaultEmojiIndex from 'emoji-mart/dist/utils/emoji-index/nimble-emoji-index.js';\n// @ts-expect-error\nimport DefaultEmojiPicker from 'emoji-mart/dist/components/picker/nimble-picker.js';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport {\n  ChannelAPIResponse,\n  ChannelState,\n  Event,\n  logChatPromiseExecution,\n  Message,\n  MessageResponse,\n  SendMessageAPIResponse,\n  Channel as StreamChannel,\n  StreamChat,\n  UpdatedMessage,\n  UserResponse,\n} from 'stream-chat';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  channelReducer,\n  ChannelStateReducer,\n  initialState,\n} from './channelState';\nimport { commonEmoji, defaultMinimalEmojis, emojiSetDef } from './emojiData';\nimport { useEditMessageHandler } from './hooks/useEditMessageHandler';\nimport { useIsMounted } from './hooks/useIsMounted';\nimport {\n  OnMentionAction,\n  useMentionsHandlers,\n} from './hooks/useMentionsHandlers';\n\nimport {\n  AttachmentProps,\n  Attachment as DefaultAttachment,\n} from '../Attachment';\nimport {\n  LoadingErrorIndicator as DefaultLoadingErrorIndicator,\n  LoadingIndicator as DefaultLoadingIndicator,\n  LoadingErrorIndicatorProps,\n  LoadingIndicatorProps,\n} from '../Loading';\nimport { MessageSimple, MessageUIComponentProps } from '../Message';\n\nimport {\n  ChannelContextValue,\n  ChannelNotifications,\n  ChannelProvider,\n  MessageAttachments,\n  MessageToSend,\n  StreamMessage,\n} from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport defaultEmojiData from '../../stream-emoji.json';\n\nimport type {\n  Data as EmojiMartData,\n  NimbleEmojiIndex,\n  NimbleEmojiProps,\n  NimblePickerProps,\n} from 'emoji-mart';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ChannelProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** List of accepted file types */\n  acceptedFiles?: string[];\n  /**\n   * Attachment UI component to display attachment in individual message.\n   * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.tsx)\n   * */\n  Attachment?: React.ComponentType<AttachmentProps<At>>;\n  /** The connected and active channel */\n  channel?: StreamChannel<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   * Override mark channel read request (Advanced usage only)\n   * */\n  doMarkReadRequest?: (\n    channel: StreamChannel<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => Promise<MessageResponse<At, Ch, Co, Me, Re, Us>> | void;\n  /**\n   * Override send message request (Advanced usage only)\n   */\n  doSendMessageRequest?: (\n    channelId: string,\n    message: Message<At, Me, Us>,\n  ) => ReturnType<\n    StreamChannel<At, Ch, Co, Ev, Me, Re, Us>['sendMessage']\n  > | void;\n  /**\n   * Override update(edit) message request (Advanced usage only)\n   */\n  doUpdateMessageRequest?: (\n    cid: string,\n    updatedMessage: UpdatedMessage<At, Ch, Co, Me, Re, Us>,\n  ) => ReturnType<StreamChat<At, Ch, Co, Ev, Me, Re, Us>['updateMessage']>;\n  /** Optional component to override default NimbleEmoji from emoji-mart */\n  Emoji?: React.ComponentType<NimbleEmojiProps>;\n  /** Optional prop to override default facebook.json emoji data set from emoji-mart */\n  emojiData?: EmojiMartData;\n  /** Optional component to override default NimbleEmojiIndex from emoji-mart */\n  EmojiIndex?: NimbleEmojiIndex;\n  /** Optional component to override default NimblePicker from emoji-mart */\n  EmojiPicker?: React.ComponentType<NimblePickerProps>;\n  /**\n   * Empty channel UI component. This will be shown on the screen if there is no active channel.\n   * Defaults to null which skips rendering the Channel\n   * */\n  EmptyPlaceholder?: React.ReactElement;\n  /**\n   * Error indicator UI component. This will be shown on the screen if channel query fails.\n   * Defaults to and accepts same props as: [LoadingErrorIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingErrorIndicator.tsx).\n   * */\n  LoadingErrorIndicator?: React.ComponentType<LoadingErrorIndicatorProps>;\n  /**\n   * Loading indicator UI component. This will be shown on the screen until the messages are\n   * being queried from channel. Once the messages are loaded, loading indicator is removed from the screen\n   * and replaced with children of the Channel component.\n   * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.tsx)\n   */\n  LoadingIndicator?: React.ComponentType<LoadingIndicatorProps>;\n  /** Maximum number of attachments allowed per message */\n  maxNumberOfFiles?: number;\n  /**\n   * Message UI component to display a message in message list.\n   *\n   * Available built-in components (also accepts the same props as):\n   *\n   * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.tsx) (default)\n   * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.tsx)\n   * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.tsx)\n   * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.tsx)\n   *\n   * */\n  Message?: React.ComponentType<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Whether to allow multiple attachment uploads */\n  multipleUploads?: boolean;\n  /**\n   * Handle for click on @mention in message\n   */\n  onMentionsClick?: OnMentionAction<Us>;\n  /**\n   * Handle for hover on @mention in message, user object\n   */\n  onMentionsHover?: OnMentionAction<Us>;\n};\n\nconst UnMemoizedChannel = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: PropsWithChildren<ChannelProps<At, Ch, Co, Ev, Me, Re, Us>>,\n) => {\n  const { channel: propsChannel, EmptyPlaceholder = null } = props;\n\n  const { channel: contextChannel } = useChatContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n\n  const channel = propsChannel || contextChannel;\n\n  if (!channel?.cid) return EmptyPlaceholder;\n\n  return <ChannelInner {...props} channel={channel} key={channel.cid} />;\n};\n\nconst ChannelInner = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: PropsWithChildren<\n    ChannelProps<At, Ch, Co, Ev, Me, Re, Us> & {\n      channel: StreamChannel<At, Ch, Co, Ev, Me, Re, Us>;\n      key: string;\n    }\n  >,\n) => {\n  const {\n    acceptedFiles,\n    Attachment = DefaultAttachment,\n    channel,\n    children,\n    doMarkReadRequest,\n    doSendMessageRequest,\n    doUpdateMessageRequest,\n    Emoji = DefaultEmoji,\n    emojiData = defaultEmojiData,\n    EmojiIndex = DefaultEmojiIndex,\n    EmojiPicker = DefaultEmojiPicker,\n    LoadingErrorIndicator = DefaultLoadingErrorIndicator,\n    LoadingIndicator = DefaultLoadingIndicator,\n    maxNumberOfFiles,\n    Message = MessageSimple,\n    multipleUploads = true,\n    onMentionsClick,\n    onMentionsHover,\n  } = props;\n\n  const { client, mutes, theme } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const [notifications, setNotifications] = useState<ChannelNotifications>([]);\n  const notificationTimeouts: Array<NodeJS.Timeout> = [];\n\n  const [state, dispatch] = useReducer<\n    ChannelStateReducer<At, Ch, Co, Ev, Me, Re, Us>\n  >(channelReducer, initialState);\n\n  const isMounted = useIsMounted();\n\n  const originalTitle = useRef('');\n  const lastRead = useRef(new Date());\n  const online = useRef(true);\n\n  const emojiConfig = {\n    commonEmoji,\n    defaultMinimalEmojis,\n    Emoji,\n    emojiData,\n    EmojiIndex,\n    EmojiPicker,\n    emojiSetDef,\n  };\n\n  const throttledCopyStateFromChannel = useCallback(\n    throttle(\n      () => {\n        if (!channel) return;\n        dispatch({ channel, type: 'copyStateFromChannelOnEvent' });\n      },\n      500,\n      { leading: true, trailing: true },\n    ),\n    [channel],\n  );\n\n  const markRead = useCallback(() => {\n    if (!channel || channel.disconnected || !channel.getConfig()?.read_events) {\n      return;\n    }\n\n    lastRead.current = new Date();\n\n    if (doMarkReadRequest) {\n      doMarkReadRequest(channel);\n    } else {\n      logChatPromiseExecution(channel.markRead(), 'mark read');\n    }\n\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel, doMarkReadRequest]);\n\n  const markReadThrottled = useCallback(\n    throttle(markRead, 500, { leading: true, trailing: true }),\n    [markRead],\n  );\n\n  const handleEvent = useCallback(\n    (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (event.message) {\n        dispatch({\n          channel,\n          message: event.message,\n          type: 'updateThreadOnEvent',\n        });\n      }\n\n      if (\n        event.type === 'connection.changed' &&\n        typeof event.online === 'boolean'\n      ) {\n        online.current = event.online;\n      }\n\n      if (event.type === 'message.new') {\n        let mainChannelUpdated = true;\n\n        if (event.message?.parent_id && !event.message?.show_in_channel) {\n          mainChannelUpdated = false;\n        }\n\n        if (mainChannelUpdated && event.message?.user?.id !== client.userID) {\n          if (!document.hidden) {\n            markReadThrottled();\n          } else if (\n            channel.getConfig()?.read_events &&\n            !channel.muteStatus().muted\n          ) {\n            const unread = channel.countUnread(lastRead.current);\n            document.title = `(${unread}) ${originalTitle.current}`;\n          }\n        }\n      }\n\n      throttledCopyStateFromChannel();\n    },\n    [channel, client.userID, markReadThrottled, throttledCopyStateFromChannel],\n  );\n\n  // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n  useLayoutEffect(() => {\n    let errored = false;\n    let done = false;\n\n    const onVisibilityChange = () => {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n\n    (async () => {\n      if (channel && !channel.initialized) {\n        try {\n          await channel.watch();\n        } catch (e) {\n          dispatch({ error: e, type: 'setError' });\n          errored = true;\n        }\n      }\n\n      done = true;\n      originalTitle.current = document.title;\n\n      if (channel && !errored) {\n        dispatch({ channel, type: 'initStateFromChannel' });\n        if (channel.countUnread() > 0) markRead();\n        // The more complex sync logic is done in Chat\n        document.addEventListener('visibilitychange', onVisibilityChange);\n        client.on('connection.changed', handleEvent);\n        client.on('connection.recovered', handleEvent);\n        channel.on(handleEvent);\n      }\n    })();\n\n    return () => {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      if (channel) channel.off(handleEvent);\n      client.off('connection.changed', handleEvent);\n      client.off('connection.recovered', handleEvent);\n      notificationTimeouts.forEach(clearTimeout);\n    };\n  }, [channel, client, handleEvent, markRead]);\n\n  useEffect(() => {\n    if (state.thread && state.messages?.length) {\n      for (let i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({ message: state.messages[i], type: 'setThread' });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]);\n\n  /** MESSAGE */\n\n  // Adds a temporary notification to message list, will be removed after 5 seconds\n  const addNotification = (text: string, type: 'success' | 'error') => {\n    if (typeof text !== 'string' || (type !== 'success' && type !== 'error')) {\n      return;\n    }\n\n    const id = uuidv4();\n\n    setNotifications((prevNotifications) => [\n      ...prevNotifications,\n      { id, text, type },\n    ]);\n\n    const timeout = setTimeout(\n      () =>\n        setNotifications((prevNotifications) =>\n          prevNotifications.filter((notification) => notification.id !== id),\n        ),\n      5000,\n    );\n\n    notificationTimeouts.push(timeout);\n  };\n\n  const loadMoreFinished = useCallback(\n    debounce(\n      (\n        hasMore: boolean,\n        messages: ChannelState<At, Ch, Co, Ev, Me, Re, Us>['messages'],\n      ) => {\n        if (!isMounted.current) return;\n        dispatch({ hasMore, messages, type: 'loadMoreFinished' });\n      },\n      2000,\n      {\n        leading: true,\n        trailing: true,\n      },\n    ),\n    [],\n  );\n\n  const loadMore = useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n    async (limit: number = 100) => {\n      if (!online.current || !window.navigator.onLine || !channel) return 0;\n\n      // prevent duplicate loading events...\n      const oldestMessage = state?.messages?.[0];\n\n      if (state.loadingMore || oldestMessage?.status !== 'received') return 0;\n\n      dispatch({ loadingMore: true, type: 'setLoadingMore' });\n\n      const oldestID = oldestMessage?.id;\n      const perPage = limit;\n      let queryResponse: ChannelAPIResponse<At, Ch, Co, Me, Re, Us>;\n\n      try {\n        queryResponse = await channel.query({\n          messages: { id_lt: oldestID, limit: perPage },\n          watchers: { limit: perPage },\n        });\n      } catch (e) {\n        console.warn('message pagination request failed with error', e);\n        dispatch({ loadingMore: false, type: 'setLoadingMore' });\n        return 0;\n      }\n\n      const hasMoreMessages = queryResponse.messages.length === perPage;\n      loadMoreFinished(hasMoreMessages, channel.state.messages);\n\n      return queryResponse.messages.length;\n    },\n    [channel, loadMoreFinished, online, state.loadingMore, state.messages],\n  );\n\n  const updateMessage = useCallback(\n    (\n      updatedMessage:\n        | MessageToSend<At, Ch, Co, Me, Re, Us>\n        | StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n    ) => {\n      if (!channel) return;\n      // adds the message to the local channel state..\n      // this adds to both the main channel state as well as any reply threads\n      channel.state.addMessageSorted(\n        updatedMessage as MessageResponse<At, Ch, Co, Me, Re, Us>,\n        true,\n      );\n\n      dispatch({\n        channel,\n        parentId: state.thread && updatedMessage.parent_id,\n        type: 'copyMessagesFromChannel',\n      });\n    },\n    [channel, state.thread],\n  );\n\n  const isUserResponseArray = (\n    output: string[] | UserResponse<Us>[],\n  ): output is UserResponse<Us>[] =>\n    (output as UserResponse<Us>[])[0]?.id != null;\n\n  const doSendMessage = useCallback(\n    async (\n      message:\n        | MessageToSend<At, Ch, Co, Me, Re, Us>\n        | StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n    ) => {\n      if (!channel) return;\n\n      const {\n        attachments,\n        id,\n        mentioned_users = [],\n        parent_id,\n        text,\n      } = message;\n\n      // channel.sendMessage expects an array of user id strings\n      const mentions = isUserResponseArray(mentioned_users)\n        ? mentioned_users.map(({ id }) => id)\n        : mentioned_users;\n\n      const messageData = {\n        attachments,\n        id,\n        mentioned_users: mentions,\n        parent_id,\n        text,\n      } as Message<At, Me, Us>;\n\n      try {\n        let messageResponse: void | SendMessageAPIResponse<\n          At,\n          Ch,\n          Co,\n          Me,\n          Re,\n          Us\n        >;\n\n        if (doSendMessageRequest) {\n          messageResponse = await doSendMessageRequest(\n            channel.cid,\n            messageData,\n          );\n        } else {\n          messageResponse = await channel.sendMessage(messageData);\n        }\n\n        // replace it after send is completed\n        if (messageResponse && messageResponse.message) {\n          updateMessage({\n            ...messageResponse.message,\n            status: 'received',\n          });\n        }\n      } catch (error) {\n        // error response isn't usable so needs to be stringified then parsed\n        const stringError = JSON.stringify(error);\n        const parsedError = stringError ? JSON.parse(stringError) : {};\n\n        updateMessage({\n          ...message,\n          errorStatusCode: (parsedError.status as number) || undefined,\n          status: 'failed',\n        });\n      }\n    },\n    [channel, doSendMessageRequest, updateMessage],\n  );\n\n  const createMessagePreview = useCallback(\n    (\n      text: string,\n      attachments: MessageAttachments<At>,\n      parent: MessageResponse<At, Ch, Co, Me, Re, Us> | undefined,\n      mentioned_users: UserResponse<Us>[],\n    ) => {\n      // create a preview of the message\n      const clientSideID = `${client.userID}-${uuidv4()}`;\n\n      return ({\n        __html: text,\n        attachments,\n        created_at: new Date(),\n        html: text,\n        id: clientSideID,\n        mentioned_users,\n        reactions: [],\n        status: 'sending',\n        text,\n        type: 'regular',\n        user: client.user,\n        ...(parent?.id ? { parent_id: parent.id } : null),\n      } as unknown) as MessageResponse<At, Ch, Co, Me, Re, Us>;\n    },\n    [client.user, client.userID],\n  );\n\n  const sendMessage = useCallback(\n    async ({\n      attachments = [],\n      mentioned_users = [],\n      parent = undefined,\n      text = '',\n    }: MessageToSend<At, Ch, Co, Me, Re, Us>) => {\n      if (!channel) return;\n\n      // remove error messages upon submit\n      channel.state.filterErrorMessages();\n\n      // create a local preview message to show in the UI\n      const messagePreview = createMessagePreview(\n        text,\n        attachments,\n        parent,\n        mentioned_users,\n      );\n\n      // first we add the message to the UI\n      updateMessage(messagePreview);\n\n      await doSendMessage(messagePreview);\n    },\n    [channel?.state, createMessagePreview, doSendMessage, updateMessage],\n  );\n\n  const retrySendMessage = useCallback(\n    async (message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>) => {\n      // set the message status to sending\n      updateMessage({\n        ...message,\n        errorStatusCode: undefined,\n        status: 'sending',\n      });\n\n      // actually try to send the message...\n      await doSendMessage(message);\n    },\n    [doSendMessage, updateMessage],\n  );\n\n  const removeMessage = useCallback(\n    (message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (!channel) return;\n\n      channel.state.removeMessage(message);\n\n      dispatch({\n        channel,\n        parentId: state.thread && message.parent_id,\n        type: 'copyMessagesFromChannel',\n      });\n    },\n    [channel, state.thread],\n  );\n\n  /** THREAD */\n\n  const openThread = useCallback(\n    (\n      message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n      event: React.SyntheticEvent,\n    ) => {\n      if (!channel) return;\n\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      dispatch({ channel, message, type: 'openThread' });\n    },\n    [channel],\n  );\n\n  const loadMoreThreadFinished = useCallback(\n    debounce(\n      (\n        threadHasMore: boolean,\n        threadMessages: Array<\n          ReturnType<ChannelState<At, Ch, Co, Ev, Me, Re, Us>['formatMessage']>\n        >,\n      ) => {\n        dispatch({\n          threadHasMore,\n          threadMessages,\n          type: 'loadMoreThreadFinished',\n        });\n      },\n      2000,\n      { leading: true, trailing: true },\n    ),\n    [],\n  );\n\n  const loadMoreThread = useCallback(async () => {\n    // prevent duplicate loading events...\n    if (!channel || state.threadLoadingMore || !state.thread) return;\n\n    dispatch({ type: 'startLoadingThread' });\n    const parentID = state.thread.id;\n\n    if (!parentID) {\n      dispatch({ type: 'closeThread' });\n      return;\n    }\n\n    const oldMessages = channel.state.threads[parentID] || [];\n    const oldestMessageID = oldMessages[0]?.id;\n    const limit = 50;\n\n    try {\n      const queryResponse = await channel.getReplies(parentID, {\n        id_lt: oldestMessageID,\n        limit,\n      });\n\n      const threadHasMoreMessages = queryResponse.messages.length === limit;\n      const newThreadMessages = channel.state.threads[parentID] || [];\n\n      // next set loadingMore to false so we can start asking for more data...\n      loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n    } catch (e) {\n      loadMoreThreadFinished(false, oldMessages);\n    }\n  }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n\n  const closeThread = useCallback((event: React.SyntheticEvent) => {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    dispatch({ type: 'closeThread' });\n  }, []);\n\n  const onMentionsHoverOrClick = useMentionsHandlers(\n    onMentionsHover,\n    onMentionsClick,\n  );\n\n  const editMessage = useEditMessageHandler(doUpdateMessageRequest);\n\n  const channelContextValue: ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us> = {\n    ...state,\n    acceptedFiles,\n    addNotification,\n    Attachment,\n    channel,\n    client, // from chatContext, for legacy reasons\n    closeThread,\n    dispatch,\n    editMessage,\n    emojiConfig, // emoji config and customization object, potentially find a better home\n    loadMore,\n    loadMoreThread,\n    maxNumberOfFiles,\n    Message,\n    multipleUploads,\n    mutes,\n    notifications,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    openThread,\n    removeMessage,\n    retrySendMessage,\n    sendMessage,\n    updateMessage,\n    watcher_count: state.watcherCount,\n  };\n\n  if (state.error) {\n    return (\n      <div className={`str-chat str-chat-channel ${theme}`}>\n        <LoadingErrorIndicator error={state.error} />\n      </div>\n    );\n  }\n\n  if (state.loading) {\n    return (\n      <div className={`str-chat str-chat-channel ${theme}`}>\n        <LoadingIndicator size={25} />\n      </div>\n    );\n  }\n\n  if (!channel?.watch) {\n    return (\n      <div className={`str-chat str-chat-channel ${theme}`}>\n        <div>{t('Channel Missing')}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`str-chat str-chat-channel ${theme}`}>\n      <ChannelProvider<At, Ch, Co, Ev, Me, Re, Us> value={channelContextValue}>\n        <div className='str-chat__container'>{children}</div>\n      </ChannelProvider>\n    </div>\n  );\n};\n\n/**\n * Channel - Wrapper component for Channel. This Channel component provides the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n *\n * It also exposes the [withChannelContext](https://getstream.github.io/stream-chat-react/#section-withchannelcontext) HOC which you can use to consume the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n * @example ./Channel.md\n */\nexport const Channel = React.memo(\n  UnMemoizedChannel,\n) as typeof UnMemoizedChannel;\n","import React from 'react';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ChannelHeaderProps = {\n  /**\n   * Custom UI component to display user avatar.\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   * */\n  Avatar?: React.ComponentType<AvatarProps>;\n  /** Manually set the image to render, defaults to the Channel image */\n  image?: string;\n  /** Show a little indicator that the Channel is live right now */\n  live?: boolean;\n  /** Set title manually */\n  title?: string;\n};\n\nconst UnMemoizedChannelHeader = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelHeaderProps,\n) => {\n  const { Avatar = DefaultAvatar, image: propImage, live, title } = props;\n\n  const { channel, watcher_count } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n  const { openMobileNav } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const { image: channelImage, member_count, name, subtitle } =\n    channel?.data || {};\n\n  const image = propImage || channelImage;\n\n  return (\n    <div className='str-chat__header-livestream'>\n      <div className='str-chat__header-hamburger' onClick={openMobileNav}>\n        <span className='str-chat__header-hamburger--line'></span>\n        <span className='str-chat__header-hamburger--line'></span>\n        <span className='str-chat__header-hamburger--line'></span>\n      </div>\n      {image && (\n        <Avatar\n          image={image}\n          shape='rounded'\n          size={channel?.type === 'commerce' ? 60 : 40}\n        />\n      )}\n      <div className='str-chat__header-livestream-left'>\n        <p className='str-chat__header-livestream-left--title'>\n          {title || name}{' '}\n          {live && (\n            <span className='str-chat__header-livestream-left--livelabel'>\n              {t('live')}\n            </span>\n          )}\n        </p>\n        {subtitle && (\n          <p className='str-chat__header-livestream-left--subtitle'>\n            {subtitle}\n          </p>\n        )}\n        <p className='str-chat__header-livestream-left--members'>\n          {!live && !!member_count && member_count > 0 && (\n            <>\n              {t('{{ memberCount }} members', {\n                memberCount: member_count,\n              })}\n              ,{' '}\n            </>\n          )}\n          {t('{{ watcherCount }} online', { watcherCount: watcher_count })}\n        </p>\n      </div>\n    </div>\n  );\n};\n\n/**\nThe ChannelHeader component renders some basic information about a Channel.\n* @example ./ChannelHeader.md\n*/\nexport const ChannelHeader = React.memo(\n  UnMemoizedChannelHeader,\n) as typeof UnMemoizedChannelHeader;\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","import React from 'react';\n\nimport { LoadingChannels } from '../Loading/LoadingChannels';\n\nimport placeholder from '../../assets/str-chat__connection-error.svg';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport type ChatDownProps = {\n  /** The type of error */\n  type: string;\n  /** The image url for this error */\n  image?: string;\n  /** The error message to show */\n  text?: string;\n};\n\nconst UnMemoizedChatDown: React.FC<ChatDownProps> = (props) => {\n  const { image, text, type = 'Error' } = props;\n\n  const { t } = useTranslationContext();\n\n  return (\n    <div className='str-chat__down'>\n      <LoadingChannels />\n      <div className='str-chat__down-main'>\n        <img data-testid='chatdown-img' src={image || placeholder} />\n        <h1>{type}</h1>\n        <h3>\n          {text ||\n            t('Error connecting to chat, refresh the page to try again.')}\n        </h3>\n      </div>\n    </div>\n  );\n};\n\n/**\n * ChatDown - A simple indicator that chat functionality isn't available, triggered when the Chat API is unavailable or your network isn't working.\n * @example ./ChatDown.md\n */\nexport const ChatDown = React.memo(\n  UnMemoizedChatDown,\n) as typeof UnMemoizedChatDown;\n","export default \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","import React, { PropsWithChildren } from 'react';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\nimport { ChatDown, ChatDownProps } from '../ChatDown/ChatDown';\nimport { LoadingChannels } from '../Loading/LoadingChannels';\n\nimport chevrondown from '../../assets/str-chat__icon-chevron-down.svg';\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ChannelListTeamProps = {\n  /**\n   * Custom UI component to display user avatar.\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   * */\n  Avatar?: React.ComponentType<AvatarProps>;\n  /**\n   * If channel list ran into error.\n   * When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown/ChatDown.tsx)\n   */\n  error?: boolean;\n  /**\n   * If channel list is in loading state.\n   * When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Loading/LoadingChannels.tsx)\n   */\n  loading?: boolean;\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true.\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown/ChatDown.tsx)\n   */\n  LoadingErrorIndicator?: React.ComponentType<ChatDownProps>;\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Loading/LoadingChannels.tsx)\n   */\n  LoadingIndicator?: React.ComponentType;\n  /** When true, sidebar containing logo of the team is visible */\n  showSidebar?: boolean;\n  /** Url for sidebar logo image. */\n  sidebarImage?: string;\n};\n\n/**\n * ChannelListTeam - A preview list of channels, allowing you to select the channel you want to open\n */\nexport const ChannelListTeam = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: PropsWithChildren<ChannelListTeamProps>,\n) => {\n  const {\n    Avatar = DefaultAvatar,\n    children,\n    error = false,\n    loading,\n    LoadingErrorIndicator = ChatDown,\n    LoadingIndicator = LoadingChannels,\n    showSidebar,\n    sidebarImage,\n  } = props;\n\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const { id, image, name, status } = client.user || {};\n\n  if (error) {\n    return <LoadingErrorIndicator type='Connection Error' />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className='str-chat__channel-list-team'>\n      {showSidebar && (\n        <div className='str-chat__channel-list-team__sidebar'>\n          <div className='str-chat__channel-list-team__sidebar--top'>\n            <Avatar image={sidebarImage} size={50} />\n          </div>\n        </div>\n      )}\n      <div className='str-chat__channel-list-team__main'>\n        <div className='str-chat__channel-list-team__header'>\n          <div className='str-chat__channel-list-team__header--left'>\n            <Avatar image={image} name={name || id} size={40} />\n          </div>\n          <div className='str-chat__channel-list-team__header--middle'>\n            <div className='str-chat__channel-list-team__header--title'>\n              {name || id}\n            </div>\n            <div\n              className={`str-chat__channel-list-team__header--status ${status}`}\n            >\n              {status}\n            </div>\n          </div>\n          <div className='str-chat__channel-list-team__header--right'>\n            <button className='str-chat__channel-list-team__header--button'>\n              <img src={chevrondown} />\n            </button>\n          </div>\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useChannelDeletedListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels((channels) => {\n          const channelIndex = channels.findIndex(\n            (channel) => channel.cid === event.cid,\n          );\n\n          if (channelIndex < 0) return [...channels];\n\n          // Remove the deleted channel from the list.s\n          channels.splice(channelIndex, 1);\n\n          return [...channels];\n        });\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useChannelHiddenListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels((channels) => {\n          const channelIndex = channels.findIndex(\n            (channel) => channel.cid === event.cid,\n          );\n          if (channelIndex < 0) return [...channels];\n\n          // Remove the hidden channel from the list.s\n          channels.splice(channelIndex, 1);\n\n          return [...channels];\n        });\n      }\n    };\n\n    client.on('channel.hidden', handleEvent);\n\n    return () => {\n      client.off('channel.hidden', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useChannelTruncatedListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n  forceUpdate?: () => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      setChannels((channels) => [...channels]);\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      }\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('channel.truncated', handleEvent);\n\n    return () => {\n      client.off('channel.truncated', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useChannelUpdatedListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n  forceUpdate?: () => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      setChannels((channels) => {\n        const channelIndex = channels.findIndex(\n          (channel) => channel.cid === event.channel?.cid,\n        );\n\n        if (channelIndex > -1 && event.channel) {\n          const newChannels = channels;\n          newChannels[channelIndex].data = event.channel;\n          return [...newChannels];\n        }\n\n        return channels;\n      });\n      if (forceUpdate) {\n        forceUpdate();\n      }\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      }\n    };\n\n    client.on('channel.updated', handleEvent);\n\n    return () => {\n      client.off('channel.updated', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import type { Channel, StreamChat } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const getChannel = async <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>,\n  type: string,\n  id: string,\n) => {\n  const channel = client.channel(type, id);\n  await channel.watch();\n  return channel;\n};\n\nexport const MAX_QUERY_CHANNELS_LIMIT = 30;\n\nexport const moveChannelUp = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  cid: string,\n  channels: Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>,\n) => {\n  // get channel index\n  const channelIndex = channels.findIndex((channel) => channel.cid === cid);\n\n  if (channelIndex <= 0) return channels;\n\n  // get channel from channels\n  const channel = channels[channelIndex];\n\n  // remove channel from current position\n  channels.splice(channelIndex, 1);\n  // add channel at the start\n  channels.unshift(channel);\n\n  return [...channels];\n};\n","import { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\n\nimport { getChannel } from '../utils';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useChannelVisibleListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = async (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else if (event.type && event.channel_type && event.channel_id) {\n        const channel = await getChannel(\n          client,\n          event.channel_type,\n          event.channel_id,\n        );\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('channel.visible', handleEvent);\n\n    return () => {\n      client.off('channel.visible', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useConnectionRecoveredListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  forceUpdate?: () => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = () => {\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('connection.recovered', handleEvent);\n\n    return () => {\n      client.off('connection.recovered', handleEvent);\n    };\n  }, []);\n};\n","import { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\n\nimport { moveChannelUp } from '../utils';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useMessageNewListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  lockChannelOrder = false,\n  allowNewMessagesFromUnfilteredChannels = true,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      setChannels((channels) => {\n        const channelInList =\n          channels.filter((channel) => channel.cid === event.cid).length > 0;\n\n        if (\n          !channelInList &&\n          allowNewMessagesFromUnfilteredChannels &&\n          event.channel_type\n        ) {\n          const channel = client.channel(event.channel_type, event.channel_id);\n          return uniqBy([channel, ...channels], 'cid');\n        }\n\n        if (!lockChannelOrder) return moveChannelUp(event.cid || '', channels);\n\n        return channels;\n      });\n    };\n\n    client.on('message.new', handleEvent);\n\n    return () => {\n      client.off('message.new', handleEvent);\n    };\n  }, [lockChannelOrder]);\n};\n","import { useEffect } from 'react';\n\nexport const useMobileNavigation = (\n  channelListRef: React.RefObject<HTMLDivElement>,\n  navOpen: boolean,\n  closeMobileNav?: () => void,\n) => {\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        closeMobileNav &&\n        channelListRef.current &&\n        !channelListRef.current.contains(event.target as Node) &&\n        navOpen\n      ) {\n        closeMobileNav();\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [channelListRef, closeMobileNav, navOpen]);\n};\n","import { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\n\nimport { getChannel } from '../utils';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useNotificationAddedToChannelListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = async (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else if (event.channel?.type) {\n        const channel = await getChannel(\n          client,\n          event.channel.type,\n          event.channel.id,\n        );\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('notification.added_to_channel', handleEvent);\n\n    return () => {\n      client.off('notification.added_to_channel', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\n\nimport { getChannel } from '../utils';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useNotificationMessageNewListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = async (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      // if new message, put move channel up\n      // get channel if not in state currently\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else if (event.channel?.type) {\n        const channel = await getChannel(\n          client,\n          event.channel.type,\n          event.channel.id,\n        );\n        // move channel to starting position\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('notification.message_new', handleEvent);\n\n    return () => {\n      client.off('notification.message_new', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useNotificationRemovedFromChannelListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n  customHandler?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, event);\n      } else {\n        setChannels((channels) =>\n          channels.filter((channel) => channel.cid !== event.channel?.cid),\n        );\n      }\n    };\n\n    client.on('notification.removed_from_channel', handleEvent);\n\n    return () => {\n      client.off('notification.removed_from_channel', handleEvent);\n    };\n  }, [customHandler]);\n};\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { MAX_QUERY_CHANNELS_LIMIT } from '../utils';\n\nimport type {\n  Channel,\n  ChannelFilters,\n  ChannelOptions,\n  ChannelSort,\n  StreamChat,\n} from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const usePaginatedChannels = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>,\n  filters: ChannelFilters<Ch, Co, Us>,\n  sort: ChannelSort<Ch>,\n  options: ChannelOptions,\n  activeChannelHandler: (\n    channels: Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>,\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n  ) => void,\n) => {\n  const [channels, setChannels] = useState<\n    Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>\n  >([]);\n  const [error, setError] = useState(false);\n  const [hasNextPage, setHasNextPage] = useState(true);\n  const [loadingChannels, setLoadingChannels] = useState(true);\n  const [offset, setOffset] = useState(0);\n  const [refreshing, setRefreshing] = useState(true);\n\n  const filterString = useMemo(() => JSON.stringify(filters), [filters]);\n\n  const queryChannels = async (queryType?: string) => {\n    if (queryType === 'reload') {\n      setChannels([]);\n      setLoadingChannels(true);\n    }\n\n    setRefreshing(true);\n\n    const newOptions = {\n      limit: options?.limit ?? MAX_QUERY_CHANNELS_LIMIT,\n      offset: queryType === 'reload' ? 0 : offset,\n      ...options,\n    };\n\n    try {\n      const channelQueryResponse = await client.queryChannels(\n        filters,\n        sort || {},\n        newOptions,\n      );\n\n      let newChannels;\n      if (queryType === 'reload') {\n        newChannels = channelQueryResponse;\n      } else {\n        newChannels = [...channels, ...channelQueryResponse];\n      }\n\n      setChannels(newChannels);\n      setHasNextPage(channelQueryResponse.length >= newOptions.limit);\n      // Set active channel only after first page.\n      if (offset === 0 && activeChannelHandler) {\n        activeChannelHandler(newChannels, setChannels);\n      }\n\n      setOffset(newChannels.length);\n    } catch (err) {\n      console.warn(err);\n      setError(true);\n    }\n    setLoadingChannels(false);\n    setRefreshing(false);\n  };\n\n  const loadNextPage = () => {\n    queryChannels();\n  };\n\n  useEffect(() => {\n    queryChannels('reload');\n  }, [filterString]);\n\n  return {\n    channels,\n    hasNextPage,\n    loadNextPage,\n    setChannels,\n    status: {\n      error,\n      loadingChannels,\n      refreshing,\n    },\n  };\n};\n","import { useEffect } from 'react';\n\nimport { useChatContext } from '../../../context/ChatContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport const useUserPresenceChangedListener = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  setChannels: React.Dispatch<\n    React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n  >,\n) => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      setChannels((channels) => {\n        const newChannels = channels.map((channel) => {\n          if (!event.user?.id || !channel.state.members[event.user.id]) {\n            return channel;\n          }\n\n          const newChannel = channel; // dumb workaround for linter\n          newChannel.state.members[event.user.id].user = event.user;\n\n          return newChannel;\n        });\n\n        return [...newChannels];\n      });\n    };\n\n    client.on('user.presence.changed', handleEvent);\n\n    return () => {\n      client.off('user.presence.changed', handleEvent);\n    };\n  }, []);\n};\n","import React from 'react';\n\nimport type { ChannelPreviewUIComponentProps } from './ChannelPreview';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst UnMemoizedChannelPreviewCountOnly = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { channel, displayTitle, setActiveChannel, unread, watchers } = props;\n\n  return (\n    <div className={unread && unread >= 1 ? 'unread' : ''}>\n      <button\n        onClick={() => {\n          if (setActiveChannel) {\n            setActiveChannel(channel, watchers);\n          }\n        }}\n      >\n        {' '}\n        {displayTitle} <span>{unread}</span>\n      </button>\n    </div>\n  );\n};\n\nexport const ChannelPreviewCountOnly = React.memo(\n  UnMemoizedChannelPreviewCountOnly,\n) as typeof UnMemoizedChannelPreviewCountOnly;\n","import type { Channel, TranslationLanguages, UserResponse } from 'stream-chat';\n\nimport type { TranslationContextValue } from '../../context/TranslationContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport const getLatestMessagePreview = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n  t: TranslationContextValue['t'],\n  userLanguage: TranslationContextValue['userLanguage'] = 'en',\n) => {\n  const latestMessage =\n    channel.state.messages[channel.state.messages.length - 1];\n\n  const previewTextToRender =\n    latestMessage?.i18n?.[\n      `${userLanguage}_text` as `${TranslationLanguages}_text`\n    ] || latestMessage?.text;\n\n  if (!latestMessage) {\n    return t('Nothing yet...');\n  }\n\n  if (latestMessage.deleted_at) {\n    return t('Message deleted');\n  }\n\n  if (previewTextToRender) {\n    return previewTextToRender;\n  }\n\n  if (latestMessage.command) {\n    return `/${latestMessage.command}`;\n  }\n\n  if (latestMessage.attachments?.length) {\n    return t('🏙 Attachment...');\n  }\n\n  return t('Empty message...');\n};\n\nexport const getDisplayTitle = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n  currentUser?: UserResponse<Us>,\n) => {\n  let title = channel.data?.name;\n  const members = Object.values(channel.state.members);\n\n  if (!title && members.length === 2) {\n    const otherMember = members.find(\n      (member) => member.user?.id !== currentUser?.id,\n    );\n    if (otherMember?.user?.name) {\n      title = otherMember.user.name;\n    }\n  }\n\n  return title;\n};\n\nexport const getDisplayImage = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType = DefaultUserType\n>(\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n  currentUser?: UserResponse<Us>,\n) => {\n  let image = channel.data?.image;\n  const members = Object.values(channel.state.members);\n\n  if (!image && members.length === 2) {\n    const otherMember = members.find(\n      (member) => member.user?.id !== currentUser?.id,\n    );\n    if (otherMember?.user?.image) {\n      image = otherMember.user.image;\n    }\n  }\n\n  return image;\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { ChannelPreviewCountOnly } from './ChannelPreviewCountOnly';\nimport {\n  getDisplayImage,\n  getDisplayTitle,\n  getLatestMessagePreview,\n} from './utils';\n\nimport { ChatContextValue, useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport type { AvatarProps } from '../Avatar/Avatar';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ChannelPreviewUIComponentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = ChannelPreviewProps<At, Ch, Co, Ev, Me, Re, Us> & {\n  /** If the component's channel is the active (selected) Channel */\n  active?: boolean;\n  /** Image of Channel to display */\n  displayImage?: string;\n  /** Title of Channel to display */\n  displayTitle?: string;\n  /** The last message received in a channel */\n  lastMessage?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Latest message preview text to display */\n  latestMessage?: string;\n  /** Text truncation limit for latest message */\n  latestMessageLength?: number;\n  /** Number of unread Messages */\n  unread?: number;\n};\n\nexport type ChannelPreviewProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** Comes from either the `channelRenderFilterFn` or `usePaginatedChannels` call from [ChannelList](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelList/ChannelList.tsx) */\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Current selected channel object */\n  activeChannel?: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   * Custom UI component to display user avatar\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   */\n  Avatar?: React.ComponentType<AvatarProps>;\n  /** Forces the update of preview component on channel update */\n  channelUpdateCount?: number;\n  key?: string;\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessenger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview?: React.ComponentType<\n    ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Setter for selected Channel */\n  setActiveChannel?: ChatContextValue<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >['setActiveChannel'];\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/react/channel_pagination/?language=js) for a list of available fields for sort.\n   */\n  watchers?: { limit?: number; offset?: number };\n};\n\nexport const ChannelPreview = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelPreviewProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { channel, Preview = ChannelPreviewCountOnly } = props;\n\n  const { channel: activeChannel, client, setActiveChannel } = useChatContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n  const { t, userLanguage } = useTranslationContext();\n\n  const [lastMessage, setLastMessage] = useState<\n    StreamMessage<At, Ch, Co, Ev, Me, Re, Us>\n  >(channel.state.messages[channel.state.messages.length - 1]);\n  const [unread, setUnread] = useState(0);\n\n  const isActive = activeChannel?.cid === channel.cid;\n  const { muted } = channel.muteStatus();\n\n  useEffect(() => {\n    if (isActive || muted) {\n      setUnread(0);\n    } else {\n      setUnread(channel.countUnread());\n    }\n  }, [channel, isActive, muted]);\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (event.message) setLastMessage(event.message);\n\n      if (!isActive && !muted) {\n        setUnread(channel.countUnread());\n      } else {\n        setUnread(0);\n      }\n    };\n\n    channel.on('message.new', handleEvent);\n    channel.on('message.updated', handleEvent);\n    channel.on('message.deleted', handleEvent);\n\n    return () => {\n      channel.off('message.new', handleEvent);\n      channel.off('message.updated', handleEvent);\n      channel.off('message.deleted', handleEvent);\n    };\n  }, [channel, isActive, muted]);\n\n  if (!Preview) return null;\n\n  return (\n    <Preview\n      {...props}\n      active={isActive}\n      displayImage={getDisplayImage(channel, client.user)}\n      displayTitle={getDisplayTitle(channel, client.user)}\n      lastMessage={lastMessage}\n      latestMessage={getLatestMessagePreview(channel, t, userLanguage)}\n      setActiveChannel={setActiveChannel}\n      unread={unread}\n    />\n  );\n};\n","import React, { useRef } from 'react';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\nimport { truncate } from '../../utils';\n\nimport type { ChannelPreviewUIComponentProps } from './ChannelPreview';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst UnMemoizedChannelPreviewLastMessage = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    active,\n    Avatar = DefaultAvatar,\n    channel,\n    displayImage,\n    displayTitle,\n    latestMessage,\n    latestMessageLength = 20,\n    setActiveChannel,\n    unread,\n    watchers,\n  } = props;\n  const channelPreviewButton = useRef<HTMLButtonElement>(null);\n  const onSelectChannel = () => {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  const unreadClass =\n    unread && unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n  const activeClass = active ? 'str-chat__channel-preview--active' : '';\n\n  return (\n    <div className={`str-chat__channel-preview ${unreadClass} ${activeClass}`}>\n      <button\n        data-testid='channel-preview-button'\n        onClick={onSelectChannel}\n        ref={channelPreviewButton}\n      >\n        {unread && unread >= 1 ? (\n          <div className='str-chat__channel-preview--dot' />\n        ) : null}\n        <Avatar image={displayImage} name={displayTitle} />\n        <div className='str-chat__channel-preview-info'>\n          <span className='str-chat__channel-preview-title'>\n            {displayTitle}\n          </span>\n          <span className='str-chat__channel-preview-last-message'>\n            {truncate(latestMessage, latestMessageLength)}\n          </span>\n          {unread && unread >= 1 ? (\n            <span className='str-chat__channel-preview-unread-count'>\n              {unread}\n            </span>\n          ) : null}\n        </div>\n      </button>\n    </div>\n  );\n};\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component\n * @example ./ChannelPreviewLastMessage.md\n */\nexport const ChannelPreviewLastMessage = React.memo(\n  UnMemoizedChannelPreviewLastMessage,\n) as typeof UnMemoizedChannelPreviewLastMessage;\n","import React from 'react';\n\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nexport type EmptyStateIndicatorProps = {\n  /** List Type: channel | message */\n  listType: 'channel' | 'message';\n};\n\nconst UnMemoizedEmptyStateIndicator: React.FC<EmptyStateIndicatorProps> = (\n  props,\n) => {\n  const { listType } = props;\n\n  const { t } = useTranslationContext();\n\n  if (listType === 'channel')\n    return <p>{t('You have no channels currently')}</p>;\n\n  if (listType === 'message') return null;\n\n  return <p>No items exist</p>;\n};\n\nexport const EmptyStateIndicator = React.memo(\n  UnMemoizedEmptyStateIndicator,\n) as typeof UnMemoizedEmptyStateIndicator;\n","import React from 'react';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport type LoadMoreButtonProps = {\n  /** onClick handler load more button. Pagination logic should be executed in this handler. */\n  onClick: React.MouseEventHandler;\n  /** If true, LoadingIndicator is displayed instead of button */\n  refreshing?: boolean;\n};\n\nconst UnMemoizedLoadMoreButton: React.FC<LoadMoreButtonProps> = (props) => {\n  const { children = 'Load more', onClick, refreshing } = props;\n\n  return (\n    <div className='str-chat__load-more-button'>\n      <button\n        className='str-chat__load-more-button__button'\n        data-testid='load-more-button'\n        disabled={refreshing}\n        onClick={onClick}\n      >\n        {refreshing ? <LoadingIndicator /> : children}\n      </button>\n    </div>\n  );\n};\n\nexport const LoadMoreButton = React.memo(\n  UnMemoizedLoadMoreButton,\n) as typeof UnMemoizedLoadMoreButton;\n","import React from 'react';\n\nimport {\n  LoadMoreButton as DefaultLoadMoreButton,\n  LoadMoreButtonProps,\n} from './LoadMoreButton';\n\nexport type LoadMorePaginatorProps = {\n  /** callback to load the next page */\n  loadNextPage: () => void;\n  hasNextPage?: boolean;\n  LoadMoreButton?: React.ComponentType<LoadMoreButtonProps>;\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing?: boolean;\n  reverse?: boolean;\n};\n\nexport const UnMemoizedLoadMorePaginator: React.FC<LoadMorePaginatorProps> = (\n  props,\n) => {\n  const {\n    children,\n    hasNextPage,\n    LoadMoreButton = DefaultLoadMoreButton,\n    loadNextPage,\n    refreshing,\n    reverse,\n  } = props;\n\n  return (\n    <>\n      {!reverse && children}\n      {hasNextPage && (\n        <LoadMoreButton onClick={loadNextPage} refreshing={refreshing} />\n      )}\n      {reverse && children}\n    </>\n  );\n};\n\nexport const LoadMorePaginator = React.memo(\n  UnMemoizedLoadMorePaginator,\n) as typeof UnMemoizedLoadMorePaginator;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport { ChannelListTeam, ChannelListTeamProps } from './ChannelListTeam';\nimport { useChannelDeletedListener } from './hooks/useChannelDeletedListener';\nimport { useChannelHiddenListener } from './hooks/useChannelHiddenListener';\nimport { useChannelTruncatedListener } from './hooks/useChannelTruncatedListener';\nimport { useChannelUpdatedListener } from './hooks/useChannelUpdatedListener';\nimport { useChannelVisibleListener } from './hooks/useChannelVisibleListener';\nimport { useConnectionRecoveredListener } from './hooks/useConnectionRecoveredListener';\nimport { useMessageNewListener } from './hooks/useMessageNewListener';\nimport { useMobileNavigation } from './hooks/useMobileNavigation';\nimport { useNotificationAddedToChannelListener } from './hooks/useNotificationAddedToChannelListener';\nimport { useNotificationMessageNewListener } from './hooks/useNotificationMessageNewListener';\nimport { useNotificationRemovedFromChannelListener } from './hooks/useNotificationRemovedFromChannelListener';\nimport { usePaginatedChannels } from './hooks/usePaginatedChannels';\nimport { useUserPresenceChangedListener } from './hooks/useUserPresenceChangedListener';\nimport { MAX_QUERY_CHANNELS_LIMIT, moveChannelUp } from './utils';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar/Avatar';\nimport {\n  ChannelPreview,\n  ChannelPreviewUIComponentProps,\n} from '../ChannelPreview/ChannelPreview';\nimport { ChannelPreviewLastMessage } from '../ChannelPreview/ChannelPreviewLastMessage';\nimport { ChatDown, ChatDownProps } from '../ChatDown/ChatDown';\nimport {\n  EmptyStateIndicator as DefaultEmptyStateIndicator,\n  EmptyStateIndicatorProps,\n} from '../EmptyStateIndicator';\nimport { LoadingChannels } from '../Loading/LoadingChannels';\nimport {\n  LoadMorePaginator,\n  LoadMorePaginatorProps,\n} from '../LoadMore/LoadMorePaginator';\n\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type {\n  Channel,\n  ChannelFilters,\n  ChannelOptions,\n  ChannelSort,\n  Event,\n} from 'stream-chat';\n\nimport type { InfiniteScrollPaginatorProps } from '../InfiniteScrollPaginator/InfiniteScrollPaginator';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst DEFAULT_FILTERS = {};\nconst DEFAULT_OPTIONS = {};\nconst DEFAULT_SORT = {};\n\nexport type ChannelListProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /**\n   * When client receives an event `message.new`, we push that Channel to top of the list.\n   *\n   * But If the Channel doesn't exist in the list, then we get the Channel from Client\n   * (client maintains list of watched Channels as `client.activeChannels`) and push\n   * that Channel to top of the list by default. You can disallow this behavior by setting following\n   * prop to false. This is quite useful where you have multiple tab structure and you don't want\n   * ChannelList in Tab1 to react to new Message on some Channel in Tab2. Default value is true.\n   */\n  allowNewMessagesFromUnfilteredChannels?: boolean;\n  /**\n   * Custom UI component to display user avatar.\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   */\n  Avatar?: React.ComponentType<AvatarProps>;\n  /**\n   * Optional function to filter Channels prior to loading in the DOM. Do not use any complex or async logic here that would significantly delay the loading of the ChannelList.\n   * We recommend using a pure function with array methods like filter/sort/reduce.\n   */\n  channelRenderFilterFn?: (\n    channels: Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>,\n  ) => Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>;\n  /**\n   * Set a Channel (of this id) to be active and move it to the top of the list of Channels by ID\n   */\n  customActiveChannel?: string;\n  /** Indicator for Empty State */\n  EmptyStateIndicator?: React.ComponentType<EmptyStateIndicatorProps>;\n  /** Object containing query filters */\n  filters?: ChannelFilters<Ch, Co, Us>;\n  /**\n   * Custom UI Component for container of list of Channels. Note that, list (UI component) of Channels is passed\n   * to this component as children. This component is for the purpose of adding header to ChannelList or styling container\n   * for list of Channels.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelList/ChannelListTeam.tsx) (default)\n   * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelList/ChannelListMessenger.tsx)\n   *\n   * It has access to some additional props:\n   *\n   * - `setActiveChannel` Check [ChatContext](https://getstream.github.io/stream-chat-react/#section-chatcontext)\n   * - `activeChannel` Currently active Channel object\n   * - `channels` List of Channels in channel list\n   */\n  List?: React.ComponentType<ChannelListTeamProps>;\n  /**\n   * Error indicator UI Component. It will be displayed if there is any error if loading the Channels.\n   * This error could be related to network or failing API.\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown/ChatDown.tsx)\n   *\n   */\n  LoadingErrorIndicator?: React.ComponentType<ChatDownProps>;\n  /**\n   * Loading indicator UI Component. It will be displayed until the Channels are\n   * being queried from API. Once the Channels are loaded/queried, loading indicator is removed\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Loading/LoadingChannels.tsx)\n   *\n   */\n  LoadingIndicator?: React.ComponentType;\n  /**\n   * If true, Channels won't be dynamically sorted by most recent message\n   */\n  lockChannelOrder?: boolean;\n  /** Function that overrides default behavior when users gets added to a Channel.\n   * Corresponding to [notification.added\\_to\\_channel](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onAddedToChannel?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when Channel gets deleted. In absence of this prop, Channel will be removed from the list.\n   * Corresponding to [channel.deleted](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onChannelDeleted?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when Channel gets hidden */\n  onChannelHidden?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function to customize behavior when Channel gets truncated.\n   * Corresponding to [channel.truncated](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onChannelTruncated?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when Channel gets updated.\n   * Corresponding to [notification.channel_updated](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onChannelUpdated?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when Channel becomes visible */\n  onChannelVisible?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when new Message is received on Channel that is not being watched.\n   * Corresponding to [notification.message_new](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onMessageNew?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Function that overrides default behavior when users gets removed from a Channel.\n   * Corresponding to [notification.removed\\_from\\_channel](https://getstream.io/chat/docs/javascript/event_object/?language=javascript)\n   */\n  onRemovedFromChannel?: (\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n    event: Event<At, Ch, Co, Ev, Me, Re, Us>,\n  ) => void;\n  /** Object containing query options */\n  options?: ChannelOptions;\n  /**\n   * Paginator component for Channels. It contains all the pagination logic such as\n   * - fetching next page of results when needed e.g., when scroll reaches the end of list\n   * - UI to display loading indicator when next page is being loaded\n   * - call to action button to trigger loading of next page.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMore/LoadMorePaginator.tsx)\n   * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator/InfiniteScrollPaginator.tsx)\n   */\n  Paginator?: React.ComponentType<\n    InfiniteScrollPaginatorProps | LoadMorePaginatorProps\n  >;\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessenger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   */\n  Preview?: React.ComponentType<\n    ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Last channel will be set as active channel if true, defaults to true */\n  setActiveChannelOnMount?: boolean;\n  /** Boolean to show sidebar */\n  showSidebar?: boolean;\n  /** Object containing sort parameters */\n  sort?: ChannelSort<Ch>;\n  /** Object containing watcher parameters */\n  watchers?: { limit?: number; offset?: number };\n};\n\nconst UnMemoizedChannelList = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelListProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    Avatar = DefaultAvatar,\n    allowNewMessagesFromUnfilteredChannels,\n    channelRenderFilterFn,\n    customActiveChannel,\n    EmptyStateIndicator = DefaultEmptyStateIndicator,\n    filters,\n    LoadingErrorIndicator = ChatDown,\n    LoadingIndicator = LoadingChannels,\n    List = ChannelListTeam,\n    lockChannelOrder,\n    onAddedToChannel,\n    onChannelDeleted,\n    onChannelHidden,\n    onChannelTruncated,\n    onChannelUpdated,\n    onChannelVisible,\n    onMessageNew,\n    onRemovedFromChannel,\n    options,\n    Paginator = LoadMorePaginator,\n    Preview = ChannelPreviewLastMessage,\n    setActiveChannelOnMount = true,\n    showSidebar,\n    sort = DEFAULT_SORT,\n    watchers = {},\n  } = props;\n\n  const {\n    channel,\n    client,\n    closeMobileNav,\n    navOpen = false,\n    setActiveChannel,\n    theme,\n  } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  const channelListRef = useRef<HTMLDivElement>(null);\n  const [channelUpdateCount, setChannelUpdateCount] = useState(0);\n\n  /**\n   * Set a channel with id {customActiveChannel} as active and move it to the top of the list.\n   * If customActiveChannel prop is absent, then set the first channel in list as active channel.\n   */\n  const activeChannelHandler = (\n    channels: Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>,\n    setChannels: React.Dispatch<\n      React.SetStateAction<Array<Channel<At, Ch, Co, Ev, Me, Re, Us>>>\n    >,\n  ) => {\n    if (\n      !channels ||\n      channels.length === 0 ||\n      channels.length > (options?.limit || MAX_QUERY_CHANNELS_LIMIT)\n    ) {\n      return;\n    }\n\n    if (customActiveChannel) {\n      const customActiveChannelObject = channels.find(\n        (chan) => chan.id === customActiveChannel,\n      );\n      if (customActiveChannelObject) {\n        if (setActiveChannel) {\n          setActiveChannel(customActiveChannelObject, watchers);\n        }\n        const newChannels = moveChannelUp(\n          customActiveChannelObject.cid,\n          channels,\n        );\n        setChannels(newChannels);\n      }\n\n      return;\n    }\n\n    if (setActiveChannelOnMount && setActiveChannel) {\n      setActiveChannel(channels[0], watchers);\n    }\n  };\n\n  // When channel list (channels array) is updated without any shallow changes (or with only deep changes), then we want\n  // to force the channel preview to re-render.\n  // This happens in case of event channel.updated, channel.truncated etc. Inner properties of channel is updated but\n  // react renderer will only make shallow comparison and choose to not to re-render the UI.\n  // By updating the dummy prop - channelUpdateCount, we can force this re-render.\n  const forceUpdate = () => setChannelUpdateCount((count) => count + 1);\n\n  const {\n    channels,\n    hasNextPage,\n    loadNextPage,\n    setChannels,\n    status,\n  } = usePaginatedChannels(\n    client,\n    filters || DEFAULT_FILTERS,\n    sort || DEFAULT_SORT,\n    options || DEFAULT_OPTIONS,\n    activeChannelHandler,\n  );\n\n  const loadedChannels = channelRenderFilterFn\n    ? channelRenderFilterFn(channels)\n    : channels;\n\n  useMobileNavigation(channelListRef, navOpen, closeMobileNav);\n\n  useMessageNewListener(\n    setChannels,\n    lockChannelOrder,\n    allowNewMessagesFromUnfilteredChannels,\n  );\n  useNotificationMessageNewListener(setChannels, onMessageNew);\n  useNotificationAddedToChannelListener(setChannels, onAddedToChannel);\n  useNotificationRemovedFromChannelListener(setChannels, onRemovedFromChannel);\n  useChannelDeletedListener(setChannels, onChannelDeleted);\n  useChannelHiddenListener(setChannels, onChannelHidden);\n  useChannelVisibleListener(setChannels, onChannelVisible);\n  useChannelTruncatedListener(setChannels, onChannelTruncated, forceUpdate);\n  useChannelUpdatedListener(setChannels, onChannelUpdated, forceUpdate);\n  useConnectionRecoveredListener(forceUpdate);\n  useUserPresenceChangedListener(setChannels);\n\n  useEffect(() => {\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (setActiveChannel && event?.cid === channel?.cid) {\n        setActiveChannel();\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    client.on('channel.hidden', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n      client.off('channel.hidden', handleEvent);\n    };\n  }, [channel]);\n\n  const renderChannel = (item: Channel<At, Ch, Co, Ev, Me, Re, Us>) => {\n    if (!item) return null;\n\n    const previewProps = {\n      activeChannel: channel,\n      Avatar,\n      channel: item,\n      channelUpdateCount, // forces the update of preview component on channel update\n      key: item.id,\n      Preview,\n      setActiveChannel,\n      watchers,\n    };\n\n    return <ChannelPreview {...previewProps} />;\n  };\n\n  const renderList = () => (\n    <List\n      Avatar={Avatar}\n      error={status.error}\n      loading={status.loadingChannels}\n      LoadingErrorIndicator={LoadingErrorIndicator}\n      LoadingIndicator={LoadingIndicator}\n      showSidebar={showSidebar}\n    >\n      {!loadedChannels || loadedChannels.length === 0 ? (\n        <EmptyStateIndicator listType='channel' />\n      ) : (\n        <Paginator\n          hasNextPage={hasNextPage}\n          loadNextPage={loadNextPage}\n          refreshing={status.refreshing}\n        >\n          {loadedChannels.map(renderChannel)}\n        </Paginator>\n      )}\n    </List>\n  );\n\n  return (\n    <>\n      <div\n        className={`str-chat str-chat-channel-list ${theme} ${\n          navOpen ? 'str-chat-channel-list--open' : ''\n        }`}\n        ref={channelListRef}\n      >\n        {renderList()}\n      </div>\n    </>\n  );\n};\n\n/**\n * ChannelList - A preview list of Channels, allowing you to select the Channel you want to open.\n * @example ./ChannelList.md\n */\nexport const ChannelList = React.memo(\n  UnMemoizedChannelList,\n) as typeof UnMemoizedChannelList;\n","import React from 'react';\n\nimport { ChatDown, ChatDownProps } from '../ChatDown/ChatDown';\nimport { LoadingChannels } from '../Loading/LoadingChannels';\n\nexport type ChannelListMessengerProps = {\n  /**\n   * If channel list ran into an error.\n   * When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown/ChatDown.tsx)\n   */\n  error?: boolean;\n  /**\n   * If channel list is in loading state.\n   * When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Loading/LoadingChannels.tsx)\n   */\n  loading?: boolean;\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown/ChatDown.tsx)\n   *\n   */\n  LoadingErrorIndicator?: React.ComponentType<ChatDownProps>;\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Loading/LoadingChannels.tsx)\n   *\n   */\n  LoadingIndicator?: React.ComponentType;\n};\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n */\nexport const ChannelListMessenger: React.FC<ChannelListMessengerProps> = (\n  props,\n) => {\n  const {\n    children,\n    error = false,\n    loading,\n    LoadingErrorIndicator = ChatDown,\n    LoadingIndicator = LoadingChannels,\n  } = props;\n\n  if (error) {\n    return <LoadingErrorIndicator type='Connection Error' />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className='str-chat__channel-list-messenger'>\n      <div className='str-chat__channel-list-messenger__main'>{children}</div>\n    </div>\n  );\n};\n","import React, { useRef } from 'react';\n\nimport { Avatar as DefaultAvatar } from '../Avatar/Avatar';\n\nimport type { ChannelPreviewUIComponentProps } from './ChannelPreview';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst UnMemoizedChannelPreviewCompact = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    active,\n    Avatar = DefaultAvatar,\n    channel,\n    displayImage,\n    displayTitle,\n    setActiveChannel,\n    unread,\n    watchers,\n  } = props;\n\n  const channelPreviewButton = useRef<HTMLButtonElement>(null);\n  const unreadClass =\n    unread && unread >= 1 ? 'str-chat__channel-preview-compact--unread' : '';\n  const activeClass = active ? 'str-chat__channel-preview-compact--active' : '';\n\n  const onSelectChannel = () => {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return (\n    <button\n      className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\n      data-testid='channel-preview-button'\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n    >\n      <div className='str-chat__channel-preview-compact--left'>\n        <Avatar image={displayImage} name={displayTitle} size={20} />\n      </div>\n      <div className='str-chat__channel-preview-compact--right'>\n        {displayTitle}\n      </div>\n    </button>\n  );\n};\n\n/**\n *  Used as preview component for channel item in [ChannelList](#channellist) component.\n * @example ./ChannelPreviewCompact.md\n */\nexport const ChannelPreviewCompact = React.memo(\n  UnMemoizedChannelPreviewCompact,\n) as typeof UnMemoizedChannelPreviewCompact;\n","import React, { useRef } from 'react';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\nimport { truncate } from '../../utils';\n\nimport type { ChannelPreviewUIComponentProps } from './ChannelPreview';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst UnMemoizedChannelPreviewMessenger = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ChannelPreviewUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    active,\n    Avatar = DefaultAvatar,\n    channel,\n    displayImage,\n    displayTitle,\n    latestMessage,\n    latestMessageLength = 14,\n    setActiveChannel,\n    unread,\n    watchers,\n  } = props;\n\n  const channelPreviewButton = useRef<HTMLButtonElement | null>(null);\n\n  const unreadClass =\n    unread && unread >= 1 ? 'str-chat__channel-preview-messenger--unread' : '';\n\n  const activeClass = active\n    ? 'str-chat__channel-preview-messenger--active'\n    : '';\n\n  const onSelectChannel = () => {\n    if (setActiveChannel) {\n      setActiveChannel(channel, watchers);\n    }\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return (\n    <button\n      className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\n      data-testid='channel-preview-button'\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n    >\n      <div className='str-chat__channel-preview-messenger--left'>\n        {<Avatar image={displayImage} name={displayTitle} size={40} />}\n      </div>\n      <div className='str-chat__channel-preview-messenger--right'>\n        <div className='str-chat__channel-preview-messenger--name'>\n          <span>{displayTitle}</span>\n        </div>\n        <div className='str-chat__channel-preview-messenger--last-message'>\n          {truncate(latestMessage, latestMessageLength)}\n        </div>\n      </div>\n    </button>\n  );\n};\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n * @example ./ChannelPreviewMessenger.md\n */\nexport const ChannelPreviewMessenger = React.memo(\n  UnMemoizedChannelPreviewMessenger,\n) as typeof UnMemoizedChannelPreviewMessenger;\n","import React from 'react';\n\nconst UnMemoizedChannelSearch: React.FC = () => (\n  <div className='str-chat__channel-search'>\n    <input placeholder='Search' type='text' />\n    <button type='submit'>\n      <svg\n        height='17'\n        viewBox='0 0 18 17'\n        width='18'\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <path\n          d='M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z'\n          fillRule='evenodd'\n        />\n      </svg>\n    </button>\n  </div>\n);\n\nexport const ChannelSearch = React.memo(\n  UnMemoizedChannelSearch,\n) as typeof UnMemoizedChannelSearch;\n","import i18n, { TFunction } from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport type moment from 'moment';\nimport type { TranslationLanguages } from 'stream-chat';\n\nimport type { TDateTimeParser } from '../context/TranslationContext';\n\nimport type { UnknownType } from '../../types/types';\n\nimport {\n  enTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n} from './translations';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    sameDay: '[vandaag om] LT',\n    sameElse: 'L',\n  },\n});\n\nDayjs.updateLocale('it', {\n  calendar: {\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    sameDay: '[Oggi alle] LT',\n    sameElse: 'L',\n  },\n});\n\nDayjs.updateLocale('hi', {\n  calendar: {\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    sameDay: '[आज] LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiem(hour: number) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n  meridiemHour(hour: number, meridiem: string) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n    return hour;\n  },\n  meridiemParse: /रात|सुबह|दोपहर|शाम/,\n});\n\nDayjs.updateLocale('fr', {\n  calendar: {\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    sameDay: '[Aujourd’hui à] LT',\n    sameElse: 'L',\n  },\n});\n\nDayjs.updateLocale('tr', {\n  calendar: {\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    sameDay: '[bugün saat] LT',\n    sameElse: 'L',\n  },\n});\n\nDayjs.updateLocale('ru', {\n  calendar: {\n    lastDay: '[Вчера, в] LT',\n    nextDay: '[Завтра, в] LT',\n    sameDay: '[Сегодня, в] LT',\n  },\n});\n\nconst en_locale = {\n  formats: {},\n  months: [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ],\n  relativeTime: {},\n  weekdays: [\n    'Sunday',\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n  ],\n};\n\n// Type guards to check DayJs\nconst isDayJs = (\n  dateTimeParser: typeof Dayjs | typeof moment,\n): dateTimeParser is typeof Dayjs =>\n  (dateTimeParser as typeof Dayjs).extend !== undefined;\n\ntype Options = {\n  DateTimeParser?: typeof Dayjs | typeof moment;\n  dayjsLocaleConfigForLanguage?: Partial<ILocale>;\n  debug?: boolean;\n  disableDateTimeTranslations?: boolean;\n  language?: TranslationLanguages;\n  logger?: (message?: string) => void;\n  translationsForLanguage?: typeof enTranslations;\n};\n\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\nconst defaultStreami18nOptions = {\n  DateTimeParser: Dayjs,\n  dayjsLocaleConfigForLanguage: null,\n  debug: false,\n  disableDateTimeTranslations: false,\n  language: 'en' as TranslationLanguages,\n  logger: (message?: string) => console.warn(message),\n};\n\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback: (t: TFunction) => void = () => null;\n  initialized = false;\n\n  t: TFunction = (key: string) => key;\n  tDateTimeParser: TDateTimeParser;\n\n  translations: {\n    [key: string]: {\n      [key: string]: typeof enTranslations | UnknownType;\n    };\n  } = {\n    en: { [defaultNS]: enTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n  };\n\n  /**\n   * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales: { [key: string]: Partial<ILocale> } = {};\n  // dayjsLocales = {};\n\n  /**\n   * Initialize properties used in constructor\n   */\n  logger: (msg?: string) => void;\n  currentLanguage: TranslationLanguages;\n  DateTimeParser: typeof Dayjs | typeof moment;\n  isCustomDateTimeParser: boolean;\n  i18nextConfig: {\n    debug: boolean;\n    fallbackLng: false;\n    interpolation: { escapeValue: boolean };\n    keySeparator: false;\n    lng: string;\n    nsSeparator: false;\n    parseMissingKeyHandler: (key: string) => string;\n  };\n  /**\n   * Constructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for date-times\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options: Options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      if (this.DateTimeParser && isDayJs(this.DateTimeParser)) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins ${error}`,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      debug: finalOptions.debug,\n      fallbackLng: false,\n      interpolation: { escapeValue: false },\n      keySeparator: false,\n      lng: this.currentLanguage,\n      nsSeparator: false,\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage();\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        /**\n         * TS needs to know which is being called to accept the chain call\n         */\n        if (isDayJs(this.DateTimeParser)) {\n          return this.DateTimeParser(timestamp).locale(defaultLng);\n        }\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n\n      if (isDayJs(this.DateTimeParser)) {\n        return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n      }\n\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        lng: this.currentLanguage,\n        resources: this.translations,\n      });\n      this.initialized = true;\n    } catch (error) {\n      this.logger(`Something went wrong with init: ${JSON.stringify(error)}`);\n    }\n\n    return {\n      t: this.t,\n      tDateTimeParser: this.tDateTimeParser,\n    };\n  }\n\n  localeExists = (language: TranslationLanguages) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  registerTranslation(\n    language: TranslationLanguages,\n    translation: typeof enTranslations,\n    customDayjsLocale?: Partial<ILocale>,\n  ) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key: TranslationLanguages, config: Partial<ILocale>) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...en_locale, ...config }, undefined, true);\n    }\n  }\n\n  async setLanguage(language: TranslationLanguages) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (error) {\n      this.logger(`Failed to set language: ${JSON.stringify(error)}`);\n      return this.t;\n    }\n  }\n\n  registerSetLanguageCallback(callback: (t: TFunction) => void) {\n    this.setLanguageCallback = callback;\n  }\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport Dayjs from 'dayjs';\n\nimport { Streami18n } from '../../../i18n';\n\nimport { version } from '../../../../package.json';\n\nimport type { Channel, Event, Mute, StreamChat } from 'stream-chat';\n\nimport type { TranslationContextValue } from '../../../context/TranslationContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport type UseChatParams<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  i18nInstance?: Streami18n;\n  initialNavOpen?: boolean;\n};\n\nexport const useChat = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>({\n  client,\n  i18nInstance,\n  initialNavOpen,\n}: UseChatParams<At, Ch, Co, Ev, Me, Re, Us>) => {\n  const [translators, setTranslators] = useState<TranslationContextValue>({\n    t: (key) => key,\n    tDateTimeParser: (input) => Dayjs(input),\n    userLanguage: 'en',\n  });\n\n  const [channel, setChannel] = useState<Channel<At, Ch, Co, Ev, Me, Re, Us>>();\n  const [mutes, setMutes] = useState<Array<Mute<Us>>>([]);\n  const [navOpen, setNavOpen] = useState(initialNavOpen);\n\n  const clientMutes = client?.user?.mutes;\n\n  const closeMobileNav = () => setNavOpen(false);\n  const openMobileNav = () => setTimeout(() => setNavOpen(true), 100);\n\n  useEffect(() => {\n    if (client) {\n      const userAgent = client.getUserAgent();\n      if (!userAgent.includes('stream-chat-react')) {\n        /**\n         * results in something like: 'stream-chat-react-2.3.2-stream-chat-javascript-client-browser-2.2.2'\n         */\n        client.setUserAgent(`stream-chat-react-${version}-${userAgent}`);\n      }\n    }\n  }, [client]);\n\n  useEffect(() => {\n    setMutes(clientMutes || []);\n\n    const handleEvent = (event: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (event.type === 'notification.mutes_updated')\n        setMutes(event.me?.mutes || []);\n    };\n\n    if (client) client.on(handleEvent);\n    return () => {\n      if (client) {\n        client.off(handleEvent);\n      }\n    };\n  }, [client, clientMutes]);\n\n  useEffect(() => {\n    const streami18n =\n      i18nInstance instanceof Streami18n\n        ? i18nInstance\n        : new Streami18n({ language: 'en' });\n\n    streami18n.registerSetLanguageCallback((t) =>\n      setTranslators((prevTranslator) => ({ ...prevTranslator, t })),\n    );\n\n    streami18n.getTranslators().then((translator) => {\n      if (translator) {\n        setTranslators({\n          ...translator,\n          userLanguage: client?.user?.language || 'en',\n        });\n      }\n    });\n  }, [client, i18nInstance]);\n\n  const setActiveChannel = useCallback(\n    async (\n      activeChannel?: Channel<At, Ch, Co, Ev, Me, Re, Us>,\n      watchers: { limit?: number; offset?: number } = {},\n      event?: React.BaseSyntheticEvent,\n    ) => {\n      if (event && event.preventDefault) event.preventDefault();\n\n      if (activeChannel && Object.keys(watchers).length) {\n        await activeChannel.query({ watch: true, watchers });\n      }\n\n      setChannel(activeChannel);\n      closeMobileNav();\n    },\n    [],\n  );\n\n  return {\n    channel,\n    closeMobileNav,\n    mutes,\n    navOpen,\n    openMobileNav,\n    setActiveChannel,\n    translators,\n  };\n};\n","import React, { PropsWithChildren } from 'react';\n\nimport { useChat } from './hooks/useChat';\n\nimport { ChatProvider } from '../../context/ChatContext';\nimport { TranslationProvider } from '../../context/TranslationContext';\n\nimport type { StreamChat } from 'stream-chat';\n\nimport type { Streami18n } from '../../i18n/Streami18n';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type Theme<T extends string = string> =\n  | 'commerce dark'\n  | 'commerce light'\n  | 'livestream dark'\n  | 'livestream light'\n  | 'messaging dark'\n  | 'messaging light'\n  | 'team dark'\n  | 'team light'\n  | T;\n\nexport type ChatProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** The StreamChat client object */\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Instance of Stream i18n */\n  i18nInstance?: Streami18n;\n  /** Initial status of mobile navigation */\n  initialNavOpen?: boolean;\n  /**\n   *\n   * Theme could be used for custom styling of the components\n   *\n   * You can override the classes used in our components under parent theme class\n   *\n   * e.g. If you want to build a theme where background of message is black\n   *\n   * ```\n   *  <Chat client={client} theme={demo}>\n   *    <Channel>\n   *      <MessageList />\n   *    </Channel>\n   *  </Chat>\n   * ```\n   *\n   * ```scss\n   *  .demo.str-chat {\n   *    .str-chat__message-simple {\n   *      &-text-inner {\n   *        background-color: black;\n   *      }\n   *    }\n   *  }\n   * ```\n   *\n   * Built in available themes:\n   *\n   *  - `messaging light`\n   *  - `messaging dark`\n   *  - `team light`\n   *  - `team dark`\n   *  - `commerce light`\n   *  - `commerce dark`\n   *  - `livestream light`\n   *  - `livestream dark`\n   */\n  theme?: Theme;\n};\n\n/**\n *\n * Chat - Wrapper component for Chat. The needs to be placed around any other Chat components.\n * This component provides the ChatContext to all other components.\n *\n * ChatContext provides the following values:\n *\n * - channel - the current active channel\n * - client - the client connection\n * - closeMobileNav - function to close mobile navigation\n * - mutes - array of muted users\n * - navOpen - boolean if navigation is open\n * - openMobileNav - function to open mobile navigation\n * - setActiveChannel - a function to set currently active channel\n * - theme - current theme\n *\n * It also exposes the [withChatContext](https://getstream.github.io/stream-chat-react/#section-withchatcontext) HOC which you can use to consume the [ChatContext](https://getstream.github.io/stream-chat-react/#section-chatcontext).\n * @example ./Chat.md\n */\nexport const Chat = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: PropsWithChildren<ChatProps<At, Ch, Co, Ev, Me, Re, Us>>,\n) => {\n  const {\n    children,\n    client,\n    i18nInstance,\n    initialNavOpen = true,\n    theme = 'messaging light',\n  } = props;\n\n  const {\n    channel,\n    closeMobileNav,\n    mutes,\n    navOpen,\n    openMobileNav,\n    setActiveChannel,\n    translators,\n  } = useChat({ client, i18nInstance, initialNavOpen });\n\n  if (!translators.t) return null;\n\n  return (\n    <ChatProvider<At, Ch, Co, Ev, Me, Re, Us>\n      value={{\n        channel,\n        client,\n        closeMobileNav,\n        mutes,\n        navOpen,\n        openMobileNav,\n        setActiveChannel,\n        theme,\n      }}\n    >\n      <TranslationProvider value={translators}>{children}</TranslationProvider>\n    </ChatProvider>\n  );\n};\n","import React from 'react';\n\nimport {\n  isDayOrMoment,\n  useTranslationContext,\n} from '../../context/TranslationContext';\n\nexport type DateSeparatorProps = {\n  /** The date to format */\n  date: Date;\n  /** Override the default formatting of the date. This is a function that has access to the original date object. */\n  formatDate?: (date: Date) => string;\n  /** Set the position of the date in the separator, options are 'left', 'center', 'right'\n   * @default right\n   */\n  position?: 'left' | 'center' | 'right';\n  /** If following messages are not new */\n  unread?: boolean;\n};\n\nconst UnMemoizedDateSeparator = (props: DateSeparatorProps) => {\n  const { date, formatDate, position = 'right', unread } = props;\n\n  const { t, tDateTimeParser } = useTranslationContext();\n\n  if (typeof date === 'string') return null;\n\n  const parsedDate = tDateTimeParser(date.toISOString());\n\n  const formattedDate = formatDate\n    ? formatDate(date)\n    : isDayOrMoment(parsedDate)\n    ? parsedDate.calendar()\n    : parsedDate;\n\n  return (\n    <div className='str-chat__date-separator'>\n      {(position === 'right' || position === 'center') && (\n        <hr className='str-chat__date-separator-line' />\n      )}\n      <div className='str-chat__date-separator-date'>\n        {unread ? t('New') : formattedDate}\n      </div>\n      {(position === 'left' || position === 'center') && (\n        <hr className='str-chat__date-separator-line' />\n      )}\n    </div>\n  );\n};\n\n/**\n * DateSeparator - A simple date separator between messages.\n * @example ./DateSeparator.md\n */\nexport const DateSeparator = React.memo(\n  UnMemoizedDateSeparator,\n) as typeof UnMemoizedDateSeparator;\n","import React from 'react';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\n\nimport {\n  isDayOrMoment,\n  useTranslationContext,\n} from '../../context/TranslationContext';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type EventComponentProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** Message object */\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   * Custom UI component to display user avatar.\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   * */\n  Avatar?: React.ComponentType<AvatarProps>;\n};\n\n/**\n * EventComponent - Custom render component to display system and channel event messages\n */\nconst UnMemoizedEventComponent = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: EventComponentProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { Avatar = DefaultAvatar, message } = props;\n\n  const { tDateTimeParser } = useTranslationContext();\n  const { created_at = '', event, text, type } = message;\n\n  const dateFormatter = (date: string | Date, format: string) => {\n    const parsedDate = tDateTimeParser(date);\n    const formattedDate = isDayOrMoment(parsedDate)\n      ? parsedDate.format(format)\n      : parsedDate;\n    return formattedDate;\n  };\n\n  if (type === 'system')\n    return (\n      <div className='str-chat__message--system'>\n        <div className='str-chat__message--system__text'>\n          <div className='str-chat__message--system__line' />\n          <p>{text}</p>\n          <div className='str-chat__message--system__line' />\n        </div>\n        <div className='str-chat__message--system__date'>\n          <strong>{dateFormatter(created_at, 'dddd')} </strong>\n          at {dateFormatter(created_at, 'hh:mm A')}\n        </div>\n      </div>\n    );\n\n  if (\n    type === 'channel.event' &&\n    event &&\n    (event.type === 'member.removed' || event.type === 'member.added')\n  ) {\n    const name = event?.user?.name || event?.user?.id;\n    const sentence = `${name} ${\n      event.type === 'member.added'\n        ? 'has joined the chat'\n        : 'was removed from the chat'\n    }`;\n\n    return (\n      <div className='str-chat__event-component__channel-event'>\n        <Avatar image={event?.user?.image} name={name} />\n        <div className='str-chat__event-component__channel-event__content'>\n          <em className='str-chat__event-component__channel-event__sentence'>\n            {sentence}\n          </em>\n          <div className='str-chat__event-component__channel-event__date'>\n            {dateFormatter(created_at, 'LT')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport const EventComponent = React.memo(\n  UnMemoizedEventComponent,\n) as typeof UnMemoizedEventComponent;\n","import React, { useCallback, useEffect, useRef } from 'react';\n\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n */\nconst mousewheelListener = (event: Event) => {\n  if (event instanceof WheelEvent && event.deltaY === 1) {\n    event.preventDefault();\n  }\n};\n\nconst calculateTopPosition = (\n  element: HTMLElement | Element | null,\n): number => {\n  if (element instanceof HTMLElement) {\n    return element.offsetTop + calculateTopPosition(element.offsetParent);\n  }\n  return 0;\n};\n\n/**\n * Computes by recursively summing offsetTop until an element without offsetParent is reached\n */\nconst calculateOffset = (element: HTMLElement, scrollTop: number) => {\n  if (!element) {\n    return 0;\n  }\n\n  return (\n    calculateTopPosition(element) +\n    (element.offsetHeight - scrollTop - window.innerHeight)\n  );\n};\n\nexport type InfiniteScrollProps = {\n  className?: string;\n  element?: React.ElementType;\n  hasMore?: boolean;\n  initialLoad?: boolean;\n  isLoading?: boolean;\n  isReverse?: boolean;\n  listenToScroll?: (\n    offset: number,\n    reverseOffset: number,\n    threshold: number,\n  ) => void;\n  loader?: React.ReactNode;\n  loading?: React.ReactNode;\n  loadMore?: () => void;\n  pageStart?: number;\n  threshold?: number;\n  useCapture?: boolean;\n  useWindow?: boolean;\n};\n\nexport const InfiniteScroll: React.FC<InfiniteScrollProps> = (props) => {\n  const {\n    children,\n    element = 'div',\n    hasMore = false,\n    initialLoad = true,\n    isLoading = false,\n    isReverse = false,\n    listenToScroll,\n    loader,\n    loadMore,\n    threshold = 250,\n    useCapture = false,\n    useWindow = true,\n    ...elementProps\n  } = props;\n\n  const scrollComponent = useRef<HTMLElement>();\n\n  const scrollListener = useCallback(() => {\n    const element = scrollComponent.current;\n    if (!element) return;\n    const { parentElement } = element;\n\n    let offset = 0;\n    let reverseOffset = 0;\n    if (useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        window.pageYOffset !== undefined ? window.pageYOffset : doc.scrollTop;\n      offset = calculateOffset(element, scrollTop);\n      reverseOffset = scrollTop;\n    } else if (parentElement) {\n      offset =\n        element.scrollHeight -\n        parentElement.scrollTop -\n        parentElement.clientHeight;\n      reverseOffset = parentElement.scrollTop;\n    }\n    if (listenToScroll) {\n      listenToScroll(offset, reverseOffset, threshold);\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      (isReverse ? reverseOffset : offset) < Number(threshold) &&\n      element.offsetParent !== null &&\n      typeof loadMore === 'function' &&\n      hasMore\n    ) {\n      loadMore();\n    }\n  }, [hasMore, useWindow, isReverse, threshold, listenToScroll, loadMore]);\n\n  useEffect(() => {\n    const scrollElement = useWindow\n      ? window\n      : scrollComponent.current?.parentNode;\n    if (isLoading || !scrollElement) {\n      return () => undefined;\n    }\n\n    scrollElement.addEventListener('scroll', scrollListener, useCapture);\n    scrollElement.addEventListener('resize', scrollListener, useCapture);\n\n    if (initialLoad) {\n      scrollListener();\n    }\n\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollListener, useCapture);\n      scrollElement.removeEventListener('resize', scrollListener, useCapture);\n    };\n  }, [initialLoad, isLoading, scrollListener, useCapture, useWindow]);\n\n  useEffect(() => {\n    const scrollElement = useWindow\n      ? window\n      : scrollComponent.current?.parentNode;\n    if (scrollElement) {\n      scrollElement.addEventListener(\n        'mousewheel',\n        mousewheelListener,\n        useCapture,\n      );\n    }\n    return () => {\n      if (scrollElement) {\n        scrollElement.removeEventListener(\n          'mousewheel',\n          mousewheelListener,\n          useCapture,\n        );\n      }\n    };\n  }, [useCapture, useWindow]);\n\n  const attributes = {\n    ...elementProps,\n    ref: (element: HTMLElement) => {\n      scrollComponent.current = element;\n    },\n  };\n\n  const childrenArray = [children];\n  if (isLoading && loader) {\n    if (isReverse) {\n      childrenArray.unshift(loader);\n    } else {\n      childrenArray.push(loader);\n    }\n  }\n  return React.createElement(element, attributes, childrenArray);\n};\n","import React from 'react';\nimport { LoadingIndicator as DefaultLoadingIndicator } from 'react-file-utils';\n\nimport { InfiniteScroll } from './InfiniteScroll';\n\nimport type { LoadingIndicatorProps } from '../Loading/LoadingIndicator';\n\nexport type InfiniteScrollPaginatorProps = {\n  /** callback to load the next page */\n  loadNextPage: () => void;\n  /** indicates if there is a next page to load */\n  hasNextPage?: boolean;\n  /** The loading indicator to use */\n  LoadingIndicator?: React.ComponentType<LoadingIndicatorProps>;\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing?: boolean;\n  /** display the items in opposite order */\n  reverse?: boolean;\n  /** Offset from when to start the loadNextPage call */\n  threshold?: number;\n};\n\nexport const InfiniteScrollPaginator: React.FC<InfiniteScrollPaginatorProps> = (\n  props,\n) => {\n  const {\n    children,\n    hasNextPage,\n    LoadingIndicator = DefaultLoadingIndicator,\n    loadNextPage,\n    refreshing,\n    reverse,\n    threshold,\n  } = props;\n\n  return (\n    <InfiniteScroll\n      hasMore={hasNextPage}\n      isLoading={refreshing}\n      isReverse={reverse}\n      loader={\n        <div\n          className='str-chat__infinite-scroll-paginator'\n          key='loadingindicator'\n        >\n          <LoadingIndicator />\n        </div>\n      }\n      loadMore={loadNextPage}\n      threshold={threshold}\n      useWindow={false}\n    >\n      {children}\n    </InfiniteScroll>\n  );\n};\n","import React from 'react';\n\nimport { InfiniteScroll, InfiniteScrollProps } from './InfiniteScroll';\n\nexport const ReverseInfiniteScroll: React.FC<InfiniteScrollProps> = (props) => (\n  <InfiniteScroll {...props} isReverse />\n);\n","import React from 'react';\n\nexport type CustomNotificationProps = {\n  type: string;\n  active?: boolean;\n};\n\nconst UnMemoizedCustomNotification: React.FC<CustomNotificationProps> = (\n  props,\n) => {\n  const { active, children, type } = props;\n\n  if (!active) return null;\n\n  return (\n    <div\n      className={`str-chat__custom-notification notification-${type}`}\n      data-testid='custom-notification'\n    >\n      {children}\n    </div>\n  );\n};\n\nexport const CustomNotification = React.memo(\n  UnMemoizedCustomNotification,\n) as typeof UnMemoizedCustomNotification;\n","import React, { useEffect, useState } from 'react';\n\nimport type { Event } from 'stream-chat';\n\nimport { CustomNotification } from './CustomNotification';\nimport { useChatContext, useTranslationContext } from '../../context';\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nconst UnMemoizedConnectionStatus: React.FC = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>() => {\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const [online, setOnline] = useState(true);\n\n  useEffect(() => {\n    const connectionChanged = ({\n      online: onlineStatus = false,\n    }: Event<At, Ch, Co, Ev, Me, Re, Us>) => {\n      if (online !== onlineStatus) {\n        setOnline(onlineStatus);\n      }\n    };\n\n    client.on('connection.changed', connectionChanged);\n    return () => client.off('connection.changed', connectionChanged);\n  }, [client, online]);\n\n  return (\n    <CustomNotification active={!online} type='error'>\n      {t('Connection failure, reconnecting now...')}\n    </CustomNotification>\n  );\n};\n\nexport const ConnectionStatus = React.memo(\n  UnMemoizedConnectionStatus,\n) as typeof UnMemoizedConnectionStatus;\n","import React from 'react';\n\nconst UnMemoizedCenter: React.FC<{ key: string }> = ({ children }) => (\n  <div className='str-chat__list__center'>{children}</div>\n);\n\nexport const Center = React.memo(UnMemoizedCenter) as typeof UnMemoizedCenter;\n","/* eslint-disable no-continue */\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nexport const insertDates = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n  lastRead?: Date | string | null,\n  userID?: string,\n  hideDeletedMessages?: boolean,\n  disableDateSeparator?: boolean,\n) => {\n  let unread = false;\n  let lastDateSeparator;\n  const newMessages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[] = [];\n\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n\n    if (hideDeletedMessages && message.type === 'deleted') {\n      continue;\n    }\n\n    if (message.type === 'message.read') {\n      newMessages.push(message);\n      continue;\n    }\n\n    //@ts-expect-error\n    const messageDate = message.created_at.toDateString();\n    let prevMessageDate = messageDate;\n\n    if (i > 0 && !disableDateSeparator) {\n      //@ts-expect-error\n      prevMessageDate = messages[i - 1].created_at.toDateString();\n    }\n\n    if (!unread) {\n      //@ts-expect-error\n      unread = lastRead && new Date(lastRead) < message.created_at;\n\n      // do not show date separator for current user's messages\n      //@ts-expect-error\n      if (!disableDateSeparator && unread && message.user.id !== userID) {\n        //@ts-expect-error\n        newMessages.push({\n          date: message.created_at,\n          id: message.id,\n          type: 'message.date',\n          unread,\n        });\n      }\n    }\n\n    if (\n      !disableDateSeparator &&\n      (i === 0 ||\n        messageDate !== prevMessageDate ||\n        (hideDeletedMessages &&\n          messages[i - 1]?.type === 'deleted' &&\n          lastDateSeparator !== messageDate)) &&\n      newMessages?.[newMessages.length - 1]?.type !== 'message.date' // do not show two date separators in a row\n    ) {\n      lastDateSeparator = messageDate;\n\n      newMessages.push(\n        //@ts-expect-error\n        {\n          date: message.created_at,\n          id: message.id,\n          type: 'message.date',\n        },\n        message,\n      );\n    } else {\n      newMessages.push(message);\n    }\n  }\n\n  return newMessages;\n};\n","/* eslint-disable no-continue */\nimport React, { RefObject, useMemo } from 'react';\nimport isEqual from 'lodash.isequal';\n\nimport { insertDates } from './utils';\n\nimport {\n  InfiniteScroll,\n  InfiniteScrollProps,\n} from '../InfiniteScrollPaginator';\nimport { Message } from '../Message';\n\nimport type { Channel, StreamChat, UserResponse } from 'stream-chat';\n\nimport type { DateSeparatorProps } from '../DateSeparator/DateSeparator';\nimport type { EmptyStateIndicatorProps } from '../EmptyStateIndicator/EmptyStateIndicator';\nimport type { EventComponentProps } from '../EventComponent/EventComponent';\nimport type { MessageProps } from '../Message/types';\nimport type { TypingIndicatorProps } from '../TypingIndicator/TypingIndicator';\n\nimport type { StreamMessage } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type MessageListInnerProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  bottomRef: RefObject<HTMLDivElement>;\n  /** The currently active channel */\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Available from [ChatContext](https://getstream.github.io/stream-chat-react/#chat) */\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   * Date separator UI component to render\n   * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.tsx)\n   */\n  DateSeparator: React.ComponentType<DateSeparatorProps>;\n  /**\n   * The messages to render in the list\n   * Defaults to the messages stored in [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext)\n   * */\n  messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n  /** Set to `true` to turn off grouping of messages by user */\n  noGroupByUser: boolean;\n  onMessageLoadCaptured: (\n    event: React.SyntheticEvent<HTMLLIElement, Event>,\n  ) => void;\n  /** Set to `true` to indicate that the list is a thread  */\n  threadList: boolean;\n  /**\n   * Typing indicator UI component to render\n   * Defaults to and accepts same props as: [TypingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/TypingIndicator/TypingIndicator.tsx)\n   */\n  TypingIndicator: React.ComponentType<TypingIndicatorProps>;\n  /** Disables the injection of date separator components, defaults to `false` */\n  disableDateSeparator?: boolean;\n  /** The UI Indicator to use when `MessageList` or `ChannelList` is empty  */\n  EmptyStateIndicator?: React.ComponentType<EmptyStateIndicatorProps>;\n  /** Component to render at the top of the MessageList */\n  HeaderComponent?: React.ComponentType;\n  headerPosition?: number;\n  /** Hides the MessageDeleted components from the list, defaults to `false` */\n  hideDeletedMessages?: boolean;\n  /** Overrides the default props passed to [InfiniteScroll](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator/InfiniteScroll.tsx) */\n  internalInfiniteScrollProps?: InfiniteScrollProps;\n  /** Overrides the default props passed to [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message/Message.tsx) */\n  internalMessageProps?: Omit<\n    MessageProps<At, Ch, Co, Ev, Me, Re, Us>,\n    'message'\n  >;\n  /**\n   * Custom UI component to display system messages\n   * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.tsx)\n   */\n  MessageSystem?: React.ComponentType<\n    EventComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  read?: Record<string, { last_read: Date; user: UserResponse<Us> }>;\n};\n\n// fast since it usually iterates just the last few messages\nconst getLastReceived = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n) => {\n  for (let i = messages.length - 1; i > 0; i -= 1) {\n    if (messages[i].status === 'received') {\n      return messages[i].id;\n    }\n  }\n\n  return null;\n};\n\nconst getReadStates = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n  read: Record<string, { last_read: Date; user: UserResponse<Us> }> = {},\n) => {\n  // create object with empty array for each message id\n  const readData: Record<string, Array<UserResponse<Us>>> = {};\n\n  Object.values(read).forEach((readState) => {\n    if (!readState.last_read) return;\n\n    let userLastReadMsgId;\n    messages.forEach((msg) => {\n      //@ts-expect-error\n      if (msg.updated_at < readState.last_read) userLastReadMsgId = msg.id;\n    });\n\n    if (userLastReadMsgId) {\n      if (!readData[userLastReadMsgId]) readData[userLastReadMsgId] = [];\n      readData[userLastReadMsgId].push(readState.user);\n    }\n  });\n\n  return readData;\n};\n\nconst insertIntro = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n  headerPosition?: number,\n) => {\n  const newMessages = messages;\n  const intro = ({ type: 'channel.intro' } as unknown) as StreamMessage<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >;\n\n  // if no headerPosition is set, HeaderComponent will go at the top\n  if (!headerPosition) {\n    newMessages.unshift(intro);\n    return newMessages;\n  }\n\n  // if no messages, intro gets inserted\n  if (!newMessages.length) {\n    newMessages.unshift(intro);\n    return newMessages;\n  }\n\n  // else loop over the messages\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n\n    const messageTime = message.created_at\n      ? //@ts-expect-error\n        message.created_at.getTime()\n      : null;\n    const nextMessageTime =\n      messages[i + 1] && messages[i + 1].created_at\n        ? //@ts-expect-error\n          messages[i + 1].created_at.getTime()\n        : null;\n\n    // header position is smaller than message time so comes after;\n    if (messageTime < headerPosition) {\n      // if header position is also smaller than message time continue;\n      if (nextMessageTime < headerPosition) {\n        if (messages[i + 1] && messages[i + 1].type === 'message.date')\n          continue;\n        if (!nextMessageTime) {\n          newMessages.push(intro);\n          return newMessages;\n        }\n        continue;\n      } else {\n        newMessages.splice(i + 1, 0, intro);\n        return newMessages;\n      }\n    }\n  }\n\n  return newMessages;\n};\n\nexport type GroupStyle = '' | 'middle' | 'top' | 'bottom' | 'single';\n\nconst getGroupStyles = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  message: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  previousMessage: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  nextMessage: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>,\n  noGroupByUser: boolean,\n): GroupStyle => {\n  if (message.type === 'message.date') return '';\n  if (message.type === 'channel.event') return '';\n  if (message.type === 'channel.intro') return '';\n\n  if (noGroupByUser || message.attachments?.length !== 0) return 'single';\n\n  const isTopMessage =\n    !previousMessage ||\n    previousMessage.type === 'channel.intro' ||\n    previousMessage.type === 'message.date' ||\n    previousMessage.type === 'system' ||\n    previousMessage.type === 'channel.event' ||\n    previousMessage.attachments?.length !== 0 ||\n    message.user?.id !== previousMessage.user?.id ||\n    previousMessage.type === 'error' ||\n    previousMessage.deleted_at;\n\n  const isBottomMessage =\n    !nextMessage ||\n    nextMessage.type === 'message.date' ||\n    nextMessage.type === 'system' ||\n    nextMessage.type === 'channel.event' ||\n    nextMessage.type === 'channel.intro' ||\n    nextMessage.attachments?.length !== 0 ||\n    message.user?.id !== nextMessage.user?.id ||\n    nextMessage.type === 'error' ||\n    nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error')\n      return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n\n  return '';\n};\n\nconst UnMemoizedMessageListInner = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageListInnerProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    bottomRef,\n    channel,\n    client,\n    DateSeparator,\n    disableDateSeparator = false,\n    EmptyStateIndicator,\n    HeaderComponent,\n    headerPosition,\n    hideDeletedMessages = false,\n    internalInfiniteScrollProps,\n    internalMessageProps,\n    messages,\n    MessageSystem,\n    noGroupByUser,\n    onMessageLoadCaptured,\n    read,\n    threadList,\n    TypingIndicator,\n  } = props;\n\n  const lastRead = useMemo(() => channel.lastRead?.(), [channel]);\n\n  const enrichMessages = () => {\n    const messageWithDates = threadList\n      ? messages\n      : insertDates(\n          messages,\n          lastRead,\n          client.userID,\n          hideDeletedMessages,\n          disableDateSeparator,\n        );\n\n    if (HeaderComponent) {\n      return insertIntro(messageWithDates, headerPosition);\n    }\n\n    return messageWithDates;\n  };\n\n  const enrichedMessages = enrichMessages();\n\n  const messageGroupStyles = useMemo(\n    () =>\n      enrichedMessages.reduce((acc, message, i) => {\n        const style = getGroupStyles(\n          message,\n          enrichedMessages[i - 1],\n          enrichedMessages[i + 1],\n          noGroupByUser,\n        );\n        if (style) acc[message.id] = style;\n        return acc;\n      }, {} as Record<string, GroupStyle>),\n    [enrichedMessages, noGroupByUser],\n  );\n\n  // get the readData, but only for messages submitted by the user themselves\n  const userID = client.userID;\n  const readData = useMemo(\n    () =>\n      getReadStates(\n        enrichedMessages.filter(({ user }) => user?.id === userID),\n        read,\n      ),\n    [userID, enrichedMessages, read],\n  );\n\n  const lastReceivedId = useMemo(() => getLastReceived(enrichedMessages), [\n    enrichedMessages,\n  ]);\n\n  const elements = useMemo(\n    () =>\n      enrichedMessages.map((message) => {\n        if (message.type === 'message.date') {\n          return (\n            <li key={`${(message.date as Date).toISOString()}-i`}>\n              <DateSeparator\n                date={message.date as Date}\n                unread={!!message.unread}\n              />\n            </li>\n          );\n        }\n\n        if (message.type === 'channel.intro' && HeaderComponent) {\n          return (\n            <li key='intro'>\n              <HeaderComponent />\n            </li>\n          );\n        }\n\n        if (message.type === 'channel.event' || message.type === 'system') {\n          if (!MessageSystem) return null;\n          return (\n            <li\n              key={\n                (message.event as { created_at: string })?.created_at ||\n                (message.created_at as string) ||\n                ''\n              }\n            >\n              <MessageSystem message={message} />\n            </li>\n          );\n        }\n\n        if (message.type !== 'message.read') {\n          const groupStyles: GroupStyle = messageGroupStyles[message.id] || '';\n\n          return (\n            <li\n              className={`str-chat__li str-chat__li--${groupStyles}`}\n              key={message.id || (message.created_at as string)}\n              onLoadCapture={onMessageLoadCaptured}\n            >\n              <Message\n                client={client}\n                groupStyles={[groupStyles]} /* TODO: convert to simple string */\n                lastReceivedId={lastReceivedId}\n                message={message}\n                readBy={readData[message.id] || []}\n                threadList={threadList}\n                {...internalMessageProps}\n              />\n            </li>\n          );\n        }\n\n        return null;\n      }),\n    [\n      client,\n      enrichedMessages,\n      internalMessageProps,\n      lastReceivedId,\n      messageGroupStyles,\n      MessageSystem,\n      onMessageLoadCaptured,\n      readData,\n      threadList,\n    ],\n  );\n\n  if (!elements.length && EmptyStateIndicator) {\n    return <EmptyStateIndicator listType='message' />;\n  }\n\n  return (\n    <InfiniteScroll\n      className='str-chat__reverse-infinite-scroll'\n      data-testid='reverse-infinite-scroll'\n      isReverse\n      useWindow={false}\n      {...internalInfiniteScrollProps}\n    >\n      <ul className='str-chat__ul'>{elements}</ul>\n      <TypingIndicator threadList={threadList} />\n      <div key='bottom' ref={bottomRef} />\n    </InfiniteScroll>\n  );\n};\n\nexport const MessageListInner = React.memo(\n  UnMemoizedMessageListInner,\n  isEqual,\n) as typeof UnMemoizedMessageListInner;\n","import React from 'react';\n\nexport type MessageNotificationProps = {\n  /** button click event handler */\n  onClick: React.MouseEventHandler;\n  /** Whether or not to show notification */\n  showNotification: boolean;\n};\n\nconst UnMemoizedMessageNotification: React.FC<MessageNotificationProps> = (\n  props,\n) => {\n  const { children, onClick, showNotification = true } = props;\n\n  if (!showNotification) return null;\n\n  return (\n    <button\n      className='str-chat__message-notification'\n      data-testid='message-notification'\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport const MessageNotification = React.memo(\n  UnMemoizedMessageNotification,\n) as typeof UnMemoizedMessageNotification;\n","import React from 'react';\n\nimport { AvatarProps, Avatar as DefaultAvatar } from '../Avatar';\n\nimport { useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type TypingIndicatorProps = {\n  /**\n   * Custom UI component to display user avatar.\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.tsx)\n   * */\n  Avatar?: React.ComponentType<AvatarProps>;\n  /** Size in pixels\n   * @default 32px\n   */\n  avatarSize?: number;\n  /** Whether or not the typing indicator is in a thread */\n  threadList?: boolean;\n};\n\n/**\n * TypingIndicator lists users currently typing, it needs to be a child of Channel component\n */\nconst UnMemoizedTypingIndicator = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: TypingIndicatorProps,\n) => {\n  const { Avatar = DefaultAvatar, avatarSize = 32, threadList } = props;\n\n  const { channel, thread, typing } = useChannelContext<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us\n  >();\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  if (!typing || !client || channel?.getConfig()?.typing_events === false) {\n    return null;\n  }\n\n  const typingInChannel = Object.values(typing).filter(\n    ({ parent_id, user }) => user?.id !== client.user?.id && parent_id == null,\n  );\n\n  const typingInThread = Object.values(typing).some(\n    (event) => event?.parent_id === thread?.id,\n  );\n\n  return (\n    <div\n      className={`str-chat__typing-indicator ${\n        (threadList && typingInThread) ||\n        (!threadList && typingInChannel.length)\n          ? 'str-chat__typing-indicator--typing'\n          : ''\n      }`}\n    >\n      <div className='str-chat__typing-indicator__avatars'>\n        {typingInChannel.map(({ user }, i) => (\n          <Avatar\n            image={user?.image}\n            key={`${user?.id}-${i}`}\n            name={user?.name || user?.id}\n            size={avatarSize}\n          />\n        ))}\n      </div>\n      <div className='str-chat__typing-indicator__dots'>\n        <span className='str-chat__typing-indicator__dot' />\n        <span className='str-chat__typing-indicator__dot' />\n        <span className='str-chat__typing-indicator__dot' />\n      </div>\n    </div>\n  );\n};\n\nexport const TypingIndicator = React.memo(\n  UnMemoizedTypingIndicator,\n) as typeof UnMemoizedTypingIndicator;\n","import React, { PureComponent, RefObject } from 'react';\n\nimport { Center } from './Center';\nimport { ConnectionStatus } from './ConnectionStatus';\nimport { CustomNotification } from './CustomNotification';\nimport { MessageListInner, MessageListInnerProps } from './MessageListInner';\nimport { MessageNotification } from './MessageNotification';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { DateSeparator as DefaultDateSeparator } from '../DateSeparator';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { EventComponent } from '../EventComponent';\nimport {\n  LoadingIndicator as DefaultLoadingIndicator,\n  LoadingIndicatorProps,\n} from '../Loading';\nimport { MessageSimple } from '../Message';\nimport { defaultPinPermissions, MESSAGE_ACTIONS } from '../Message/utils';\nimport { TypingIndicator as DefaultTypingIndicator } from '../TypingIndicator';\n\nimport {\n  ChannelContextValue,\n  TranslationContextValue,\n  useChannelContext,\n  useChatContext,\n  useTranslationContext,\n} from '../../context';\n\nimport type { StreamChat } from 'stream-chat';\n\nimport type { MessageProps } from '../Message/types';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\ntype Snapshot = { offsetBottom: number; offsetTop: number } | null;\n\nexport type MessageListWithContextProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Omit<ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>, 'client' | 'typing'> &\n  TranslationContextValue &\n  MessageListProps<At, Ch, Co, Ev, Me, Re, Us> & {\n    /** The client connection object for connecting to Stream */\n    client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  };\n\nclass MessageListWithContext<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> extends PureComponent<\n  MessageListWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n  {\n    newMessagesNotification: boolean;\n    messageListRect?: DOMRect;\n  }\n> {\n  static defaultProps = {\n    messages: [],\n    scrolledUpThreshold: 200,\n    threadList: false,\n  };\n\n  bottomRef: RefObject<HTMLDivElement>;\n  messageList: RefObject<HTMLDivElement>;\n  closeToTop: boolean | undefined;\n  scrollOffset: number | undefined;\n\n  constructor(props: MessageListWithContextProps<At, Ch, Co, Ev, Me, Re, Us>) {\n    super(props);\n\n    this.state = {\n      newMessagesNotification: false,\n    };\n\n    this.bottomRef = React.createRef();\n    this.messageList = React.createRef();\n  }\n\n  componentDidMount() {\n    // start at the bottom\n    this.scrollToBottom();\n    const messageListRect = this.messageList.current?.getBoundingClientRect();\n\n    this.setState({\n      messageListRect,\n    });\n  }\n\n  getSnapshotBeforeUpdate(\n    prevProps: MessageListWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n  ) {\n    if (this.props.threadList) {\n      return null;\n    }\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n    if (\n      (prevProps.messages?.length || 0) < (this.props.messages?.length || 0)\n    ) {\n      const list = this.messageList.current;\n      if (list) {\n        return {\n          offsetBottom: list.scrollHeight - list.scrollTop,\n          offsetTop: list.scrollTop,\n        };\n      } else {\n        return null;\n      }\n    }\n    return null;\n  }\n\n  componentDidUpdate(\n    prevProps: MessageListWithContextProps<At, Ch, Co, Ev, Me, Re, Us>,\n    _: unknown,\n    snapshot: Snapshot,\n  ) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    const userScrolledUp = this.userScrolledUp();\n    const currentLastMessage = this.props.messages?.[\n      this.props.messages?.length - 1\n    ];\n    const previousLastMessage =\n      prevProps.messages?.[prevProps.messages?.length - 1];\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    const isOwner = currentLastMessage?.user?.id === this.props.client.userID;\n\n    const list = this.messageList.current;\n\n    // always scroll down when it's your own message that you added...\n    const scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n    if (scrollToBottom) {\n      this.scrollToBottom();\n\n      // remove the scroll notification if we already scrolled down...\n      if (this.state.newMessagesNotification)\n        this.setState({ newMessagesNotification: false });\n\n      return;\n    }\n\n    if (snapshot !== null) {\n      // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n      // This is for the case where user has scroll up significantly and a new message arrives from someone.\n      if (hasNewMessage) {\n        if (this.messageList.current) {\n          this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n        }\n      } else {\n        // Maintain the bottomOffset of scroll.\n        // This is for the case of pagination, when more messages get loaded.\n        if (this.messageList.current) {\n          this.scrollToTarget(\n            (list?.scrollHeight || 0) - snapshot.offsetBottom,\n            this.messageList.current,\n          );\n        }\n      }\n    }\n\n    // Check the scroll position... if you're scrolled up show a little notification\n    if (hasNewMessage && !this.state.newMessagesNotification) {\n      this.setState({ newMessagesNotification: true });\n    }\n  }\n\n  scrollToBottom = () => {\n    this._scrollToRef(this.bottomRef, this.messageList);\n  };\n\n  _scrollToRef = (\n    el: RefObject<HTMLElement>,\n    parent: RefObject<HTMLElement>,\n  ) => {\n    const scrollDown = () => {\n      if (el && el.current && parent && parent.current) {\n        this.scrollToTarget(el.current, parent.current);\n      }\n    };\n\n    scrollDown();\n    // scroll down after images load again\n    setTimeout(scrollDown, 200);\n  };\n\n  /**\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n   * containerEl - DOM element for the container with scrollbars\n   * source: https://stackoverflow.com/a/48429314\n   */\n  scrollToTarget = (\n    target: HTMLElement | number | 'top' | 'bottom',\n    containerEl: HTMLElement,\n  ) => {\n    let scrollTop: number | undefined;\n\n    if (target instanceof HTMLElement) {\n      scrollTop = target.offsetTop;\n    } else if (typeof target === 'number') {\n      scrollTop = target;\n    } else if (target === 'top') {\n      scrollTop = 0;\n    } else if (target === 'bottom') {\n      scrollTop = containerEl.scrollHeight - containerEl.offsetHeight;\n    }\n\n    if (scrollTop !== undefined) {\n      containerEl.scrollTop = scrollTop;\n    }\n  };\n\n  goToNewMessages = () => {\n    this.scrollToBottom();\n    this.setState({ newMessagesNotification: false });\n  };\n\n  userScrolledUp = () =>\n    (this.scrollOffset || 0) >\n    ((this.props.scrolledUpThreshold as unknown) as number);\n\n  listenToScroll = (\n    offset: number,\n    reverseOffset: number,\n    threshold: number,\n  ) => {\n    this.scrollOffset = offset;\n    this.closeToTop = reverseOffset < threshold;\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\n      this.setState({ newMessagesNotification: false });\n    }\n  };\n\n  onMessageLoadCaptured = () => {\n    // A load event (emitted by e.g. an <img>) was captured on a message.\n    // In some cases, the loaded asset is larger than the placeholder, which means we have to scroll down.\n    if (!this.userScrolledUp() && !this.closeToTop) {\n      this.scrollToBottom();\n    }\n  };\n\n  loadMore = () => {\n    if (this.props.loadMore) {\n      if (this.props.messageLimit) {\n        this.props.loadMore(this.props.messageLimit);\n      } else {\n        this.props.loadMore(100);\n      }\n    }\n  };\n\n  render() {\n    const {\n      addNotification,\n      Attachment = DefaultAttachment,\n      Avatar = DefaultAvatar,\n      DateSeparator = DefaultDateSeparator,\n      EmptyStateIndicator = DefaultEmptyStateIndicator,\n      internalInfiniteScrollProps,\n      LoadingIndicator = DefaultLoadingIndicator,\n      Message = MessageSimple,\n      messageActions = Object.keys(MESSAGE_ACTIONS),\n      messages = [],\n      MessageSystem = EventComponent,\n      notifications,\n      noGroupByUser = false,\n      pinPermissions = defaultPinPermissions,\n      t,\n      threadList = false,\n      TypingIndicator = DefaultTypingIndicator,\n      unsafeHTML = false,\n    } = this.props;\n\n    return (\n      <>\n        <div\n          className={`str-chat__list ${\n            this.props.threadList ? 'str-chat__list--thread' : ''\n          }`}\n          ref={this.messageList}\n        >\n          <MessageListInner<At, Ch, Co, Ev, Me, Re, Us>\n            bottomRef={this.bottomRef}\n            channel={this.props.channel}\n            client={this.props.client}\n            DateSeparator={DateSeparator}\n            disableDateSeparator={this.props.disableDateSeparator}\n            EmptyStateIndicator={EmptyStateIndicator}\n            HeaderComponent={this.props.HeaderComponent}\n            headerPosition={this.props.headerPosition}\n            hideDeletedMessages={this.props.hideDeletedMessages}\n            internalInfiniteScrollProps={{\n              hasMore: this.props.hasMore,\n              isLoading: this.props.loadingMore,\n              listenToScroll: this.listenToScroll,\n              loader: (\n                <Center key='loadingindicator'>\n                  <LoadingIndicator size={20} />\n                </Center>\n              ),\n              loadMore: this.loadMore,\n              ...internalInfiniteScrollProps,\n            }}\n            internalMessageProps={{\n              additionalMessageInputProps: this.props\n                .additionalMessageInputProps,\n              addNotification,\n              Attachment,\n              Avatar,\n              channel: this.props.channel,\n              getFlagMessageErrorNotification: this.props\n                .getFlagMessageErrorNotification,\n              getFlagMessageSuccessNotification: this.props\n                .getFlagMessageSuccessNotification,\n              getMuteUserErrorNotification: this.props\n                .getMuteUserErrorNotification,\n              getMuteUserSuccessNotification: this.props\n                .getMuteUserSuccessNotification,\n              getPinMessageErrorNotification: this.props\n                .getPinMessageErrorNotification,\n              members: this.props.members,\n              Message,\n              messageActions,\n              messageListRect: this.state.messageListRect,\n              mutes: this.props.mutes,\n              onMentionsClick: this.props.onMentionsClick,\n              onMentionsHover: this.props.onMentionsHover,\n              onUserClick: this.props.onUserClick,\n              onUserHover: this.props.onUserHover,\n              openThread: this.props.openThread,\n              pinPermissions,\n              removeMessage: this.props.removeMessage,\n              retrySendMessage: this.props.retrySendMessage,\n              unsafeHTML,\n              updateMessage: this.props.updateMessage,\n              watchers: this.props.watchers,\n            }}\n            messages={messages}\n            MessageSystem={MessageSystem}\n            noGroupByUser={noGroupByUser}\n            onMessageLoadCaptured={this.onMessageLoadCaptured}\n            read={this.props.read}\n            threadList={threadList}\n            TypingIndicator={TypingIndicator}\n          />\n        </div>\n        <div className='str-chat__list-notifications'>\n          {notifications.map((notification) => (\n            <CustomNotification\n              active={true}\n              key={notification.id}\n              type={notification.type}\n            >\n              {notification.text}\n            </CustomNotification>\n          ))}\n          <ConnectionStatus />\n          <MessageNotification\n            onClick={this.goToNewMessages}\n            showNotification={this.state.newMessagesNotification}\n          >\n            {t('New Messages!')}\n          </MessageNotification>\n        </div>\n      </>\n    );\n  }\n}\n\ntype PropsDrilledToMessage =\n  | 'additionalMessageInputProps'\n  | 'Attachment'\n  | 'Avatar'\n  | 'Message'\n  | 'getFlagMessageErrorNotification'\n  | 'getFlagMessageErrorNotification'\n  | 'getFlagMessageSuccessNotification'\n  | 'getMuteUserErrorNotification'\n  | 'getMuteUserSuccessNotification'\n  | 'getPinMessageErrorNotification'\n  | 'messageActions'\n  | 'mutes'\n  | 'onUserClick'\n  | 'onUserHover'\n  | 'pinPermissions'\n  | 'unsafeHTML';\n\ntype PropsDrilledToMessageListInner =\n  | 'DateSeparator'\n  | 'disableDateSeparator'\n  | 'EmptyStateIndicator'\n  | 'HeaderComponent'\n  | 'headerPosition'\n  | 'hideDeletedMessages'\n  | 'internalInfiniteScrollProps'\n  | 'messages'\n  | 'MessageSystem'\n  | 'noGroupByUser'\n  | 'read'\n  | 'threadList'\n  | 'TypingIndicator';\n\nexport type MessageListProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = Partial<\n  Pick<MessageProps<At, Ch, Co, Ev, Me, Re, Us>, PropsDrilledToMessage>\n> &\n  Partial<\n    Pick<\n      MessageListInnerProps<At, Ch, Co, Ev, Me, Re, Us>,\n      PropsDrilledToMessageListInner\n    >\n  > & {\n    /** Whether or not the list has more items to load */\n    hasMore?: boolean;\n    /** Component to render at the top of the MessageList while loading new messages */\n    LoadingIndicator?: React.ComponentType<LoadingIndicatorProps>;\n    /** Whether or not the list is currently loading more items */\n    loadingMore?: boolean;\n    /** Function called when more messages are to be loaded */\n    loadMore?: ((limit: number) => Promise<number>) | (() => Promise<void>);\n    /** The limit to use when paginating messages. */\n    messageLimit?: number;\n    /** The pixel threshold to determine whether or not the user is scrolled up in the list.\n     * @default 200px\n     */\n    scrolledUpThreshold?: number;\n  };\n\n/**\n * The MessageList component renders a list of Messages.\n * It is a consumer of the [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n * @example ./MessageList.md\n */\nexport const MessageList = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: MessageListProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    client: channelClient, // eslint-disable-line\n    typing, // eslint-disable-line\n    ...channelContext\n  } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const translation = useTranslationContext();\n\n  return (\n    <MessageListWithContext\n      client={client}\n      {...channelContext}\n      {...translation}\n      {...props}\n    />\n  );\n};\n","import { useEffect, useRef, useState } from 'react';\n\nimport type { StreamMessage } from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport function useNewMessageNotification<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n  currentUserId?: string,\n) {\n  const [newMessagesNotification, setNewMessagesNotification] = useState(false);\n\n  const lastMessageId = useRef('');\n  const atBottom = useRef(false);\n\n  useEffect(() => {\n    /* handle scrolling behavior for new messages */\n    if (!messages?.length) return;\n\n    const lastMessage = messages[messages.length - 1];\n    const prevMessageId = lastMessageId.current;\n    lastMessageId.current = lastMessage.id || ''; // update last message id\n\n    /* do nothing if new messages are loaded from top(loadMore)  */\n    if (lastMessage.id === prevMessageId) return;\n\n    /* if list is already at the bottom return, followOutput will do the job */\n    if (atBottom.current) return;\n\n    /* if the new message belongs to current user scroll to bottom */\n    if (lastMessage.user?.id !== currentUserId) {\n      /* otherwise just show newMessage notification  */\n      setNewMessagesNotification(true);\n    }\n  }, [currentUserId, messages]);\n\n  return { atBottom, newMessagesNotification, setNewMessagesNotification };\n}\n","import { useMemo, useRef } from 'react';\n\nimport type { StreamMessage } from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport function usePrependedMessagesCount<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(messages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[]) {\n  const currentFirstMessageId = messages?.[0]?.id;\n  const firstMessageId = useRef(currentFirstMessageId);\n  const earliestMessageId = useRef(currentFirstMessageId);\n  const previousNumItemsPrepended = useRef(0);\n\n  const numItemsPrepended = useMemo(() => {\n    if (!messages || !messages.length) {\n      return 0;\n    }\n    // if no new messages were prepended, return early (same amount as before)\n    if (currentFirstMessageId === earliestMessageId.current) {\n      return previousNumItemsPrepended.current;\n    }\n\n    if (!firstMessageId.current) {\n      firstMessageId.current = currentFirstMessageId;\n    }\n    earliestMessageId.current = currentFirstMessageId;\n    // if new messages were prepended, find out how many\n    // start with this number because there cannot be fewer prepended items than before\n    for (\n      let i = previousNumItemsPrepended.current;\n      i < messages.length;\n      i += 1\n    ) {\n      if (messages[i].id === firstMessageId.current) {\n        previousNumItemsPrepended.current = i;\n        return i;\n      }\n    }\n    return 0;\n    // TODO: there's a bug here, the messages prop is the same array instance (something mutates it)\n    // that's why the second dependency is necessary\n  }, [messages, messages?.length]);\n\n  return numItemsPrepended;\n}\n","import { useEffect, useRef } from 'react';\n\nimport type { StreamMessage } from '../../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../../types/types';\n\nexport function useShouldForceScrollToBottom<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  messages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n  currentUserId?: string,\n) {\n  const lastFocusedOwnMessage = useRef('');\n  const initialFocusRegistered = useRef(false);\n\n  function recheckForNewOwnMessage() {\n    if (messages && messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n\n      if (\n        lastMessage.user?.id === currentUserId &&\n        lastFocusedOwnMessage.current !== lastMessage.id\n      ) {\n        lastFocusedOwnMessage.current = lastMessage.id;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  useEffect(() => {\n    if (messages && messages.length && !initialFocusRegistered.current) {\n      initialFocusRegistered.current = true;\n      recheckForNewOwnMessage();\n    }\n  }, [messages, messages?.length]);\n\n  return recheckForNewOwnMessage;\n}\n","import React, { useCallback, useMemo, useRef } from 'react';\nimport {\n  Components,\n  ScrollSeekConfiguration,\n  ScrollSeekPlaceholderProps,\n  Virtuoso,\n  VirtuosoHandle,\n} from 'react-virtuoso';\n\nimport { useNewMessageNotification } from './hooks/useNewMessageNotification';\nimport { usePrependedMessagesCount } from './hooks/usePrependMessagesCount';\nimport { useShouldForceScrollToBottom } from './hooks/useShouldForceScrollToBottom';\nimport { MessageNotification } from './MessageNotification';\nimport { insertDates } from './utils';\n\nimport {\n  DateSeparatorProps,\n  DateSeparator as DefaultDateSeparator,\n} from '../DateSeparator/DateSeparator';\nimport {\n  EmptyStateIndicator as DefaultEmptyStateIndicator,\n  EmptyStateIndicatorProps,\n} from '../EmptyStateIndicator/EmptyStateIndicator';\nimport {\n  EventComponent,\n  EventComponentProps,\n} from '../EventComponent/EventComponent';\nimport {\n  LoadingIndicator as DefaultLoadingIndicator,\n  LoadingIndicatorProps,\n} from '../Loading/LoadingIndicator';\nimport {\n  FixedHeightMessage as DefaultMessage,\n  MessageDeleted as DefaultMessageDeleted,\n  FixedHeightMessageProps,\n  MessageDeletedProps,\n} from '../Message';\n\nimport { StreamMessage, useChannelContext } from '../../context/ChannelContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { Channel, StreamChat } from 'stream-chat';\n\nimport type { TypingIndicatorProps } from '../TypingIndicator/TypingIndicator';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type VirtualizedMessageListProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** The currently active channel */\n  channel: Channel<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   *The client connection object for connecting to Stream.\n   * Available from [ChatContext](https://getstream.github.io/stream-chat-react/#section-chatcontext)\n   */\n  client: StreamChat<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Custom render function, if passed, certain UI props are ignored */\n  customMessageRenderer(\n    messageList: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n    index: number,\n  ): React.ReactElement;\n  /**\n   * Date separator UI component to render\n   * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.tsx)\n   */\n  DateSeparator: React.ComponentType<DateSeparatorProps>;\n  /** Available from [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext) */\n  hasMore: boolean;\n  /** Available from [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext) */\n  loadingMore: boolean;\n  /** Disables the injection of date separator components, defaults to `true` */\n  disableDateSeparator?: boolean;\n  /** The UI Indicator to use when MessageList or ChannelList is empty */\n  EmptyStateIndicator?: React.ComponentType<EmptyStateIndicatorProps> | null;\n  /** Component to render at the top of the MessageList while loading new messages */\n  LoadingIndicator?: React.ComponentType<LoadingIndicatorProps>;\n  /** Available from [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext) */\n  loadMore?: (messageLimit: number) => Promise<number>;\n  /** Custom UI component to display messages */\n  Message?: React.ComponentType<\n    FixedHeightMessageProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Custom UI component to display deleted messages */\n  MessageDeleted?: React.ComponentType<\n    MessageDeletedProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Set the limit to use when paginating messages */\n  messageLimit?: number;\n  /** Available from [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext) */\n  messages?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[];\n  /** Custom UI component to display system messages */\n  MessageSystem?: React.ComponentType<\n    EventComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Causes the underlying list to render extra content in addition to the necessary one to fill in the visible viewport */\n  overscan?: number;\n  /**\n   * Performance improvement by showing placeholders if user scrolls fast through list.\n   * it can be used like this:\n   * ```\n   *  {\n   *    enter: (velocity) => Math.abs(velocity) > 120,\n   *    exit: (velocity) => Math.abs(velocity) < 40,\n   *    change: () => null,\n   *    placeholder: ({index, height})=> <div style={{height: height + \"px\"}}>{index}</div>,\n   *  }\n   *  ```\n   */\n  scrollSeekPlaceHolder?: ScrollSeekConfiguration & {\n    placeholder: React.ComponentType<ScrollSeekPlaceholderProps>;\n  };\n  /**\n   * Group messages belong to the same user if true, otherwise show each message individually, defaults to `false`.\n   * What it does is basically pass down a boolean prop named \"groupedByUser\" to Message component.\n   */\n  shouldGroupByUser?: boolean;\n  /**\n   * The scrollTo Behavior when new messages appear. Use ``\"smooth\"``\n   * for regular chat channels, and `\"auto\"` (which results in instant scroll to bottom)\n   * if you expect high throughput.\n   */\n  stickToBottomScrollBehavior?: 'smooth' | 'auto';\n  /** The UI Indicator to use when someone is typing, defaults to `null` */\n  TypingIndicator?: React.ComponentType<TypingIndicatorProps> | null;\n};\n\nconst PREPEND_OFFSET = 10 ** 7;\n\nconst VirtualizedMessageListWithContext = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: VirtualizedMessageListProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    channel,\n    client,\n    customMessageRenderer,\n    disableDateSeparator = true,\n    DateSeparator = DefaultDateSeparator,\n    EmptyStateIndicator = DefaultEmptyStateIndicator,\n    hasMore,\n    LoadingIndicator = DefaultLoadingIndicator,\n    loadMore,\n    loadingMore,\n    Message = DefaultMessage,\n    MessageDeleted = DefaultMessageDeleted,\n    messageLimit = 100,\n    messages,\n    MessageSystem = EventComponent,\n    overscan = 0,\n    // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n    scrollSeekPlaceHolder,\n    shouldGroupByUser = false,\n    stickToBottomScrollBehavior = 'smooth',\n    TypingIndicator = null,\n  } = props;\n\n  const { userID } = client;\n  const lastRead = useMemo(() => channel.lastRead?.(), [channel]);\n\n  const processedMessages = useMemo(() => {\n    if (typeof messages === 'undefined') {\n      return undefined;\n    }\n    return disableDateSeparator\n      ? messages\n      : insertDates(messages, lastRead, userID);\n  }, [messages, lastRead, disableDateSeparator, userID, messages?.length]);\n\n  const { t } = useTranslationContext();\n\n  const virtuoso = useRef<VirtuosoHandle>(null);\n\n  const {\n    atBottom,\n    newMessagesNotification,\n    setNewMessagesNotification,\n  } = useNewMessageNotification(processedMessages, client.userID);\n\n  const numItemsPrepended = usePrependedMessagesCount(processedMessages);\n\n  const shouldForceScrollToBottom = useShouldForceScrollToBottom(\n    processedMessages,\n    client.userID,\n  );\n\n  const messageRenderer = useCallback(\n    (\n      messageList: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>[],\n      virtuosoIndex: number,\n    ) => {\n      const streamMessageIndex =\n        virtuosoIndex + numItemsPrepended - PREPEND_OFFSET;\n      // use custom renderer supplied by client if present and skip the rest\n      if (customMessageRenderer) {\n        return customMessageRenderer(messageList, streamMessageIndex);\n      }\n\n      const message = messageList[streamMessageIndex];\n\n      if (message.type === 'message.date') {\n        //@ts-expect-error\n        return <DateSeparator date={message.date} unread={message.unread} />;\n      }\n\n      if (!message) return <div style={{ height: '1px' }}></div>; // returning null or zero height breaks the virtuoso\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        return <MessageSystem message={message} />;\n      }\n\n      if (message.deleted_at) {\n        return <MessageDeleted message={message} />;\n      }\n\n      return (\n        <Message<At, Ch, Co, Ev, Me, Re, Us>\n          groupedByUser={\n            shouldGroupByUser &&\n            streamMessageIndex > 0 &&\n            message.user?.id === messageList[streamMessageIndex - 1].user?.id\n          }\n          message={message}\n        />\n      );\n    },\n    [\n      MessageDeleted,\n      customMessageRenderer,\n      shouldGroupByUser,\n      numItemsPrepended,\n    ],\n  );\n\n  const virtuosoComponents = useMemo(() => {\n    const EmptyPlaceholder: Components['EmptyPlaceholder'] = () => (\n      <>{EmptyStateIndicator && <EmptyStateIndicator listType='message' />}</>\n    );\n\n    const Header: Components['Header'] = () =>\n      loadingMore ? (\n        <div className='str-chat__virtual-list__loading'>\n          <LoadingIndicator size={20} />\n        </div>\n      ) : (\n        <></>\n      );\n\n    // using 'display: inline-block' traps CSS margins of the item elements\n    // preventing incorrect item measurements.\n    const Item: Components['Item'] = (props) => (\n      <div {...props} className='str-chat__virtual-list-message-wrapper' />\n    );\n\n    const Footer: Components['Footer'] = () =>\n      TypingIndicator ? <TypingIndicator avatarSize={24} /> : <></>;\n\n    return {\n      EmptyPlaceholder,\n      Footer,\n      Header,\n      Item,\n    } as Partial<Components>;\n  }, [EmptyStateIndicator, loadingMore, TypingIndicator]);\n\n  if (!processedMessages) {\n    return null;\n  }\n\n  return (\n    <div className='str-chat__virtual-list'>\n      <Virtuoso\n        atBottomStateChange={(isAtBottom) => {\n          atBottom.current = isAtBottom;\n          if (isAtBottom && newMessagesNotification) {\n            setNewMessagesNotification(false);\n          }\n        }}\n        components={virtuosoComponents}\n        firstItemIndex={PREPEND_OFFSET - numItemsPrepended}\n        followOutput={(isAtBottom) => {\n          if (shouldForceScrollToBottom()) {\n            return isAtBottom ? stickToBottomScrollBehavior : 'auto';\n          }\n          // a message from another user has been received - don't scroll to bottom unless already there\n          return isAtBottom ? stickToBottomScrollBehavior : false;\n        }}\n        initialTopMostItemIndex={\n          processedMessages && processedMessages.length > 0\n            ? processedMessages.length - 1\n            : 0\n        }\n        itemContent={(i) => messageRenderer(processedMessages, i)}\n        overscan={overscan}\n        ref={virtuoso}\n        startReached={() => {\n          if (hasMore && loadMore) {\n            loadMore(messageLimit);\n          }\n        }}\n        style={{ overflowX: 'hidden' }}\n        totalCount={processedMessages.length}\n        {...(scrollSeekPlaceHolder\n          ? { scrollSeek: scrollSeekPlaceHolder }\n          : {})}\n      />\n\n      <div className='str-chat__list-notifications'>\n        <MessageNotification\n          onClick={() => {\n            if (virtuoso.current) {\n              virtuoso.current.scrollToIndex(processedMessages.length - 1);\n            }\n            setNewMessagesNotification(false);\n          }}\n          showNotification={newMessagesNotification}\n        >\n          {t('New Messages!')}\n        </MessageNotification>\n      </div>\n    </div>\n  );\n};\n\n/**\n * The VirtualizedMessageList component renders a list of Messages in a virtualized list.\n * It is a consumer of [ChannelContext](https://getstream.github.io/stream-chat-react/#section-channelcontext).\n *\n * **Note**: It works well when there are thousands of Messages in a Channel, it has a shortcoming though - the Message UI should have a fixed height.\n * @example ./VirtualizedMessageList.md\n */\nexport function VirtualizedMessageList<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(props: Partial<VirtualizedMessageListProps<At, Ch, Co, Ev, Me, Re, Us>>) {\n  const context = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  return (\n    <VirtualizedMessageListWithContext\n      channel={context.channel}\n      client={context.client}\n      hasMore={!!context.hasMore}\n      loadingMore={!!context.loadingMore}\n      // @ts-expect-error\n      loadMore={context.loadMore}\n      // there's a mismatch in the created_at field - stream-chat MessageResponse says it's a string,\n      // 'formatMessage' converts it to Date, which seems to be the correct type\n      messages={context.messages}\n      {...props}\n    />\n  );\n}\n","import React, { useEffect, useRef } from 'react';\n\nimport { Message } from '../Message/Message';\nimport { MessageInput, MessageInputProps } from '../MessageInput/MessageInput';\nimport { MessageInputSmall } from '../MessageInput/MessageInputSmall';\nimport { MessageList, MessageListProps } from '../MessageList/MessageList';\n\nimport { StreamMessage, useChannelContext } from '../../context/ChannelContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\n\nimport type { TFunction } from 'i18next';\n\nimport type { MessageProps, MessageUIComponentProps } from '../Message/types';\n\nimport type {\n  CustomTrigger,\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type ThreadProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n> = {\n  /**\n   * Additional props for underlying MessageInput component.\n   * [Available props](https://getstream.github.io/stream-chat-react/#messageinput)\n   */\n  additionalMessageInputProps?: MessageInputProps<\n    At,\n    Ch,\n    Co,\n    Ev,\n    Me,\n    Re,\n    Us,\n    V\n  >;\n  /**\n   * Additional props for underlying MessageList component.\n   * [Available props](https://getstream.github.io/stream-chat-react/#messagelist)\n   * */\n  additionalMessageListProps?: MessageListProps<At, Ch, Co, Ev, Me, Re, Us>;\n  /**\n   * Additional props for underlying Message component of parent message at the top.\n   * [Available props](https://getstream.github.io/stream-chat-react/#message)\n   * */\n  additionalParentMessageProps?: MessageProps<At, Ch, Co, Ev, Me, Re, Us>;\n  /** Make input focus on mounting thread */\n  autoFocus?: boolean;\n  /** Display the thread on 100% width of it's container. Useful for mobile style view */\n  fullWidth?: boolean;\n  /** UI component to override the default Message stored in ChannelContext */\n  Message?: React.ComponentType<\n    MessageUIComponentProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n  /** Customized MessageInput component to used within Thread instead of default MessageInput\n     Useable as follows:\n     ```\n     <Thread MessageInput={(props) => <MessageInput parent={props.parent} Input={MessageInputSmall} /> }/>\n     ```\n */\n  MessageInput?: React.ComponentType<\n    MessageInputProps<At, Ch, Co, Ev, Me, Re, Us, V>\n  >;\n  /** UI component used to override the default header of the Thread */\n  ThreadHeader?: React.ComponentType<\n    ThreadHeaderProps<At, Ch, Co, Ev, Me, Re, Us>\n  >;\n};\n\n/**\n * Thread - The Thread renders a parent Message with a list of replies. Use the standard MessageList of the main Channel's Messages.\n * The Thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n * @example ./Thread.md\n */\nexport const Thread = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: ThreadProps<At, Ch, Co, Ev, Me, Re, Us, V>,\n) => {\n  const { channel, thread } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n\n  if (!thread || channel?.getConfig?.()?.replies === false) return null;\n\n  // The wrapper ensures a key variable is set and the component recreates on thread switch\n  return <ThreadInner {...props} key={`thread-${thread.id}-${channel?.cid}`} />;\n};\n\nexport type ThreadHeaderProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  t: TFunction;\n  closeThread?: (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  ) => void;\n  thread?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n};\n\nconst DefaultThreadHeader = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: ThreadHeaderProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { closeThread, t, thread } = props;\n\n  const getReplyCount = () => {\n    if (!thread?.reply_count || !t) return '';\n    if (thread.reply_count === 1) return t('1 reply');\n    return t('{{ replyCount }} replies', {\n      replyCount: thread.reply_count,\n    });\n  };\n\n  return (\n    <div className='str-chat__thread-header'>\n      <div className='str-chat__thread-header-details'>\n        <strong>{t && t('Thread')}</strong>\n        <small>{getReplyCount()}</small>\n      </div>\n      <button\n        className='str-chat__square-button'\n        data-testid='close-button'\n        onClick={(event) => closeThread && closeThread(event)}\n      >\n        <svg height='10' width='10' xmlns='http://www.w3.org/2000/svg'>\n          <path\n            d='M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z'\n            fillRule='evenodd'\n          />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\nconst ThreadInner = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType,\n  V extends CustomTrigger = CustomTrigger\n>(\n  props: ThreadProps<At, Ch, Co, Ev, Me, Re, Us, V> & { key: string },\n) => {\n  const {\n    additionalMessageInputProps,\n    additionalMessageListProps,\n    additionalParentMessageProps,\n    autoFocus = true,\n    fullWidth = false,\n    Message: PropMessage,\n    MessageInput: ThreadMessageInput = MessageInput,\n    ThreadHeader = DefaultThreadHeader,\n  } = props;\n\n  const {\n    channel,\n    closeThread,\n    loadMoreThread,\n    Message: ContextMessage,\n    thread,\n    threadHasMore,\n    threadLoadingMore,\n    threadMessages,\n  } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { client } = useChatContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { t } = useTranslationContext();\n\n  const messageList = useRef<HTMLDivElement | null>(null);\n\n  const parentID = thread?.id;\n  const ThreadMessage = PropMessage || ContextMessage;\n\n  useEffect(() => {\n    if (parentID && thread?.reply_count && loadMoreThread) {\n      loadMoreThread();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (messageList.current && threadMessages?.length) {\n      const { clientHeight, scrollHeight, scrollTop } = messageList.current;\n      const scrollDown = clientHeight + scrollTop !== scrollHeight;\n\n      if (scrollDown) {\n        messageList.current.scrollTop = scrollHeight - clientHeight;\n      }\n    }\n  }, [threadMessages?.length]);\n\n  if (!thread) return null;\n\n  const read = {};\n\n  return (\n    <div\n      className={`str-chat__thread ${\n        fullWidth ? 'str-chat__thread--full' : ''\n      }`}\n    >\n      <ThreadHeader closeThread={closeThread} t={t} thread={thread} />\n      <div className='str-chat__thread-list' ref={messageList}>\n        <Message\n          channel={channel}\n          client={client}\n          initialMessage\n          message={thread}\n          Message={ThreadMessage}\n          threadList\n          {...additionalParentMessageProps}\n        />\n        <div className='str-chat__thread-start'>\n          {t('Start of a new thread')}\n        </div>\n        <MessageList\n          hasMore={threadHasMore}\n          loadingMore={threadLoadingMore}\n          loadMore={loadMoreThread}\n          Message={ThreadMessage}\n          messages={threadMessages || []}\n          read={read}\n          threadList\n          {...additionalMessageListProps}\n        />\n      </div>\n      <ThreadMessageInput\n        focus={autoFocus}\n        Input={MessageInputSmall}\n        parent={thread}\n        publishTypingEvent={false}\n        {...additionalMessageInputProps}\n      />\n    </div>\n  );\n};\n","import React, { PropsWithChildren } from 'react';\n\nimport { StreamMessage, useChannelContext } from '../../context/ChannelContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n} from '../../../types/types';\n\nexport type WindowProps<\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Ev extends DefaultEventType = DefaultEventType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n> = {\n  /** show or hide the window when a thread is active */\n  hideOnThread?: boolean;\n  /** optional prop to manually trigger the opening of a thread*/\n  thread?: StreamMessage<At, Ch, Co, Ev, Me, Re, Us>;\n};\n\nconst UnMemoizedWindow = <\n  At extends DefaultAttachmentType = DefaultAttachmentType,\n  Ch extends DefaultChannelType = DefaultChannelType,\n  Co extends DefaultCommandType = DefaultCommandType,\n  Me extends DefaultMessageType = DefaultMessageType,\n  Re extends DefaultReactionType = DefaultReactionType,\n  Us extends DefaultUserType<Us> = DefaultUserType\n>(\n  props: PropsWithChildren<WindowProps<At, Ch, Co, Me, Re, Us>>,\n) => {\n  const { children, hideOnThread = false } = props;\n\n  const { thread } = useChannelContext<At, Ch, Co, Me, Re, Us>();\n\n  // If thread is active and window should hide on thread. Return null\n  if (thread && hideOnThread) return null;\n\n  return <div className={`str-chat__main-panel`}>{children}</div>;\n};\n\n/**\n * Window - A UI component for conditionally displaying a Thread or Channel. If you want the Thread to be displayed side by side with the Channel that's also possible with the Window.\n * It's a very minimal component that might fit some usecases, and if not it's an easy to modify and rewrite component.\n */\nexport const Window = React.memo(UnMemoizedWindow) as typeof UnMemoizedWindow;\n"]},"metadata":{},"sourceType":"module"}