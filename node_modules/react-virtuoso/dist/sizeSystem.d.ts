import * as u from '@virtuoso.dev/urx';
import { AANode } from './AATree';
export interface SizeRange {
    startIndex: number;
    endIndex: number;
    size: number;
}
export declare type Data = readonly unknown[] | undefined;
export declare function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[], onRemove?: (index: number) => void): readonly [AANode<number>, number];
export interface SizeState {
    sizeTree: AANode<number>;
    offsetTree: AANode<number>;
    groupOffsetTree: AANode<number>;
    lastIndex: number;
    lastOffset: number;
    lastSize: number;
    groupIndices: number[];
}
export declare function initialSizeState(): SizeState;
export declare function sizeStateReducer(state: SizeState, [ranges, groupIndices]: [SizeRange[], number[]]): SizeState;
export declare function offsetOf(index: number, state: Pick<SizeState, 'sizeTree' | 'offsetTree'>): number;
export declare function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState): number;
export declare function hasGroups(sizes: SizeState): boolean;
export declare const sizeSystem: u.SystemSpec<never[], () => {
    data: u.StatefulStream<Data>;
    totalCount: u.Stream<number>;
    sizeRanges: u.Stream<SizeRange[]>;
    groupIndices: u.StatefulStream<number[]>;
    defaultItemSize: u.StatefulStream<number | undefined>;
    fixedItemSize: u.StatefulStream<number | undefined>;
    unshiftWith: u.Stream<number>;
    beforeUnshiftWith: u.Stream<number>;
    firstItemIndex: u.StatefulStream<number>;
    sizes: u.StatefulStream<SizeState>;
    listRefresh: u.Stream<boolean>;
    trackItemSizes: u.StatefulStream<boolean>;
}>;
